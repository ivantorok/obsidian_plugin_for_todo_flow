/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

"use strict";var gm=Object.create;var Ji=Object.defineProperty;var vm=Object.getOwnPropertyDescriptor;var ym=Object.getOwnPropertyNames;var wm=Object.getPrototypeOf,km=Object.prototype.hasOwnProperty;var Pc=r=>{throw TypeError(r)};var xm=(r,t,n)=>t in r?Ji(r,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):r[t]=n;var yn=(r,t)=>()=>(r&&(t=r(r=0)),t);var bm=(r,t)=>()=>(t||r((t={exports:{}}).exports,t),t.exports),es=(r,t)=>{for(var n in t)Ji(r,n,{get:t[n],enumerable:!0})},Yc=(r,t,n,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of ym(t))!km.call(r,o)&&o!==n&&Ji(r,o,{get:()=>t[o],enumerable:!(s=vm(t,o))||s.enumerable});return r};var rn=(r,t,n)=>(n=r!=null?gm(wm(r)):{},Yc(t||!r||!r.__esModule?Ji(n,"default",{value:r,enumerable:!0}):n,r)),Tm=r=>Yc(Ji({},"__esModule",{value:!0}),r);var k=(r,t,n)=>xm(r,typeof t!="symbol"?t+"":t,n),La=(r,t,n)=>t.has(r)||Pc("Cannot "+n);var w=(r,t,n)=>(La(r,t,"read from private field"),n?n.call(r):t.get(r)),G=(r,t,n)=>t.has(r)?Pc("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(r):t.set(r,n),z=(r,t,n,s)=>(La(r,t,"write to private field"),s?s.call(r,n):t.set(r,n),n),Ie=(r,t,n)=>(La(r,t,"access private method"),n);var Hr=bm((Il,Ii)=>{(function(r,t){typeof Il=="object"&&typeof Ii!="undefined"?Ii.exports=t():typeof define=="function"&&define.amd?define(t):r.moment=t()})(Il,(function(){"use strict";var r;function t(){return r.apply(null,arguments)}function n(e){r=e}function s(e){return e instanceof Array||Object.prototype.toString.call(e)==="[object Array]"}function o(e){return e!=null&&Object.prototype.toString.call(e)==="[object Object]"}function l(e,i){return Object.prototype.hasOwnProperty.call(e,i)}function f(e){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(e).length===0;var i;for(i in e)if(l(e,i))return!1;return!0}function d(e){return e===void 0}function h(e){return typeof e=="number"||Object.prototype.toString.call(e)==="[object Number]"}function p(e){return e instanceof Date||Object.prototype.toString.call(e)==="[object Date]"}function g(e,i){var a=[],c,u=e.length;for(c=0;c<u;++c)a.push(i(e[c],c));return a}function v(e,i){for(var a in i)l(i,a)&&(e[a]=i[a]);return l(i,"toString")&&(e.toString=i.toString),l(i,"valueOf")&&(e.valueOf=i.valueOf),e}function m(e,i,a,c){return mc(e,i,a,c,!0).utc()}function y(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function x(e){return e._pf==null&&(e._pf=y()),e._pf}var $;Array.prototype.some?$=Array.prototype.some:$=function(e){var i=Object(this),a=i.length>>>0,c;for(c=0;c<a;c++)if(c in i&&e.call(this,i[c],c,i))return!0;return!1};function S(e){var i=null,a=!1,c=e._d&&!isNaN(e._d.getTime());if(c&&(i=x(e),a=$.call(i.parsedDateParts,function(u){return u!=null}),c=i.overflow<0&&!i.empty&&!i.invalidEra&&!i.invalidMonth&&!i.invalidWeekday&&!i.weekdayMismatch&&!i.nullInput&&!i.invalidFormat&&!i.userInvalidated&&(!i.meridiem||i.meridiem&&a),e._strict&&(c=c&&i.charsLeftOver===0&&i.unusedTokens.length===0&&i.bigHour===void 0)),Object.isFrozen==null||!Object.isFrozen(e))e._isValid=c;else return c;return e._isValid}function M(e){var i=m(NaN);return e!=null?v(x(i),e):x(i).userInvalidated=!0,i}var V=t.momentProperties=[],se=!1;function X(e,i){var a,c,u,_=V.length;if(d(i._isAMomentObject)||(e._isAMomentObject=i._isAMomentObject),d(i._i)||(e._i=i._i),d(i._f)||(e._f=i._f),d(i._l)||(e._l=i._l),d(i._strict)||(e._strict=i._strict),d(i._tzm)||(e._tzm=i._tzm),d(i._isUTC)||(e._isUTC=i._isUTC),d(i._offset)||(e._offset=i._offset),d(i._pf)||(e._pf=x(i)),d(i._locale)||(e._locale=i._locale),_>0)for(a=0;a<_;a++)c=V[a],u=i[c],d(u)||(e[c]=u);return e}function N(e){X(this,e),this._d=new Date(e._d!=null?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),se===!1&&(se=!0,t.updateOffset(this),se=!1)}function W(e){return e instanceof N||e!=null&&e._isAMomentObject!=null}function ie(e){t.suppressDeprecationWarnings===!1&&typeof console!="undefined"&&console.warn&&console.warn("Deprecation warning: "+e)}function re(e,i){var a=!0;return v(function(){if(t.deprecationHandler!=null&&t.deprecationHandler(null,e),a){var c=[],u,_,b,O=arguments.length;for(_=0;_<O;_++){if(u="",typeof arguments[_]=="object"){u+=`
[`+_+"] ";for(b in arguments[0])l(arguments[0],b)&&(u+=b+": "+arguments[0][b]+", ");u=u.slice(0,-2)}else u=arguments[_];c.push(u)}ie(e+`
Arguments: `+Array.prototype.slice.call(c).join("")+`
`+new Error().stack),a=!1}return i.apply(this,arguments)},i)}var Ye={};function fe(e,i){t.deprecationHandler!=null&&t.deprecationHandler(e,i),Ye[e]||(ie(i),Ye[e]=!0)}t.suppressDeprecationWarnings=!1,t.deprecationHandler=null;function Re(e){return typeof Function!="undefined"&&e instanceof Function||Object.prototype.toString.call(e)==="[object Function]"}function vt(e){var i,a;for(a in e)l(e,a)&&(i=e[a],Re(i)?this[a]=i:this["_"+a]=i);this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function Ct(e,i){var a=v({},e),c;for(c in i)l(i,c)&&(o(e[c])&&o(i[c])?(a[c]={},v(a[c],e[c]),v(a[c],i[c])):i[c]!=null?a[c]=i[c]:delete a[c]);for(c in e)l(e,c)&&!l(i,c)&&o(e[c])&&(a[c]=v({},a[c]));return a}function Jt(e){e!=null&&this.set(e)}var Gt;Object.keys?Gt=Object.keys:Gt=function(e){var i,a=[];for(i in e)l(e,i)&&a.push(i);return a};var Wr={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function Br(e,i,a){var c=this._calendar[e]||this._calendar.sameElse;return Re(c)?c.call(i,a):c}function I(e,i,a){var c=""+Math.abs(e),u=i-c.length,_=e>=0;return(_?a?"+":"":"-")+Math.pow(10,Math.max(0,u)).toString().substr(1)+c}var j=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,ge=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,de={},We={};function A(e,i,a,c){var u=c;typeof c=="string"&&(u=function(){return this[c]()}),e&&(We[e]=u),i&&(We[i[0]]=function(){return I(u.apply(this,arguments),i[1],i[2])}),a&&(We[a]=function(){return this.localeData().ordinal(u.apply(this,arguments),e)})}function wr(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function er(e){var i=e.match(j),a,c;for(a=0,c=i.length;a<c;a++)We[i[a]]?i[a]=We[i[a]]:i[a]=wr(i[a]);return function(u){var _="",b;for(b=0;b<c;b++)_+=Re(i[b])?i[b].call(u,e):i[b];return _}}function dt(e,i){return e.isValid()?(i=tr(i,e.localeData()),de[i]=de[i]||er(i),de[i](e)):e.localeData().invalidDate()}function tr(e,i){var a=5;function c(u){return i.longDateFormat(u)||u}for(ge.lastIndex=0;a>=0&&ge.test(e);)e=e.replace(ge,c),ge.lastIndex=0,a-=1;return e}var zr={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function jt(e){var i=this._longDateFormat[e],a=this._longDateFormat[e.toUpperCase()];return i||!a?i:(this._longDateFormat[e]=a.match(j).map(function(c){return c==="MMMM"||c==="MM"||c==="DD"||c==="dddd"?c.slice(1):c}).join(""),this._longDateFormat[e])}var rr="Invalid date";function Gr(){return this._invalidDate}var Rt="%d",kr=/\d{1,2}/;function On(e){return this._ordinal.replace("%d",e)}var he={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function ye(e,i,a,c){var u=this._relativeTime[a];return Re(u)?u(e,i,a,c):u.replace(/%d/i,e)}function Ft(e,i){var a=this._relativeTime[e>0?"future":"past"];return Re(a)?a(i):a.replace(/%s/i,i)}var Hi={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function ht(e){return typeof e=="string"?Hi[e]||Hi[e.toLowerCase()]:void 0}function Cn(e){var i={},a,c;for(c in e)l(e,c)&&(a=ht(c),a&&(i[a]=e[c]));return i}var Is={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};function _a(e){var i=[],a;for(a in e)l(e,a)&&i.push({unit:a,priority:Is[a]});return i.sort(function(c,u){return c.priority-u.priority}),i}var Me=/\d/,J=/\d\d/,oe=/\d{3}/,Ue=/\d{4}/,Fe=/[+-]?\d{6}/,pe=/\d\d?/,Ls=/\d\d\d\d?/,Ps=/\d\d\d\d\d\d?/,ri=/\d{1,3}/,Wi=/\d{1,4}/,Ys=/[+-]?\d{1,6}/,ni=/\d+/,Us=/[+-]?\d+/,Iu=/Z|[+-]\d\d:?\d\d/gi,Vs=/Z|[+-]\d\d(?::?\d\d)?/gi,Lu=/[+-]?\d+(\.\d{1,3})?/,Bi=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,ii=/^[1-9]\d?/,ga=/^([1-9]\d|\d)/,Hs;Hs={};function C(e,i,a){Hs[e]=Re(i)?i:function(c,u){return c&&a?a:i}}function Pu(e,i){return l(Hs,e)?Hs[e](i._strict,i._locale):new RegExp(Yu(e))}function Yu(e){return jr(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(i,a,c,u,_){return a||c||u||_}))}function jr(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Kt(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function ee(e){var i=+e,a=0;return i!==0&&isFinite(i)&&(a=Kt(i)),a}var va={};function ue(e,i){var a,c=i,u;for(typeof e=="string"&&(e=[e]),h(i)&&(c=function(_,b){b[i]=ee(_)}),u=e.length,a=0;a<u;a++)va[e[a]]=c}function zi(e,i){ue(e,function(a,c,u,_){u._w=u._w||{},i(a,u._w,u,_)})}function Uu(e,i,a){i!=null&&l(va,e)&&va[e](i,a._a,a,e)}function Ws(e){return e%4===0&&e%100!==0||e%400===0}var st=0,Kr=1,xr=2,Ve=3,nr=4,qr=5,Rn=6,Vu=7,Hu=8;A("Y",0,0,function(){var e=this.year();return e<=9999?I(e,4):"+"+e}),A(0,["YY",2],0,function(){return this.year()%100}),A(0,["YYYY",4],0,"year"),A(0,["YYYYY",5],0,"year"),A(0,["YYYYYY",6,!0],0,"year"),C("Y",Us),C("YY",pe,J),C("YYYY",Wi,Ue),C("YYYYY",Ys,Fe),C("YYYYYY",Ys,Fe),ue(["YYYYY","YYYYYY"],st),ue("YYYY",function(e,i){i[st]=e.length===2?t.parseTwoDigitYear(e):ee(e)}),ue("YY",function(e,i){i[st]=t.parseTwoDigitYear(e)}),ue("Y",function(e,i){i[st]=parseInt(e,10)});function Gi(e){return Ws(e)?366:365}t.parseTwoDigitYear=function(e){return ee(e)+(ee(e)>68?1900:2e3)};var Jl=si("FullYear",!0);function Wu(){return Ws(this.year())}function si(e,i){return function(a){return a!=null?(ec(this,e,a),t.updateOffset(this,i),this):ji(this,e)}}function ji(e,i){if(!e.isValid())return NaN;var a=e._d,c=e._isUTC;switch(i){case"Milliseconds":return c?a.getUTCMilliseconds():a.getMilliseconds();case"Seconds":return c?a.getUTCSeconds():a.getSeconds();case"Minutes":return c?a.getUTCMinutes():a.getMinutes();case"Hours":return c?a.getUTCHours():a.getHours();case"Date":return c?a.getUTCDate():a.getDate();case"Day":return c?a.getUTCDay():a.getDay();case"Month":return c?a.getUTCMonth():a.getMonth();case"FullYear":return c?a.getUTCFullYear():a.getFullYear();default:return NaN}}function ec(e,i,a){var c,u,_,b,O;if(!(!e.isValid()||isNaN(a))){switch(c=e._d,u=e._isUTC,i){case"Milliseconds":return void(u?c.setUTCMilliseconds(a):c.setMilliseconds(a));case"Seconds":return void(u?c.setUTCSeconds(a):c.setSeconds(a));case"Minutes":return void(u?c.setUTCMinutes(a):c.setMinutes(a));case"Hours":return void(u?c.setUTCHours(a):c.setHours(a));case"Date":return void(u?c.setUTCDate(a):c.setDate(a));case"FullYear":break;default:return}_=a,b=e.month(),O=e.date(),O=O===29&&b===1&&!Ws(_)?28:O,u?c.setUTCFullYear(_,b,O):c.setFullYear(_,b,O)}}function Bu(e){return e=ht(e),Re(this[e])?this[e]():this}function zu(e,i){if(typeof e=="object"){e=Cn(e);var a=_a(e),c,u=a.length;for(c=0;c<u;c++)this[a[c].unit](e[a[c].unit])}else if(e=ht(e),Re(this[e]))return this[e](i);return this}function Gu(e,i){return(e%i+i)%i}var Ne;Array.prototype.indexOf?Ne=Array.prototype.indexOf:Ne=function(e){var i;for(i=0;i<this.length;++i)if(this[i]===e)return i;return-1};function ya(e,i){if(isNaN(e)||isNaN(i))return NaN;var a=Gu(i,12);return e+=(i-a)/12,a===1?Ws(e)?29:28:31-a%7%2}A("M",["MM",2],"Mo",function(){return this.month()+1}),A("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)}),A("MMMM",0,0,function(e){return this.localeData().months(this,e)}),C("M",pe,ii),C("MM",pe,J),C("MMM",function(e,i){return i.monthsShortRegex(e)}),C("MMMM",function(e,i){return i.monthsRegex(e)}),ue(["M","MM"],function(e,i){i[Kr]=ee(e)-1}),ue(["MMM","MMMM"],function(e,i,a,c){var u=a._locale.monthsParse(e,c,a._strict);u!=null?i[Kr]=u:x(a).invalidMonth=e});var ju="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),tc="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),rc=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Ku=Bi,qu=Bi;function Zu(e,i){return e?s(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||rc).test(i)?"format":"standalone"][e.month()]:s(this._months)?this._months:this._months.standalone}function Qu(e,i){return e?s(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[rc.test(i)?"format":"standalone"][e.month()]:s(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function Xu(e,i,a){var c,u,_,b=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],c=0;c<12;++c)_=m([2e3,c]),this._shortMonthsParse[c]=this.monthsShort(_,"").toLocaleLowerCase(),this._longMonthsParse[c]=this.months(_,"").toLocaleLowerCase();return a?i==="MMM"?(u=Ne.call(this._shortMonthsParse,b),u!==-1?u:null):(u=Ne.call(this._longMonthsParse,b),u!==-1?u:null):i==="MMM"?(u=Ne.call(this._shortMonthsParse,b),u!==-1?u:(u=Ne.call(this._longMonthsParse,b),u!==-1?u:null)):(u=Ne.call(this._longMonthsParse,b),u!==-1?u:(u=Ne.call(this._shortMonthsParse,b),u!==-1?u:null))}function Ju(e,i,a){var c,u,_;if(this._monthsParseExact)return Xu.call(this,e,i,a);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),c=0;c<12;c++){if(u=m([2e3,c]),a&&!this._longMonthsParse[c]&&(this._longMonthsParse[c]=new RegExp("^"+this.months(u,"").replace(".","")+"$","i"),this._shortMonthsParse[c]=new RegExp("^"+this.monthsShort(u,"").replace(".","")+"$","i")),!a&&!this._monthsParse[c]&&(_="^"+this.months(u,"")+"|^"+this.monthsShort(u,""),this._monthsParse[c]=new RegExp(_.replace(".",""),"i")),a&&i==="MMMM"&&this._longMonthsParse[c].test(e))return c;if(a&&i==="MMM"&&this._shortMonthsParse[c].test(e))return c;if(!a&&this._monthsParse[c].test(e))return c}}function nc(e,i){if(!e.isValid())return e;if(typeof i=="string"){if(/^\d+$/.test(i))i=ee(i);else if(i=e.localeData().monthsParse(i),!h(i))return e}var a=i,c=e.date();return c=c<29?c:Math.min(c,ya(e.year(),a)),e._isUTC?e._d.setUTCMonth(a,c):e._d.setMonth(a,c),e}function ic(e){return e!=null?(nc(this,e),t.updateOffset(this,!0),this):ji(this,"Month")}function ed(){return ya(this.year(),this.month())}function td(e){return this._monthsParseExact?(l(this,"_monthsRegex")||sc.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(l(this,"_monthsShortRegex")||(this._monthsShortRegex=Ku),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)}function rd(e){return this._monthsParseExact?(l(this,"_monthsRegex")||sc.call(this),e?this._monthsStrictRegex:this._monthsRegex):(l(this,"_monthsRegex")||(this._monthsRegex=qu),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)}function sc(){function e(B,te){return te.length-B.length}var i=[],a=[],c=[],u,_,b,O;for(u=0;u<12;u++)_=m([2e3,u]),b=jr(this.monthsShort(_,"")),O=jr(this.months(_,"")),i.push(b),a.push(O),c.push(O),c.push(b);i.sort(e),a.sort(e),c.sort(e),this._monthsRegex=new RegExp("^("+c.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+a.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+i.join("|")+")","i")}function nd(e,i,a,c,u,_,b){var O;return e<100&&e>=0?(O=new Date(e+400,i,a,c,u,_,b),isFinite(O.getFullYear())&&O.setFullYear(e)):O=new Date(e,i,a,c,u,_,b),O}function Ki(e){var i,a;return e<100&&e>=0?(a=Array.prototype.slice.call(arguments),a[0]=e+400,i=new Date(Date.UTC.apply(null,a)),isFinite(i.getUTCFullYear())&&i.setUTCFullYear(e)):i=new Date(Date.UTC.apply(null,arguments)),i}function Bs(e,i,a){var c=7+i-a,u=(7+Ki(e,0,c).getUTCDay()-i)%7;return-u+c-1}function oc(e,i,a,c,u){var _=(7+a-c)%7,b=Bs(e,c,u),O=1+7*(i-1)+_+b,B,te;return O<=0?(B=e-1,te=Gi(B)+O):O>Gi(e)?(B=e+1,te=O-Gi(e)):(B=e,te=O),{year:B,dayOfYear:te}}function qi(e,i,a){var c=Bs(e.year(),i,a),u=Math.floor((e.dayOfYear()-c-1)/7)+1,_,b;return u<1?(b=e.year()-1,_=u+Zr(b,i,a)):u>Zr(e.year(),i,a)?(_=u-Zr(e.year(),i,a),b=e.year()+1):(b=e.year(),_=u),{week:_,year:b}}function Zr(e,i,a){var c=Bs(e,i,a),u=Bs(e+1,i,a);return(Gi(e)-c+u)/7}A("w",["ww",2],"wo","week"),A("W",["WW",2],"Wo","isoWeek"),C("w",pe,ii),C("ww",pe,J),C("W",pe,ii),C("WW",pe,J),zi(["w","ww","W","WW"],function(e,i,a,c){i[c.substr(0,1)]=ee(e)});function id(e){return qi(e,this._week.dow,this._week.doy).week}var sd={dow:0,doy:6};function od(){return this._week.dow}function ad(){return this._week.doy}function ld(e){var i=this.localeData().week(this);return e==null?i:this.add((e-i)*7,"d")}function cd(e){var i=qi(this,1,4).week;return e==null?i:this.add((e-i)*7,"d")}A("d",0,"do","day"),A("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)}),A("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),A("dddd",0,0,function(e){return this.localeData().weekdays(this,e)}),A("e",0,0,"weekday"),A("E",0,0,"isoWeekday"),C("d",pe),C("e",pe),C("E",pe),C("dd",function(e,i){return i.weekdaysMinRegex(e)}),C("ddd",function(e,i){return i.weekdaysShortRegex(e)}),C("dddd",function(e,i){return i.weekdaysRegex(e)}),zi(["dd","ddd","dddd"],function(e,i,a,c){var u=a._locale.weekdaysParse(e,c,a._strict);u!=null?i.d=u:x(a).invalidWeekday=e}),zi(["d","e","E"],function(e,i,a,c){i[c]=ee(e)});function fd(e,i){return typeof e!="string"?e:isNaN(e)?(e=i.weekdaysParse(e),typeof e=="number"?e:null):parseInt(e,10)}function ud(e,i){return typeof e=="string"?i.weekdaysParse(e)%7||7:isNaN(e)?null:e}function wa(e,i){return e.slice(i,7).concat(e.slice(0,i))}var dd="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),ac="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),hd="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),pd=Bi,md=Bi,_d=Bi;function gd(e,i){var a=s(this._weekdays)?this._weekdays:this._weekdays[e&&e!==!0&&this._weekdays.isFormat.test(i)?"format":"standalone"];return e===!0?wa(a,this._week.dow):e?a[e.day()]:a}function vd(e){return e===!0?wa(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort}function yd(e){return e===!0?wa(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin}function wd(e,i,a){var c,u,_,b=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],c=0;c<7;++c)_=m([2e3,1]).day(c),this._minWeekdaysParse[c]=this.weekdaysMin(_,"").toLocaleLowerCase(),this._shortWeekdaysParse[c]=this.weekdaysShort(_,"").toLocaleLowerCase(),this._weekdaysParse[c]=this.weekdays(_,"").toLocaleLowerCase();return a?i==="dddd"?(u=Ne.call(this._weekdaysParse,b),u!==-1?u:null):i==="ddd"?(u=Ne.call(this._shortWeekdaysParse,b),u!==-1?u:null):(u=Ne.call(this._minWeekdaysParse,b),u!==-1?u:null):i==="dddd"?(u=Ne.call(this._weekdaysParse,b),u!==-1||(u=Ne.call(this._shortWeekdaysParse,b),u!==-1)?u:(u=Ne.call(this._minWeekdaysParse,b),u!==-1?u:null)):i==="ddd"?(u=Ne.call(this._shortWeekdaysParse,b),u!==-1||(u=Ne.call(this._weekdaysParse,b),u!==-1)?u:(u=Ne.call(this._minWeekdaysParse,b),u!==-1?u:null)):(u=Ne.call(this._minWeekdaysParse,b),u!==-1||(u=Ne.call(this._weekdaysParse,b),u!==-1)?u:(u=Ne.call(this._shortWeekdaysParse,b),u!==-1?u:null))}function kd(e,i,a){var c,u,_;if(this._weekdaysParseExact)return wd.call(this,e,i,a);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),c=0;c<7;c++){if(u=m([2e3,1]).day(c),a&&!this._fullWeekdaysParse[c]&&(this._fullWeekdaysParse[c]=new RegExp("^"+this.weekdays(u,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[c]=new RegExp("^"+this.weekdaysShort(u,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[c]=new RegExp("^"+this.weekdaysMin(u,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[c]||(_="^"+this.weekdays(u,"")+"|^"+this.weekdaysShort(u,"")+"|^"+this.weekdaysMin(u,""),this._weekdaysParse[c]=new RegExp(_.replace(".",""),"i")),a&&i==="dddd"&&this._fullWeekdaysParse[c].test(e))return c;if(a&&i==="ddd"&&this._shortWeekdaysParse[c].test(e))return c;if(a&&i==="dd"&&this._minWeekdaysParse[c].test(e))return c;if(!a&&this._weekdaysParse[c].test(e))return c}}function xd(e){if(!this.isValid())return e!=null?this:NaN;var i=ji(this,"Day");return e!=null?(e=fd(e,this.localeData()),this.add(e-i,"d")):i}function bd(e){if(!this.isValid())return e!=null?this:NaN;var i=(this.day()+7-this.localeData()._week.dow)%7;return e==null?i:this.add(e-i,"d")}function Td(e){if(!this.isValid())return e!=null?this:NaN;if(e!=null){var i=ud(e,this.localeData());return this.day(this.day()%7?i:i-7)}else return this.day()||7}function Sd(e){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||ka.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(l(this,"_weekdaysRegex")||(this._weekdaysRegex=pd),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)}function Ed(e){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||ka.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(l(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=md),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function $d(e){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||ka.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(l(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=_d),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function ka(){function e(pt,tn){return tn.length-pt.length}var i=[],a=[],c=[],u=[],_,b,O,B,te;for(_=0;_<7;_++)b=m([2e3,1]).day(_),O=jr(this.weekdaysMin(b,"")),B=jr(this.weekdaysShort(b,"")),te=jr(this.weekdays(b,"")),i.push(O),a.push(B),c.push(te),u.push(O),u.push(B),u.push(te);i.sort(e),a.sort(e),c.sort(e),u.sort(e),this._weekdaysRegex=new RegExp("^("+u.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+c.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+a.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+i.join("|")+")","i")}function xa(){return this.hours()%12||12}function Dd(){return this.hours()||24}A("H",["HH",2],0,"hour"),A("h",["hh",2],0,xa),A("k",["kk",2],0,Dd),A("hmm",0,0,function(){return""+xa.apply(this)+I(this.minutes(),2)}),A("hmmss",0,0,function(){return""+xa.apply(this)+I(this.minutes(),2)+I(this.seconds(),2)}),A("Hmm",0,0,function(){return""+this.hours()+I(this.minutes(),2)}),A("Hmmss",0,0,function(){return""+this.hours()+I(this.minutes(),2)+I(this.seconds(),2)});function lc(e,i){A(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),i)})}lc("a",!0),lc("A",!1);function cc(e,i){return i._meridiemParse}C("a",cc),C("A",cc),C("H",pe,ga),C("h",pe,ii),C("k",pe,ii),C("HH",pe,J),C("hh",pe,J),C("kk",pe,J),C("hmm",Ls),C("hmmss",Ps),C("Hmm",Ls),C("Hmmss",Ps),ue(["H","HH"],Ve),ue(["k","kk"],function(e,i,a){var c=ee(e);i[Ve]=c===24?0:c}),ue(["a","A"],function(e,i,a){a._isPm=a._locale.isPM(e),a._meridiem=e}),ue(["h","hh"],function(e,i,a){i[Ve]=ee(e),x(a).bigHour=!0}),ue("hmm",function(e,i,a){var c=e.length-2;i[Ve]=ee(e.substr(0,c)),i[nr]=ee(e.substr(c)),x(a).bigHour=!0}),ue("hmmss",function(e,i,a){var c=e.length-4,u=e.length-2;i[Ve]=ee(e.substr(0,c)),i[nr]=ee(e.substr(c,2)),i[qr]=ee(e.substr(u)),x(a).bigHour=!0}),ue("Hmm",function(e,i,a){var c=e.length-2;i[Ve]=ee(e.substr(0,c)),i[nr]=ee(e.substr(c))}),ue("Hmmss",function(e,i,a){var c=e.length-4,u=e.length-2;i[Ve]=ee(e.substr(0,c)),i[nr]=ee(e.substr(c,2)),i[qr]=ee(e.substr(u))});function Md(e){return(e+"").toLowerCase().charAt(0)==="p"}var Nd=/[ap]\.?m?\.?/i,Ad=si("Hours",!0);function Od(e,i,a){return e>11?a?"pm":"PM":a?"am":"AM"}var fc={calendar:Wr,longDateFormat:zr,invalidDate:rr,ordinal:Rt,dayOfMonthOrdinalParse:kr,relativeTime:he,months:ju,monthsShort:tc,week:sd,weekdays:dd,weekdaysMin:hd,weekdaysShort:ac,meridiemParse:Nd},xe={},Zi={},Qi;function Cd(e,i){var a,c=Math.min(e.length,i.length);for(a=0;a<c;a+=1)if(e[a]!==i[a])return a;return c}function uc(e){return e&&e.toLowerCase().replace("_","-")}function Rd(e){for(var i=0,a,c,u,_;i<e.length;){for(_=uc(e[i]).split("-"),a=_.length,c=uc(e[i+1]),c=c?c.split("-"):null;a>0;){if(u=zs(_.slice(0,a).join("-")),u)return u;if(c&&c.length>=a&&Cd(_,c)>=a-1)break;a--}i++}return Qi}function Fd(e){return!!(e&&e.match("^[^/\\\\]*$"))}function zs(e){var i=null,a;if(xe[e]===void 0&&typeof Ii!="undefined"&&Ii&&Ii.exports&&Fd(e))try{i=Qi._abbr,a=require,a("./locale/"+e),_n(i)}catch(c){xe[e]=null}return xe[e]}function _n(e,i){var a;return e&&(d(i)?a=Qr(e):a=ba(e,i),a?Qi=a:typeof console!="undefined"&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),Qi._abbr}function ba(e,i){if(i!==null){var a,c=fc;if(i.abbr=e,xe[e]!=null)fe("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),c=xe[e]._config;else if(i.parentLocale!=null)if(xe[i.parentLocale]!=null)c=xe[i.parentLocale]._config;else if(a=zs(i.parentLocale),a!=null)c=a._config;else return Zi[i.parentLocale]||(Zi[i.parentLocale]=[]),Zi[i.parentLocale].push({name:e,config:i}),null;return xe[e]=new Jt(Ct(c,i)),Zi[e]&&Zi[e].forEach(function(u){ba(u.name,u.config)}),_n(e),xe[e]}else return delete xe[e],null}function Id(e,i){if(i!=null){var a,c,u=fc;xe[e]!=null&&xe[e].parentLocale!=null?xe[e].set(Ct(xe[e]._config,i)):(c=zs(e),c!=null&&(u=c._config),i=Ct(u,i),c==null&&(i.abbr=e),a=new Jt(i),a.parentLocale=xe[e],xe[e]=a),_n(e)}else xe[e]!=null&&(xe[e].parentLocale!=null?(xe[e]=xe[e].parentLocale,e===_n()&&_n(e)):xe[e]!=null&&delete xe[e]);return xe[e]}function Qr(e){var i;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return Qi;if(!s(e)){if(i=zs(e),i)return i;e=[e]}return Rd(e)}function Ld(){return Gt(xe)}function Ta(e){var i,a=e._a;return a&&x(e).overflow===-2&&(i=a[Kr]<0||a[Kr]>11?Kr:a[xr]<1||a[xr]>ya(a[st],a[Kr])?xr:a[Ve]<0||a[Ve]>24||a[Ve]===24&&(a[nr]!==0||a[qr]!==0||a[Rn]!==0)?Ve:a[nr]<0||a[nr]>59?nr:a[qr]<0||a[qr]>59?qr:a[Rn]<0||a[Rn]>999?Rn:-1,x(e)._overflowDayOfYear&&(i<st||i>xr)&&(i=xr),x(e)._overflowWeeks&&i===-1&&(i=Vu),x(e)._overflowWeekday&&i===-1&&(i=Hu),x(e).overflow=i),e}var Pd=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Yd=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Ud=/Z|[+-]\d\d(?::?\d\d)?/,Gs=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],Sa=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Vd=/^\/?Date\((-?\d+)/i,Hd=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,Wd={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function dc(e){var i,a,c=e._i,u=Pd.exec(c)||Yd.exec(c),_,b,O,B,te=Gs.length,pt=Sa.length;if(u){for(x(e).iso=!0,i=0,a=te;i<a;i++)if(Gs[i][1].exec(u[1])){b=Gs[i][0],_=Gs[i][2]!==!1;break}if(b==null){e._isValid=!1;return}if(u[3]){for(i=0,a=pt;i<a;i++)if(Sa[i][1].exec(u[3])){O=(u[2]||" ")+Sa[i][0];break}if(O==null){e._isValid=!1;return}}if(!_&&O!=null){e._isValid=!1;return}if(u[4])if(Ud.exec(u[4]))B="Z";else{e._isValid=!1;return}e._f=b+(O||"")+(B||""),$a(e)}else e._isValid=!1}function Bd(e,i,a,c,u,_){var b=[zd(e),tc.indexOf(i),parseInt(a,10),parseInt(c,10),parseInt(u,10)];return _&&b.push(parseInt(_,10)),b}function zd(e){var i=parseInt(e,10);return i<=49?2e3+i:i<=999?1900+i:i}function Gd(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function jd(e,i,a){if(e){var c=ac.indexOf(e),u=new Date(i[0],i[1],i[2]).getDay();if(c!==u)return x(a).weekdayMismatch=!0,a._isValid=!1,!1}return!0}function Kd(e,i,a){if(e)return Wd[e];if(i)return 0;var c=parseInt(a,10),u=c%100,_=(c-u)/100;return _*60+u}function hc(e){var i=Hd.exec(Gd(e._i)),a;if(i){if(a=Bd(i[4],i[3],i[2],i[5],i[6],i[7]),!jd(i[1],a,e))return;e._a=a,e._tzm=Kd(i[8],i[9],i[10]),e._d=Ki.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),x(e).rfc2822=!0}else e._isValid=!1}function qd(e){var i=Vd.exec(e._i);if(i!==null){e._d=new Date(+i[1]);return}if(dc(e),e._isValid===!1)delete e._isValid;else return;if(hc(e),e._isValid===!1)delete e._isValid;else return;e._strict?e._isValid=!1:t.createFromInputFallback(e)}t.createFromInputFallback=re("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))});function oi(e,i,a){return e!=null?e:i!=null?i:a}function Zd(e){var i=new Date(t.now());return e._useUTC?[i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate()]:[i.getFullYear(),i.getMonth(),i.getDate()]}function Ea(e){var i,a,c=[],u,_,b;if(!e._d){for(u=Zd(e),e._w&&e._a[xr]==null&&e._a[Kr]==null&&Qd(e),e._dayOfYear!=null&&(b=oi(e._a[st],u[st]),(e._dayOfYear>Gi(b)||e._dayOfYear===0)&&(x(e)._overflowDayOfYear=!0),a=Ki(b,0,e._dayOfYear),e._a[Kr]=a.getUTCMonth(),e._a[xr]=a.getUTCDate()),i=0;i<3&&e._a[i]==null;++i)e._a[i]=c[i]=u[i];for(;i<7;i++)e._a[i]=c[i]=e._a[i]==null?i===2?1:0:e._a[i];e._a[Ve]===24&&e._a[nr]===0&&e._a[qr]===0&&e._a[Rn]===0&&(e._nextDay=!0,e._a[Ve]=0),e._d=(e._useUTC?Ki:nd).apply(null,c),_=e._useUTC?e._d.getUTCDay():e._d.getDay(),e._tzm!=null&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[Ve]=24),e._w&&typeof e._w.d!="undefined"&&e._w.d!==_&&(x(e).weekdayMismatch=!0)}}function Qd(e){var i,a,c,u,_,b,O,B,te;i=e._w,i.GG!=null||i.W!=null||i.E!=null?(_=1,b=4,a=oi(i.GG,e._a[st],qi(we(),1,4).year),c=oi(i.W,1),u=oi(i.E,1),(u<1||u>7)&&(B=!0)):(_=e._locale._week.dow,b=e._locale._week.doy,te=qi(we(),_,b),a=oi(i.gg,e._a[st],te.year),c=oi(i.w,te.week),i.d!=null?(u=i.d,(u<0||u>6)&&(B=!0)):i.e!=null?(u=i.e+_,(i.e<0||i.e>6)&&(B=!0)):u=_),c<1||c>Zr(a,_,b)?x(e)._overflowWeeks=!0:B!=null?x(e)._overflowWeekday=!0:(O=oc(a,c,u,_,b),e._a[st]=O.year,e._dayOfYear=O.dayOfYear)}t.ISO_8601=function(){},t.RFC_2822=function(){};function $a(e){if(e._f===t.ISO_8601){dc(e);return}if(e._f===t.RFC_2822){hc(e);return}e._a=[],x(e).empty=!0;var i=""+e._i,a,c,u,_,b,O=i.length,B=0,te,pt;for(u=tr(e._f,e._locale).match(j)||[],pt=u.length,a=0;a<pt;a++)_=u[a],c=(i.match(Pu(_,e))||[])[0],c&&(b=i.substr(0,i.indexOf(c)),b.length>0&&x(e).unusedInput.push(b),i=i.slice(i.indexOf(c)+c.length),B+=c.length),We[_]?(c?x(e).empty=!1:x(e).unusedTokens.push(_),Uu(_,c,e)):e._strict&&!c&&x(e).unusedTokens.push(_);x(e).charsLeftOver=O-B,i.length>0&&x(e).unusedInput.push(i),e._a[Ve]<=12&&x(e).bigHour===!0&&e._a[Ve]>0&&(x(e).bigHour=void 0),x(e).parsedDateParts=e._a.slice(0),x(e).meridiem=e._meridiem,e._a[Ve]=Xd(e._locale,e._a[Ve],e._meridiem),te=x(e).era,te!==null&&(e._a[st]=e._locale.erasConvertYear(te,e._a[st])),Ea(e),Ta(e)}function Xd(e,i,a){var c;return a==null?i:e.meridiemHour!=null?e.meridiemHour(i,a):(e.isPM!=null&&(c=e.isPM(a),c&&i<12&&(i+=12),!c&&i===12&&(i=0)),i)}function Jd(e){var i,a,c,u,_,b,O=!1,B=e._f.length;if(B===0){x(e).invalidFormat=!0,e._d=new Date(NaN);return}for(u=0;u<B;u++)_=0,b=!1,i=X({},e),e._useUTC!=null&&(i._useUTC=e._useUTC),i._f=e._f[u],$a(i),S(i)&&(b=!0),_+=x(i).charsLeftOver,_+=x(i).unusedTokens.length*10,x(i).score=_,O?_<c&&(c=_,a=i):(c==null||_<c||b)&&(c=_,a=i,b&&(O=!0));v(e,a||i)}function eh(e){if(!e._d){var i=Cn(e._i),a=i.day===void 0?i.date:i.day;e._a=g([i.year,i.month,a,i.hour,i.minute,i.second,i.millisecond],function(c){return c&&parseInt(c,10)}),Ea(e)}}function th(e){var i=new N(Ta(pc(e)));return i._nextDay&&(i.add(1,"d"),i._nextDay=void 0),i}function pc(e){var i=e._i,a=e._f;return e._locale=e._locale||Qr(e._l),i===null||a===void 0&&i===""?M({nullInput:!0}):(typeof i=="string"&&(e._i=i=e._locale.preparse(i)),W(i)?new N(Ta(i)):(p(i)?e._d=i:s(a)?Jd(e):a?$a(e):rh(e),S(e)||(e._d=null),e))}function rh(e){var i=e._i;d(i)?e._d=new Date(t.now()):p(i)?e._d=new Date(i.valueOf()):typeof i=="string"?qd(e):s(i)?(e._a=g(i.slice(0),function(a){return parseInt(a,10)}),Ea(e)):o(i)?eh(e):h(i)?e._d=new Date(i):t.createFromInputFallback(e)}function mc(e,i,a,c,u){var _={};return(i===!0||i===!1)&&(c=i,i=void 0),(a===!0||a===!1)&&(c=a,a=void 0),(o(e)&&f(e)||s(e)&&e.length===0)&&(e=void 0),_._isAMomentObject=!0,_._useUTC=_._isUTC=u,_._l=a,_._i=e,_._f=i,_._strict=c,th(_)}function we(e,i,a,c){return mc(e,i,a,c,!1)}var nh=re("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=we.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:M()}),ih=re("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=we.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:M()});function _c(e,i){var a,c;if(i.length===1&&s(i[0])&&(i=i[0]),!i.length)return we();for(a=i[0],c=1;c<i.length;++c)(!i[c].isValid()||i[c][e](a))&&(a=i[c]);return a}function sh(){var e=[].slice.call(arguments,0);return _c("isBefore",e)}function oh(){var e=[].slice.call(arguments,0);return _c("isAfter",e)}var ah=function(){return Date.now?Date.now():+new Date},Xi=["year","quarter","month","week","day","hour","minute","second","millisecond"];function lh(e){var i,a=!1,c,u=Xi.length;for(i in e)if(l(e,i)&&!(Ne.call(Xi,i)!==-1&&(e[i]==null||!isNaN(e[i]))))return!1;for(c=0;c<u;++c)if(e[Xi[c]]){if(a)return!1;parseFloat(e[Xi[c]])!==ee(e[Xi[c]])&&(a=!0)}return!0}function ch(){return this._isValid}function fh(){return ir(NaN)}function js(e){var i=Cn(e),a=i.year||0,c=i.quarter||0,u=i.month||0,_=i.week||i.isoWeek||0,b=i.day||0,O=i.hour||0,B=i.minute||0,te=i.second||0,pt=i.millisecond||0;this._isValid=lh(i),this._milliseconds=+pt+te*1e3+B*6e4+O*1e3*60*60,this._days=+b+_*7,this._months=+u+c*3+a*12,this._data={},this._locale=Qr(),this._bubble()}function Ks(e){return e instanceof js}function Da(e){return e<0?Math.round(-1*e)*-1:Math.round(e)}function uh(e,i,a){var c=Math.min(e.length,i.length),u=Math.abs(e.length-i.length),_=0,b;for(b=0;b<c;b++)(a&&e[b]!==i[b]||!a&&ee(e[b])!==ee(i[b]))&&_++;return _+u}function gc(e,i){A(e,0,0,function(){var a=this.utcOffset(),c="+";return a<0&&(a=-a,c="-"),c+I(~~(a/60),2)+i+I(~~a%60,2)})}gc("Z",":"),gc("ZZ",""),C("Z",Vs),C("ZZ",Vs),ue(["Z","ZZ"],function(e,i,a){a._useUTC=!0,a._tzm=Ma(Vs,e)});var dh=/([\+\-]|\d\d)/gi;function Ma(e,i){var a=(i||"").match(e),c,u,_;return a===null?null:(c=a[a.length-1]||[],u=(c+"").match(dh)||["-",0,0],_=+(u[1]*60)+ee(u[2]),_===0?0:u[0]==="+"?_:-_)}function Na(e,i){var a,c;return i._isUTC?(a=i.clone(),c=(W(e)||p(e)?e.valueOf():we(e).valueOf())-a.valueOf(),a._d.setTime(a._d.valueOf()+c),t.updateOffset(a,!1),a):we(e).local()}function Aa(e){return-Math.round(e._d.getTimezoneOffset())}t.updateOffset=function(){};function hh(e,i,a){var c=this._offset||0,u;if(!this.isValid())return e!=null?this:NaN;if(e!=null){if(typeof e=="string"){if(e=Ma(Vs,e),e===null)return this}else Math.abs(e)<16&&!a&&(e=e*60);return!this._isUTC&&i&&(u=Aa(this)),this._offset=e,this._isUTC=!0,u!=null&&this.add(u,"m"),c!==e&&(!i||this._changeInProgress?kc(this,ir(e-c,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,t.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?c:Aa(this)}function ph(e,i){return e!=null?(typeof e!="string"&&(e=-e),this.utcOffset(e,i),this):-this.utcOffset()}function mh(e){return this.utcOffset(0,e)}function _h(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(Aa(this),"m")),this}function gh(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var e=Ma(Iu,this._i);e!=null?this.utcOffset(e):this.utcOffset(0,!0)}return this}function vh(e){return this.isValid()?(e=e?we(e).utcOffset():0,(this.utcOffset()-e)%60===0):!1}function yh(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function wh(){if(!d(this._isDSTShifted))return this._isDSTShifted;var e={},i;return X(e,this),e=pc(e),e._a?(i=e._isUTC?m(e._a):we(e._a),this._isDSTShifted=this.isValid()&&uh(e._a,i.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function kh(){return this.isValid()?!this._isUTC:!1}function xh(){return this.isValid()?this._isUTC:!1}function vc(){return this.isValid()?this._isUTC&&this._offset===0:!1}var bh=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Th=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function ir(e,i){var a=e,c=null,u,_,b;return Ks(e)?a={ms:e._milliseconds,d:e._days,M:e._months}:h(e)||!isNaN(+e)?(a={},i?a[i]=+e:a.milliseconds=+e):(c=bh.exec(e))?(u=c[1]==="-"?-1:1,a={y:0,d:ee(c[xr])*u,h:ee(c[Ve])*u,m:ee(c[nr])*u,s:ee(c[qr])*u,ms:ee(Da(c[Rn]*1e3))*u}):(c=Th.exec(e))?(u=c[1]==="-"?-1:1,a={y:Fn(c[2],u),M:Fn(c[3],u),w:Fn(c[4],u),d:Fn(c[5],u),h:Fn(c[6],u),m:Fn(c[7],u),s:Fn(c[8],u)}):a==null?a={}:typeof a=="object"&&("from"in a||"to"in a)&&(b=Sh(we(a.from),we(a.to)),a={},a.ms=b.milliseconds,a.M=b.months),_=new js(a),Ks(e)&&l(e,"_locale")&&(_._locale=e._locale),Ks(e)&&l(e,"_isValid")&&(_._isValid=e._isValid),_}ir.fn=js.prototype,ir.invalid=fh;function Fn(e,i){var a=e&&parseFloat(e.replace(",","."));return(isNaN(a)?0:a)*i}function yc(e,i){var a={};return a.months=i.month()-e.month()+(i.year()-e.year())*12,e.clone().add(a.months,"M").isAfter(i)&&--a.months,a.milliseconds=+i-+e.clone().add(a.months,"M"),a}function Sh(e,i){var a;return e.isValid()&&i.isValid()?(i=Na(i,e),e.isBefore(i)?a=yc(e,i):(a=yc(i,e),a.milliseconds=-a.milliseconds,a.months=-a.months),a):{milliseconds:0,months:0}}function wc(e,i){return function(a,c){var u,_;return c!==null&&!isNaN(+c)&&(fe(i,"moment()."+i+"(period, number) is deprecated. Please use moment()."+i+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),_=a,a=c,c=_),u=ir(a,c),kc(this,u,e),this}}function kc(e,i,a,c){var u=i._milliseconds,_=Da(i._days),b=Da(i._months);e.isValid()&&(c=c==null?!0:c,b&&nc(e,ji(e,"Month")+b*a),_&&ec(e,"Date",ji(e,"Date")+_*a),u&&e._d.setTime(e._d.valueOf()+u*a),c&&t.updateOffset(e,_||b))}var Eh=wc(1,"add"),$h=wc(-1,"subtract");function xc(e){return typeof e=="string"||e instanceof String}function Dh(e){return W(e)||p(e)||xc(e)||h(e)||Nh(e)||Mh(e)||e===null||e===void 0}function Mh(e){var i=o(e)&&!f(e),a=!1,c=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],u,_,b=c.length;for(u=0;u<b;u+=1)_=c[u],a=a||l(e,_);return i&&a}function Nh(e){var i=s(e),a=!1;return i&&(a=e.filter(function(c){return!h(c)&&xc(e)}).length===0),i&&a}function Ah(e){var i=o(e)&&!f(e),a=!1,c=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],u,_;for(u=0;u<c.length;u+=1)_=c[u],a=a||l(e,_);return i&&a}function Oh(e,i){var a=e.diff(i,"days",!0);return a<-6?"sameElse":a<-1?"lastWeek":a<0?"lastDay":a<1?"sameDay":a<2?"nextDay":a<7?"nextWeek":"sameElse"}function Ch(e,i){arguments.length===1&&(arguments[0]?Dh(arguments[0])?(e=arguments[0],i=void 0):Ah(arguments[0])&&(i=arguments[0],e=void 0):(e=void 0,i=void 0));var a=e||we(),c=Na(a,this).startOf("day"),u=t.calendarFormat(this,c)||"sameElse",_=i&&(Re(i[u])?i[u].call(this,a):i[u]);return this.format(_||this.localeData().calendar(u,this,we(a)))}function Rh(){return new N(this)}function Fh(e,i){var a=W(e)?e:we(e);return this.isValid()&&a.isValid()?(i=ht(i)||"millisecond",i==="millisecond"?this.valueOf()>a.valueOf():a.valueOf()<this.clone().startOf(i).valueOf()):!1}function Ih(e,i){var a=W(e)?e:we(e);return this.isValid()&&a.isValid()?(i=ht(i)||"millisecond",i==="millisecond"?this.valueOf()<a.valueOf():this.clone().endOf(i).valueOf()<a.valueOf()):!1}function Lh(e,i,a,c){var u=W(e)?e:we(e),_=W(i)?i:we(i);return this.isValid()&&u.isValid()&&_.isValid()?(c=c||"()",(c[0]==="("?this.isAfter(u,a):!this.isBefore(u,a))&&(c[1]===")"?this.isBefore(_,a):!this.isAfter(_,a))):!1}function Ph(e,i){var a=W(e)?e:we(e),c;return this.isValid()&&a.isValid()?(i=ht(i)||"millisecond",i==="millisecond"?this.valueOf()===a.valueOf():(c=a.valueOf(),this.clone().startOf(i).valueOf()<=c&&c<=this.clone().endOf(i).valueOf())):!1}function Yh(e,i){return this.isSame(e,i)||this.isAfter(e,i)}function Uh(e,i){return this.isSame(e,i)||this.isBefore(e,i)}function Vh(e,i,a){var c,u,_;if(!this.isValid())return NaN;if(c=Na(e,this),!c.isValid())return NaN;switch(u=(c.utcOffset()-this.utcOffset())*6e4,i=ht(i),i){case"year":_=qs(this,c)/12;break;case"month":_=qs(this,c);break;case"quarter":_=qs(this,c)/3;break;case"second":_=(this-c)/1e3;break;case"minute":_=(this-c)/6e4;break;case"hour":_=(this-c)/36e5;break;case"day":_=(this-c-u)/864e5;break;case"week":_=(this-c-u)/6048e5;break;default:_=this-c}return a?_:Kt(_)}function qs(e,i){if(e.date()<i.date())return-qs(i,e);var a=(i.year()-e.year())*12+(i.month()-e.month()),c=e.clone().add(a,"months"),u,_;return i-c<0?(u=e.clone().add(a-1,"months"),_=(i-c)/(c-u)):(u=e.clone().add(a+1,"months"),_=(i-c)/(u-c)),-(a+_)||0}t.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",t.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function Hh(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function Wh(e){if(!this.isValid())return null;var i=e!==!0,a=i?this.clone().utc():this;return a.year()<0||a.year()>9999?dt(a,i?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):Re(Date.prototype.toISOString)?i?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",dt(a,"Z")):dt(a,i?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function Bh(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e="moment",i="",a,c,u,_;return this.isLocal()||(e=this.utcOffset()===0?"moment.utc":"moment.parseZone",i="Z"),a="["+e+'("]',c=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",u="-MM-DD[T]HH:mm:ss.SSS",_=i+'[")]',this.format(a+c+u+_)}function zh(e){e||(e=this.isUtc()?t.defaultFormatUtc:t.defaultFormat);var i=dt(this,e);return this.localeData().postformat(i)}function Gh(e,i){return this.isValid()&&(W(e)&&e.isValid()||we(e).isValid())?ir({to:this,from:e}).locale(this.locale()).humanize(!i):this.localeData().invalidDate()}function jh(e){return this.from(we(),e)}function Kh(e,i){return this.isValid()&&(W(e)&&e.isValid()||we(e).isValid())?ir({from:this,to:e}).locale(this.locale()).humanize(!i):this.localeData().invalidDate()}function qh(e){return this.to(we(),e)}function bc(e){var i;return e===void 0?this._locale._abbr:(i=Qr(e),i!=null&&(this._locale=i),this)}var Tc=re("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return e===void 0?this.localeData():this.locale(e)});function Sc(){return this._locale}var Zs=1e3,ai=60*Zs,Qs=60*ai,Ec=(365*400+97)*24*Qs;function li(e,i){return(e%i+i)%i}function $c(e,i,a){return e<100&&e>=0?new Date(e+400,i,a)-Ec:new Date(e,i,a).valueOf()}function Dc(e,i,a){return e<100&&e>=0?Date.UTC(e+400,i,a)-Ec:Date.UTC(e,i,a)}function Zh(e){var i,a;if(e=ht(e),e===void 0||e==="millisecond"||!this.isValid())return this;switch(a=this._isUTC?Dc:$c,e){case"year":i=a(this.year(),0,1);break;case"quarter":i=a(this.year(),this.month()-this.month()%3,1);break;case"month":i=a(this.year(),this.month(),1);break;case"week":i=a(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":i=a(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":i=a(this.year(),this.month(),this.date());break;case"hour":i=this._d.valueOf(),i-=li(i+(this._isUTC?0:this.utcOffset()*ai),Qs);break;case"minute":i=this._d.valueOf(),i-=li(i,ai);break;case"second":i=this._d.valueOf(),i-=li(i,Zs);break}return this._d.setTime(i),t.updateOffset(this,!0),this}function Qh(e){var i,a;if(e=ht(e),e===void 0||e==="millisecond"||!this.isValid())return this;switch(a=this._isUTC?Dc:$c,e){case"year":i=a(this.year()+1,0,1)-1;break;case"quarter":i=a(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":i=a(this.year(),this.month()+1,1)-1;break;case"week":i=a(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":i=a(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":i=a(this.year(),this.month(),this.date()+1)-1;break;case"hour":i=this._d.valueOf(),i+=Qs-li(i+(this._isUTC?0:this.utcOffset()*ai),Qs)-1;break;case"minute":i=this._d.valueOf(),i+=ai-li(i,ai)-1;break;case"second":i=this._d.valueOf(),i+=Zs-li(i,Zs)-1;break}return this._d.setTime(i),t.updateOffset(this,!0),this}function Xh(){return this._d.valueOf()-(this._offset||0)*6e4}function Jh(){return Math.floor(this.valueOf()/1e3)}function ep(){return new Date(this.valueOf())}function tp(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function rp(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function np(){return this.isValid()?this.toISOString():null}function ip(){return S(this)}function sp(){return v({},x(this))}function op(){return x(this).overflow}function ap(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}A("N",0,0,"eraAbbr"),A("NN",0,0,"eraAbbr"),A("NNN",0,0,"eraAbbr"),A("NNNN",0,0,"eraName"),A("NNNNN",0,0,"eraNarrow"),A("y",["y",1],"yo","eraYear"),A("y",["yy",2],0,"eraYear"),A("y",["yyy",3],0,"eraYear"),A("y",["yyyy",4],0,"eraYear"),C("N",Oa),C("NN",Oa),C("NNN",Oa),C("NNNN",vp),C("NNNNN",yp),ue(["N","NN","NNN","NNNN","NNNNN"],function(e,i,a,c){var u=a._locale.erasParse(e,c,a._strict);u?x(a).era=u:x(a).invalidEra=e}),C("y",ni),C("yy",ni),C("yyy",ni),C("yyyy",ni),C("yo",wp),ue(["y","yy","yyy","yyyy"],st),ue(["yo"],function(e,i,a,c){var u;a._locale._eraYearOrdinalRegex&&(u=e.match(a._locale._eraYearOrdinalRegex)),a._locale.eraYearOrdinalParse?i[st]=a._locale.eraYearOrdinalParse(e,u):i[st]=parseInt(e,10)});function lp(e,i){var a,c,u,_=this._eras||Qr("en")._eras;for(a=0,c=_.length;a<c;++a)switch(typeof _[a].since==="string"&&(u=t(_[a].since).startOf("day"),_[a].since=u.valueOf()),typeof _[a].until){case"undefined":_[a].until=1/0;break;case"string":u=t(_[a].until).startOf("day").valueOf(),_[a].until=u.valueOf();break}return _}function cp(e,i,a){var c,u,_=this.eras(),b,O,B;for(e=e.toUpperCase(),c=0,u=_.length;c<u;++c)if(b=_[c].name.toUpperCase(),O=_[c].abbr.toUpperCase(),B=_[c].narrow.toUpperCase(),a)switch(i){case"N":case"NN":case"NNN":if(O===e)return _[c];break;case"NNNN":if(b===e)return _[c];break;case"NNNNN":if(B===e)return _[c];break}else if([b,O,B].indexOf(e)>=0)return _[c]}function fp(e,i){var a=e.since<=e.until?1:-1;return i===void 0?t(e.since).year():t(e.since).year()+(i-e.offset)*a}function up(){var e,i,a,c=this.localeData().eras();for(e=0,i=c.length;e<i;++e)if(a=this.clone().startOf("day").valueOf(),c[e].since<=a&&a<=c[e].until||c[e].until<=a&&a<=c[e].since)return c[e].name;return""}function dp(){var e,i,a,c=this.localeData().eras();for(e=0,i=c.length;e<i;++e)if(a=this.clone().startOf("day").valueOf(),c[e].since<=a&&a<=c[e].until||c[e].until<=a&&a<=c[e].since)return c[e].narrow;return""}function hp(){var e,i,a,c=this.localeData().eras();for(e=0,i=c.length;e<i;++e)if(a=this.clone().startOf("day").valueOf(),c[e].since<=a&&a<=c[e].until||c[e].until<=a&&a<=c[e].since)return c[e].abbr;return""}function pp(){var e,i,a,c,u=this.localeData().eras();for(e=0,i=u.length;e<i;++e)if(a=u[e].since<=u[e].until?1:-1,c=this.clone().startOf("day").valueOf(),u[e].since<=c&&c<=u[e].until||u[e].until<=c&&c<=u[e].since)return(this.year()-t(u[e].since).year())*a+u[e].offset;return this.year()}function mp(e){return l(this,"_erasNameRegex")||Ca.call(this),e?this._erasNameRegex:this._erasRegex}function _p(e){return l(this,"_erasAbbrRegex")||Ca.call(this),e?this._erasAbbrRegex:this._erasRegex}function gp(e){return l(this,"_erasNarrowRegex")||Ca.call(this),e?this._erasNarrowRegex:this._erasRegex}function Oa(e,i){return i.erasAbbrRegex(e)}function vp(e,i){return i.erasNameRegex(e)}function yp(e,i){return i.erasNarrowRegex(e)}function wp(e,i){return i._eraYearOrdinalRegex||ni}function Ca(){var e=[],i=[],a=[],c=[],u,_,b,O,B,te=this.eras();for(u=0,_=te.length;u<_;++u)b=jr(te[u].name),O=jr(te[u].abbr),B=jr(te[u].narrow),i.push(b),e.push(O),a.push(B),c.push(b),c.push(O),c.push(B);this._erasRegex=new RegExp("^("+c.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+i.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+e.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+a.join("|")+")","i")}A(0,["gg",2],0,function(){return this.weekYear()%100}),A(0,["GG",2],0,function(){return this.isoWeekYear()%100});function Xs(e,i){A(0,[e,e.length],0,i)}Xs("gggg","weekYear"),Xs("ggggg","weekYear"),Xs("GGGG","isoWeekYear"),Xs("GGGGG","isoWeekYear"),C("G",Us),C("g",Us),C("GG",pe,J),C("gg",pe,J),C("GGGG",Wi,Ue),C("gggg",Wi,Ue),C("GGGGG",Ys,Fe),C("ggggg",Ys,Fe),zi(["gggg","ggggg","GGGG","GGGGG"],function(e,i,a,c){i[c.substr(0,2)]=ee(e)}),zi(["gg","GG"],function(e,i,a,c){i[c]=t.parseTwoDigitYear(e)});function kp(e){return Mc.call(this,e,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)}function xp(e){return Mc.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function bp(){return Zr(this.year(),1,4)}function Tp(){return Zr(this.isoWeekYear(),1,4)}function Sp(){var e=this.localeData()._week;return Zr(this.year(),e.dow,e.doy)}function Ep(){var e=this.localeData()._week;return Zr(this.weekYear(),e.dow,e.doy)}function Mc(e,i,a,c,u){var _;return e==null?qi(this,c,u).year:(_=Zr(e,c,u),i>_&&(i=_),$p.call(this,e,i,a,c,u))}function $p(e,i,a,c,u){var _=oc(e,i,a,c,u),b=Ki(_.year,0,_.dayOfYear);return this.year(b.getUTCFullYear()),this.month(b.getUTCMonth()),this.date(b.getUTCDate()),this}A("Q",0,"Qo","quarter"),C("Q",Me),ue("Q",function(e,i){i[Kr]=(ee(e)-1)*3});function Dp(e){return e==null?Math.ceil((this.month()+1)/3):this.month((e-1)*3+this.month()%3)}A("D",["DD",2],"Do","date"),C("D",pe,ii),C("DD",pe,J),C("Do",function(e,i){return e?i._dayOfMonthOrdinalParse||i._ordinalParse:i._dayOfMonthOrdinalParseLenient}),ue(["D","DD"],xr),ue("Do",function(e,i){i[xr]=ee(e.match(pe)[0])});var Nc=si("Date",!0);A("DDD",["DDDD",3],"DDDo","dayOfYear"),C("DDD",ri),C("DDDD",oe),ue(["DDD","DDDD"],function(e,i,a){a._dayOfYear=ee(e)});function Mp(e){var i=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return e==null?i:this.add(e-i,"d")}A("m",["mm",2],0,"minute"),C("m",pe,ga),C("mm",pe,J),ue(["m","mm"],nr);var Np=si("Minutes",!1);A("s",["ss",2],0,"second"),C("s",pe,ga),C("ss",pe,J),ue(["s","ss"],qr);var Ap=si("Seconds",!1);A("S",0,0,function(){return~~(this.millisecond()/100)}),A(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),A(0,["SSS",3],0,"millisecond"),A(0,["SSSS",4],0,function(){return this.millisecond()*10}),A(0,["SSSSS",5],0,function(){return this.millisecond()*100}),A(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3}),A(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4}),A(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5}),A(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6}),C("S",ri,Me),C("SS",ri,J),C("SSS",ri,oe);var gn,Ac;for(gn="SSSS";gn.length<=9;gn+="S")C(gn,ni);function Op(e,i){i[Rn]=ee(("0."+e)*1e3)}for(gn="S";gn.length<=9;gn+="S")ue(gn,Op);Ac=si("Milliseconds",!1),A("z",0,0,"zoneAbbr"),A("zz",0,0,"zoneName");function Cp(){return this._isUTC?"UTC":""}function Rp(){return this._isUTC?"Coordinated Universal Time":""}var D=N.prototype;D.add=Eh,D.calendar=Ch,D.clone=Rh,D.diff=Vh,D.endOf=Qh,D.format=zh,D.from=Gh,D.fromNow=jh,D.to=Kh,D.toNow=qh,D.get=Bu,D.invalidAt=op,D.isAfter=Fh,D.isBefore=Ih,D.isBetween=Lh,D.isSame=Ph,D.isSameOrAfter=Yh,D.isSameOrBefore=Uh,D.isValid=ip,D.lang=Tc,D.locale=bc,D.localeData=Sc,D.max=ih,D.min=nh,D.parsingFlags=sp,D.set=zu,D.startOf=Zh,D.subtract=$h,D.toArray=tp,D.toObject=rp,D.toDate=ep,D.toISOString=Wh,D.inspect=Bh,typeof Symbol!="undefined"&&Symbol.for!=null&&(D[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),D.toJSON=np,D.toString=Hh,D.unix=Jh,D.valueOf=Xh,D.creationData=ap,D.eraName=up,D.eraNarrow=dp,D.eraAbbr=hp,D.eraYear=pp,D.year=Jl,D.isLeapYear=Wu,D.weekYear=kp,D.isoWeekYear=xp,D.quarter=D.quarters=Dp,D.month=ic,D.daysInMonth=ed,D.week=D.weeks=ld,D.isoWeek=D.isoWeeks=cd,D.weeksInYear=Sp,D.weeksInWeekYear=Ep,D.isoWeeksInYear=bp,D.isoWeeksInISOWeekYear=Tp,D.date=Nc,D.day=D.days=xd,D.weekday=bd,D.isoWeekday=Td,D.dayOfYear=Mp,D.hour=D.hours=Ad,D.minute=D.minutes=Np,D.second=D.seconds=Ap,D.millisecond=D.milliseconds=Ac,D.utcOffset=hh,D.utc=mh,D.local=_h,D.parseZone=gh,D.hasAlignedHourOffset=vh,D.isDST=yh,D.isLocal=kh,D.isUtcOffset=xh,D.isUtc=vc,D.isUTC=vc,D.zoneAbbr=Cp,D.zoneName=Rp,D.dates=re("dates accessor is deprecated. Use date instead.",Nc),D.months=re("months accessor is deprecated. Use month instead",ic),D.years=re("years accessor is deprecated. Use year instead",Jl),D.zone=re("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",ph),D.isDSTShifted=re("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",wh);function Fp(e){return we(e*1e3)}function Ip(){return we.apply(null,arguments).parseZone()}function Oc(e){return e}var ae=Jt.prototype;ae.calendar=Br,ae.longDateFormat=jt,ae.invalidDate=Gr,ae.ordinal=On,ae.preparse=Oc,ae.postformat=Oc,ae.relativeTime=ye,ae.pastFuture=Ft,ae.set=vt,ae.eras=lp,ae.erasParse=cp,ae.erasConvertYear=fp,ae.erasAbbrRegex=_p,ae.erasNameRegex=mp,ae.erasNarrowRegex=gp,ae.months=Zu,ae.monthsShort=Qu,ae.monthsParse=Ju,ae.monthsRegex=rd,ae.monthsShortRegex=td,ae.week=id,ae.firstDayOfYear=ad,ae.firstDayOfWeek=od,ae.weekdays=gd,ae.weekdaysMin=yd,ae.weekdaysShort=vd,ae.weekdaysParse=kd,ae.weekdaysRegex=Sd,ae.weekdaysShortRegex=Ed,ae.weekdaysMinRegex=$d,ae.isPM=Md,ae.meridiem=Od;function Js(e,i,a,c){var u=Qr(),_=m().set(c,i);return u[a](_,e)}function Cc(e,i,a){if(h(e)&&(i=e,e=void 0),e=e||"",i!=null)return Js(e,i,a,"month");var c,u=[];for(c=0;c<12;c++)u[c]=Js(e,c,a,"month");return u}function Ra(e,i,a,c){typeof e=="boolean"?(h(i)&&(a=i,i=void 0),i=i||""):(i=e,a=i,e=!1,h(i)&&(a=i,i=void 0),i=i||"");var u=Qr(),_=e?u._week.dow:0,b,O=[];if(a!=null)return Js(i,(a+_)%7,c,"day");for(b=0;b<7;b++)O[b]=Js(i,(b+_)%7,c,"day");return O}function Lp(e,i){return Cc(e,i,"months")}function Pp(e,i){return Cc(e,i,"monthsShort")}function Yp(e,i,a){return Ra(e,i,a,"weekdays")}function Up(e,i,a){return Ra(e,i,a,"weekdaysShort")}function Vp(e,i,a){return Ra(e,i,a,"weekdaysMin")}_n("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var i=e%10,a=ee(e%100/10)===1?"th":i===1?"st":i===2?"nd":i===3?"rd":"th";return e+a}}),t.lang=re("moment.lang is deprecated. Use moment.locale instead.",_n),t.langData=re("moment.langData is deprecated. Use moment.localeData instead.",Qr);var Xr=Math.abs;function Hp(){var e=this._data;return this._milliseconds=Xr(this._milliseconds),this._days=Xr(this._days),this._months=Xr(this._months),e.milliseconds=Xr(e.milliseconds),e.seconds=Xr(e.seconds),e.minutes=Xr(e.minutes),e.hours=Xr(e.hours),e.months=Xr(e.months),e.years=Xr(e.years),this}function Rc(e,i,a,c){var u=ir(i,a);return e._milliseconds+=c*u._milliseconds,e._days+=c*u._days,e._months+=c*u._months,e._bubble()}function Wp(e,i){return Rc(this,e,i,1)}function Bp(e,i){return Rc(this,e,i,-1)}function Fc(e){return e<0?Math.floor(e):Math.ceil(e)}function zp(){var e=this._milliseconds,i=this._days,a=this._months,c=this._data,u,_,b,O,B;return e>=0&&i>=0&&a>=0||e<=0&&i<=0&&a<=0||(e+=Fc(Fa(a)+i)*864e5,i=0,a=0),c.milliseconds=e%1e3,u=Kt(e/1e3),c.seconds=u%60,_=Kt(u/60),c.minutes=_%60,b=Kt(_/60),c.hours=b%24,i+=Kt(b/24),B=Kt(Ic(i)),a+=B,i-=Fc(Fa(B)),O=Kt(a/12),a%=12,c.days=i,c.months=a,c.years=O,this}function Ic(e){return e*4800/146097}function Fa(e){return e*146097/4800}function Gp(e){if(!this.isValid())return NaN;var i,a,c=this._milliseconds;if(e=ht(e),e==="month"||e==="quarter"||e==="year")switch(i=this._days+c/864e5,a=this._months+Ic(i),e){case"month":return a;case"quarter":return a/3;case"year":return a/12}else switch(i=this._days+Math.round(Fa(this._months)),e){case"week":return i/7+c/6048e5;case"day":return i+c/864e5;case"hour":return i*24+c/36e5;case"minute":return i*1440+c/6e4;case"second":return i*86400+c/1e3;case"millisecond":return Math.floor(i*864e5)+c;default:throw new Error("Unknown unit "+e)}}function Jr(e){return function(){return this.as(e)}}var Lc=Jr("ms"),jp=Jr("s"),Kp=Jr("m"),qp=Jr("h"),Zp=Jr("d"),Qp=Jr("w"),Xp=Jr("M"),Jp=Jr("Q"),em=Jr("y"),tm=Lc;function rm(){return ir(this)}function nm(e){return e=ht(e),this.isValid()?this[e+"s"]():NaN}function In(e){return function(){return this.isValid()?this._data[e]:NaN}}var im=In("milliseconds"),sm=In("seconds"),om=In("minutes"),am=In("hours"),lm=In("days"),cm=In("months"),fm=In("years");function um(){return Kt(this.days()/7)}var en=Math.round,ci={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function dm(e,i,a,c,u){return u.relativeTime(i||1,!!a,e,c)}function hm(e,i,a,c){var u=ir(e).abs(),_=en(u.as("s")),b=en(u.as("m")),O=en(u.as("h")),B=en(u.as("d")),te=en(u.as("M")),pt=en(u.as("w")),tn=en(u.as("y")),vn=_<=a.ss&&["s",_]||_<a.s&&["ss",_]||b<=1&&["m"]||b<a.m&&["mm",b]||O<=1&&["h"]||O<a.h&&["hh",O]||B<=1&&["d"]||B<a.d&&["dd",B];return a.w!=null&&(vn=vn||pt<=1&&["w"]||pt<a.w&&["ww",pt]),vn=vn||te<=1&&["M"]||te<a.M&&["MM",te]||tn<=1&&["y"]||["yy",tn],vn[2]=i,vn[3]=+e>0,vn[4]=c,dm.apply(null,vn)}function pm(e){return e===void 0?en:typeof e=="function"?(en=e,!0):!1}function mm(e,i){return ci[e]===void 0?!1:i===void 0?ci[e]:(ci[e]=i,e==="s"&&(ci.ss=i-1),!0)}function _m(e,i){if(!this.isValid())return this.localeData().invalidDate();var a=!1,c=ci,u,_;return typeof e=="object"&&(i=e,e=!1),typeof e=="boolean"&&(a=e),typeof i=="object"&&(c=Object.assign({},ci,i),i.s!=null&&i.ss==null&&(c.ss=i.s-1)),u=this.localeData(),_=hm(this,!a,c,u),a&&(_=u.pastFuture(+this,_)),u.postformat(_)}var Ia=Math.abs;function fi(e){return(e>0)-(e<0)||+e}function eo(){if(!this.isValid())return this.localeData().invalidDate();var e=Ia(this._milliseconds)/1e3,i=Ia(this._days),a=Ia(this._months),c,u,_,b,O=this.asSeconds(),B,te,pt,tn;return O?(c=Kt(e/60),u=Kt(c/60),e%=60,c%=60,_=Kt(a/12),a%=12,b=e?e.toFixed(3).replace(/\.?0+$/,""):"",B=O<0?"-":"",te=fi(this._months)!==fi(O)?"-":"",pt=fi(this._days)!==fi(O)?"-":"",tn=fi(this._milliseconds)!==fi(O)?"-":"",B+"P"+(_?te+_+"Y":"")+(a?te+a+"M":"")+(i?pt+i+"D":"")+(u||c||e?"T":"")+(u?tn+u+"H":"")+(c?tn+c+"M":"")+(e?tn+b+"S":"")):"P0D"}var ne=js.prototype;ne.isValid=ch,ne.abs=Hp,ne.add=Wp,ne.subtract=Bp,ne.as=Gp,ne.asMilliseconds=Lc,ne.asSeconds=jp,ne.asMinutes=Kp,ne.asHours=qp,ne.asDays=Zp,ne.asWeeks=Qp,ne.asMonths=Xp,ne.asQuarters=Jp,ne.asYears=em,ne.valueOf=tm,ne._bubble=zp,ne.clone=rm,ne.get=nm,ne.milliseconds=im,ne.seconds=sm,ne.minutes=om,ne.hours=am,ne.days=lm,ne.weeks=um,ne.months=cm,ne.years=fm,ne.humanize=_m,ne.toISOString=eo,ne.toString=eo,ne.toJSON=eo,ne.locale=bc,ne.localeData=Sc,ne.toIsoString=re("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",eo),ne.lang=Tc,A("X",0,0,"unix"),A("x",0,0,"valueOf"),C("x",Us),C("X",Lu),ue("X",function(e,i,a){a._d=new Date(parseFloat(e)*1e3)}),ue("x",function(e,i,a){a._d=new Date(ee(e))});return t.version="2.30.1",n(we),t.fn=D,t.min=sh,t.max=oh,t.now=ah,t.utc=m,t.unix=Fp,t.months=Lp,t.isDate=p,t.locale=_n,t.invalid=M,t.duration=ir,t.isMoment=W,t.weekdays=Yp,t.parseZone=Ip,t.localeData=Qr,t.isDuration=Ks,t.monthsShort=Pp,t.weekdaysMin=Vp,t.defineLocale=ba,t.updateLocale=Id,t.locales=Ld,t.weekdaysShort=Up,t.normalizeUnits=ht,t.relativeTimeRounding=pm,t.relativeTimeThreshold=mm,t.calendarFormat=Oh,t.prototype=D,t.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},t}))});function wu(r,t){var f;let n=0,s=[],o=new Set([r.id]),l=[];if(r.children)for(let d of r.children)l.push(d);for(;l.length>0;){let d=l.shift();if(t!=null&&t.has(d.id)&&(d=t.get(d.id)),o.has(d.id)){s.push(`Skipped ${d.title}: already visited`);continue}if(d.status==="done"){s.push(`Pruned ${d.title}: status is done`),o.add(d.id);continue}o.add(d.id);let h=(f=d.originalDuration)!=null?f:d.duration;if(n+=h,s.push(`+${h}m from ${d.title}`),d.children)for(let p of d.children)l.push(p)}return{total:n,trace:s}}function Bo(r){return wu(r).total}function V_(r,t){var f;let n=(f=r.originalDuration)!=null?f:r.duration,s=wu(r,t),o=n+s.total,l=[`Base: ${n}m`,...s.trace];return r.status==="done"&&l.push(`Note: Status is DONE - This ${o}m is for display only and consumes 0m in schedule.`),{total:o,trace:l}}function ft(r,t){var h;let n=r.filter(p=>p.isAnchored&&p.startTime);n.sort((p,g)=>p.startTime.valueOf()-g.startTime.valueOf());let s=(0,zt.default)(t).subtract(10,"years");for(let p of n){let g=(0,zt.default)(p.startTime);g.isBefore(s)&&(g=(0,zt.default)(s),p.startTime=g);let v=(h=p.originalDuration)!=null?h:p.duration;s=(0,zt.default)(g).add(v,"minutes")}let o=n.map(p=>{var g;return{start:(0,zt.default)(p.startTime),end:(0,zt.default)(p.startTime).add((g=p.originalDuration)!=null?g:p.duration,"minutes")}}),l=(0,zt.default)(t),f=new Map;for(let p of r)f.set(p.id,p);let d=r.map(p=>{var y;let g=(y=p.originalDuration)!=null?y:p.duration,{total:v,trace:m}=V_(p,f);return{...p,originalDuration:g,duration:v,trace:m,startTime:p.startTime?(0,zt.default)(p.startTime):void 0}});for(let p=0;p<d.length;p++){let g=d[p];if(g.isAnchored){g.startTime&&(0,zt.default)(g.startTime).add(g.duration,"minutes").isAfter(l);continue}let v=!1;for(;!v;){let m=(0,zt.default)(l),y=g.status==="done"?0:g.duration,x=(0,zt.default)(l).add(y,"minutes"),$=o.find(S=>m.isBefore(S.end)&&x.isAfter(S.start));$?l=(0,zt.default)($.end):(g.startTime=m,l=x,v=!0)}}return d.sort((p,g)=>{let v=p.startTime?p.startTime.valueOf():Number.MAX_SAFE_INTEGER,m=g.startTime?g.startTime.valueOf():Number.MAX_SAFE_INTEGER;return v-m})}var zt,Ze=yn(()=>{"use strict";zt=rn(Hr(),1)});var eA,Tu,qo,An=yn(()=>{"use strict";eA=require("obsidian"),Tu=rn(Hr(),1),qo=class{constructor(t,n){k(this,"LOG_FILE","todo-flow.log");k(this,"enabled");k(this,"app");k(this,"buildId");this.app=t,this.enabled=n,this.buildId=typeof process!="undefined"?"2026-01-28T09-07-15":"unknown"}setEnabled(t){this.enabled=t}async log(t,n){if(!this.enabled)return;let o=`[${(0,Tu.default)().format("YYYY-MM-DD HH:mm:ss")}] [${this.buildId}] [${t}] ${n}
`;try{await this.app.vault.adapter.append(this.LOG_FILE,o)}catch(l){console.error("Failed to write to log file",l)}}async info(t){await this.log("INFO",t)}async warn(t){await this.log("WARN",t)}async error(t){await this.log("ERROR",t)}}});function oa(r,t,n){if(r&&r.task)return r.task;if(t&&t.trim().length>0&&!t.trim().startsWith("---"))return t.trim().replace(/^#+\s+/,"");let s=n.replace(/\.md$/,""),o=s.match(/^\d{12}_[a-z0-9]{3}_(.*)$/);return o&&o[1]?o[1]:s}function aa(r){let t=r.split(`
`),n=!1;for(let s of t){let o=s.trim();if(o==="---")if(n){n=!1;continue}else{n=!0;continue}if(!n&&o.length>0)return o}return null}var zl=yn(()=>{"use strict"});var kO,la,Au=yn(()=>{"use strict";kO=require("obsidian");Ze();zl();la=class{constructor(t){k(this,"app");this.app=t}async parse(t){let n=await this.app.vault.adapter.read(t),s=this.extractWikilinks(n);return await Promise.all(s.map(async l=>{var p,g,v;let f=this.app.metadataCache.getFirstLinkpathDest(l.path,t),d=f?f.path:l.path.endsWith(".md")?l.path:`${l.path}.md`,h=await this.resolveTaskMetadata(d);return{id:d,title:l.displayText||h.title,duration:(p=h.duration)!=null?p:30,status:(g=h.status)!=null?g:"todo",isAnchored:(v=h.isAnchored)!=null?v:!1,children:[]}}))}async resolveTaskMetadata(t){try{let n=this.getFilenameWithoutExtension(t);if(!await this.app.vault.adapter.exists(t))return{title:n};let o=await this.app.vault.adapter.read(t),l=/^---\s*\n([\s\S]*?)\n---/,f=o.match(l),d={};f&&f[1]&&(d=this.parseFrontmatter(f[1]));let h=aa(o);return{title:oa(d,h,t.split("/").pop()||t),duration:d.duration,status:d.status,isAnchored:d.anchored}}catch(n){return{title:this.getFilenameWithoutExtension(t)}}}extractWikilinks(t){var l,f;let n=[],s=/\[\[([^\]|]+)(?:\|([^\]]+))?\]\]/g,o;for(;(o=s.exec(t))!==null;){let d=(l=o[1])==null?void 0:l.trim(),h=(f=o[2])==null?void 0:f.trim();d&&n.push({path:d,...h&&{displayText:h}})}return n}extractMarkdownLinks(t){return[]}extractFirstHeading(t){let n=/^#\s+(.+)$/m,s=t.match(n);return s&&s[1]?s[1].trim():null}getFilenameWithoutExtension(t){return(t.split("/").pop()||t).replace(/\.md$/,"")}async updateTaskMetadata(t,n){try{let s=await this.app.vault.adapter.exists(t),o="";s&&(o=await this.app.vault.adapter.read(t));let l=this.updateFrontmatter(o,n);await this.app.vault.adapter.write(t,l)}catch(s){throw console.error(`Failed to update metadata for ${t}:`,s),s}}updateFrontmatter(t,n){let s=/^---\s*\n([\s\S]*?)\n---\n?/,o=t.match(s),l={},f=t;if(o&&o[1]){let p=o[1];l=this.parseFrontmatter(p),f=t.substring(o[0].length)}let d={...l,...this.convertMetadataToFrontmatter(n)};return`---
${this.serializeFrontmatter(d)}---
${f}`}parseFrontmatter(t){let n={},s=t.split(`
`);for(let o of s){let l=o.match(/^(\w+):\s*(.+)$/);if(l&&l[1]&&l[2]){let f=l[1],d=l[2];if(d.startsWith("[")||d.startsWith("{"))try{d=JSON.parse(d)}catch(h){}else d==="true"?d=!0:d==="false"?d=!1:isNaN(Number(d))||(d=Number(d));n[f]=d}}return n}serializeFrontmatter(t){let n=[];for(let[s,o]of Object.entries(t)){if(o===void 0)continue;let l;typeof o=="object"?l=JSON.stringify(o):l=String(o),n.push(`${s}: ${l}`)}return n.join(`
`)+`
`}convertMetadataToFrontmatter(t){let n={};return t.duration!==void 0&&(n.duration=t.duration),t.status!==void 0&&(n.status=t.status),t.isAnchored!==void 0&&(n.anchored=t.isAnchored),t.startTime!==void 0&&(n.startTime=t.startTime),n}}});var ca={};es(ca,{GraphBuilder:()=>Jn});var EO,Ou,Jn,Ui=yn(()=>{"use strict";EO=require("obsidian");Ze();zl();Ou=rn(Hr(),1),Jn=class{constructor(t){this.app=t}async buildGraph(t){return Promise.all(t.map(n=>this.buildNode(n,[])))}async buildNode(t,n){let s=this.app.metadataCache.getFileCache(t),o=(s==null?void 0:s.frontmatter)||{},l=o.status||"todo",f=await this.app.vault.read(t),d=aa(f),h={id:t.path,title:oa(o,d,t.name),duration:o.duration||30,isAnchored:o.anchored||!1,status:l,children:[],startTime:o.startTime?(0,Ou.default)(o.startTime):void 0};if(l==="done")return h;let p=this.app.metadataCache.resolvedLinks[t.path]||{},g=[],v=[...n,t.path];for(let m of Object.keys(p)){if(v.includes(m))continue;let y=this.app.vault.getAbstractFileByPath(m);y&&y.extension==="md"&&g.push(y)}return h.children=await Promise.all(g.map(m=>this.buildNode(m,v))),h}}});var jl={};es(jl,{TaskQueryService:()=>Gl});var Gl,Kl=yn(()=>{"use strict";Ui();Ze();An();Gl=class{constructor(t,n){this.app=t;this.logger=n}async getDumpedTasks(){return this.queryTasksByFlowState("dump")}async getShortlistedTasks(){return this.queryTasksByFlowState("shortlist")}async queryTasksByFlowState(t){let n=this.app.vault.getFiles();this.logger&&await this.logger.info(`[TaskQueryService] Searching for flow_state="${t}" in ${n.length} files...`);let s=n.filter(l=>{var h;let f=this.app.metadataCache.getCache(l.path),d=(h=f==null?void 0:f.frontmatter)==null?void 0:h.flow_state;return d===t?(this.logger&&this.logger.info(`[TaskQueryService] MATCH: ${l.path} has flow_state="${d}"`),!0):!1});return this.logger&&await this.logger.info(`[TaskQueryService] Found ${s.length} matches for "${t}".`),new Jn(this.app).buildGraph(s)}}});var Cu={};es(Cu,{StackLoader:()=>As});var ei,As,fa=yn(()=>{"use strict";ei=require("obsidian");Ze();Au();An();As=class{constructor(t,n){k(this,"app");k(this,"parser");k(this,"logger");this.app=t,this.logger=n,this.parser=new la(t)}async load(t){if(t==="QUERY:SHORTLIST")return this.loadShortlisted();let n=this.app.vault.getAbstractFileByPath(t);if(!n)return this.logger&&await this.logger.warn(`[StackLoader] [UNHAPPY] Path not found: "${t}"`),[];try{if(n instanceof ei.TFolder){let{GraphBuilder:s}=await Promise.resolve().then(()=>(Ui(),ca)),o=new s(this.app),l=n.children.filter(d=>d instanceof ei.TFile&&d.extension==="md"),f=await o.buildGraph(l);return f.length===0&&this.logger&&await this.logger.warn(`[StackLoader] Folder "${t}" loaded 0 tasks.`),f}else if(n instanceof ei.TFile){let o=(await this.parser.parse(t)).map(d=>this.app.vault.getAbstractFileByPath(d.id)).filter(d=>d instanceof ei.TFile),{GraphBuilder:l}=await Promise.resolve().then(()=>(Ui(),ca));return await new l(this.app).buildGraph(o)}}catch(s){this.logger&&await this.logger.error(`[StackLoader] CRITICAL ERROR loading path "${t}": ${s}`),console.error(s)}return[]}async loadShortlisted(){let{TaskQueryService:t}=await Promise.resolve().then(()=>(Kl(),jl));this.logger&&await this.logger.info("[StackLoader] loadShortlisted() called.");let s=await new t(this.app,this.logger).getShortlistedTasks();return this.logger&&await this.logger.info(`[StackLoader] loadShortlisted() returning ${s.length} tasks.`),s}async loadSpecificFiles(t){this.logger&&await this.logger.info(`[StackLoader] loadSpecificFiles() entry with ${t.length} IDs.`);let n=[];for(let l of t){let f=this.app.vault.getAbstractFileByPath(l);f instanceof ei.TFile&&f.extension==="md"?(n.push(f),this.logger&&await this.logger.info(`[StackLoader] RESOLVED: ${l}`)):this.logger&&await this.logger.info(`[StackLoader] FAILED: ${l} (Not found or not markdown)`)}this.logger&&await this.logger.info(`[StackLoader] Total Resolved: ${n.length} valid files.`);let{GraphBuilder:s}=await Promise.resolve().then(()=>(Ui(),ca));return await new s(this.app).buildGraph(n)}}});var Rs={};es(Rs,{FileSuggester:()=>Ql,FolderSuggester:()=>Zl});var Cs,Zl,Ql,Fs=yn(()=>{"use strict";Cs=require("obsidian"),Zl=class extends Cs.FuzzySuggestModal{constructor(n,s){super(n);this.onChoose=s}getItems(){return this.app.vault.getAllLoadedFiles().filter(n=>n instanceof Cs.TFolder)}getItemText(n){return n.path}onChooseItem(n,s){this.onChoose(n)}},Ql=class extends Cs.FuzzySuggestModal{constructor(n,s){super(n);this.onChoose=s}getItems(){return this.app.vault.getMarkdownFiles()}getItemText(n){return n.path}onChooseItem(n,s){this.onChoose(n)}}});var wg={};es(wg,{default:()=>ma});module.exports=Tm(wg);var ut=require("obsidian");var bu=require("obsidian");var to=!0;var Vc,Hc,Uc=(Hc=(Vc=globalThis.process)==null?void 0:Vc.env)==null?void 0:Hc.NODE_ENV,E=Uc&&!Uc.toLowerCase().startsWith("prod");var br=Array.isArray,Wc=Array.prototype.indexOf,ui=Array.from,Pa=Object.keys,Xe=Object.defineProperty,yt=Object.getOwnPropertyDescriptor,ro=Object.getOwnPropertyDescriptors,Ya=Object.prototype,Bc=Array.prototype,Ln=Object.getPrototypeOf,Ua=Object.isExtensible;function Va(r){return typeof r=="function"}var wt=()=>{};function zc(r){return r()}function di(r){for(var t=0;t<r.length;t++)r[t]()}function no(){var r,t,n=new Promise((s,o)=>{r=s,t=o});return{promise:n,resolve:r,reject:t}}var Be=Symbol("$state"),ts=Symbol("legacy props"),Gc=Symbol(""),io=Symbol("proxy path"),Tr=new class extends Error{constructor(){super(...arguments);k(this,"name","StaleReactionError");k(this,"message","The reaction that called `getAbortSignal()` was re-run or destroyed")}};var rs=3,kt=8;function so(r){if(E){let t=new Error(`lifecycle_outside_component
\`${r}(...)\` can only be used during component initialisation
https://svelte.dev/e/lifecycle_outside_component`);throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function jc(){if(E){let r=new Error("async_derived_orphan\nCannot create a `$derived(...)` with an `await` expression outside of an effect tree\nhttps://svelte.dev/e/async_derived_orphan");throw r.name="Svelte error",r}else throw new Error("https://svelte.dev/e/async_derived_orphan")}function Ha(){if(E){let r=new Error("bind_invalid_checkbox_value\nUsing `bind:value` together with a checkbox input is not allowed. Use `bind:checked` instead\nhttps://svelte.dev/e/bind_invalid_checkbox_value");throw r.name="Svelte error",r}else throw new Error("https://svelte.dev/e/bind_invalid_checkbox_value")}function Kc(){if(E){let r=new Error(`derived_references_self
A derived value cannot reference itself recursively
https://svelte.dev/e/derived_references_self`);throw r.name="Svelte error",r}else throw new Error("https://svelte.dev/e/derived_references_self")}function qc(r){if(E){let t=new Error(`effect_in_teardown
\`${r}\` cannot be used inside an effect cleanup function
https://svelte.dev/e/effect_in_teardown`);throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/effect_in_teardown")}function Zc(){if(E){let r=new Error("effect_in_unowned_derived\nEffect cannot be created inside a `$derived` value that was not itself created inside an effect\nhttps://svelte.dev/e/effect_in_unowned_derived");throw r.name="Svelte error",r}else throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Qc(r){if(E){let t=new Error(`effect_orphan
\`${r}\` can only be used inside an effect (e.g. during component initialisation)
https://svelte.dev/e/effect_orphan`);throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/effect_orphan")}function Xc(){if(E){let r=new Error(`effect_update_depth_exceeded
Maximum update depth exceeded. This typically indicates that an effect reads and writes the same piece of state
https://svelte.dev/e/effect_update_depth_exceeded`);throw r.name="Svelte error",r}else throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Jc(){if(E){let r=new Error(`hydration_failed
Failed to hydrate the application
https://svelte.dev/e/hydration_failed`);throw r.name="Svelte error",r}else throw new Error("https://svelte.dev/e/hydration_failed")}function ef(r){if(E){let t=new Error(`props_invalid_value
Cannot do \`bind:${r}={undefined}\` when \`${r}\` has a fallback value
https://svelte.dev/e/props_invalid_value`);throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/props_invalid_value")}function tf(r){if(E){let t=new Error(`rune_outside_svelte
The \`${r}\` rune is only available inside \`.svelte\` and \`.svelte.js/ts\` files
https://svelte.dev/e/rune_outside_svelte`);throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/rune_outside_svelte")}function rf(){if(E){let r=new Error("state_descriptors_fixed\nProperty descriptors defined on `$state` objects must contain `value` and always be `enumerable`, `configurable` and `writable`.\nhttps://svelte.dev/e/state_descriptors_fixed");throw r.name="Svelte error",r}else throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function nf(){if(E){let r=new Error("state_prototype_fixed\nCannot set prototype of `$state` object\nhttps://svelte.dev/e/state_prototype_fixed");throw r.name="Svelte error",r}else throw new Error("https://svelte.dev/e/state_prototype_fixed")}function sf(){if(E){let r=new Error("state_unsafe_mutation\nUpdating state inside `$derived(...)`, `$inspect(...)` or a template expression is forbidden. If the value should not be reactive, declare it without `$state`\nhttps://svelte.dev/e/state_unsafe_mutation");throw r.name="Svelte error",r}else throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function of(){if(E){let r=new Error("svelte_boundary_reset_onerror\nA `<svelte:boundary>` `reset` function cannot be called while an error is still being handled\nhttps://svelte.dev/e/svelte_boundary_reset_onerror");throw r.name="Svelte error",r}else throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}var nn={};var ke=Symbol(),qt=Symbol("filename");var af="http://www.w3.org/1999/xhtml";var wn="font-weight: bold",kn="font-weight: normal";function lf(r,t){E?console.warn(`%c[svelte] await_waterfall
%cAn async derived, \`${r}\` (${t}) was not read immediately after it resolved. This often indicates an unnecessary waterfall, which can slow down your app
https://svelte.dev/e/await_waterfall`,wn,kn):console.warn("https://svelte.dev/e/await_waterfall")}function cf(r,t,n){E?console.warn(`%c[svelte] hydration_attribute_changed
%cThe \`${r}\` attribute on \`${t}\` changed its value between server and client renders. The client value, \`${n}\`, will be ignored in favour of the server value
https://svelte.dev/e/hydration_attribute_changed`,wn,kn):console.warn("https://svelte.dev/e/hydration_attribute_changed")}function Pn(r){E?console.warn(`%c[svelte] hydration_mismatch
%c${r?`Hydration failed because the initial UI does not match what was rendered on the server. The error occurred near ${r}`:"Hydration failed because the initial UI does not match what was rendered on the server"}
https://svelte.dev/e/hydration_mismatch`,wn,kn):console.warn("https://svelte.dev/e/hydration_mismatch")}function ff(){E?console.warn(`%c[svelte] lifecycle_double_unmount
%cTried to unmount a component that was not mounted
https://svelte.dev/e/lifecycle_double_unmount`,wn,kn):console.warn("https://svelte.dev/e/lifecycle_double_unmount")}function oo(r){E?console.warn(`%c[svelte] state_proxy_equality_mismatch
%cReactive \`$state(...)\` proxies and the values they proxy have different identities. Because of this, comparisons with \`${r}\` will produce unexpected results
https://svelte.dev/e/state_proxy_equality_mismatch`,wn,kn):console.warn("https://svelte.dev/e/state_proxy_equality_mismatch")}function uf(){E?console.warn(`%c[svelte] state_proxy_unmount
%cTried to unmount a state proxy, rather than a component
https://svelte.dev/e/state_proxy_unmount`,wn,kn):console.warn("https://svelte.dev/e/state_proxy_unmount")}function df(){E?console.warn("%c[svelte] svelte_boundary_reset_noop\n%cA `<svelte:boundary>` `reset` function only resets the boundary the first time it is called\nhttps://svelte.dev/e/svelte_boundary_reset_noop",wn,kn):console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function hf(r){E?console.warn(`%c[svelte] transition_slide_display
%cThe \`slide\` transition does not work correctly for elements with \`display: ${r}\`
https://svelte.dev/e/transition_slide_display`,wn,kn):console.warn("https://svelte.dev/e/transition_slide_display")}var L=!1;function ze(r){L=r}var K;function me(r){if(r===null)throw Pn(),nn;return K=r}function tt(){return me(rt(K))}function R(r){if(L){if(rt(K)!==null)throw Pn(),nn;K=r}}function Le(r=1){if(L){for(var t=r,n=K;t--;)n=rt(n);K=n}}function on(r=!0){for(var t=0,n=K;;){if(n.nodeType===kt){var s=n.data;if(s==="]"){if(t===0)return n;t-=1}else(s==="["||s==="[!")&&(t+=1)}var o=rt(n);r&&n.remove(),n=o}}function lo(r){if(!r||r.nodeType!==kt)throw Pn(),nn;return r.data}function co(r){return r===this.v}function fo(r,t){return r!=r?t==t:r!==t||r!==null&&typeof r=="object"||typeof r=="function"}function uo(r){return!fo(r,this.v)}var ot=!1,Sr=!1,sr=!1;function pf(){Sr=!0}var ns=null;function xt(r,t){return r.label=t,ho(r.v,t),r}function ho(r,t){var n;return(n=r==null?void 0:r[io])==null||n.call(r,t),r}function Er(r){let t=new Error,n=Em();return n.length===0?null:(n.unshift(`
`),Xe(t,"stack",{value:n.join(`
`)}),Xe(t,"name",{value:r}),t)}function Em(){let r=Error.stackTraceLimit;Error.stackTraceLimit=1/0;let t=new Error().stack;if(Error.stackTraceLimit=r,!t)return[];let n=t.split(`
`),s=[];for(let o=0;o<n.length;o++){let l=n[o],f=l.replaceAll("\\","/");if(l.trim()!=="Error"){if(l.includes("validate_each_keys"))return[];f.includes("svelte/src/internal")||f.includes("node_modules/.vite")||s.push(l)}}return s}var Q=null;function an(r){Q=r}var $r=null;function pi(r){$r=r}var or=null;function po(r){or=r}function ar(r,t=!1,n){Q={p:Q,i:!1,c:null,e:null,s:r,x:null,l:Sr&&!t?{s:null,u:null,$:[]}:null},E&&(Q.function=n,or=n)}function lr(r){var o;var t=Q,n=t.e;if(n!==null){t.e=null;for(var s of n)Ba(s)}return r!==void 0&&(t.x=r),t.i=!0,Q=t.p,E&&(or=(o=Q==null?void 0:Q.function)!=null?o:null),r!=null?r:{}}function Dr(){return!Sr||Q!==null&&Q.l===null}var Yn=[];function _f(){var r=Yn;Yn=[],di(r)}function $e(r){if(Yn.length===0&&!Un){var t=Yn;queueMicrotask(()=>{t===Yn&&_f()})}Yn.push(r)}function gf(){for(;Yn.length>0;)_f()}var za=new WeakMap;function mo(r){var t=Y;if(t===null)return H.f|=8388608,r;if(E&&r instanceof Error&&!za.has(r)&&za.set(r,$m(r,t)),(t.f&32768)===0){if((t.f&128)===0)throw E&&!t.parent&&r instanceof Error&&vf(r),r;t.b.error(r)}else Nr(r,t)}function Nr(r,t){for(;t!==null;){if((t.f&128)!==0)try{t.b.error(r);return}catch(n){r=n}t=t.parent}throw E&&r instanceof Error&&vf(r),r}function $m(r,t){var f,d,h;let n=yt(r,"message");if(!(n&&!n.configurable)){for(var s=is?"  ":"	",o=`
${s}in ${((f=t.fn)==null?void 0:f.name)||"<unknown>"}`,l=t.ctx;l!==null;)o+=`
${s}in ${(d=l.function)==null?void 0:d[qt].split("/").pop()}`,l=l.p;return{message:r.message+`
${o}
`,stack:(h=r.stack)==null?void 0:h.split(`
`).filter(p=>!p.includes("svelte/src/internal")).join(`
`)}}}function vf(r){let t=za.get(r);t&&(Xe(r,"message",{value:t.message}),Xe(r,"stack",{value:t.stack}))}var Dm=-7169;function ve(r,t){r.f=r.f&Dm|t}function _i(r){(r.f&512)!==0||r.deps===null?ve(r,1024):ve(r,4096)}function yf(r){if(r!==null)for(let t of r)(t.f&2)===0||(t.f&32768)===0||(t.f^=32768,yf(t.deps))}function _o(r,t,n){(r.f&2048)!==0?t.add(r):(r.f&4096)!==0&&n.add(r),yf(r.deps),ve(r,1024)}var gi=new Set,Z=null,as=null,He=null,Lt=[],vo=null,Ga=!1,Un=!1,vi,yi,Vn,wi,ls,ki,xi,bi,Ar,ja,Ka,kf,Za=class Za{constructor(){G(this,Ar);k(this,"committed",!1);k(this,"current",new Map);k(this,"previous",new Map);G(this,vi,new Set);G(this,yi,new Set);G(this,Vn,0);G(this,wi,0);G(this,ls,null);G(this,ki,new Set);G(this,xi,new Set);k(this,"skipped_effects",new Set);k(this,"is_fork",!1);G(this,bi,!1)}is_deferred(){return this.is_fork||w(this,wi)>0}process(t){var o;Lt=[],this.apply();var n=[],s=[];for(let l of t)Ie(this,Ar,ja).call(this,l,n,s);if(this.is_deferred())Ie(this,Ar,Ka).call(this,s),Ie(this,Ar,Ka).call(this,n);else{for(let l of w(this,vi))l();w(this,vi).clear(),w(this,Vn)===0&&Ie(this,Ar,kf).call(this),as=this,Z=null,wf(s),wf(n),as=null,(o=w(this,ls))==null||o.resolve()}He=null}capture(t,n){n!==ke&&!this.previous.has(t)&&this.previous.set(t,n),(t.f&8388608)===0&&(this.current.set(t,t.v),He==null||He.set(t,t.v))}activate(){Z=this,this.apply()}deactivate(){Z===this&&(Z=null,He=null)}flush(){if(this.activate(),Lt.length>0){if(qa(),Z!==null&&Z!==this)return}else w(this,Vn)===0&&this.process([]);this.deactivate()}discard(){for(let t of w(this,yi))t(this);w(this,yi).clear()}increment(t){z(this,Vn,w(this,Vn)+1),t&&z(this,wi,w(this,wi)+1)}decrement(t){z(this,Vn,w(this,Vn)-1),t&&z(this,wi,w(this,wi)-1),!w(this,bi)&&(z(this,bi,!0),$e(()=>{z(this,bi,!1),this.is_deferred()?Lt.length>0&&this.flush():this.revive()}))}revive(){for(let t of w(this,ki))w(this,xi).delete(t),ve(t,2048),Pt(t);for(let t of w(this,xi))ve(t,4096),Pt(t);this.flush()}oncommit(t){w(this,vi).add(t)}ondiscard(t){w(this,yi).add(t)}settled(){var t;return((t=w(this,ls))!=null?t:z(this,ls,no())).promise}static ensure(){if(Z===null){let t=Z=new Za;gi.add(Z),Un||$e(()=>{Z===t&&t.flush()})}return Z}apply(){if(!(!ot||!this.is_fork&&gi.size===1)){He=new Map(this.current);for(let t of gi)if(t!==this)for(let[n,s]of t.previous)He.has(n)||He.set(n,s)}}};vi=new WeakMap,yi=new WeakMap,Vn=new WeakMap,wi=new WeakMap,ls=new WeakMap,ki=new WeakMap,xi=new WeakMap,bi=new WeakMap,Ar=new WeakSet,ja=function(t,n,s){var m;t.f^=1024;for(var o=t.first,l=null;o!==null;){var f=o.f,d=(f&96)!==0,h=d&&(f&1024)!==0,p=h||(f&8192)!==0||this.skipped_effects.has(o);if(ot&&l===null&&(f&128)!==0&&((m=o.b)!=null&&m.is_pending)&&(l=o),!p&&o.fn!==null){d?o.f^=1024:l!==null&&(f&16777228)!==0?l.b.defer_effect(o):(f&4)!==0?n.push(o):ot&&(f&16777224)!==0?s.push(o):Sn(o)&&((f&16)!==0&&w(this,ki).add(o),Tn(o));var g=o.first;if(g!==null){o=g;continue}}var v=o.parent;for(o=o.next;o===null&&v!==null;)v===l&&(l=null),o=v.next,v=v.parent}},Ka=function(t){for(var n=0;n<t.length;n+=1)_o(t[n],w(this,ki),w(this,xi))},kf=function(){var o;if(gi.size>1){this.previous.clear();var t=He,n=!0;for(let l of gi){if(l===this){n=!1;continue}let f=[];for(let[h,p]of this.current){if(l.current.has(h))if(n&&p!==l.current.get(h))l.current.set(h,p);else continue;f.push(h)}if(f.length===0)continue;let d=[...l.current.keys()].filter(h=>!this.current.has(h));if(d.length>0){var s=Lt;Lt=[];let h=new Set,p=new Map;for(let g of f)xf(g,d,h,p);if(Lt.length>0){Z=l,l.apply();for(let g of Lt)Ie(o=l,Ar,ja).call(o,g,[],[]);l.deactivate()}Lt=s}}Z=null,He=t}this.committed=!0,gi.delete(this)};var St=Za;function Wn(r){var t=Un;Un=!0;try{var n;for(r&&(Z!==null&&qa(),n=r());;){if(gf(),Lt.length===0&&(Z==null||Z.flush(),Lt.length===0))return vo=null,n;qa()}}finally{Un=t}}function qa(){var l;Ga=!0;var r=E?new Set:null;try{for(var t=0;Lt.length>0;){var n=St.ensure();if(t++>1e3){if(E){var s=new Map;for(let f of n.current.keys())for(let[d,h]of(l=f.updated)!=null?l:[]){var o=s.get(d);o||(o={error:h.error,count:0},s.set(d,o)),o.count+=h.count}for(let f of s.values())f.error&&console.error(f.error)}Nm()}if(n.process(Lt),Or.clear(),E)for(let f of n.current.keys())r.add(f)}}finally{if(Ga=!1,vo=null,E)for(let f of r)f.updated=null}}function Nm(){try{Xc()}catch(r){E&&Xe(r,"stack",{value:""}),Nr(r,vo)}}var bt=null;function wf(r){var t=r.length;if(t!==0){for(var n=0;n<t;){var s=r[n++];if((s.f&24576)===0&&Sn(s)&&(bt=new Set,Tn(s),s.deps===null&&s.first===null&&s.nodes===null&&(s.teardown===null&&s.ac===null?Qa(s):s.fn=null),(bt==null?void 0:bt.size)>0)){Or.clear();for(let o of bt){if((o.f&24576)!==0)continue;let l=[o],f=o.parent;for(;f!==null;)bt.has(f)&&(bt.delete(f),l.push(f)),f=f.parent;for(let d=l.length-1;d>=0;d--){let h=l[d];(h.f&24576)===0&&Tn(h)}}bt.clear()}}bt=null}}function xf(r,t,n,s){if(!n.has(r)&&(n.add(r),r.reactions!==null))for(let o of r.reactions){let l=o.f;(l&2)!==0?xf(o,t,n,s):(l&4194320)!==0&&(l&2048)===0&&bf(o,t,s)&&(ve(o,2048),Pt(o))}}function bf(r,t,n){let s=n.get(r);if(s!==void 0)return s;if(r.deps!==null)for(let o of r.deps){if(t.includes(o))return!0;if((o.f&2)!==0&&bf(o,t,n))return n.set(o,!0),!0}return n.set(r,!1),!1}function Pt(r){for(var t=vo=r;t.parent!==null;){t=t.parent;var n=t.f;if(Ga&&t===Y&&(n&16)!==0&&(n&262144)===0)return;if((n&96)!==0){if((n&1024)===0)return;t.f^=1024}}Lt.push(t)}function Sf(r){let t=0,n=at(0),s;return E&&xt(n,"createSubscriber version"),()=>{bn()&&(T(n),Ge(()=>(t===0&&(s=P(()=>r(()=>Bn(n)))),t+=1,()=>{$e(()=>{t-=1,t===0&&(s==null||s(),s=void 0,Bn(n))})})))}}var Om=589952;function tl(r,t,n){new Xa(r,t,n)}var Yt,cs,Cr,zn,Rr,Zt,$t,Fr,ln,En,Gn,cn,Ei,jn,$i,Di,Ir,bo,Pe,Ef,$f,Ja,ko,xo,el,Xa=class{constructor(t,n,s){G(this,Pe);k(this,"parent");k(this,"is_pending",!1);G(this,Yt);G(this,cs,L?K:null);G(this,Cr);G(this,zn);G(this,Rr);G(this,Zt,null);G(this,$t,null);G(this,Fr,null);G(this,ln,null);G(this,En,null);G(this,Gn,0);G(this,cn,0);G(this,Ei,!1);G(this,jn,!1);G(this,$i,new Set);G(this,Di,new Set);G(this,Ir,null);G(this,bo,Sf(()=>(z(this,Ir,at(w(this,Gn))),E&&xt(w(this,Ir),"$effect.pending()"),()=>{z(this,Ir,null)})));z(this,Yt,t),z(this,Cr,n),z(this,zn,s),this.parent=Y.b,this.is_pending=!!w(this,Cr).pending,z(this,Rr,Ut(()=>{if(Y.b=this,L){let l=w(this,cs);tt(),l.nodeType===kt&&l.data==="[!"?Ie(this,Pe,$f).call(this):(Ie(this,Pe,Ef).call(this),w(this,cn)===0&&(this.is_pending=!1))}else{var o=Ie(this,Pe,Ja).call(this);try{z(this,Zt,je(()=>s(o)))}catch(l){this.error(l)}w(this,cn)>0?Ie(this,Pe,xo).call(this):this.is_pending=!1}return()=>{var l;(l=w(this,En))==null||l.remove()}},Om)),L&&z(this,Yt,K)}defer_effect(t){_o(t,w(this,$i),w(this,Di))}is_rendered(){return!this.is_pending&&(!this.parent||this.parent.is_rendered())}has_pending_snippet(){return!!w(this,Cr).pending}update_pending_count(t){Ie(this,Pe,el).call(this,t),z(this,Gn,w(this,Gn)+t),!(!w(this,Ir)||w(this,Ei))&&(z(this,Ei,!0),$e(()=>{z(this,Ei,!1),w(this,Ir)&&dr(w(this,Ir),w(this,Gn))}))}get_effect_pending(){return w(this,bo).call(this),T(w(this,Ir))}error(t){var n=w(this,Cr).onerror;let s=w(this,Cr).failed;if(w(this,jn)||!n&&!s)throw t;w(this,Zt)&&(De(w(this,Zt)),z(this,Zt,null)),w(this,$t)&&(De(w(this,$t)),z(this,$t,null)),w(this,Fr)&&(De(w(this,Fr)),z(this,Fr,null)),L&&(me(w(this,cs)),Le(),me(on()));var o=!1,l=!1;let f=()=>{if(o){df();return}o=!0,l&&of(),St.ensure(),z(this,Gn,0),w(this,Fr)!==null&&Lr(w(this,Fr),()=>{z(this,Fr,null)}),this.is_pending=this.has_pending_snippet(),z(this,Zt,Ie(this,Pe,ko).call(this,()=>(z(this,jn,!1),je(()=>w(this,zn).call(this,w(this,Yt)))))),w(this,cn)>0?Ie(this,Pe,xo).call(this):this.is_pending=!1};var d=H;try{Ae(null),l=!0,n==null||n(t,f),l=!1}catch(h){Nr(h,w(this,Rr)&&w(this,Rr).parent)}finally{Ae(d)}s&&$e(()=>{z(this,Fr,Ie(this,Pe,ko).call(this,()=>{St.ensure(),z(this,jn,!0);try{return je(()=>{s(w(this,Yt),()=>t,()=>f)})}catch(h){return Nr(h,w(this,Rr).parent),null}finally{z(this,jn,!1)}}))})}};Yt=new WeakMap,cs=new WeakMap,Cr=new WeakMap,zn=new WeakMap,Rr=new WeakMap,Zt=new WeakMap,$t=new WeakMap,Fr=new WeakMap,ln=new WeakMap,En=new WeakMap,Gn=new WeakMap,cn=new WeakMap,Ei=new WeakMap,jn=new WeakMap,$i=new WeakMap,Di=new WeakMap,Ir=new WeakMap,bo=new WeakMap,Pe=new WeakSet,Ef=function(){try{z(this,Zt,je(()=>w(this,zn).call(this,w(this,Yt))))}catch(t){this.error(t)}},$f=function(){let t=w(this,Cr).pending;t&&(z(this,$t,je(()=>t(w(this,Yt)))),$e(()=>{var n=Ie(this,Pe,Ja).call(this);z(this,Zt,Ie(this,Pe,ko).call(this,()=>(St.ensure(),je(()=>w(this,zn).call(this,n))))),w(this,cn)>0?Ie(this,Pe,xo).call(this):(Lr(w(this,$t),()=>{z(this,$t,null)}),this.is_pending=!1)}))},Ja=function(){var t=w(this,Yt);return this.is_pending&&(z(this,En,qe()),w(this,Yt).before(w(this,En)),t=w(this,En)),t},ko=function(t){var n=Y,s=H,o=Q;Ke(w(this,Rr)),Ae(w(this,Rr)),an(w(this,Rr).ctx);try{return t()}catch(l){return mo(l),null}finally{Ke(n),Ae(s),an(o)}},xo=function(){let t=w(this,Cr).pending;w(this,Zt)!==null&&(z(this,ln,document.createDocumentFragment()),w(this,ln).append(w(this,En)),To(w(this,Zt),w(this,ln))),w(this,$t)===null&&z(this,$t,je(()=>t(w(this,Yt))))},el=function(t){var n;if(!this.has_pending_snippet()){this.parent&&Ie(n=this.parent,Pe,el).call(n,t);return}if(z(this,cn,w(this,cn)+t),w(this,cn)===0){this.is_pending=!1;for(let s of w(this,$i))ve(s,2048),Pt(s);for(let s of w(this,Di))ve(s,4096),Pt(s);w(this,$i).clear(),w(this,Di).clear(),w(this,$t)&&Lr(w(this,$t),()=>{z(this,$t,null)}),w(this,ln)&&(w(this,Yt).before(w(this,ln)),z(this,ln,null))}};function So(r,t,n,s){let o=Dr()?$n:Kn;var l=r.filter(m=>!m.settled);if(n.length===0&&l.length===0){s(t.map(o));return}var f=Z,d=Y,h=Df(),p=l.length===1?l[0].promise:l.length>1?Promise.all(l.map(m=>m.promise)):null;function g(m){h();try{s(m)}catch(y){(d.f&16384)===0&&Nr(y,d)}f==null||f.deactivate(),fs()}if(n.length===0){p.then(()=>g(t.map(o)));return}function v(){h(),Promise.all(n.map(m=>nl(m))).then(m=>g([...t.map(o),...m])).catch(m=>Nr(m,d))}p?p.then(v):v()}function Df(){var r=Y,t=H,n=Q,s=Z;if(E)var o=$r;return function(f=!0){Ke(r),Ae(t),an(n),f&&(s==null||s.activate()),E&&(rl(null),pi(o))}}function fs(){Ke(null),Ae(null),an(null),E&&(rl(null),pi(null))}var us=null;function rl(r){us=r}var ds=new Set;function $n(r){var t=2050,n=H!==null&&(H.f&2)!==0?H:null;Y!==null&&(Y.f|=524288);let s={ctx:Q,deps:null,effects:null,equals:co,f:t,fn:r,reactions:null,rv:0,v:ke,wv:0,parent:n!=null?n:Y,ac:null};return E&&sr&&(s.created=Er("created at")),s}function nl(r,t,n){let s=Y;s===null&&jc();var o=s.b,l=void 0,f=at(ke);E&&(f.label=t);var d=!H,h=new Map;return Mf(()=>{var y;E&&(us=Y);var p=no();l=p.promise;try{Promise.resolve(r()).then(p.resolve,p.reject).then(()=>{g===Z&&g.committed&&g.deactivate(),fs()})}catch(x){p.reject(x),fs()}E&&(us=null);var g=Z;if(d){var v=o.is_rendered();o.update_pending_count(1),g.increment(v),(y=h.get(g))==null||y.reject(Tr),h.delete(g),h.set(g,p)}let m=(x,$=void 0)=>{if(us=null,g.activate(),$)$!==Tr&&(f.f|=8388608,dr(f,$));else{(f.f&8388608)!==0&&(f.f^=8388608),dr(f,x);for(let[S,M]of h){if(h.delete(S),S===g)break;M.reject(Tr)}E&&n!==void 0&&(ds.add(f),setTimeout(()=>{ds.has(f)&&(lf(f.label,n),ds.delete(f))}))}d&&(o.update_pending_count(-1),g.decrement(v))};p.promise.then(m,x=>m(null,x||"unknown"))}),lt(()=>{for(let p of h.values())p.reject(Tr)}),E&&(f.f|=4194304),new Promise(p=>{function g(v){function m(){v===l?p(f):g(l)}v.then(m,m)}g(l)})}function sl(r){let t=$n(r);return ot||Do(t),t}function Kn(r){let t=$n(r);return t.equals=uo,t}function Eo(r){var t=r.effects;if(t!==null){r.effects=null;for(var n=0;n<t.length;n+=1)De(t[n])}}var il=[];function Fm(r){for(var t=r.parent;t!==null;){if((t.f&2)===0)return(t.f&16384)===0?t:null;t=t.parent}return null}function hs(r){var t,n=Y;if(Ke(Fm(r)),E){let s=qn;yo(new Set);try{il.includes(r)&&Kc(),il.push(r),r.f&=-32769,Eo(r),t=$o(r)}finally{Ke(n),yo(s),il.pop()}}else try{r.f&=-32769,Eo(r),t=$o(r)}finally{Ke(n)}return t}function ol(r){var n,s;var t=hs(r);if(!r.equals(t)&&(r.wv=Si(),(!((n=Z)!=null&&n.is_fork)||r.deps===null)&&(r.v=t,r.deps===null))){ve(r,1024);return}Qt||(He!==null?(bn()||(s=Z)!=null&&s.is_fork)&&He.set(r,t):_i(r))}var qn=new Set,Or=new Map;function yo(r){qn=r}var al=!1;function Nf(){al=!0}function at(r,t){var n={f:0,v:r,reactions:null,equals:co,rv:0,wv:0};return E&&sr&&(n.created=t!=null?t:Er("created at"),n.updated=null,n.set_during_effect=!1,n.trace=null),n}function Oe(r,t){let n=at(r,t);return Do(n),n}function Pr(r,t=!1,n=!0){var o,l;let s=at(r);return t||(s.equals=uo),Sr&&n&&Q!==null&&Q.l!==null&&((l=(o=Q.l).s)!=null?l:o.s=[]).push(s),s}function U(r,t,n=!1){var o;H!==null&&(!Nt||(H.f&131072)!==0)&&Dr()&&(H.f&4325394)!==0&&!((o=At)!=null&&o.includes(r))&&sf();let s=n?Mt(t):t;return E&&ho(s,r.label),dr(r,s)}function dr(r,t){var o,l,f;if(!r.equals(t)){var n=r.v;Qt?Or.set(r,t):Or.set(r,n),r.v=t;var s=St.ensure();if(s.capture(r,n),E){if(sr||Y!==null){(o=r.updated)!=null||(r.updated=new Map);let d=((f=(l=r.updated.get(""))==null?void 0:l.count)!=null?f:0)+1;if(r.updated.set("",{error:null,count:d}),sr||d>5){let h=Er("updated at");if(h!==null){let p=r.updated.get(h.stack);p||(p={error:h,count:0},r.updated.set(h.stack,p)),p.count++}}}Y!==null&&(r.set_during_effect=!0)}if((r.f&2)!==0){let d=r;(r.f&2048)!==0&&hs(d),_i(d)}r.wv=Si(),Af(r,2048),Dr()&&Y!==null&&(Y.f&1024)!==0&&(Y.f&96)===0&&(Vt===null?Of([r]):Vt.push(r)),!s.is_fork&&qn.size>0&&!al&&wo()}return t}function wo(){al=!1;for(let r of qn)(r.f&1024)!==0&&ve(r,4096),Sn(r)&&Tn(r);qn.clear()}function Bn(r){U(r,r.v+1)}function Af(r,t){var g;var n=r.reactions;if(n!==null)for(var s=Dr(),o=n.length,l=0;l<o;l++){var f=n[l],d=f.f;if(!(!s&&f===Y)){if(E&&(d&131072)!==0){qn.add(f);continue}var h=(d&2048)===0;if(h&&ve(f,t),(d&2)!==0){var p=f;(g=He)==null||g.delete(p),(d&32768)===0&&(d&512&&(f.f|=32768),Af(p,4096))}else h&&((d&16)!==0&&bt!==null&&bt.add(f),Pt(f))}}}var Im=/^[a-zA-Z_$][a-zA-Z_$0-9]*$/;function Mt(r){if(typeof r!="object"||r===null||Be in r)return r;let t=Ln(r);if(t!==Ya&&t!==Bc)return r;var n=new Map,s=br(r),o=Oe(0),l=E&&sr?Er("created at"):null,f=Dn,d=v=>{if(Dn===f)return v();var m=H,y=Dn;Ae(null),ll(f);var x=v();return Ae(m),ll(y),x};s&&(n.set("length",Oe(r.length,l)),E&&(r=Pm(r)));var h="";let p=!1;function g(v){if(!p){p=!0,h=v,xt(o,`${h} version`);for(let[m,y]of n)xt(y,Zn(h,m));p=!1}}return new Proxy(r,{defineProperty(v,m,y){(!("value"in y)||y.configurable===!1||y.enumerable===!1||y.writable===!1)&&rf();var x=n.get(m);return x===void 0?x=d(()=>{var $=Oe(y.value,l);return n.set(m,$),E&&typeof m=="string"&&xt($,Zn(h,m)),$}):U(x,y.value,!0),!0},deleteProperty(v,m){var y=n.get(m);if(y===void 0){if(m in v){let x=d(()=>Oe(ke,l));n.set(m,x),Bn(o),E&&xt(x,Zn(h,m))}}else U(y,ke),Bn(o);return!0},get(v,m,y){var M;if(m===Be)return r;if(E&&m===io)return g;var x=n.get(m),$=m in v;if(x===void 0&&(!$||(M=yt(v,m))!=null&&M.writable)&&(x=d(()=>{var V=Mt($?v[m]:ke),se=Oe(V,l);return E&&xt(se,Zn(h,m)),se}),n.set(m,x)),x!==void 0){var S=T(x);return S===ke?void 0:S}return Reflect.get(v,m,y)},getOwnPropertyDescriptor(v,m){var y=Reflect.getOwnPropertyDescriptor(v,m);if(y&&"value"in y){var x=n.get(m);x&&(y.value=T(x))}else if(y===void 0){var $=n.get(m),S=$==null?void 0:$.v;if($!==void 0&&S!==ke)return{enumerable:!0,configurable:!0,value:S,writable:!0}}return y},has(v,m){var S;if(m===Be)return!0;var y=n.get(m),x=y!==void 0&&y.v!==ke||Reflect.has(v,m);if(y!==void 0||Y!==null&&(!x||(S=yt(v,m))!=null&&S.writable)){y===void 0&&(y=d(()=>{var M=x?Mt(v[m]):ke,V=Oe(M,l);return E&&xt(V,Zn(h,m)),V}),n.set(m,y));var $=T(y);if($===ke)return!1}return x},set(v,m,y,x){var ie;var $=n.get(m),S=m in v;if(s&&m==="length")for(var M=y;M<$.v;M+=1){var V=n.get(M+"");V!==void 0?U(V,ke):M in v&&(V=d(()=>Oe(ke,l)),n.set(M+"",V),E&&xt(V,Zn(h,M)))}if($===void 0)(!S||(ie=yt(v,m))!=null&&ie.writable)&&($=d(()=>Oe(void 0,l)),E&&xt($,Zn(h,m)),U($,Mt(y)),n.set(m,$));else{S=$.v!==ke;var se=d(()=>Mt(y));U($,se)}var X=Reflect.getOwnPropertyDescriptor(v,m);if(X!=null&&X.set&&X.set.call(x,y),!S){if(s&&typeof m=="string"){var N=n.get("length"),W=Number(m);Number.isInteger(W)&&W>=N.v&&U(N,W+1)}Bn(o)}return!0},ownKeys(v){T(o);var m=Reflect.ownKeys(v).filter($=>{var S=n.get($);return S===void 0||S.v!==ke});for(var[y,x]of n)x.v!==ke&&!(y in v)&&m.push(y);return m},setPrototypeOf(){nf()}})}function Zn(r,t){var n;return typeof t=="symbol"?`${r}[Symbol(${(n=t.description)!=null?n:""})]`:Im.test(t)?`${r}.${t}`:/^\d+$/.test(t)?`${r}[${t}]`:`${r}['${t}']`}function Mo(r){try{if(r!==null&&typeof r=="object"&&Be in r)return r[Be]}catch(t){}return r}var Lm=new Set(["copyWithin","fill","pop","push","reverse","shift","sort","splice","unshift"]);function Pm(r){return new Proxy(r,{get(t,n,s){var o=Reflect.get(t,n,s);return Lm.has(n)?function(...l){Nf();var f=o.apply(this,l);return wo(),f}:o}})}function Cf(){let r=Array.prototype,t=Array.__svelte_cleanup;t&&t();let{indexOf:n,lastIndexOf:s,includes:o}=r;r.indexOf=function(l,f){let d=n.call(this,l,f);if(d===-1){for(let h=f!=null?f:0;h<this.length;h+=1)if(Mo(this[h])===l){oo("array.indexOf(...)");break}}return d},r.lastIndexOf=function(l,f){let d=s.call(this,l,f!=null?f:this.length-1);if(d===-1){for(let h=0;h<=(f!=null?f:this.length-1);h+=1)if(Mo(this[h])===l){oo("array.lastIndexOf(...)");break}}return d},r.includes=function(l,f){let d=o.call(this,l,f);if(!d){for(let h=0;h<this.length;h+=1)if(Mo(this[h])===l){oo("array.includes(...)");break}}return d},Array.__svelte_cleanup=()=>{r.indexOf=n,r.lastIndexOf=s,r.includes=o}}var cl,Rf,is,Ff,If;function No(){if(cl===void 0){cl=window,Rf=document,is=/Firefox/.test(navigator.userAgent);var r=Element.prototype,t=Node.prototype,n=Text.prototype;Ff=yt(t,"firstChild").get,If=yt(t,"nextSibling").get,Ua(r)&&(r.__click=void 0,r.__className=void 0,r.__attributes=null,r.__style=void 0,r.__e=void 0),Ua(n)&&(n.__t=void 0),E&&(r.__svelte_meta=null,Cf())}}function qe(r=""){return document.createTextNode(r)}function it(r){return Ff.call(r)}function rt(r){return If.call(r)}function F(r,t){if(!L)return it(r);var n=it(K);if(n===null)n=K.appendChild(qe());else if(t&&n.nodeType!==rs){var s=qe();return n==null||n.before(s),me(s),s}return me(n),n}function fl(r,t=!1){var o,l;if(!L){var n=it(r);return n instanceof Comment&&n.data===""?rt(n):n}if(t&&((o=K)==null?void 0:o.nodeType)!==rs){var s=qe();return(l=K)==null||l.before(s),me(s),s}return K}function q(r,t=1,n=!1){let s=L?K:r;for(var o;t--;)o=s,s=rt(s);if(!L)return s;if(n&&(s==null?void 0:s.nodeType)!==rs){var l=qe();return s===null?o==null||o.after(l):s.before(l),me(l),l}return me(s),s}function Mi(r){r.textContent=""}function Ao(){if(!ot||bt!==null)return!1;var r=Y.f;return(r&32768)!==0}function ul(r){L&&it(r)!==null&&Mi(r)}var Lf=!1;function Oo(){Lf||(Lf=!0,document.addEventListener("reset",r=>{Promise.resolve().then(()=>{var t;if(!r.defaultPrevented)for(let n of r.target.elements)(t=n.__on_r)==null||t.call(n)})},{capture:!0}))}function hr(r){var t=H,n=Y;Ae(null),Ke(null);try{return r()}finally{Ae(t),Ke(n)}}function dl(r,t,n,s=n){r.addEventListener(t,()=>hr(n));let o=r.__on_r;o?r.__on_r=()=>{o(),s(!0)}:r.__on_r=()=>s(!0),Oo()}function pl(r){Y===null&&(H===null&&Qc(r),Zc()),Qt&&qc(r)}function Ym(r,t){var n=t.last;n===null?t.last=t.first=r:(n.next=r,r.prev=n,t.last=r)}function pr(r,t,n){var d;var s=Y;if(E)for(;s!==null&&(s.f&131072)!==0;)s=s.parent;s!==null&&(s.f&8192)!==0&&(r|=8192);var o={ctx:Q,deps:null,nodes:null,f:r|2048|512,first:null,fn:t,last:null,next:null,parent:s,b:s&&s.b,prev:null,teardown:null,wv:0,ac:null};if(E&&(o.component_function=or),n)try{Tn(o),o.f|=32768}catch(h){throw De(o),h}else t!==null&&Pt(o);var l=o;if(n&&l.deps===null&&l.teardown===null&&l.nodes===null&&l.first===l.last&&(l.f&524288)===0&&(l=l.first,(r&16)!==0&&(r&65536)!==0&&l!==null&&(l.f|=65536)),l!==null&&(l.parent=s,s!==null&&Ym(l,s),H!==null&&(H.f&2)!==0&&(r&64)===0)){var f=H;((d=f.effects)!=null?d:f.effects=[]).push(l)}return o}function bn(){return H!==null&&!Nt}function lt(r){let t=pr(8,null,!1);return ve(t,1024),t.teardown=r,t}function un(r){var o;pl("$effect"),E&&Xe(r,"name",{value:"$effect"});var t=Y.f,n=!H&&(t&32)!==0&&(t&32768)===0;if(n){var s=Q;((o=s.e)!=null?o:s.e=[]).push(r)}else return Ba(r)}function Ba(r){return pr(1048580,r,!1)}function ps(r){return pl("$effect.pre"),E&&Xe(r,"name",{value:"$effect.pre"}),pr(1048584,r,!0)}function ml(r){St.ensure();let t=pr(524352,r,!0);return()=>{De(t)}}function Yf(r){St.ensure();let t=pr(524352,r,!0);return(n={})=>new Promise(s=>{n.outro?Lr(t,()=>{De(t),s(void 0)}):(De(t),s(void 0))})}function gt(r){return pr(4,r,!1)}function Mf(r){return pr(4718592,r,!0)}function Ge(r,t=0){return pr(8|t,r,!0)}function Ce(r,t=[],n=[],s=[]){So(s,t,n,o=>{pr(8,()=>r(...o.map(T)),!0)})}function Ut(r,t=0){var n=pr(16|t,r,!0);return E&&(n.dev_stack=$r),n}function je(r){return pr(524320,r,!0)}function _l(r){var t=r.teardown;if(t!==null){let n=Qt,s=H;hl(!0),Ae(null);try{t.call(null)}finally{hl(n),Ae(s)}}}function gl(r,t=!1){var n=r.first;for(r.first=r.last=null;n!==null;){let o=n.ac;o!==null&&hr(()=>{o.abort(Tr)});var s=n.next;(n.f&64)!==0?n.parent=null:De(n,t),n=s}}function Uf(r){for(var t=r.first;t!==null;){var n=t.next;(t.f&32)===0&&De(t),t=n}}function De(r,t=!0){var n=!1;(t||(r.f&262144)!==0)&&r.nodes!==null&&r.nodes.end!==null&&(Vf(r.nodes.start,r.nodes.end),n=!0),gl(r,t&&!n),_s(r,0),ve(r,16384);var s=r.nodes&&r.nodes.t;if(s!==null)for(let l of s)l.stop();_l(r);var o=r.parent;o!==null&&o.first!==null&&Qa(r),E&&(r.component_function=null),r.next=r.prev=r.teardown=r.ctx=r.deps=r.fn=r.nodes=r.ac=null}function Vf(r,t){for(;r!==null;){var n=r===t?null:rt(r);r.remove(),r=n}}function Qa(r){var t=r.parent,n=r.prev,s=r.next;n!==null&&(n.next=s),s!==null&&(s.prev=n),t!==null&&(t.first===r&&(t.first=s),t.last===r&&(t.last=n))}function Lr(r,t,n=!0){var s=[];Hf(r,s,!0);var o=()=>{n&&De(r),t&&t()},l=s.length;if(l>0){var f=()=>--l||o();for(var d of s)d.out(f)}else o()}function Hf(r,t,n){if((r.f&8192)===0){r.f^=8192;var s=r.nodes&&r.nodes.t;if(s!==null)for(let d of s)(d.is_global||n)&&t.push(d);for(var o=r.first;o!==null;){var l=o.next,f=(o.f&65536)!==0||(o.f&32)!==0&&(r.f&16)!==0;Hf(o,t,f?n:!1),o=l}}}function ms(r){Wf(r,!0)}function Wf(r,t){if((r.f&8192)!==0){r.f^=8192,(r.f&1024)===0&&(ve(r,2048),Pt(r));for(var n=r.first;n!==null;){var s=n.next,o=(n.f&65536)!==0||(n.f&32)!==0;Wf(n,o?t:!1),n=s}var l=r.nodes&&r.nodes.t;if(l!==null)for(let f of l)(f.is_global||t)&&f.in()}}function To(r,t){if(r.nodes)for(var n=r.nodes.start,s=r.nodes.end;n!==null;){var o=n===s?null:rt(n);t.append(n),n=o}}var Bf=null;var Co=!1,Qt=!1;function hl(r){Qt=r}var H=null,Nt=!1;function Ae(r){H=r}var Y=null;function Ke(r){Y=r}var At=null;function Do(r){H!==null&&(!ot||(H.f&2)!==0)&&(At===null?At=[r]:At.push(r))}var Ot=null,Ht=0,Vt=null;function Of(r){Vt=r}var zf=1,Qn=0,Dn=Qn;function ll(r){Dn=r}function Si(){return++zf}function Sn(r){var t=r.f;if((t&2048)!==0)return!0;if(t&2&&(r.f&=-32769),(t&4096)!==0){for(var n=r.deps,s=n.length,o=0;o<s;o++){var l=n[o];if(Sn(l)&&ol(l),l.wv>r.wv)return!0}(t&512)!==0&&He===null&&ve(r,1024)}return!1}function Gf(r,t,n=!0){var s=r.reactions;if(s!==null&&!(!ot&&(At!=null&&At.includes(r))))for(var o=0;o<s.length;o++){var l=s[o];(l.f&2)!==0?Gf(l,t,!1):t===l&&(n?ve(l,2048):(l.f&1024)!==0&&ve(l,4096),Pt(l))}}function $o(r){var x,$;var t=Ot,n=Ht,s=Vt,o=H,l=At,f=Q,d=Nt,h=Dn,p=r.f;Ot=null,Ht=0,Vt=null,H=(p&96)===0?r:null,At=null,an(r.ctx),Nt=!1,Dn=++Qn,r.ac!==null&&(hr(()=>{r.ac.abort(Tr)}),r.ac=null);try{r.f|=2097152;var g=r.fn,v=g(),m=r.deps;if(Ot!==null){var y;if(_s(r,Ht),m!==null&&Ht>0)for(m.length=Ht+Ot.length,y=0;y<Ot.length;y++)m[Ht+y]=Ot[y];else r.deps=m=Ot;if(bn()&&(r.f&512)!==0)for(y=Ht;y<m.length;y++)(($=(x=m[y]).reactions)!=null?$:x.reactions=[]).push(r)}else m!==null&&Ht<m.length&&(_s(r,Ht),m.length=Ht);if(Dr()&&Vt!==null&&!Nt&&m!==null&&(r.f&6146)===0)for(y=0;y<Vt.length;y++)Gf(Vt[y],r);if(o!==null&&o!==r){if(Qn++,o.deps!==null)for(let S=0;S<n;S+=1)o.deps[S].rv=Qn;if(t!==null)for(let S of t)S.rv=Qn;Vt!==null&&(s===null?s=Vt:s.push(...Vt))}return(r.f&8388608)!==0&&(r.f^=8388608),v}catch(S){return mo(S)}finally{r.f^=2097152,Ot=t,Ht=n,Vt=s,H=o,At=l,an(f),Nt=d,Dn=h}}function Um(r,t){let n=t.reactions;if(n!==null){var s=Wc.call(n,r);if(s!==-1){var o=n.length-1;o===0?n=t.reactions=null:(n[s]=n[o],n.pop())}}if(n===null&&(t.f&2)!==0&&(Ot===null||!Ot.includes(t))){var l=t;(l.f&512)!==0&&(l.f^=512,l.f&=-32769),_i(l),Eo(l),_s(l,0)}}function _s(r,t){var n=r.deps;if(n!==null)for(var s=t;s<n.length;s++)Um(r,n[s])}function Tn(r){var h;var t=r.f;if((t&16384)===0){ve(r,1024);var n=Y,s=Co;if(Y=r,Co=!0,E){var o=or;po(r.component_function);var l=$r;pi((h=r.dev_stack)!=null?h:$r)}try{(t&16777232)!==0?Uf(r):gl(r),_l(r);var f=$o(r);if(r.teardown=typeof f=="function"?f:null,r.wv=zf,E&&sr&&(r.f&2048)!==0&&r.deps!==null)for(var d of r.deps)d.set_during_effect&&(d.wv=Si(),d.set_during_effect=!1)}finally{Co=s,Y=n,E&&(po(o),pi(l))}}}async function Fo(){if(ot)return new Promise(r=>{requestAnimationFrame(()=>r()),setTimeout(()=>r())});await Promise.resolve(),Wn()}function T(r){var y,x,$;var t=r.f,n=(t&2)!==0;if((y=Bf)==null||y.add(r),H!==null&&!Nt){var s=Y!==null&&(Y.f&16384)!==0;if(!s&&!(At!=null&&At.includes(r))){var o=H.deps;if((H.f&2097152)!==0)r.rv<Qn&&(r.rv=Qn,Ot===null&&o!==null&&o[Ht]===r?Ht++:Ot===null?Ot=[r]:Ot.push(r));else{((x=H.deps)!=null?x:H.deps=[]).push(r);var l=r.reactions;l===null?r.reactions=[H]:l.includes(H)||l.push(H)}}}if(E&&(ds.delete(r),sr&&!Nt&&ns!==null&&H!==null&&ns.reaction===H))if(r.trace)r.trace();else{var f=Er("traced at");if(f){var d=ns.entries.get(r);d===void 0&&(d={traces:[]},ns.entries.set(r,d));var h=d.traces[d.traces.length-1];f.stack!==(h==null?void 0:h.stack)&&d.traces.push(f)}}if(Qt&&Or.has(r))return Or.get(r);if(n){var p=r;if(Qt){var g=p.v;return((p.f&1024)===0&&p.reactions!==null||Kf(p))&&(g=hs(p)),Or.set(p,g),g}var v=(p.f&512)===0&&!Nt&&H!==null&&(Co||(H.f&512)!==0),m=p.deps===null;Sn(p)&&(v&&(p.f|=512),ol(p)),v&&!m&&jf(p)}if(($=He)!=null&&$.has(r))return He.get(r);if((r.f&8388608)!==0)throw r.v;return r.v}function jf(r){var t;if(r.deps!==null){r.f|=512;for(let n of r.deps)((t=n.reactions)!=null?t:n.reactions=[]).push(r),(n.f&2)!==0&&(n.f&512)===0&&jf(n)}}function Kf(r){if(r.v===ke)return!0;if(r.deps===null)return!1;for(let t of r.deps)if(Or.has(t)||(t.f&2)!==0&&Kf(t))return!0;return!1}function P(r){var t=Nt;try{return Nt=!0,r()}finally{Nt=t}}function Se(r){if(!(typeof r!="object"||!r||r instanceof EventTarget)){if(Be in r)Ro(r);else if(!Array.isArray(r))for(let t in r){let n=r[t];typeof n=="object"&&n&&Be in n&&Ro(n)}}}function Ro(r,t=new Set){if(typeof r=="object"&&r!==null&&!(r instanceof EventTarget)&&!t.has(r)){t.add(r),r instanceof Date&&r.getTime();for(let s in r)try{Ro(r[s],t)}catch(o){}let n=Ln(r);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){let s=ro(n);for(let o in s){let l=s[o].get;if(l)try{l.call(r)}catch(f){}}}}}var Hm=["allowfullscreen","async","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","indeterminate","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected","webkitdirectory","defer","disablepictureinpicture","disableremoteplayback"];var _k=[...Hm,"formNoValidate","isMap","noModule","playsInline","readOnly","value","volume","defaultValue","defaultChecked","srcObject","noValidate","allowFullscreen","disablePictureInPicture","disableRemotePlayback"];var Wm=["touchstart","touchmove"];function qf(r){return Wm.includes(r)}var Bm=["$state","$state.raw","$derived","$derived.by"],gk=[...Bm,"$state.eager","$state.snapshot","$props","$props.id","$bindable","$effect","$effect.pre","$effect.tracking","$effect.root","$effect.pending","$inspect","$inspect().with","$inspect.trace","$host"];var Qf=new Map;function Xf(r,t){var n=Qf.get(r);n||(n=new Set,Qf.set(r,n)),n.add(t)}var yl=new Set,Io=new Set;function tu(r,t,n,s={}){function o(l){if(s.capture||Ai.call(t,l),!l.cancelBubble)return hr(()=>n==null?void 0:n.call(this,l))}return r.startsWith("pointer")||r.startsWith("touch")||r==="wheel"?$e(()=>{t.addEventListener(r,o,s)}):t.addEventListener(r,o,s),o}function gs(r,t,n,s,o){var l={capture:s,passive:o},f=tu(r,t,n,l);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&lt(()=>{t.removeEventListener(r,f,l)})}function Ni(r){for(var t=0;t<r.length;t++)yl.add(r[t]);for(var n of Io)n(r)}var eu=null;function Ai(r){var S;var t=this,n=t.ownerDocument,s=r.type,o=((S=r.composedPath)==null?void 0:S.call(r))||[],l=o[0]||r.target;eu=r;var f=0,d=eu===r&&r.__root;if(d){var h=o.indexOf(d);if(h!==-1&&(t===document||t===window)){r.__root=t;return}var p=o.indexOf(t);if(p===-1)return;h<=p&&(f=h)}if(l=o[f]||r.target,l!==t){Xe(r,"currentTarget",{configurable:!0,get(){return l||n}});var g=H,v=Y;Ae(null),Ke(null);try{for(var m,y=[];l!==null;){var x=l.assignedSlot||l.parentNode||l.host||null;try{var $=l["__"+s];$!=null&&(!l.disabled||r.target===l)&&$.call(l,r)}catch(M){m?y.push(M):m=M}if(r.cancelBubble||x===t||x===null)break;l=x}if(m){for(let M of y)queueMicrotask(()=>{throw M});throw m}}finally{r.__root=t,delete r.currentTarget,Ae(g),Ke(v)}}}function Lo(r){var t=document.createElement("template");return t.innerHTML=r.replaceAll("<!>","<!---->"),t.content}function Mn(r,t){var n=Y;n.nodes===null&&(n.nodes={start:r,end:t,a:null,t:null})}function ce(r,t){var n=(t&1)!==0,s=(t&2)!==0,o,l=!r.startsWith("<!>");return()=>{if(L)return Mn(K,null),K;o===void 0&&(o=Lo(l?r:"<!>"+r),n||(o=it(o)));var f=s||is?document.importNode(o,!0):o.cloneNode(!0);if(n){var d=it(f),h=f.lastChild;Mn(d,h)}else Mn(f,f);return f}}function le(r,t){if(L){var n=Y;((n.f&32768)===0||n.nodes.end===null)&&(n.nodes.end=K),tt();return}r!==null&&r.before(t)}var Po=!0;function _e(r,t){var s;var n=t==null?"":typeof t=="object"?t+"":t;n!==((s=r.__t)!=null?s:r.__t=r.nodeValue)&&(r.__t=n,r.nodeValue=n+"")}function Yr(r,t){return nu(r,t)}function kl(r,t){var f;No(),t.intro=(f=t.intro)!=null?f:!1;let n=t.target,s=L,o=K;try{for(var l=it(n);l&&(l.nodeType!==kt||l.data!=="[");)l=rt(l);if(!l)throw nn;ze(!0),me(l);let d=nu(r,{...t,anchor:l});return ze(!1),d}catch(d){if(d instanceof Error&&d.message.split(`
`).some(h=>h.startsWith("https://svelte.dev/e/")))throw d;return d!==nn&&console.warn("Failed to hydrate: ",d),t.recover===!1&&Jc(),No(),Mi(n),ze(!1),Yr(r,t)}finally{ze(s),me(o)}}var Oi=new Map;function nu(r,{target:t,anchor:n,props:s={},events:o,context:l,intro:f=!0}){No();var d=new Set,h=v=>{for(var m=0;m<v.length;m++){var y=v[m];if(!d.has(y)){d.add(y);var x=qf(y);t.addEventListener(y,Ai,{passive:x});var $=Oi.get(y);$===void 0?(document.addEventListener(y,Ai,{passive:x}),Oi.set(y,1)):Oi.set(y,$+1)}}};h(ui(yl)),Io.add(h);var p=void 0,g=Yf(()=>{var v=n!=null?n:t.appendChild(qe());return tl(v,{pending:()=>{}},m=>{if(l){ar({});var y=Q;y.c=l}if(o&&(s.$$events=o),L&&Mn(m,null),Po=f,p=r(m,s)||{},Po=!0,L&&(Y.nodes.end=K,K===null||K.nodeType!==kt||K.data!=="]"))throw Pn(),nn;l&&lr()}),()=>{var x;for(var m of d){t.removeEventListener(m,Ai);var y=Oi.get(m);--y===0?(document.removeEventListener(m,Ai),Oi.delete(m)):Oi.set(m,y)}Io.delete(h),v!==n&&((x=v.parentNode)==null||x.removeChild(v))}});return wl.set(p,g),p}var wl=new WeakMap;function dn(r,t){let n=wl.get(r);return n?(wl.delete(r),n(t)):(E&&(Be in r?uf():ff()),Promise.resolve())}var mr,Ur,Wt,Xn,vs,ys,Yo,hn=class{constructor(t,n=!0){k(this,"anchor");G(this,mr,new Map);G(this,Ur,new Map);G(this,Wt,new Map);G(this,Xn,new Set);G(this,vs,!0);G(this,ys,()=>{var t=Z;if(w(this,mr).has(t)){var n=w(this,mr).get(t),s=w(this,Ur).get(n);if(s)ms(s),w(this,Xn).delete(n);else{var o=w(this,Wt).get(n);o&&(w(this,Ur).set(n,o.effect),w(this,Wt).delete(n),o.fragment.lastChild.remove(),this.anchor.before(o.fragment),s=o.effect)}for(let[l,f]of w(this,mr)){if(w(this,mr).delete(l),l===t)break;let d=w(this,Wt).get(f);d&&(De(d.effect),w(this,Wt).delete(f))}for(let[l,f]of w(this,Ur)){if(l===n||w(this,Xn).has(l))continue;let d=()=>{if(Array.from(w(this,mr).values()).includes(l)){var p=document.createDocumentFragment();To(f,p),p.append(qe()),w(this,Wt).set(l,{effect:f,fragment:p})}else De(f);w(this,Xn).delete(l),w(this,Ur).delete(l)};w(this,vs)||!s?(w(this,Xn).add(l),Lr(f,d,!1)):d()}}});G(this,Yo,t=>{w(this,mr).delete(t);let n=Array.from(w(this,mr).values());for(let[s,o]of w(this,Wt))n.includes(s)||(De(o.effect),w(this,Wt).delete(s))});this.anchor=t,z(this,vs,n)}ensure(t,n){var s=Z,o=Ao();if(n&&!w(this,Ur).has(t)&&!w(this,Wt).has(t))if(o){var l=document.createDocumentFragment(),f=qe();l.append(f),w(this,Wt).set(t,{effect:je(()=>n(f)),fragment:l})}else w(this,Ur).set(t,je(()=>n(this.anchor)));if(w(this,mr).set(s,t),o){for(let[d,h]of w(this,Ur))d===t?s.skipped_effects.delete(h):s.skipped_effects.add(h);for(let[d,h]of w(this,Wt))d===t?s.skipped_effects.delete(h.effect):s.skipped_effects.add(h.effect);s.oncommit(w(this,ys)),s.ondiscard(w(this,Yo))}else L&&(this.anchor=K),w(this,ys).call(this)}};mr=new WeakMap,Ur=new WeakMap,Wt=new WeakMap,Xn=new WeakMap,vs=new WeakMap,ys=new WeakMap,Yo=new WeakMap;function Bt(r,t,n=!1){L&&tt();var s=new hn(r),o=n?65536:0;function l(f,d){if(L){let p=lo(r)==="[!";if(f===p){var h=on();me(h),s.anchor=h,ze(!1),s.ensure(f,d),ze(!0);return}}s.ensure(f,d)}Ut(()=>{var f=!1;t((d,h=!0)=>{f=!0,l(h,d)}),f||l(!1,null)},o)}function _r(r,t){return t}function t_(r,t,n){var v;for(var s=[],o=t.length,l,f=t.length,d=0;d<o;d++){let m=t[d];Lr(m,()=>{if(l){if(l.pending.delete(m),l.done.add(m),l.pending.size===0){var y=r.outrogroups;xl(ui(l.done)),y.delete(l),y.size===0&&(r.outrogroups=null)}}else f-=1},!1)}if(f===0){var h=s.length===0&&n!==null;if(h){var p=n,g=p.parentNode;Mi(g),g.append(p),r.items.clear()}xl(t,!h)}else l={pending:new Set(t),done:new Set},((v=r.outrogroups)!=null?v:r.outrogroups=new Set).add(l)}function xl(r,t=!0){for(var n=0;n<r.length;n++)De(r[n],t)}var Ci;function gr(r,t,n,s,o,l=null){var f=r,d=new Map,h=(t&4)!==0;if(h){var p=r;f=L?me(it(p)):p.appendChild(qe())}L&&tt();var g=null,v=Kn(()=>{var M=n();return br(M)?M:M==null?[]:ui(M)}),m,y=!0;function x(){S.fallback=g,r_(S,m,f,t,s),g!==null&&(m.length===0?(g.f&33554432)===0?ms(g):(g.f^=33554432,ws(g,null,f)):Lr(g,()=>{g=null}))}var $=Ut(()=>{m=T(v);var M=m.length;let V=!1;if(L){var se=lo(f)==="[!";se!==(M===0)&&(f=on(),me(f),ze(!1),V=!0)}for(var X=new Set,N=Z,W=Ao(),ie=0;ie<M;ie+=1){L&&K.nodeType===kt&&K.data==="]"&&(f=K,V=!0,ze(!1));var re=m[ie],Ye=s(re,ie),fe=y?null:d.get(Ye);fe?(fe.v&&dr(fe.v,re),fe.i&&dr(fe.i,ie),W&&N.skipped_effects.delete(fe.e)):(fe=n_(d,y?f:Ci!=null?Ci:Ci=qe(),re,Ye,ie,o,t,n),y||(fe.e.f|=33554432),d.set(Ye,fe)),X.add(Ye)}if(M===0&&l&&!g&&(y?g=je(()=>l(f)):(g=je(()=>l(Ci!=null?Ci:Ci=qe())),g.f|=33554432)),L&&M>0&&me(on()),!y)if(W){for(let[Re,vt]of d)X.has(Re)||N.skipped_effects.add(vt.e);N.oncommit(x),N.ondiscard(()=>{})}else x();V&&ze(!0),T(v)}),S={effect:$,flags:t,items:d,outrogroups:null,fallback:g};y=!1,L&&(f=K)}function r_(r,t,n,s,o){var fe,Re,vt,Ct,Jt,Gt,Wr,Br,I;var l=(s&8)!==0,f=t.length,d=r.items,h=r.effect.first,p,g=null,v,m=[],y=[],x,$,S,M;if(l)for(M=0;M<f;M+=1)x=t[M],$=o(x,M),S=d.get($).e,(S.f&33554432)===0&&((Re=(fe=S.nodes)==null?void 0:fe.a)==null||Re.measure(),(v!=null?v:v=new Set).add(S));for(M=0;M<f;M+=1){if(x=t[M],$=o(x,M),S=d.get($).e,r.outrogroups!==null)for(let j of r.outrogroups)j.pending.delete(S),j.done.delete(S);if((S.f&33554432)!==0)if(S.f^=33554432,S===h)ws(S,null,n);else{var V=g?g.next:h;S===r.effect.last&&(r.effect.last=S.prev),S.prev&&(S.prev.next=S.next),S.next&&(S.next.prev=S.prev),Nn(r,g,S),Nn(r,S,V),ws(S,V,n),g=S,m=[],y=[],h=g.next;continue}if((S.f&8192)!==0&&(ms(S),l&&((Ct=(vt=S.nodes)==null?void 0:vt.a)==null||Ct.unfix(),(v!=null?v:v=new Set).delete(S))),S!==h){if(p!==void 0&&p.has(S)){if(m.length<y.length){var se=y[0],X;g=se.prev;var N=m[0],W=m[m.length-1];for(X=0;X<m.length;X+=1)ws(m[X],se,n);for(X=0;X<y.length;X+=1)p.delete(y[X]);Nn(r,N.prev,W.next),Nn(r,g,N),Nn(r,W,se),h=se,g=W,M-=1,m=[],y=[]}else p.delete(S),ws(S,h,n),Nn(r,S.prev,S.next),Nn(r,S,g===null?r.effect.first:g.next),Nn(r,g,S),g=S;continue}for(m=[],y=[];h!==null&&h!==S;)(p!=null?p:p=new Set).add(h),y.push(h),h=h.next;if(h===null)continue}(S.f&33554432)===0&&m.push(S),g=S,h=S.next}if(r.outrogroups!==null){for(let j of r.outrogroups)j.pending.size===0&&(xl(ui(j.done)),(Jt=r.outrogroups)==null||Jt.delete(j));r.outrogroups.size===0&&(r.outrogroups=null)}if(h!==null||p!==void 0){var ie=[];if(p!==void 0)for(S of p)(S.f&8192)===0&&ie.push(S);for(;h!==null;)(h.f&8192)===0&&h!==r.fallback&&ie.push(h),h=h.next;var re=ie.length;if(re>0){var Ye=(s&4)!==0&&f===0?n:null;if(l){for(M=0;M<re;M+=1)(Wr=(Gt=ie[M].nodes)==null?void 0:Gt.a)==null||Wr.measure();for(M=0;M<re;M+=1)(I=(Br=ie[M].nodes)==null?void 0:Br.a)==null||I.fix()}t_(r,ie,Ye)}}l&&$e(()=>{var j,ge;if(v!==void 0)for(S of v)(ge=(j=S.nodes)==null?void 0:j.a)==null||ge.apply()})}function n_(r,t,n,s,o,l,f,d){var h=(f&1)!==0?(f&16)===0?Pr(n,!1,!1):at(n):null,p=(f&2)!==0?at(o):null;return E&&h&&(h.trace=()=>{var g;d()[(g=p==null?void 0:p.v)!=null?g:o]}),{v:h,i:p,e:je(()=>(l(t,h!=null?h:n,p!=null?p:o,d),()=>{r.delete(s)}))}}function ws(r,t,n){if(r.nodes)for(var s=r.nodes.start,o=r.nodes.end,l=t&&(t.f&33554432)===0?t.nodes.start:n;s!==null;){var f=rt(s);if(l.before(s),s===o)return;s=f}}function Nn(r,t,n){t===null?r.effect.first=n:t.next=n,n===null?r.effect.last=t:n.prev=t}function Uo(r,t,n,s,o){var d;L&&tt();var l=(d=t.$$slots)==null?void 0:d[n],f=!1;l===!0&&(l=t[n==="default"?"children":n],f=!0),l===void 0?o!==null&&o(r):l(r,f?()=>s:s)}function bl(r){let t={};r.children&&(t.default=!0);for(let n in r.$$slots)t[n]=!0;return t}var o_=to?()=>performance.now():()=>Date.now(),vr={tick:r=>(to?requestAnimationFrame:wt)(r),now:()=>o_(),tasks:new Set};function su(){let r=vr.now();vr.tasks.forEach(t=>{t.c(r)||(vr.tasks.delete(t),t.f())}),vr.tasks.size!==0&&vr.tick(su)}function ou(r){let t;return vr.tasks.size===0&&vr.tick(su),{promise:new Promise(n=>{vr.tasks.add(t={c:r,f:n})}),abort(){vr.tasks.delete(t)}}}function Vo(r,t){hr(()=>{r.dispatchEvent(new CustomEvent(t))})}function f_(r){if(r==="float")return"cssFloat";if(r==="offset")return"cssOffset";if(r.startsWith("--"))return r;let t=r.split("-");return t.length===1?t[0]:t[0]+t.slice(1).map(n=>n[0].toUpperCase()+n.slice(1)).join("")}function au(r){let t={},n=r.split(";");for(let s of n){let[o,l]=s.split(":");if(!o||l===void 0)break;let f=f_(o.trim());t[f]=l.trim()}return t}var u_=r=>r;function ks(r,t,n,s){var se,X;var o=(r&1)!==0,l=(r&2)!==0,f=o&&l,d=(r&4)!==0,h=f?"both":o?"in":"out",p,g=t.inert,v=t.style.overflow,m,y;function x(){return hr(()=>{var N;return p!=null?p:p=n()(t,(N=s==null?void 0:s())!=null?N:{},{direction:h})})}var $={is_global:d,in(){var N;if(t.inert=g,!o){y==null||y.abort(),(N=y==null?void 0:y.reset)==null||N.call(y);return}l||m==null||m.abort(),Vo(t,"introstart"),m=Tl(t,x(),y,1,()=>{Vo(t,"introend"),m==null||m.abort(),m=p=void 0,t.style.overflow=v})},out(N){if(!l){N==null||N(),p=void 0;return}t.inert=!0,Vo(t,"outrostart"),y=Tl(t,x(),m,0,()=>{Vo(t,"outroend"),N==null||N()})},stop:()=>{m==null||m.abort(),y==null||y.abort()}},S=Y;if(((X=(se=S.nodes).t)!=null?X:se.t=[]).push($),o&&Po){var M=d;if(!M){for(var V=S.parent;V&&(V.f&65536)!==0;)for(;(V=V.parent)&&(V.f&16)===0;);M=!V||(V.f&32768)!==0}M&&gt(()=>{P(()=>$.in())})}}function Tl(r,t,n,s,o){var l=s===1;if(Va(t)){var f,d=!1;return $e(()=>{if(!d){var S=t({direction:l?"in":"out"});f=Tl(r,S,n,s,o)}}),{abort:()=>{d=!0,f==null||f.abort()},deactivate:()=>f.deactivate(),reset:()=>f.reset(),t:()=>f.t()}}if(n==null||n.deactivate(),!(t!=null&&t.duration))return o(),{abort:wt,deactivate:wt,reset:wt,t:()=>s};let{delay:h=0,css:p,tick:g,easing:v=u_}=t;var m=[];if(l&&n===void 0&&(g&&g(0,1),p)){var y=au(p(0,1));m.push(y,y)}var x=()=>1-s,$=r.animate(m,{duration:h,fill:"forwards"});return $.onfinish=()=>{var Ye;$.cancel();var S=(Ye=n==null?void 0:n.t())!=null?Ye:1-s;n==null||n.abort();var M=s-S,V=t.duration*Math.abs(M),se=[];if(V>0){var X=!1;if(p)for(var N=Math.ceil(V/16.666666666666668),W=0;W<=N;W+=1){var ie=S+M*v(W/N),re=au(p(ie,1-ie));se.push(re),X||(X=re.overflow==="hidden")}X&&(r.style.overflow="hidden"),x=()=>{var fe=$.currentTime;return S+M*v(fe/V)},g&&ou(()=>{if($.playState!=="running")return!1;var fe=x();return g(fe,1-fe),!0})}$=r.animate(se,{duration:V,fill:"forwards"}),$.onfinish=()=>{x=()=>s,g==null||g(s,1-s),o()}},{abort:()=>{$&&($.cancel(),$.effect=null,$.onfinish=wt)},deactivate:()=>{o=wt},reset:()=>{s===0&&(g==null||g(1,0))},t:()=>x()}}function yr(r,t){gt(()=>{var o;var n=r.getRootNode(),s=n.host?n:(o=n.head)!=null?o:n.ownerDocument.head;if(!s.querySelector("#"+t.hash)){let l=document.createElement("style");l.id=t.hash,l.textContent=t.code,s.appendChild(l),E&&Xf(t.hash,l)}})}function Sl(r,t,n){gt(()=>{var s=P(()=>t(r,n==null?void 0:n())||{});if(n&&(s!=null&&s.update)){var o=!1,l={};Ge(()=>{var f=n();Se(f),o&&fo(l,f)&&(l=f,s.update(f))}),o=!0}if(s!=null&&s.destroy)return()=>s.destroy()})}var lu=[...` 	
\r\f\xA0\v\uFEFF`];function cu(r,t,n){var s=r==null?"":""+r;if(t&&(s=s?s+" "+t:t),n){for(var o in n)if(n[o])s=s?s+" "+o:o;else if(s.length)for(var l=o.length,f=0;(f=s.indexOf(o,f))>=0;){var d=f+l;(f===0||lu.includes(s[f-1]))&&(d===s.length||lu.includes(s[d]))?s=(f===0?"":s.substring(0,f))+s.substring(d+1):f=d}}return s===""?null:s}function Vr(r,t,n,s,o,l){var f=r.__className;if(L||f!==n||f===void 0){var d=cu(n,s,l);(!L||d!==r.getAttribute("class"))&&(d==null?r.removeAttribute("class"):t?r.className=d:r.setAttribute("class",d)),r.__className=n}else if(l&&o!==l)for(var h in l){var p=!!l[h];(o==null||p!==!!o[h])&&r.classList.toggle(h,p)}return l}var y_=Symbol("is custom element"),w_=Symbol("is html");function Dl(r){if(L){var t=!1,n=()=>{if(!t){if(t=!0,r.hasAttribute("value")){var s=r.value;El(r,"value",null),r.value=s}if(r.hasAttribute("checked")){var o=r.checked;El(r,"checked",null),r.checked=o}}};r.__on_r=n,$e(n),Oo()}}function Ml(r,t){var n=hu(r);n.value===(n.value=t!=null?t:void 0)||r.value===t&&(t!==0||r.nodeName!=="PROGRESS")||(r.value=t!=null?t:"")}function El(r,t,n,s){var o=hu(r);if(L&&(o[t]=r.getAttribute(t),t==="src"||t==="srcset"||t==="href"&&r.nodeName==="LINK")){s||x_(r,t,n!=null?n:"");return}o[t]!==(o[t]=n)&&(t==="loading"&&(r[Gc]=n),n==null?r.removeAttribute(t):typeof n!="string"&&k_(r).includes(t)?r[t]=n:r.setAttribute(t,n))}function hu(r){var t;return(t=r.__attributes)!=null?t:r.__attributes={[y_]:r.nodeName.includes("-"),[w_]:r.namespaceURI===af}}var fu=new Map;function k_(r){var t=r.getAttribute("is")||r.nodeName,n=fu.get(t);if(n)return n;fu.set(t,n=[]);for(var s,o=r,l=Element.prototype;l!==o;){s=ro(o);for(var f in s)s[f].set&&n.push(f);o=Ln(o)}return n}function x_(r,t,n){var s;E&&(t==="srcset"&&b_(r,n)||$l((s=r.getAttribute(t))!=null?s:"",n)||cf(t,r.outerHTML.replace(r.innerHTML,r.innerHTML&&"..."),String(n)))}function $l(r,t){return r===t?!0:new URL(r,document.baseURI).href===new URL(t,document.baseURI).href}function uu(r){return r.split(",").map(t=>t.trim().split(" ").filter(Boolean))}function b_(r,t){var n=uu(r.srcset),s=uu(t);return s.length===n.length&&s.every(([o,l],f)=>l===n[f][1]&&($l(n[f][0],o)||$l(o,n[f][0])))}function Ol(r,t,n=t){var s=new WeakSet;dl(r,"input",async o=>{E&&r.type==="checkbox"&&Ha();var l=o?r.defaultValue:r.value;if(l=Nl(r)?Al(l):l,n(l),Z!==null&&s.add(Z),await Fo(),l!==(l=t())){var f=r.selectionStart,d=r.selectionEnd,h=r.value.length;if(r.value=l!=null?l:"",d!==null){var p=r.value.length;f===d&&d===h&&p>h?(r.selectionStart=p,r.selectionEnd=p):(r.selectionStart=f,r.selectionEnd=Math.min(d,p))}}}),(L&&r.defaultValue!==r.value||P(t)==null&&r.value)&&(n(Nl(r)?Al(r.value):r.value),Z!==null&&s.add(Z)),Ge(()=>{var f;E&&r.type==="checkbox"&&Ha();var o=t();if(r===document.activeElement){var l=(f=as)!=null?f:Z;if(s.has(l))return}Nl(r)&&o===Al(r.value)||r.type==="date"&&!o&&!r.value||o!==r.value&&(r.value=o!=null?o:"")})}function Nl(r){var t=r.type;return t==="number"||t==="range"}function Al(r){return r===""?null:+r}function pu(r,t){return r===t||(r==null?void 0:r[Be])===t}function Ri(r={},t,n,s){return gt(()=>{var o,l;return Ge(()=>{o=l,l=(s==null?void 0:s())||[],P(()=>{r!==n(...l)&&(t(r,...l),o&&pu(n(...o),r)&&t(null,...o))})}),()=>{$e(()=>{l&&pu(n(...l),r)&&t(null,...l)})}}),r}function xs(r=!1){let t=Q,n=t.l.u;if(!n)return;let s=()=>Se(t.s);if(r){let o=0,l={},f=$n(()=>{let d=!1,h=t.s;for(let p in h)h[p]!==l[p]&&(l[p]=h[p],d=!0);return d&&o++,o});s=()=>T(f)}n.b.length&&ps(()=>{mu(t,s),di(n.b)}),un(()=>{let o=P(()=>n.m.map(zc));return()=>{for(let l of o)typeof l=="function"&&l()}}),n.a.length&&un(()=>{mu(t,s),di(n.a)})}function mu(r,t){if(r.l.s)for(let n of r.l.s)T(n);t()}var Wo=!1;function Cl(r){var t=Wo;try{return Wo=!1,[r(),Wo]}finally{Wo=t}}function ct(r,t,n,s){var se,X;var o=!Sr||(n&2)!==0,l=(n&8)!==0,f=(n&16)!==0,d=s,h=!0,p=()=>(h&&(h=!1,d=f?P(s):s),d),g;if(l){var v=Be in r||ts in r;g=(X=(se=yt(r,t))==null?void 0:se.set)!=null?X:v&&t in r?N=>r[t]=N:void 0}var m,y=!1;l?[m,y]=Cl(()=>r[t]):m=r[t],m===void 0&&s!==void 0&&(m=p(),g&&(o&&ef(t),g(m)));var x;if(o?x=()=>{var N=r[t];return N===void 0?p():(h=!0,N)}:x=()=>{var N=r[t];return N!==void 0&&(d=void 0),N===void 0?d:N},o&&(n&4)===0)return x;if(g){var $=r.$$legacy;return(function(N,W){return arguments.length>0?((!o||!W||$||y)&&g(W?x():N),N):x()})}var S=!1,M=((n&1)!==0?$n:Kn)(()=>(S=!1,x()));E&&(M.label=t),l&&T(M);var V=Y;return(function(N,W){if(arguments.length>0){let ie=W?T(M):o&&l?Mt(N):N;return U(M,ie),S=!0,d!==void 0&&(d=ie),N}return Qt&&S||(V.f&16384)!==0?M.v:T(M)})}function _u(r){return new Rl(r)}var mn,Xt,Rl=class{constructor(t){G(this,mn);G(this,Xt);var l,f;var n=new Map,s=(d,h)=>{var p=Pr(h,!1,!1);return n.set(d,p),p};let o=new Proxy({...t.props||{},$$events:{}},{get(d,h){var p;return T((p=n.get(h))!=null?p:s(h,Reflect.get(d,h)))},has(d,h){var p;return h===ts?!0:(T((p=n.get(h))!=null?p:s(h,Reflect.get(d,h))),Reflect.has(d,h))},set(d,h,p){var g;return U((g=n.get(h))!=null?g:s(h,p),p),Reflect.set(d,h,p)}});z(this,Xt,(t.hydrate?kl:Yr)(t.component,{target:t.target,anchor:t.anchor,props:o,context:t.context,intro:(l=t.intro)!=null?l:!1,recover:t.recover})),!ot&&(!((f=t==null?void 0:t.props)!=null&&f.$$host)||t.sync===!1)&&Wn(),z(this,mn,o.$$events);for(let d of Object.keys(w(this,Xt)))d==="$set"||d==="$destroy"||d==="$on"||Xe(this,d,{get(){return w(this,Xt)[d]},set(h){w(this,Xt)[d]=h},enumerable:!0});w(this,Xt).$set=d=>{Object.assign(o,d)},w(this,Xt).$destroy=()=>{dn(w(this,Xt))}}$set(t){w(this,Xt).$set(t)}$on(t,n){w(this,mn)[t]=w(this,mn)[t]||[];let s=(...o)=>n.call(this,...o);return w(this,mn)[t].push(s),()=>{w(this,mn)[t]=w(this,mn)[t].filter(o=>o!==s)}}$destroy(){w(this,Xt).$destroy()}};mn=new WeakMap,Xt=new WeakMap;var L_;typeof HTMLElement=="function"&&(L_=class extends HTMLElement{constructor(t,n,s){super();k(this,"$$ctor");k(this,"$$s");k(this,"$$c");k(this,"$$cn",!1);k(this,"$$d",{});k(this,"$$r",!1);k(this,"$$p_d",{});k(this,"$$l",{});k(this,"$$l_u",new Map);k(this,"$$me");this.$$ctor=t,this.$$s=n,s&&this.attachShadow({mode:"open"})}addEventListener(t,n,s){if(this.$$l[t]=this.$$l[t]||[],this.$$l[t].push(n),this.$$c){let o=this.$$c.$on(t,n);this.$$l_u.set(n,o)}super.addEventListener(t,n,s)}removeEventListener(t,n,s){if(super.removeEventListener(t,n,s),this.$$c){let o=this.$$l_u.get(n);o&&(o(),this.$$l_u.delete(n))}}async connectedCallback(){if(this.$$cn=!0,!this.$$c){let t=function(o){return l=>{let f=document.createElement("slot");o!=="default"&&(f.name=o),le(l,f)}};if(await Promise.resolve(),!this.$$cn||this.$$c)return;let n={},s=P_(this);for(let o of this.$$s)o in s&&(o==="default"&&!this.$$d.children?(this.$$d.children=t(o),n.default=!0):n[o]=t(o));for(let o of this.attributes){let l=this.$$g_p(o.name);l in this.$$d||(this.$$d[l]=Fl(l,o.value,this.$$p_d,"toProp"))}for(let o in this.$$p_d)!(o in this.$$d)&&this[o]!==void 0&&(this.$$d[o]=this[o],delete this[o]);this.$$c=_u({component:this.$$ctor,target:this.shadowRoot||this,props:{...this.$$d,$$slots:n,$$host:this}}),this.$$me=ml(()=>{Ge(()=>{var o;this.$$r=!0;for(let l of Pa(this.$$c)){if(!((o=this.$$p_d[l])!=null&&o.reflect))continue;this.$$d[l]=this.$$c[l];let f=Fl(l,this.$$d[l],this.$$p_d,"toAttribute");f==null?this.removeAttribute(this.$$p_d[l].attribute||l):this.setAttribute(this.$$p_d[l].attribute||l,f)}this.$$r=!1})});for(let o in this.$$l)for(let l of this.$$l[o]){let f=this.$$c.$on(o,l);this.$$l_u.set(l,f)}this.$$l={}}}attributeChangedCallback(t,n,s){var o;this.$$r||(t=this.$$g_p(t),this.$$d[t]=Fl(t,s,this.$$p_d,"toProp"),(o=this.$$c)==null||o.$set({[t]:this.$$d[t]}))}disconnectedCallback(){this.$$cn=!1,Promise.resolve().then(()=>{!this.$$cn&&this.$$c&&(this.$$c.$destroy(),this.$$me(),this.$$c=void 0)})}$$g_p(t){return Pa(this.$$p_d).find(n=>this.$$p_d[n].attribute===t||!this.$$p_d[n].attribute&&n.toLowerCase()===t)||t}});function Fl(r,t,n,s){var l;let o=(l=n[r])==null?void 0:l.type;if(t=o==="Boolean"&&typeof t!="boolean"?t!=null:t,!s||!n[r])return t;if(s==="toAttribute")switch(o){case"Object":case"Array":return t==null?null:JSON.stringify(t);case"Boolean":return t?"":null;case"Number":return t==null?null:t;default:return t}else switch(o){case"Object":case"Array":return t&&JSON.parse(t);case"Boolean":return t;case"Number":return t!=null?+t:t;default:return t}}function P_(r){let t={};return r.childNodes.forEach(n=>{t[n.slot||"default"]=!0}),t}if(E){let r=function(t){if(!(t in globalThis)){let n;Object.defineProperty(globalThis,t,{configurable:!0,get:()=>{if(n!==void 0)return n;tf(t)},set:s=>{n=s}})}};r("$state"),r("$effect"),r("$derived"),r("$inspect"),r("$props"),r("$bindable")}function Fi(r){Q===null&&so("onMount"),Sr&&Q.l!==null?Y_(Q).m.push(r):un(()=>{let t=P(r);if(typeof t=="function")return t})}function Y_(r){var n;var t=r.l;return(n=t.u)!=null?n:t.u={a:[],b:[],m:[]}}var gu,vu,yu;typeof window!="undefined"&&((yu=(vu=(gu=window.__svelte)!=null?gu:window.__svelte={}).v)!=null?yu:vu.v=new Set).add("5");pf();var Ll=rn(Hr(),1);Ze();var O1=require("obsidian");function Qe(r,t,n){var l;let s=/^---\r?\n([\s\S]*?)\r?\n---/,o=r.match(s);if(o){let f=(l=o[1])!=null?l:"",d=r.slice(o[0].length),h=f.split(`
`),p=!1,g=h.map(v=>{let m=v.split(":");return(m[0]?m[0].trim():"")===t?(p=!0,`${t}: ${n}`):v});return p||g.push(`${t}: ${n}`),`---
${g.join(`
`).trim()}
---${d}`}else return`---
${t}: ${n}
---
${r}`}function zo(r){let t=(0,Ll.default)().format("YYYY-MM-DD-HHmm"),n=Math.random().toString(36).substring(2,6).padEnd(4,"0"),o=r.replace(/[\\/:*?"<>|]/g,"-").replace(/\s+/g,"-").replace(/-+/g,"-");return`${t}-${n}-${o}.md`}function ku(r){let n=`## Daily Stack - ${(0,Ll.default)().format("YYYY-MM-DD")}

`;return r.forEach(s=>{let o=s.startTime?s.startTime.format("HH:mm"):"00:00",l=`[[${s.id}|${s.title}]]`;n+=`- [ ] ${o} ${l} (${s.duration}m)
`}),n}Ze();var xu=rn(Hr(),1),Go=class{constructor(t,n){this.app=t;this.targetFolder=n}async submitThought(t){if(!t.trim())return null;await this.ensureFolderExists(this.targetFolder);let n=zo(t),s=`${this.targetFolder}/${n}`,o=`# ${t}`;return o=Qe(o,"task",t),o=Qe(o,"status","todo"),o=Qe(o,"duration",30),o=Qe(o,"created",(0,xu.default)().format("YYYY-MM-DD HH:mm")),o=Qe(o,"type","task"),o=Qe(o,"flow_state","dump"),await this.app.vault.create(s,o),{id:s,title:t,status:"todo",duration:30,isAnchored:!1,children:[]}}async ensureFolderExists(t){this.app.vault.getAbstractFileByPath(t)||await this.app.vault.createFolder(t)}};var H_=ce('<h2 class="todo-flow-card-header svelte-1s7zazm"> </h2>'),W_=ce('<div class="todo-flow-card-actions svelte-1s7zazm"><!></div>'),B_=ce('<div><!> <div class="todo-flow-card-body svelte-1s7zazm"><!></div> <!></div>'),z_={hash:"svelte-1s7zazm",code:`.todo-flow-card.svelte-1s7zazm {display:flex;flex-direction:column;width:100%;max-width:600px; /* Default constraint */background:var(--background-secondary);border:1px solid var(--background-modifier-border);border-radius:8px;padding:2rem;box-shadow:0 4px 12px rgba(0, 0, 0, 0.1);transition:transform 0.2s, opacity 0.2s;gap:1.5rem;}

   /* Headers */.todo-flow-card-header.svelte-1s7zazm {text-align:center;color:var(--text-muted);font-weight:500;margin:0;font-size:1.1rem;opacity:0.9;text-transform:uppercase;letter-spacing:0.05em;}

   /* Body */.todo-flow-card-body.svelte-1s7zazm {flex:1;width:100%;display:flex;flex-direction:column;align-items:center;justify-content:center;}

   /* Actions Footer */.todo-flow-card-actions.svelte-1s7zazm {display:flex;justify-content:center;gap:1rem;margin-top:auto;}

   /* Variant: Triage overrides */.todo-flow-card.variant-triage.svelte-1s7zazm {max-width:400px;height:300px;text-align:center;}

   /* Variant: Dump overrides */`};function Ts(r,t){let n=bl(t);yr(r,z_);let s=ct(t,"title",8,void 0),o=ct(t,"variant",8,"default");var l=B_(),f=F(l);{var d=m=>{var y=H_(),x=F(y,!0);R(y),Ce(()=>_e(x,s())),le(m,y)};Bt(f,m=>{s()&&m(d)})}var h=q(f,2),p=F(h);Uo(p,t,"default",{},null),R(h);var g=q(h,2);{var v=m=>{var y=W_(),x=F(y);Uo(x,t,"actions",{},null),R(y),le(m,y)};Bt(g,m=>{P(()=>n.actions)&&m(v)})}R(l),Ce(()=>{var m;return Vr(l,1,`todo-flow-card variant-${(m=o())!=null?m:""}`,"svelte-1s7zazm")}),le(r,l)}Ze();var G_=ce('<textarea placeholder="Type and press Enter..." class="todo-flow-dump-input svelte-rg61pz"></textarea> <p class="todo-flow-dump-hint svelte-rg61pz">Type <strong>done</strong> and press Enter to start triage.</p>',1),j_=ce('<div class="todo-flow-dump-container svelte-rg61pz"><!></div>'),K_={hash:"svelte-rg61pz",code:`.todo-flow-dump-container.svelte-rg61pz {display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;width:100%;background:var(--background-primary);padding:2rem;}.todo-flow-dump-hint.svelte-rg61pz {text-align:center;color:var(--text-muted);font-size:0.85rem;margin-top:1rem;opacity:0.7;}.todo-flow-dump-input.svelte-rg61pz {width:100%;
        /* Minimal height that grows a bit if needed, but keeps layout centered */min-height:150px;font-size:1.5rem;border:none;outline:none;resize:none;background:transparent;color:var(--text-normal);line-height:1.6;font-family:inherit;text-align:left;}.todo-flow-dump-input.svelte-rg61pz::placeholder {color:var(--text-muted);font-style:italic;text-align:center; /* Placeholder can be centered */opacity:0.5;}`};function Pl(r,t){ar(t,!1),yr(r,K_);let n=ct(t,"app",8),s=ct(t,"folder",8),o=ct(t,"onComplete",8),l=Pr(""),f,d=Pr(),h=[];Fi(()=>{var m;f=new Go(n(),s()),(m=T(d))==null||m.focus()});async function p(m){if(m.key==="Enter"&&!m.shiftKey){m.preventDefault();let y=T(l).trim();if(y.toLowerCase()==="done"){U(l,""),o()&&o()(h);return}if(y){U(l,"");let x=await f.submitThought(y);x&&(h=[...h,x])}}}xs();var g=j_(),v=F(g);Ts(v,{title:"Dump your thoughts",variant:"dump",children:(m,y)=>{var x=G_(),$=fl(x);ul($),Ri($,S=>U(d,S),()=>T(d)),Le(2),Ol($,()=>T(l),S=>U(l,S)),gs("keydown",$,p),le(m,x)},$$slots:{default:!0}}),R(g),le(r,g),lr()}Ze();var Ko="todo-flow-dump-view",jo=class extends bu.ItemView{constructor(n,s,o){super(n);k(this,"component");k(this,"folder");k(this,"onComplete");this.folder=s,this.onComplete=o}getViewType(){return Ko}getDisplayText(){return"Todo Dump"}async onOpen(){this.component=Yr(Pl,{target:this.contentEl,props:{app:this.app,folder:this.folder,onComplete:n=>{this.onComplete(n),this.leaf.detach()}}})}async onClose(){this.component&&dn(this.component)}};var $u=require("obsidian");Ze();An();var Zo=class{constructor(t,n,s){this.app=t;this.tasks=n;k(this,"index",0);k(this,"shortlistIndices",new Set);k(this,"notNowIndices",new Set);k(this,"liveFiles",[]);k(this,"logger");this.logger=s,this.logger&&this.logger.info(`[TriageController] Initialized with ${n.length} tasks.`)}getCurrentTask(){return this.index>=this.tasks.length?null:this.tasks[this.index]}async openCurrentTask(){let t=this.getCurrentTask();t&&await this.app.workspace.openLinkText(t.id,"",!0)}async swipeRight(){if(this.index>=this.tasks.length)return;let t=this.tasks[this.index];this.shortlistIndices.add(this.index),this.logger&&await this.logger.info(`[TriageController] Swiping Right on ${t.id} (flow_state -> shortlist)`),await this.updateFlowState(t.id,"shortlist"),this.index++}async swipeLeft(){this.index>=this.tasks.length||(this.notNowIndices.add(this.index),this.index++)}async updateFlowState(t,n){this.logger&&await this.logger.info(`[TriageController] updateFlowState: Setting ${t} to "${n}"`);let s=this.app.vault.getAbstractFileByPath(t);s&&s.extension==="md"&&await this.app.vault.process(s,o=>Qe(o,"flow_state",n))}getResults(){return{shortlist:this.tasks.filter((t,n)=>this.shortlistIndices.has(n)),notNow:this.tasks.filter((t,n)=>this.notNowIndices.has(n))}}};Ze();var q_=r=>r;function Z_(r){let t=r-1;return t*t*t+1}function Su(r,{delay:t=0,duration:n=400,easing:s=q_}={}){let o=+getComputedStyle(r).opacity;return{delay:t,duration:n,easing:s,css:l=>`opacity: ${l*o}`}}var Yl=!1;function Eu(r,{delay:t=0,duration:n=400,easing:s=Z_,axis:o="y"}={}){let l=getComputedStyle(r);E&&!Yl&&/(contents|inline|table)/.test(l.display)&&(Yl=!0,Promise.resolve().then(()=>Yl=!1),hf(l.display));let f=+l.opacity,d=o==="y"?"height":"width",h=parseFloat(l[d]),p=o==="y"?["top","bottom"]:["left","right"],g=p.map(M=>`${M[0].toUpperCase()}${M.slice(1)}`),v=parseFloat(l[`padding${g[0]}`]),m=parseFloat(l[`padding${g[1]}`]),y=parseFloat(l[`margin${g[0]}`]),x=parseFloat(l[`margin${g[1]}`]),$=parseFloat(l[`border${g[0]}Width`]),S=parseFloat(l[`border${g[1]}Width`]);return{delay:t,duration:n,easing:s,css:M=>`overflow: hidden;opacity: ${Math.min(M*20,1)*f};${d}: ${M*h}px;padding-${p[0]}: ${M*v}px;padding-${p[1]}: ${M*m}px;margin-${p[0]}: ${M*y}px;margin-${p[1]}: ${M*x}px;border-${p[0]}-width: ${M*$}px;border-${p[1]}-width: ${M*S}px;min-${d}: 0`}}var Pi={navUp:["k","ArrowUp"],navDown:["j","ArrowDown"],moveUp:["K","Shift+ArrowUp"],moveDown:["J","Shift+ArrowDown"],anchor:["Shift+F"],durationUp:["f","ArrowRight"],durationDown:["d","ArrowLeft"],undo:["u","U"],redo:["Shift+U"],confirm:["Enter"],cancel:["Escape"],toggleDone:["x","X"],createTask:["c","C"],deleteTask:["Backspace","Delete"],forceOpen:["Shift+Enter"],goBack:["h"],export:["Shift+E","Cmd+s","Ctrl+s"],rename:["e"],archive:["z","Z"],quickAdd:["o"],toggleHelp:["?"]},Li=class{constructor(t){this.settings=t}resolveAction(t){for(let[n,s]of Object.entries(this.settings))if(Array.isArray(s)&&s.some(o=>this.matchesBinding(o,t))){let o=this.mapToActions(n);if(o)return this.settings.debug&&console.debug(`[TODO_FLOW_TRACE] Key matched: ${t.key} (code: ${t.code}) -> ${o}`),o}return null}mapToActions(t){return{navUp:"NAV_UP",navDown:"NAV_DOWN",moveUp:"MOVE_UP",moveDown:"MOVE_DOWN",anchor:"ANCHOR",durationUp:"DURATION_UP",durationDown:"DURATION_DOWN",undo:"UNDO",redo:"REDO",confirm:"CONFIRM",cancel:"CANCEL",toggleDone:"TOGGLE_DONE",createTask:"CREATE_TASK",deleteTask:"DELETE_TASK",forceOpen:"FORCE_OPEN",goBack:"GO_BACK",export:"EXPORT",rename:"RENAME",archive:"ARCHIVE",quickAdd:"QUICK_ADD",toggleHelp:"TOGGLE_HELP"}[t]||null}matchesBinding(t,n){let s=t.split("+"),o=s[s.length-1],l=s.slice(0,-1);if(o.length===1&&o.toLowerCase()!==o.toUpperCase()){if(l.length===0)return!(n.key!==o||n.ctrlKey||n.altKey||n.metaKey);if(n.key.toLowerCase()!==o.toLowerCase())return!1}else if(o!==n.key&&o!==n.code)return!1;let d=l.includes("Shift"),h=l.includes("Ctrl"),p=l.includes("Alt"),g=l.includes("Meta");return!!n.shiftKey!==d&&!(o.length===1&&n.key===o&&!d&&n.shiftKey)||!!n.ctrlKey!==h||!!n.altKey!==p||!!n.metaKey!==g?!1:(this.settings.debug&&n.key==="h"&&console.log(`[TODO_FLOW_TRACE] matchesBinding check for 'h': binding=${t}, key=${n.key}, shift=${n.shiftKey}, ctrl=${n.ctrlKey}, alt=${n.altKey}, meta=${n.metaKey}`),!0)}};var Qo=class{constructor(){k(this,"undoStack",[]);k(this,"redoStack",[]);k(this,"maxStackSize",50)}async executeCommand(t){await t.execute(),this.undoStack.push(t),this.redoStack=[],this.undoStack.length>this.maxStackSize&&this.undoStack.shift()}undo(){let t=this.undoStack.pop();t&&(t.undo(),this.redoStack.push(t))}redo(){let t=this.redoStack.pop();t&&(t.execute(),this.undoStack.push(t))}canUndo(){return this.undoStack.length>0}canRedo(){return this.redoStack.length>0}clear(){this.undoStack=[],this.redoStack=[]}getStackSizes(){return{undo:this.undoStack.length,redo:this.redoStack.length}}};var Xo=class{constructor(t,n){k(this,"description");k(this,"controller");k(this,"direction");k(this,"previousIndex");this.controller=t,this.direction=n,this.description=`Swipe ${n}`,this.previousIndex=this.controller.index}async execute(){this.direction==="left"?await this.controller.swipeLeft():await this.controller.swipeRight()}undo(){this.controller.index=this.previousIndex,this.direction==="left"?this.controller.notNowIndices.delete(this.previousIndex):this.controller.shortlistIndices.delete(this.previousIndex)}};var Q_=ce('<span class="key svelte-1erif2g"> </span>'),X_=ce('<span class="key svelte-1erif2g"> </span>'),J_=ce('<span class="key svelte-1erif2g"> </span>'),eg=ce('<span class="key svelte-1erif2g"> </span>'),tg=ce('<span class="key svelte-1erif2g"> </span>'),rg=ce('<span class="key svelte-1erif2g"> </span>'),ng=ce('<span class="key svelte-1erif2g"> </span>'),ig=ce('<div class="todo-flow-help-modal svelte-1erif2g"><div class="content svelte-1erif2g"><h2 class="svelte-1erif2g">Keyboard Shortcuts</h2> <div class="grid svelte-1erif2g"><div class="section"><h3 class="svelte-1erif2g">Navigation</h3> <div class="row svelte-1erif2g"><div class="keys-group svelte-1erif2g"><!> / <!></div> <span>Move Focus</span></div> <div class="row svelte-1erif2g"><div class="keys-group svelte-1erif2g"><!> / <!></div> <span>Open / Drill Down</span></div> <div class="row svelte-1erif2g"><div class="keys-group svelte-1erif2g"></div> <span>Go Back</span></div></div> <div class="section"><h3 class="svelte-1erif2g">Actions</h3> <div class="row svelte-1erif2g"><span class="key svelte-1erif2g"> </span> <span>Toggle Done</span></div> <div class="row svelte-1erif2g"><span class="key svelte-1erif2g"> </span> <span>Create Task</span></div> <div class="row svelte-1erif2g"><span class="key svelte-1erif2g"> </span> <span>Rename Task</span></div> <div class="row svelte-1erif2g"><span class="key svelte-1erif2g"> </span> <span>Delete Task</span></div> <div class="row svelte-1erif2g"><span class="key svelte-1erif2g"> </span> <span>Export to Note</span></div></div> <div class="section"><h3 class="svelte-1erif2g">Organization</h3> <div class="row svelte-1erif2g"><div class="keys-group svelte-1erif2g"><span class="key svelte-1erif2g"> </span> / <span class="key svelte-1erif2g"> </span></div> <span>Move Task</span></div> <div class="row svelte-1erif2g"><span class="key svelte-1erif2g"> </span> <span>Toggle Anchor</span></div> <div class="row svelte-1erif2g"><div class="keys-group svelte-1erif2g"><!> / <!></div> <span>Adjust Duration</span></div> <div class="row svelte-1erif2g"><span class="key svelte-1erif2g"> </span> / <span class="key svelte-1erif2g"> </span> <span>Undo / Redo</span></div></div> <div class="section"><h3 class="svelte-1erif2g">System</h3> <div class="row svelte-1erif2g"><span>Timing Mode</span> <span> </span></div> <div class="help-text svelte-1erif2g">Toggle via Command Palette: <b>"Toggle Timing Mode"</b></div></div></div> <div class="footer svelte-1erif2g">Press <span class="key svelte-1erif2g">?</span> or <span class="key svelte-1erif2g">Esc</span> to close</div></div></div>'),sg={hash:"svelte-1erif2g",code:".todo-flow-help-modal.svelte-1erif2g {position:absolute;top:0;left:0;width:100%;height:100%;background:rgba(0, 0, 0, 0.85); /* Gmail style dark overlay */display:flex;align-items:center;justify-content:center;z-index:1000;backdrop-filter:blur(2px);}.content.svelte-1erif2g {background:var(--background-primary);color:var(--text-normal);border:1px solid var(--background-modifier-border);border-radius:8px;padding:30px;box-shadow:0 10px 30px rgba(0, 0, 0, 0.5);max-width:600px;width:90%;max-height:90%;overflow-y:auto;}h2.svelte-1erif2g {margin-top:0;margin-bottom:20px;text-align:center;color:var(--text-accent);}.grid.svelte-1erif2g {display:grid;grid-template-columns:repeat(auto-fit, minmax(180px, 1fr));gap:20px;margin-bottom:20px;}h3.svelte-1erif2g {font-size:0.9em;text-transform:uppercase;letter-spacing:0.1em;margin-bottom:10px;color:var(--text-muted);border-bottom:1px solid var(--background-modifier-border);padding-bottom:5px;}.row.svelte-1erif2g {display:flex;justify-content:space-between;margin-bottom:8px;font-size:0.95em;}.key.svelte-1erif2g {font-family:monospace;background:var(--background-secondary);border:1px solid var(--background-modifier-border);border-radius:4px;padding:2px 6px;font-size:0.85em;color:var(--text-normal);}.footer.svelte-1erif2g {text-align:center;margin-top:20px;color:var(--text-muted);font-size:0.9em;}.keys-group.svelte-1erif2g {display:flex;gap:6px;}.status-badge.svelte-1erif2g {font-size:0.85em;font-weight:bold;color:var(--text-accent);}.status-badge.fixed.svelte-1erif2g {color:var(--text-warning);}.help-text.svelte-1erif2g {font-size:0.8em;color:var(--text-muted);margin-top:10px;font-style:italic;}"};function Ss(r,t){ar(t,!1),yr(r,sg);let n=ct(t,"keys",8),s=ct(t,"settings",8);function o(Me){return Me?Me.replace("ArrowUp","\u2191").replace("ArrowDown","\u2193").replace("ArrowLeft","\u2190").replace("ArrowRight","\u2192").replace("Enter","\u23CE").replace("Backspace","\u232B").replace("Shift","\u21E7").replace("Cmd","\u2318").replace("Ctrl","Ctrl").replace("Alt","Opt").replace("Meta","\u2318").replace(/\+/g,"+"):""}xs();var l=ig(),f=F(l),d=q(F(f),2),h=F(d),p=q(F(h),2),g=F(p),v=F(g);gr(v,1,()=>(Se(n()),P(()=>n().navDown)),_r,(Me,J)=>{var oe=Q_(),Ue=F(oe,!0);R(oe),Ce(Fe=>_e(Ue,Fe),[()=>(T(J),P(()=>o(T(J))))]),le(Me,oe)});var m=q(v,2);gr(m,1,()=>(Se(n()),P(()=>n().navUp)),_r,(Me,J)=>{var oe=X_(),Ue=F(oe,!0);R(oe),Ce(Fe=>_e(Ue,Fe),[()=>(T(J),P(()=>o(T(J))))]),le(Me,oe)}),R(g),Le(2),R(p);var y=q(p,2),x=F(y),$=F(x);gr($,1,()=>(Se(n()),P(()=>n().confirm)),_r,(Me,J)=>{var oe=J_(),Ue=F(oe,!0);R(oe),Ce(Fe=>_e(Ue,Fe),[()=>(T(J),P(()=>o(T(J))))]),le(Me,oe)});var S=q($,2);gr(S,1,()=>(Se(n()),P(()=>n().forceOpen)),_r,(Me,J)=>{var oe=eg(),Ue=F(oe,!0);R(oe),Ce(Fe=>_e(Ue,Fe),[()=>(T(J),P(()=>o(T(J))))]),le(Me,oe)}),R(x),Le(2),R(y);var M=q(y,2),V=F(M);gr(V,5,()=>(Se(n()),P(()=>n().goBack)),_r,(Me,J)=>{var oe=tg(),Ue=F(oe,!0);R(oe),Ce(Fe=>_e(Ue,Fe),[()=>(T(J),P(()=>o(T(J))))]),le(Me,oe)}),R(V),Le(2),R(M),R(h);var se=q(h,2),X=q(F(se),2),N=F(X),W=F(N,!0);R(N),Le(2),R(X);var ie=q(X,2),re=F(ie),Ye=F(re,!0);R(re),Le(2),R(ie);var fe=q(ie,2),Re=F(fe),vt=F(Re,!0);R(Re),Le(2),R(fe);var Ct=q(fe,2),Jt=F(Ct),Gt=F(Jt,!0);R(Jt),Le(2),R(Ct);var Wr=q(Ct,2),Br=F(Wr),I=F(Br,!0);R(Br),Le(2),R(Wr),R(se);var j=q(se,2),ge=q(F(j),2),de=F(ge),We=F(de),A=F(We,!0);R(We);var wr=q(We,2),er=F(wr,!0);R(wr),R(de),Le(2),R(ge);var dt=q(ge,2),tr=F(dt),zr=F(tr,!0);R(tr),Le(2),R(dt);var jt=q(dt,2),rr=F(jt),Gr=F(rr);gr(Gr,1,()=>(Se(n()),P(()=>n().durationUp)),_r,(Me,J)=>{var oe=rg(),Ue=F(oe,!0);R(oe),Ce(Fe=>_e(Ue,Fe),[()=>(T(J),P(()=>o(T(J))))]),le(Me,oe)});var Rt=q(Gr,2);gr(Rt,1,()=>(Se(n()),P(()=>n().durationDown)),_r,(Me,J)=>{var oe=ng(),Ue=F(oe,!0);R(oe),Ce(Fe=>_e(Ue,Fe),[()=>(T(J),P(()=>o(T(J))))]),le(Me,oe)}),R(rr),Le(2),R(jt);var kr=q(jt,2),On=F(kr),he=F(On,!0);R(On);var ye=q(On,2),Ft=F(ye,!0);R(ye),Le(2),R(kr),R(j);var Hi=q(j,2),ht=q(F(Hi),2),Cn=q(F(ht),2);let Is;var _a=F(Cn,!0);R(Cn),R(ht),Le(2),R(Hi),R(d),Le(2),R(f),R(l),Ce((Me,J,oe,Ue,Fe,pe,Ls,Ps,ri,Wi)=>{_e(W,Me),_e(Ye,J),_e(vt,oe),_e(Gt,Ue),_e(I,Fe),_e(A,pe),_e(er,Ls),_e(zr,Ps),_e(he,ri),_e(Ft,Wi),Is=Vr(Cn,1,"status-badge svelte-1erif2g",null,Is,{fixed:s().timingMode==="fixed"}),_e(_a,(Se(s()),P(()=>s().timingMode==="now"?"Dynamic (Now)":"Fixed ("+s().fixedStartTime+")")))},[()=>(Se(n()),P(()=>o(n().toggleDone[0]))),()=>(Se(n()),P(()=>o(n().createTask[0]))),()=>(Se(n()),P(()=>o(n().rename[0]))),()=>(Se(n()),P(()=>o(n().deleteTask[0]))),()=>(Se(n()),P(()=>o(n().export[0]))),()=>(Se(n()),P(()=>o(n().moveDown[0]))),()=>(Se(n()),P(()=>o(n().moveUp[0]))),()=>(Se(n()),P(()=>o(n().anchor[0]))),()=>(Se(n()),P(()=>o(n().undo[0]))),()=>(Se(n()),P(()=>o(n().redo[0])))]),ks(3,l,()=>Su,()=>({duration:100})),le(r,l),lr()}var og=ce('<div class="todo-flow-triage-hint svelte-1nn2yzl">\u2190 Not Now | Shortlist \u2192</div>'),ag=ce("<div><!></div>"),lg=ce('<div class="todo-flow-triage-done"><h2>All done!</h2> <p>Your shortlist has been updated.</p></div>'),cg=ce('<div class="todo-flow-triage-container svelte-1nn2yzl"><!> <div class="todo-flow-triage-controls svelte-1nn2yzl"><button class="control-btn not-now svelte-1nn2yzl">\u2190 Not Now</button> <button class="control-btn undo svelte-1nn2yzl">Undo</button> <button class="control-btn shortlist svelte-1nn2yzl">Shortlist \u2192</button></div> <!></div>'),fg={hash:"svelte-1nn2yzl",code:`.todo-flow-triage-container.svelte-1nn2yzl {display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;padding:2rem;background:var(--background-primary);gap:2rem;}.triage-card-wrapper.svelte-1nn2yzl {
        /* Wrapper handles positioning and animation, Card handles visual box */transition:transform 0.2s, opacity 0.2s;width:100%;max-width:400px; /* Match Card variant-triage width */display:flex;justify-content:center;}.triage-card-wrapper.left.svelte-1nn2yzl {transform:translateX(-100px) rotate(-10deg);opacity:0;}.triage-card-wrapper.right.svelte-1nn2yzl {transform:translateX(100px) rotate(10deg);opacity:0;}.todo-flow-triage-hint.svelte-1nn2yzl {margin-top:1rem;color:var(--text-muted);font-size:0.9rem;}.todo-flow-triage-controls.svelte-1nn2yzl {display:flex;gap:1rem;}.control-btn.svelte-1nn2yzl {padding:0.5rem 1rem;border-radius:0.5rem;cursor:pointer;border:1px solid var(--background-modifier-border);background:var(--background-secondary);color:var(--text-normal);transition:background 0.2s;}.control-btn.svelte-1nn2yzl:hover {background:var(--background-modifier-hover);}.shortlist.svelte-1nn2yzl {background:var(--interactive-accent);color:var(--text-on-accent);}`};function Ul(r,t){ar(t,!0),yr(r,fg);let n=ct(t,"debug",3,!1),s,o=Oe(null),l=Oe(null),f=Oe(!1),d;Fi(()=>{s=new Zo(t.app,t.tasks),U(o,s.getCurrentTask(),!0),d=new Li(t.keys||{navUp:[],navDown:[],moveUp:[],moveDown:[],anchor:[],durationUp:["ArrowRight"],durationDown:["ArrowLeft"],undo:["u"],confirm:[],cancel:[]})});function h(N){U(l,N,!0),setTimeout(async()=>{await t.historyManager.executeCommand(new Xo(s,N)),U(o,s.getCurrentTask(),!0),U(l,null),T(o)||t.onComplete(s.getResults())},200)}function p(N){if(n()&&console.debug("[TODO_FLOW_TRACE] Triage handleKeyDown:",N.key),N.target instanceof HTMLInputElement||N.target instanceof HTMLTextAreaElement||N.target.isContentEditable)return;["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"," "].includes(N.key)&&N.preventDefault();let W=d.resolveAction(N);if(W){if(N.preventDefault(),W==="UNDO"){t.historyManager.undo(),U(o,s.getCurrentTask(),!0);return}if(W==="REDO"){t.historyManager.redo(),U(o,s.getCurrentTask(),!0);return}switch(W){case"DURATION_DOWN":case"NAV_DOWN":h("left");break;case"DURATION_UP":case"NAV_UP":h("right");break;case"CONFIRM":n()&&console.log("[TriageView] CONFIRM (Open) triggered"),s.openCurrentTask();break;case"TOGGLE_HELP":U(f,!T(f)),n()&&console.log(`[TriageView] Help toggled: ${T(f)}`);break;case"CANCEL":T(f)&&U(f,!1);break}}}var g={handleKeyDown:p},v=cg(),m=F(v);{var y=N=>{var W=ag(),ie=F(W);Ts(ie,{get title(){return T(o).title},variant:"triage",children:(re,Ye)=>{var fe=og();le(re,fe)},$$slots:{default:!0}}),R(W),Ce(()=>{var re;return Vr(W,1,`triage-card-wrapper ${(re=T(l))!=null?re:""}`,"svelte-1nn2yzl")}),ks(3,W,()=>Eu),le(N,W)},x=N=>{var W=lg();le(N,W)};Bt(m,N=>{T(o)?N(y):N(x,!1)})}var $=q(m,2),S=F($);S.__click=()=>h("left");var M=q(S,2);M.__click=()=>{t.historyManager.undo(),U(o,s.getCurrentTask(),!0)};var V=q(M,2);V.__click=()=>h("right"),R($);var se=q($,2);{var X=N=>{Ss(N,{get keys(){return t.keys},get settings(){return t.settings}})};Bt(se,N=>{T(f)&&N(X)})}return R(v),le(r,v),lr(g)}Ni(["click"]);Ze();An();var Vl="todo-flow-triage-view",Es=class r extends $u.ItemView{constructor(n,s,o,l,f,d){super(n);k(this,"component");k(this,"tasks");k(this,"settings");k(this,"keys");k(this,"onComplete");k(this,"historyManager");k(this,"logger");this.tasks=s,this.settings=o,this.keys=o.keys||Pi,this.historyManager=l,this.logger=f,this.onComplete=d}getViewType(){return Vl}getDisplayText(){return"Task Triage"}async onOpen(){this.registerDomEvent(window,"keydown",n=>{this.app.workspace.getActiveViewOfType(r)===this&&this.component&&this.component.handleKeyDown(n)}),this.component=Yr(Ul,{target:this.contentEl,props:{app:this.app,tasks:this.tasks,keys:this.keys,settings:this.settings,debug:this.keys.debug,historyManager:this.historyManager,onComplete:n=>{this.onComplete(n),this.leaf.detach()}}})}async onClose(){this.component&&dn(this.component)}};var Fu=require("obsidian");var Hl=rn(Hr(),1);Ze();var Yi=[5,10,15,20,30,45,60,90,120,180,240,300,360,420,480],$s=class{constructor(t,n,s,o){k(this,"tasks");k(this,"currentTime");k(this,"onTaskUpdate");k(this,"onTaskCreate");this.currentTime=n,this.onTaskUpdate=s,this.onTaskCreate=o,this.tasks=ft(t,n)}updateTime(t){this.currentTime=t,this.tasks=ft(this.tasks,this.currentTime)}getTasks(){return this.tasks}moveUp(t){var l,f;if(t<=0||(l=this.tasks[t])!=null&&l.isAnchored)return t;let n=t-1;for(;n>=0&&((f=this.tasks[n])!=null&&f.isAnchored);)n--;if(n<0)return t;let s=this.tasks[t],o=[...this.tasks];return[o[t],o[n]]=[o[n],o[t]],this.tasks=ft(o,this.currentTime),this.tasks.findIndex(d=>d.id===s.id)}moveDown(t){var l,f;if(t>=this.tasks.length-1||(l=this.tasks[t])!=null&&l.isAnchored)return t;let n=t+1;for(;n<this.tasks.length&&((f=this.tasks[n])!=null&&f.isAnchored);)n++;if(n>=this.tasks.length)return t;let s=this.tasks[t],o=[...this.tasks];return[o[t],o[n]]=[o[n],o[t]],this.tasks=ft(o,this.currentTime),this.tasks.findIndex(d=>d.id===s.id)}toggleAnchor(t,n){var d;if(!this.tasks[t])return t;let s=this.tasks[t],o={...s};o.isAnchored=!o.isAnchored,o.isAnchored&&n?o.startTime=(0,Hl.default)(n):o.isAnchored&&(o.startTime=(0,Hl.default)(o.startTime));let l=[...this.tasks];l[t]=o,this.tasks=ft(l,this.currentTime);let f=this.tasks.findIndex(h=>h.id===s.id);return f!==-1?((d=this.onTaskUpdate)==null||d.call(this,this.tasks[f]),f):t}toggleStatus(t){var f;if(!this.tasks[t])return t;let n=this.tasks[t],s={...n};s.status=s.status==="todo"?"done":"todo";let o=[...this.tasks];o[t]=s,this.tasks=ft(o,this.currentTime);let l=this.tasks.findIndex(d=>d.id===n.id);return l!==-1?((f=this.onTaskUpdate)==null||f.call(this,this.tasks[l]),l):t}updateTaskTitle(t,n){var d;if(!this.tasks[t])return t;let s=this.tasks[t],o={...s};o.title=n;let l=[...this.tasks];l[t]=o,this.tasks=ft(l,this.currentTime);let f=this.tasks.findIndex(h=>h.id===s.id);return f!==-1?((d=this.onTaskUpdate)==null||d.call(this,this.tasks[f]),f):t}addTaskAt(t,n){if(!this.onTaskCreate)return null;let s=this.onTaskCreate(n),o=[...this.tasks];o.splice(t+1,0,s),this.tasks=ft(o,this.currentTime);let l=this.tasks.findIndex(f=>f.id===s.id);return{task:s,index:l}}removeTask(t){if(!this.tasks[t])return;let n=[...this.tasks];n.splice(t,1),this.tasks=ft(n,this.currentTime)}insertTask(t,n){let s=[...this.tasks];s.splice(t,0,n),this.tasks=ft(s,this.currentTime)}insertAfter(t,n){let s=[...this.tasks];return s.splice(t+1,0,n),this.tasks=ft(s,this.currentTime),this.tasks.findIndex(o=>o.id===n.id)}scaleDuration(t,n){var g,v;if(!this.tasks[t])return t;let s=this.tasks[t],o={...s},l=Bo(o),f=(g=o.originalDuration)!=null?g:o.duration,d=Yi.findIndex(m=>m>=f);d===-1&&(d=Yi.length-1),n==="up"?(Yi[d]===f&&(d=Math.min(Yi.length-1,d+1)),o.originalDuration=Yi[d]):(d=Math.max(0,d-1),o.originalDuration=Yi[d]);let h=[...this.tasks];h[t]=o,this.tasks=ft(h,this.currentTime);let p=this.tasks.findIndex(m=>m.id===s.id);return p!==-1?((v=this.onTaskUpdate)==null||v.call(this,this.tasks[p]),p):t}handleEnter(t,n=!1){if(!this.tasks[t])return null;let s=this.tasks[t];return!n&&s.children&&s.children.length>0?{action:"DRILL_DOWN",newStack:s.children}:{action:"OPEN_FILE",path:s.id}}};Ze();function Du(r){if(r<60)return`${r}m`;let t=Math.floor(r/60),n=r%60;return n===0?`${t}h`:`${t}h ${n}m`}var Mu=rn(Hr());Ze();var Ds=class{constructor(t,n,s){k(this,"description");k(this,"controller");k(this,"index");k(this,"direction");k(this,"resultIndex",null);this.controller=t,this.index=n,this.direction=s,this.description=`Move task ${s} from index ${n}`}execute(){this.direction==="up"?this.resultIndex=this.controller.moveUp(this.index):this.resultIndex=this.controller.moveDown(this.index)}undo(){this.resultIndex!==null&&(this.direction==="up"?this.controller.moveDown(this.resultIndex):this.controller.moveUp(this.resultIndex))}},Jo=class{constructor(t,n){k(this,"description");k(this,"controller");k(this,"index");k(this,"resultIndex",null);this.controller=t,this.index=n,this.description=`Toggle anchor at index ${n}`}execute(){this.resultIndex=this.controller.toggleAnchor(this.index)}undo(){this.resultIndex!==null&&this.controller.toggleAnchor(this.resultIndex)}},Ms=class{constructor(t,n,s){k(this,"description");k(this,"controller");k(this,"index");k(this,"direction");k(this,"resultIndex",null);this.controller=t,this.index=n,this.direction=s,this.description=`Scale duration ${s} at index ${n}`}execute(){this.resultIndex=this.controller.scaleDuration(this.index,this.direction)}undo(){if(this.resultIndex===null)return;let t=this.direction==="up"?"down":"up";this.controller.scaleDuration(this.resultIndex,t)}},ea=class{constructor(t,n){k(this,"description");k(this,"controller");k(this,"index");k(this,"resultIndex",null);this.controller=t,this.index=n,this.description=`Toggle status at index ${n}`}execute(){this.resultIndex=this.controller.toggleStatus(this.index)}undo(){this.resultIndex!==null&&this.controller.toggleStatus(this.resultIndex)}},ta=class{constructor(t,n,s){k(this,"description");k(this,"controller");k(this,"index");k(this,"title");k(this,"addedTask",null);k(this,"resultIndex",null);this.controller=t,this.index=n,this.title=s,this.description=`Add task "${s}" at index ${n}`}execute(){let t=this.controller.addTaskAt(this.index,this.title);t&&(this.addedTask=t.task,this.resultIndex=t.index)}undo(){this.resultIndex!==null?this.controller.removeTask(this.resultIndex):this.controller.removeTask(this.index+1)}},ra=class{constructor(t,n){k(this,"description");k(this,"controller");k(this,"index");k(this,"deletedTask");this.controller=t,this.index=n,this.deletedTask=t.getTasks()[n]||null,this.description=`Delete task at index ${n}`}execute(){this.controller.removeTask(this.index)}undo(){this.deletedTask&&this.controller.insertTask(this.index,this.deletedTask)}},na=class{constructor(t,n,s){k(this,"description");k(this,"controller");k(this,"index");k(this,"task");k(this,"onSync");this.controller=t,this.index=n,this.task=t.getTasks()[n],this.onSync=s,this.description=`Archive task at index ${n}`}async execute(){let t={...this.task,flow_state:"archived"};await this.onSync(t),this.controller.removeTask(this.index)}async undo(){let t={...this.task,flow_state:"shortlist"};await this.onSync(t),this.controller.insertTask(this.index,this.task)}},ia=class{constructor(t,n,s){k(this,"description");k(this,"controller");k(this,"index");k(this,"task");k(this,"resultIndex",null);this.controller=t,this.index=n,this.task=s,this.description=`Insert task "${s.title}" after index ${n}`}execute(){this.resultIndex=this.controller.insertAfter(this.index,this.task)}undo(){this.resultIndex!==null&&this.controller.removeTask(this.resultIndex)}};var ug=ce('<div class="todo-flow-stack-header svelte-gkdjxn"> </div>'),dg=ce('<input type="text" class="todo-flow-title-input svelte-gkdjxn"/>'),hg=ce('<div class="title svelte-gkdjxn"> </div>'),pg=ce('<span class="constraint-indicator svelte-gkdjxn" title="Constrained by subtasks">\u2696\uFE0F</span>'),mg=ce('<div class="anchor-badge svelte-gkdjxn">\u2693</div>'),_g=ce('<div><div class="time-col svelte-gkdjxn"> </div> <div class="content-col svelte-gkdjxn"><!> <div class="duration svelte-gkdjxn"> <!></div></div> <!></div>'),gg=ce('<div class="todo-flow-stack-container svelte-gkdjxn" tabindex="0" role="application"><!> <div class="todo-flow-timeline svelte-gkdjxn"></div> <!></div>'),vg={hash:"svelte-gkdjxn",code:".todo-flow-stack-container.svelte-gkdjxn {padding:2rem;background:var(--background-primary);height:100%;overflow-y:auto;}.todo-flow-stack-header.svelte-gkdjxn {text-align:center;margin-bottom:2rem;font-size:0.9rem;color:var(--text-muted);opacity:0.6;text-transform:uppercase;letter-spacing:0.1em;}.todo-flow-timeline.svelte-gkdjxn {display:flex;flex-direction:column;gap:0.5rem;max-width:600px;margin:0 auto;}.todo-flow-task-card.svelte-gkdjxn {display:flex;padding:1rem;background:var(--background-secondary);border-radius:0.5rem;border:2px solid transparent;gap:1rem;align-items:center;transition:all 0.2s;opacity:0.8;}.todo-flow-task-card.focused.svelte-gkdjxn {border-color:var(--interactive-accent);opacity:1;transform:scale(1.02);}.todo-flow-task-card.anchored.svelte-gkdjxn {background:var(--background-secondary-alt);}.time-col.svelte-gkdjxn {font-family:var(--font-monospace);font-size:0.9rem;color:var(--text-muted);min-width:60px;}.content-col.svelte-gkdjxn {flex:1;}.title.svelte-gkdjxn {font-weight:500;color:var(--text-normal);}.duration.svelte-gkdjxn {font-size:0.8rem;color:var(--text-muted);}.anchor-badge.svelte-gkdjxn {font-size:1.2rem;}.constraint-indicator.svelte-gkdjxn {font-size:0.8rem;margin-left:0.3rem;opacity:0.7;cursor:help;}.is-done.svelte-gkdjxn {opacity:0.5;}.is-done.svelte-gkdjxn .title:where(.svelte-gkdjxn) {text-decoration:line-through;}.todo-flow-title-input.svelte-gkdjxn {width:100%;background:var(--background-modifier-form-field);border:1px solid var(--background-modifier-border);color:var(--text-normal);font-size:1rem;font-weight:500;padding:2px 4px;border-radius:4px;}"};function Wl(r,t){ar(t,!0),yr(r,vg);let n=ct(t,"now",19,Mu.default),s=ct(t,"debug",3,!1),o=Oe(Mt(t.settings)),l=Oe(Mt(n())),f=sl(()=>T(o).keys);function d(I){U(o,I,!0)}function h(I){U(l,I,!0)}let p,g=Oe(Mt([]));un(()=>{if(T(l)){let I=T(l);P(()=>{p&&(p.updateTime(I),U(g,p.getTasks(),!0),U(v,Math.min(T(v),T(g).length-1),!0))})}});let v=Oe(0),m=Oe(-1),y=Oe(!1),x,$,S=Mt([]);Fi(()=>{s()&&console.log("[TODO_FLOW_TRACE] onMount entry"),p=new $s(t.initialTasks,T(l),t.onTaskUpdate,t.onTaskCreate),U(g,p.getTasks(),!0),x=new Li(T(f)),$&&!window.navigator.userAgent.includes("HappyDOM")&&$.focus()}),un(()=>{S[T(v)]&&S[T(v)].scrollIntoView({block:"nearest",behavior:"smooth"})});function M(I){let j=T(g)[T(v)];j&&t.onNavigate&&t.onNavigate(j.id,T(v))}function V(){s()&&console.debug("[TODO_FLOW_TRACE] update() entry. Current tasks:",T(g).length),U(g,p.getTasks(),!0),t.onStackChange&&t.onStackChange(T(g)),s()&&console.debug("[TODO_FLOW_TRACE] update() complete. New tasks:",T(g).length)}function se(I){s()&&console.log("[TODO_FLOW_TRACE] setTasks entry. tasks count:",I.length),p=new $s(I,T(l),t.onTaskUpdate,t.onTaskCreate),U(g,p.getTasks(),!0),s()&&console.log("[TODO_FLOW_TRACE] setTasks complete. Scheduled count:",T(g).length)}function X(I){U(v,Math.max(0,Math.min(T(g).length-1,I)),!0)}function N(){return T(v)}function W(){return p}function ie(I){U(m,I,!0)}function re(I,j){var ge;j.trim().length>0&&j!==((ge=T(g)[I])==null?void 0:ge.title)&&(p.updateTaskTitle(I,j),V()),U(m,-1),setTimeout(()=>$==null?void 0:$.focus(),50)}function Ye(I){I.focus(),I.select()}async function fe(I){s()&&console.debug("[TODO_FLOW_TRACE] handleKeyDown entry:",I.key);let j=I.target,ge=document.activeElement;if(j instanceof HTMLInputElement||j instanceof HTMLTextAreaElement||j.isContentEditable||ge&&ge.isContentEditable)return;["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"," "].includes(I.key)&&I.preventDefault();let de=x.resolveAction(I);if(console.log(`[Diagnostic] Key: "${I.key}" (code: ${I.code}), Shift: ${I.shiftKey} -> Resolved Action: ${de}`),s()&&console.log(`[TODO_FLOW_TRACE] resolveAction: ${de} for key: ${I.key}`),!!de){if(T(y)){(de==="TOGGLE_HELP"||de==="CANCEL")&&(U(y,!1),I.stopPropagation());return}if(de==="TOGGLE_HELP"){U(y,!0),I.stopPropagation();return}if(T(m)===-1){if(I.preventDefault(),de==="UNDO"){t.historyManager.undo(),V();return}if(de==="REDO"){t.historyManager.redo(),V();return}switch(de){case"RENAME":ie(T(v));break;case"FORCE_OPEN":let We=p.handleEnter(T(v),!0);We&&We.action==="OPEN_FILE"&&We.path&&t.onOpenFile(We.path);break;case"GO_BACK":s()&&console.log(`[TODO_FLOW_TRACE] Executing GO_BACK action. onGoBack callback exists: ${!!t.onGoBack}`),t.onGoBack&&t.onGoBack();break;case"CONFIRM":let A=p.handleEnter(T(v));if(A)if(A.action==="DRILL_DOWN"){let Rt=T(g)[T(v)];Rt&&t.onNavigate&&t.onNavigate(Rt.id,T(v))}else A.action==="OPEN_FILE"&&A.path&&(t.onNavigate?t.onNavigate(A.path,T(v)):t.onOpenFile(A.path));break;case"NAV_DOWN":U(v,Math.min(T(g).length-1,T(v)+1),!0);break;case"NAV_UP":U(v,Math.max(0,T(v)-1),!0);break;case"MOVE_DOWN":let wr=new Ds(p,T(v),"down");await t.historyManager.executeCommand(wr),wr.resultIndex!==null&&U(v,wr.resultIndex,!0),V();break;case"MOVE_UP":let er=new Ds(p,T(v),"up");await t.historyManager.executeCommand(er),er.resultIndex!==null&&U(v,er.resultIndex,!0),V();break;case"ANCHOR":let dt=new Jo(p,T(v));await t.historyManager.executeCommand(dt),dt.resultIndex!==null&&U(v,dt.resultIndex,!0),V();break;case"DURATION_UP":let tr=new Ms(p,T(v),"up");await t.historyManager.executeCommand(tr),tr.resultIndex!==null&&U(v,tr.resultIndex,!0),V();break;case"DURATION_DOWN":let zr=new Ms(p,T(v),"down");await t.historyManager.executeCommand(zr),zr.resultIndex!==null&&U(v,zr.resultIndex,!0),V();break;case"TOGGLE_DONE":let jt=new ea(p,T(v));await t.historyManager.executeCommand(jt),jt.resultIndex!==null&&U(v,jt.resultIndex,!0),V();break;case"CREATE_TASK":s()&&console.debug("[TODO_FLOW_TRACE] Action CREATE_TASK triggered"),t.openTaskModal?t.openTaskModal(async Rt=>{s()&&console.debug("[TODO_FLOW_TRACE] Modal submitted:",Rt);let kr=new ta(p,T(v),Rt);await t.historyManager.executeCommand(kr),kr.resultIndex!==null&&U(v,kr.resultIndex,!0),V()}):s()&&console.warn("[TODO_FLOW_TRACE] openTaskModal not available in props");break;case"QUICK_ADD":t.openQuickAddModal&&t.openQuickAddModal(T(v));break;case"DELETE_TASK":let rr=T(g)[T(v)];rr&&confirm(`Delete task "${rr.title}"?`)&&(await t.historyManager.executeCommand(new ra(p,T(v))),U(v,Math.max(0,T(v)-1),!0),new window.Notice(`Deleted: ${rr.title}`),V());break;case"ARCHIVE":let Gr=T(g)[T(v)];Gr&&(await t.historyManager.executeCommand(new na(p,T(v),async Rt=>{await t.onTaskUpdate(Rt)})),U(v,Math.max(0,Math.min(T(g).length-1,T(v))),!0),new window.Notice(`Archived: ${Gr.title}`),V());break;case"EXPORT":t.onExport&&t.onExport(T(g));break}}}}var Re={updateSettings:d,updateNow:h,update:V,setTasks:se,setFocus:X,getFocusedIndex:N,getController:W,handleKeyDown:fe},vt=gg();vt.__keydown=fe;var Ct=F(vt);{var Jt=I=>{var j=ug(),ge=F(j);R(j),Ce(de=>_e(ge,`Starting at ${de!=null?de:""}`),[()=>T(l).format("HH:mm")]),le(I,j)};Bt(Ct,I=>{T(l)&&I(Jt)})}var Gt=q(Ct,2);gr(Gt,21,()=>T(g),_r,(I,j,ge)=>{var de=_g();let We;de.__click=()=>{U(v,ge,!0)};var A=F(de),wr=F(A,!0);R(A);var er=q(A,2),dt=F(er);{var tr=he=>{var ye=dg();Dl(ye),ye.__keydown=Ft=>{Ft.key==="Enter"&&re(ge,Ft.currentTarget.value),Ft.key==="Escape"&&U(m,-1)},Sl(ye,Ft=>Ye==null?void 0:Ye(Ft)),Ce(()=>Ml(ye,T(j).title)),gs("blur",ye,Ft=>re(ge,Ft.currentTarget.value)),le(he,ye)},zr=he=>{var ye=hg(),Ft=F(ye,!0);R(ye),Ce(()=>_e(Ft,T(j).title)),le(he,ye)};Bt(dt,he=>{T(m)===ge?he(tr):he(zr,!1)})}var jt=q(dt,2),rr=F(jt),Gr=q(rr);{var Rt=he=>{var ye=pg();le(he,ye)};Bt(Gr,he=>{Bo(T(j))>0&&he(Rt)})}R(jt),R(er);var kr=q(er,2);{var On=he=>{var ye=mg();le(he,ye)};Bt(kr,he=>{T(j).isAnchored&&he(On)})}R(de),Ri(de,(he,ye)=>S[ye]=he,he=>S==null?void 0:S[he],()=>[ge]),Ce((he,ye)=>{We=Vr(de,1,"todo-flow-task-card svelte-gkdjxn",null,We,{focused:T(v)===ge,anchored:T(j).isAnchored,"is-done":T(j).status==="done"}),_e(wr,he),_e(rr,`${ye!=null?ye:""} `)},[()=>{var he;return(he=T(j).startTime)==null?void 0:he.format("HH:mm")},()=>Du(T(j).duration)]),le(I,de)}),R(Gt);var Wr=q(Gt,2);{var Br=I=>{Ss(I,{get keys(){return T(f)},get settings(){return T(o)}})};Bt(Wr,I=>{T(y)&&I(Br)})}return R(vt),Ri(vt,I=>$=I,()=>$),le(r,vt),lr(Re)}Ni(["keydown","click"]);Ze();function Bl(r){return!r||!Array.isArray(r)?"":r.join(", ")}function Nu(r){return!r||!r.trim()?[]:r.split(",").map(t=>t.trim()).filter(t=>t.length>0)}var Ns=require("obsidian");var sa=class extends Ns.Modal{constructor(n,s){super(n);k(this,"result","");k(this,"onSubmit");this.onSubmit=s}onOpen(){let{contentEl:n}=this;n.createEl("h2",{text:"New Task"}),new Ns.Setting(n).setName("Title").addText(s=>s.onChange(o=>{this.result=o}).inputEl.addEventListener("keydown",o=>{o.key==="Enter"&&this.result.trim()&&(this.onSubmit(this.result.trim()),this.close())})),new Ns.Setting(n).addButton(s=>s.setButtonText("Create").setCta().onClick(()=>{this.result.trim()&&(this.onSubmit(this.result.trim()),this.close())}))}onClose(){let{contentEl:n}=this;n.empty()}};An();fa();Ze();fa();var ua=class{constructor(t,n){k(this,"state");k(this,"loader");k(this,"preprocessor");this.loader=t,this.preprocessor=n,this.state={currentStack:[],currentFocusedIndex:0,history:[],focusedHistory:[],sourceHistory:[],currentSource:""}}setStack(t,n){this.state.currentStack=[...t],this.state.currentSource=n}getCurrentStack(){return[...this.state.currentStack]}clear(){this.state={currentStack:[],currentFocusedIndex:0,history:[],focusedHistory:[],sourceHistory:[],currentSource:""}}async drillDown(t,n){let s=this.state.currentStack.find(l=>l.id===t);if(!s)return!1;let o=await this.loader.load(s.id);return o.length===0?!1:(console.log(`[NavigationManager] push history. Current stack size: ${this.state.currentStack.length}, History index before: ${this.state.history.length}`),this.state.history.push([...this.state.currentStack]),this.state.focusedHistory.push(n),this.state.sourceHistory.push(this.state.currentSource),console.log(`[NavigationManager] history pushed. Now depth: ${this.state.history.length}`),this.state.currentStack=this.preprocessor?this.preprocessor(o):o,this.state.currentSource=s.id,this.state.currentFocusedIndex=0,!0)}async goBack(){var p,g;if(this.state.history.length===0)return{success:!1,focusedIndex:0};let t=this.state.history.pop(),n=this.state.sourceHistory.pop(),s=(p=this.state.focusedHistory.pop())!=null?p:0;if(!t||n===void 0)return{success:!1,focusedIndex:0};let o=(g=t[s])==null?void 0:g.id,l=[];try{if(n.startsWith("EXPLICIT")){let v=t.map(m=>m.id);l=await this.loader.loadSpecificFiles(v)}else l=await this.loader.load(n)}catch(v){console.warn(`[NavigationManager] Failed to load fresh data for ${n}. Using snapshot only.`,v)}let f=t.map(v=>{let m=l.find(y=>y.id===v.id);return m||v}),d=this.preprocessor?this.preprocessor(f):f,h=s;if(o){let v=d.findIndex(m=>m.id===o);v!==-1?h=v:(console.warn(`[NavigationManager] Focus target ID ${o} not found in restored stack. Fallback to index ${s}.`),h=Math.min(h,Math.max(0,d.length-1)))}return this.state.currentStack=d,this.state.currentSource=n,this.state.currentFocusedIndex=h,{success:!0,focusedIndex:h}}canGoBack(){return this.state.history.length>0}getState(){return{...this.state}}setState(t){this.state=t}};var Ru=require("obsidian");var da=class extends Ru.FuzzySuggestModal{constructor(n,s){super(n);k(this,"onChoose");k(this,"currentQuery","");this.onChoose=s,this.setPlaceholder("Search for an existing task or type to create new...")}onOpen(){super.onOpen(),this.scope.register(["Shift"],"Enter",n=>{n.preventDefault();let s=this.inputEl.value;return s&&(this.onChooseItem({isNew:!0,title:s.trim()},n),this.close()),!1})}getItems(){return this.app.vault.getMarkdownFiles()}getItemText(n){return"isNew"in n?`Create new task: ${n.title}`:n.path}getSuggestions(n){this.currentQuery=n;let s=super.getSuggestions(n);if(n.trim()){let o=s.find(f=>!("isNew"in f.item)&&f.item.basename.toLowerCase()===n.trim().toLowerCase()),l={isNew:!0,title:n.trim()};s.push({item:l,match:{score:100,matches:[]}})}return s}renderSuggestion(n,s){let o=n.item;if("isNew"in o){s.addClass("todo-flow-new-item");let l=s.createDiv({cls:"suggestion-content"});l.createEl("div",{text:"\u2728 "+o.title,cls:"suggestion-title"}),l.createEl("div",{text:"Create new task",cls:"suggestion-note",attr:{style:"font-size: 0.8em; opacity: 0.6;"}})}else s.createDiv({text:o.path,cls:"suggestion-title"}),o.parent&&o.parent.path!=="/"&&s.createDiv({text:o.parent.path,cls:"suggestion-note",attr:{style:"font-size: 0.8em; opacity: 0.6;"}})}onChooseItem(n,s){let o=s.shiftKey;if("isNew"in n)this.onChoose({type:"new",title:n.title});else if(o){let l=this.currentQuery.trim()||n.basename;this.onChoose({type:"new",title:l})}else this.onChoose({type:"file",file:n})}};var Os=rn(Hr(),1);var Vi="todo-flow-stack-view",ti=class r extends Fu.ItemView{constructor(n,s,o,l,f,d){super(n);k(this,"component");k(this,"rootPath",null);k(this,"currentTaskIds",null);k(this,"tasks",[]);k(this,"settings");k(this,"historyManager");k(this,"logger");k(this,"onTaskUpdate");k(this,"onTaskCreate");k(this,"loader");k(this,"navManager");this.settings=s,this.historyManager=o,this.logger=l,this.onTaskUpdate=f,this.onTaskCreate=d,this.loader=new As(this.app,this.logger),this.navManager=new ua(this.loader,h=>ft(h,(0,Os.default)()))}getViewType(){return Vi}getDisplayText(){return"Daily Stack"}getState(){let n=this.navManager.getState();return{rootPath:this.rootPath,navState:n}}async setState(n,s){var l;this.logger&&await this.logger.info(`[StackView] setState triggered. State keys: ${Object.keys(n||{}).join(", ")}`);let o=this.getNow();if(this.logger&&await this.logger.info(`[StackView] Schedule Basis: ${o.format("YYYY-MM-DD HH:mm")} (Mode: ${this.settings.timingMode})`),n?!n.rootPath&&!n.ids&&this.logger&&await this.logger.warn(`[StackView] [UNHAPPY] setState received valid state object but MISSING rootPath OR ids. Keys: ${JSON.stringify(n)}`):this.logger&&await this.logger.warn("[StackView] [UNHAPPY] setState received null/undefined state."),n&&(n.rootPath||n.ids)){let f=[];if(n.navState&&n.navState.currentStack&&n.navState.currentStack.length>0){this.logger&&await this.logger.info(`[StackView] Restoring full navigation state (Depth: ${((l=n.navState.history)==null?void 0:l.length)||0})`),this.navManager.setState(n.navState),this.tasks=this.navManager.getCurrentStack(),this.rootPath=n.rootPath||n.navState.currentSource,this.logger&&await this.logger.info(`[StackView] State restored. Current Stack: ${this.tasks.length} items.`),this.component&&this.component.setTasks&&(this.component.setTasks(this.tasks),n.navState.currentFocusedIndex!==void 0&&this.component.setFocus(n.navState.currentFocusedIndex));return}n.rootPath==="QUERY:SHORTLIST"?(this.logger&&await this.logger.info("[StackView] Loading shortlisted tasks..."),f=await this.loader.loadShortlisted(),this.logger&&await this.logger.info(`[StackView] Loaded ${f.length} shortlisted tasks.`),this.rootPath="QUERY:SHORTLIST"):n.ids&&Array.isArray(n.ids)?(this.logger&&await this.logger.info(`[StackView] EXPLICIT MODE: Loading ${n.ids.length} tasks into Tray.`),this.currentTaskIds=n.ids,f=await this.loader.loadSpecificFiles(n.ids),this.rootPath=`EXPLICIT:${n.ids.length}`):(this.logger&&await this.logger.info(`[StackView] PATH MODE: Loading tasks from ${n.rootPath}`),this.rootPath=n.rootPath,f=await this.loader.load(n.rootPath)),f.length===0&&this.logger&&await this.logger.warn(`[StackView] [UNHAPPY] Loaded 0 tasks for rootPath="${this.rootPath}". Is directory empty or invalid?`);let d=ft(f,o);await this.logStackDetails(d,"Initial Load"),this.navManager.setStack(d,this.rootPath),this.tasks=this.navManager.getCurrentStack(),this.component&&this.component.setTasks&&this.component.setTasks(this.tasks)}await super.setState(n,s)}async reload(){let n=this.tasks?this.tasks.length:0;this.logger&&await this.logger.info(`[StackView] Reload triggered. Current tasks: ${n}`);let s=this.getState(),o=null;if(this.component&&typeof this.component.getFocusedIndex=="function"){let l=this.component.getFocusedIndex(),f=this.tasks&&this.tasks[l];f&&(o=f.id)}if(this.currentTaskIds&&this.currentTaskIds.length>0){if(this.logger&&await this.logger.info(`[StackView] Reloading EXPLICIT list (${this.currentTaskIds.length} IDs).`),s.ids=this.currentTaskIds,await this.setState(s,null),o&&this.tasks){let f=this.tasks.findIndex(d=>d.id===o);f!==-1&&this.component?this.component.setFocus(f):this.logger&&await this.logger.warn(`[StackView] [UNHAPPY] Could not restore focus to task ID="${o}". Task not found in reloaded stack.`)}let l=this.tasks?this.tasks.length:0;this.logger&&await this.logger.info(`[StackView] Reload complete. New tasks: ${l}`)}else if(this.rootPath)if(this.rootPath.startsWith("EXPLICIT"))this.logger.warn("[StackView] Skipping reload for EXPLICIT mode (no IDs in memory).");else{if(s.rootPath=this.rootPath,await this.setState(s,null),o&&this.tasks){let f=this.tasks.findIndex(d=>d.id===o);f!==-1&&this.component?this.component.setFocus(f):this.logger&&await this.logger.warn(`[StackView] [UNHAPPY] Could not restore focus to task ID="${o}". Task not found in reloaded stack.`)}let l=this.tasks?this.tasks.length:0;this.logger&&await this.logger.info(`[StackView] Reload complete. New tasks: ${l}`)}else this.logger&&await this.logger.warn("[StackView] [UNHAPPY] Reload called but NO rootPath or valid IDs available. Cannot reload.")}async onOpen(){this.registerDomEvent(window,"keydown",n=>{n.defaultPrevented||(this.settings.keys.debug&&this.logger.info(`[TRACE] window keydown: ${n.key} (code: ${n.code})`),!this.leaf.view||this.app.workspace.getActiveViewOfType(r),this.component&&this.component.handleKeyDown(n))}),this.component=Yr(Wl,{target:this.contentEl,props:{initialTasks:this.tasks,settings:this.settings,now:this.getNow(),historyManager:this.historyManager,logger:this.logger,onTaskUpdate:this.onTaskUpdate,onTaskCreate:this.onTaskCreate,onStackChange:n=>{this.tasks=n,this.navManager.setStack(n,this.rootPath),this.app.workspace.requestSaveLayout()},openTaskModal:n=>{new sa(this.app,n).open()},openQuickAddModal:n=>{new da(this.app,async s=>{let o=null;if(s.type==="new"&&s.title)o=this.onTaskCreate(s.title);else if(s.type==="file"&&s.file){let l=await this.loader.loadSpecificFiles([s.file.path]);l.length>0&&(o=l[0])}if(o&&this.component){let l=this.component.getController();if(l){let f=new ia(l,n,o);await this.historyManager.executeCommand(f),this.component.update&&(this.component.update(),f.resultIndex!==null&&this.component.setFocus(f.resultIndex))}}}).open()},onOpenFile:n=>{this.app.workspace.openLinkText(n,"",!0)},onNavigate:async(n,s)=>{this.logger.info("[StackView] ========== DRILL DOWN TRIGGERED =========="),this.logger.info(`[StackView] Navigating to: ${n} from index ${s}`),this.logger.info("[StackView] Current state BEFORE drillDown:"),this.logger.info(`[StackView]   - this.tasks.length: ${this.tasks.length}`),this.logger.info(`[StackView]   - History size: ${this.navManager.getState().history.length}`);let o=await this.navManager.drillDown(n,s);if(this.logger.info(`[StackView] NavigationManager.drillDown() result: success=${o}`),o){let l=this.navManager.getCurrentStack();this.logger.info(`[StackView] Retrieved stack from NavigationManager: ${l.length} tasks`),this.tasks=l,this.rootPath=this.navManager.getState().currentSource,this.logger.info(`[StackView] Updated this.tasks to ${this.tasks.length} tasks. New rootPath: ${this.rootPath}`),this.logStackDetails(this.tasks,"Drill Down Refreshed"),this.component&&this.component.setTasks?(this.logger.info(`[StackView] Calling component.setTasks() with ${this.tasks.length} tasks`),this.component.setTasks(this.tasks),this.logger.info("[StackView] component.setTasks() completed"),this.component.setFocus&&(this.logger.info("[StackView] Calling component.setFocus(0)"),this.component.setFocus(0))):this.logger.warn("[StackView] WARNING: component or component.setTasks is undefined!"),this.logger.info(`[StackView] Drilled down successfully. New stack size: ${this.tasks.length}`)}else this.logger.warn(`[StackView] Could not drill down into: ${n}. Falling back to opening file.`),this.app.workspace.openLinkText(n,"",!0);this.logger.info("[StackView] ========== DRILL DOWN FINISHED ==========")},onGoBack:async()=>{this.logger.info("[StackView] ========== GO BACK TRIGGERED =========="),this.logger.info("[StackView] Current state BEFORE goBack:"),this.logger.info(`[StackView]   - this.tasks.length: ${this.tasks.length}`),this.logger.info(`[StackView]   - History size: ${this.navManager.getState().history.length}`),this.logger.info(`[StackView]   - Current source: ${this.navManager.getState().currentSource}`);let n=await this.navManager.goBack(),{success:s,focusedIndex:o}=n;if(this.logger.info(`[StackView] NavigationManager.goBack() result: success=${s}, focusedIndex=${o}`),s){let l=this.navManager.getCurrentStack();this.logger.info(`[StackView] Retrieved stack from NavigationManager: ${l.length} tasks`),this.tasks=l,this.rootPath=this.navManager.getState().currentSource,this.logger.info(`[StackView] Updated this.tasks to ${this.tasks.length} tasks. New rootPath: ${this.rootPath}`),await this.logStackDetails(this.tasks,"Go Back Refreshed"),this.component&&this.component.setTasks?(this.logger.info(`[StackView] Calling component.setTasks() with ${this.tasks.length} tasks`),this.component.setTasks(this.tasks),this.logger.info("[StackView] component.setTasks() completed"),this.component.setFocus&&(this.logger.info(`[StackView] Calling component.setFocus(${o})`),this.component.setFocus(o))):(this.logger.warn("[StackView] WARNING: component or component.setTasks is undefined!"),this.logger.warn(`[StackView]   - component exists: ${!!this.component}`),this.logger.warn(`[StackView]   - component.setTasks exists: ${!!(this.component&&this.component.setTasks)}`)),this.logger.info(`[StackView] Go back completed. Restored focus to ${o}`)}else this.logger.warn(`[StackView] Cannot go back. Result success: ${s}`);this.logger.info("[StackView] ========== GO BACK FINISHED ==========")},onExport:async n=>{let s=ku(n),o=`Stack Export ${(0,Os.default)().format("YYYY-MM-DD HHmm")}.md`,l=o;this.settings.exportFolder&&(await this.app.vault.adapter.exists(this.settings.exportFolder)||await this.app.vault.createFolder(this.settings.exportFolder),l=`${this.settings.exportFolder}/${o}`),await this.app.vault.create(l,s),new window.Notice(`Stack saved to ${l} `)}}})}getNow(){if(this.settings.timingMode==="fixed"&&this.settings.fixedStartTime){let[n,s]=this.settings.fixedStartTime.split(":");return(0,Os.default)().set({hour:parseInt(n||"9"),minute:parseInt(s||"0"),second:0,millisecond:0})}return(0,Os.default)()}async logStackDetails(n,s){var o;if(this.logger){this.logger.info(`[DEBUG][${s}] Stack Contents(${n.length} tasks): `),this.logger.info("   FORMAT -> [Index] ID | Start: Displayed | Title: Displayed(On - Disk) | Dur: Displayed(On - Disk) | Status: Displayed(On - Disk) | Anchored: Displayed(On - Disk)");for(let l=0;l<n.length;l++){let f=n[l],d=await this.loader.parser.resolveTaskMetadata(f.id),h=((o=f.startTime)==null?void 0:o.format("HH:mm"))||"??:??",p=f.title===d.title?f.title:`${f.title} (${d.title})`,g=f.duration===d.duration?f.duration:`${f.duration} (${d.duration})`,v=f.status===d.status?f.status:`${f.status} (${d.status})`,m=f.isAnchored===d.isAnchored?f.isAnchored:`${f.isAnchored} (${d.isAnchored})`;this.logger.info(`   [${l}]ID: ${f.id} | Start: ${h} | Title: ${p} | Dur: ${g} | Status: ${v} | Anchored: ${m} `),f.duration!==d.duration&&f.trace&&f.trace.length>0&&this.logger.info(`      ROLLUP AUDIT: ${f.trace.join(" | ")} `)}}}updateSettings(n){this.settings=n,this.component&&(this.component.updateSettings&&this.component.updateSettings(this.settings),this.component.updateNow&&this.component.updateNow(this.getNow())),this.logger.info(`[StackView] Settings updated (Hot Reload). Debug: ${this.settings.debug}`)}async onClose(){this.component&&dn(this.component)}};Ze();Ui();var IC=rn(Hr(),1);var ql=require("obsidian");var ha=class{constructor(t){this.app=t}async syncExportToVault(t){let n=t.split(`
`),s=/-\s*\[x\]\s*.*\s*\[\[(.+?)(?:\|.+)?\]\]/,o=0;for(let l of n){let f=l.match(s);if(f){let d=f[1];d&&(await this.updateFileStatus(d,"done"),o++)}}return o}async updateFileStatus(t,n){let s=this.app.vault.getAbstractFileByPath(t);if(s instanceof ql.TFile&&s.extension==="md")await this.app.vault.process(s,o=>Qe(o,"status",n));else if(!s){let o=this.app.metadataCache.getFirstLinkpathDest(t,"");o instanceof ql.TFile&&await this.app.vault.process(o,l=>Qe(l,"status",n))}}};An();var gC=require("obsidian");An();var pa=class{constructor(t,n){k(this,"app");k(this,"logger");this.app=t,this.logger=n}async handleActiveLeafChange(){let t=this.app.workspace.getActiveViewOfType(ti);t&&(this.logger.info("[ViewManager] Active leaf changed to StackView. Triggering Reload."),typeof t.reload=="function"?(this.logger.info("[ViewManager] Calling activeView.reload()..."),await t.reload()):this.logger.warn("[ViewManager] StackView found but reload() method missing!"))}};var yg={targetFolder:"todo-flow",exportFolder:"",timingMode:"now",fixedStartTime:"09:00",keys:Pi,debug:!1,lastTray:null},ma=class extends ut.Plugin{constructor(){super(...arguments);k(this,"settings");k(this,"historyManager");k(this,"logger");k(this,"viewManager")}async onload(){await this.loadSettings(),this.historyManager=new Qo,this.logger=new qo(this.app,this.settings.debug),this.viewManager=new pa(this.app,this.logger),await this.logger.info(`[Todo Flow] Loading v${this.manifest.version} (Build 2026-01-27 10:48)`),await this.logger.info("Todo Flow Plugin loading..."),this.addSettingTab(new Xl(this.app,this)),this.registerView(Ko,n=>new jo(n,this.settings.targetFolder,s=>{this.activateTriage(s)})),this.registerView(Vl,n=>new Es(n,[],this.settings,this.historyManager,this.logger,s=>{this.logger.info(`Triage complete: ${JSON.stringify(s)}`),this.app.commands.executeCommandById("todo-flow:open-daily-stack")})),this.registerView(Vi,n=>new ti(n,this.settings,this.historyManager,this.logger,s=>{this.syncTaskToNote(s)},s=>this.onCreateTask(s))),this.registerEvent(this.app.workspace.on("active-leaf-change",async()=>{await this.viewManager.handleActiveLeafChange()})),this.addCommand({id:"open-todo-dump",name:"Open Todo Dump",callback:()=>{this.activateView(Ko)}}),this.addCommand({id:"start-triage",name:"Start Triage from target folder",callback:async()=>{let{TaskQueryService:n}=await Promise.resolve().then(()=>(Kl(),jl)),o=await new n(this.app,this.logger).getDumpedTasks();if(o.length===0){new window.Notice("No items in Dump to triage!");return}this.activateTriage(o)}}),this.addCommand({id:"open-daily-stack",name:"Open Daily Stack",callback:async()=>{this.settings.lastTray&&this.settings.lastTray.length>0?await this.activateStack(this.settings.lastTray):await this.activateStack("QUERY:SHORTLIST")}}),this.addCommand({id:"sync-completed-tasks",name:"Sync Completed Tasks from Current Export",callback:async()=>{let n=this.app.workspace.getActiveViewOfType(this.app.workspace.getLeaf(!1).view.constructor),s=this.app.workspace.activeLeaf;if(!s||!s.view||s.view.getViewType()!=="markdown"){new window.Notice("Open a markdown export file to sync.");return}let o=s.view.editor;if(o){let l=o.getValue(),d=await new ha(this.app).syncExportToVault(l);new window.Notice(`Synced ${d} tasks from export.`)}}}),this.addCommand({id:"toggle-timing-mode",name:"Toggle Timing Mode (Now vs Fixed)",callback:()=>{this.settings.timingMode=this.settings.timingMode==="now"?"fixed":"now",this.saveSettings(),this.refreshStackView(),new window.Notice(`Timing Mode: ${this.settings.timingMode==="now"?"Dynamic (Now)":"Fixed ("+this.settings.fixedStartTime+")"}`)}}),this.addCommand({id:"toggle-dev-mode",name:"Toggle Developer Mode (Tracing)",callback:()=>{this.settings.debug=!this.settings.debug,this.logger.setEnabled(this.settings.debug),this.saveSettings(),new window.Notice(`Developer Mode: ${this.settings.debug?"ON":"OFF"}`)}}),this.addCommand({id:"clear-logs",name:"Clear Log File",callback:async()=>{await this.app.vault.adapter.exists("todo-flow.log")&&(await this.app.vault.adapter.write("todo-flow.log",""),new window.Notice("Logs cleared"))}}),this.addCommand({id:"open-folder-as-stack",name:"Open Folder as Stack",callback:async()=>{let{FolderSuggester:n}=await Promise.resolve().then(()=>(Fs(),Rs));new n(this.app,s=>{this.activateStack(s.path)}).open()}}),this.addCommand({id:"open-file-as-stack",name:"Open File as Stack",callback:async()=>{let{FileSuggester:n}=await Promise.resolve().then(()=>(Fs(),Rs));new n(this.app,s=>{this.activateStack(s.path)}).open()}}),this.addCommand({id:"triage-folder",name:"Triage Folder",callback:async()=>{let{FolderSuggester:n}=await Promise.resolve().then(()=>(Fs(),Rs));new n(this.app,async s=>{let o=await this.getTasksFromFolder(s.path);if(o.length===0){new window.Notice("No markdown files in folder!");return}this.activateTriage(o)}).open()}}),this.addCommand({id:"triage-file",name:"Triage File",callback:async()=>{let{FileSuggester:n}=await Promise.resolve().then(()=>(Fs(),Rs));new n(this.app,async s=>{this.logger.info(`[main.ts] Triage File: Selected ${s.path}. Resolving child tasks...`);let{StackLoader:o}=await Promise.resolve().then(()=>(fa(),Cu)),f=await new o(this.app,this.logger).load(s.path);if(f.length===0){new window.Notice("No tasks found linked in this file!");return}this.activateTriage(f)}).open()}})}async activateView(n,s){let{workspace:o}=this.app,l,f=o.getLeavesOfType(n);f.length>0?l=f[0]:(l=o.getLeaf(!0),await l.setViewState({type:n,active:!0})),o.revealLeaf(l)}async activateTriage(n){let{workspace:s}=this.app,o=s.getLeaf(!0);this.logger.info(`[main.ts] activateTriage: Initializing session with ${n.length} tasks.`);let l=new Es(o,n,this.settings,this.historyManager,this.logger,f=>{let d=f.shortlist.map(h=>h.id);this.logger.info(`[main.ts] Triage callback: Session isolation active. Received ${d.length} shortlisted tasks: ${JSON.stringify(d)}`),this.activateStack(d)});await o.open(l),s.revealLeaf(o)}async activateStack(n){let{workspace:s}=this.app,o;this.logger.info(`[main.ts] activateStack target: ${Array.isArray(n)?`EXPLICIT LIST (${n.length} IDs)`:n}`),Array.isArray(n)&&(this.settings.lastTray=n,await this.saveData(this.settings));let l=s.getLeavesOfType(Vi);l.length>0?o=l[0]:o=s.getLeaf(!0);let f={active:!0};Array.isArray(n)?f.state={ids:n}:f.state={rootPath:n},await o.setViewState({type:Vi,active:!0,state:f.state}),s.revealLeaf(o)}refreshStackView(){this.app.workspace.getLeavesOfType(Vi).forEach(s=>{s.view instanceof ti&&s.view.updateSettings(this.settings)})}async loadSettings(){let n=await this.loadData();if(this.settings=Object.assign({},yg,n),n&&n.keys){this.settings.keys=Object.assign({},Pi,n.keys);let s=this.settings.keys.export;Array.isArray(s)&&s.includes("e")&&(this.settings.keys.export=s.filter(l=>l!=="e"),this.settings.keys.export.includes("Shift+E")||this.settings.keys.export.push("Shift+E"),console.log('[Todo Flow] Migrated settings: Removed "e" from export keys to fix collision with Rename.'));let o=this.settings.keys.goBack;Array.isArray(o)&&o.includes("Backspace")&&(this.settings.keys.goBack=o.filter(l=>l!=="Backspace"),console.log('[Todo Flow] Migrated settings: Removed "Backspace" from goBack keys to fix collision with DeleteTask.')),this.settings.keys.anchor.includes("a")&&this.settings.keys.confirm.includes("f")&&(this.settings.keys=Object.assign({},Pi),console.log('[Todo Flow] Migrated settings to final corrected "dfjk" + Duration layout.'))}}async saveSettings(){await this.saveData(this.settings)}async getFilesFromFolder(n){let s=this.app.vault.getAbstractFileByPath(n);if(s instanceof ut.TFolder){let o=[];return s.children.forEach(l=>{l instanceof ut.TFile&&l.extension==="md"&&o.push(l)}),o}return[]}async syncTaskToNote(n){var l;let s=(l=n.originalDuration)!=null?l:n.duration;this.logger.info(`[DEBUG] Syncing Task Metadata to Disk: ID=${n.id} | Title=${n.title} | Dur=${s} (Rollup: ${n.duration}) | Status=${n.status} | Anchored=${n.isAnchored}`);let o=this.app.vault.getAbstractFileByPath(n.id);o instanceof ut.TFile&&await this.app.vault.process(o,f=>{let d=f;return d=Qe(d,"task",n.title),d=Qe(d,"duration",s),d=Qe(d,"status",n.status),d=Qe(d,"anchored",n.isAnchored),n.isAnchored&&n.startTime&&(d=Qe(d,"startTime",n.startTime.format("YYYY-MM-DD HH:mm"))),d})}onCreateTask(n){let s=zo(n),o=`${this.settings.targetFolder}/${s}`,l={id:o,title:n,duration:30,status:"todo",isAnchored:!1,children:[]};return this.app.vault.create(o,`---
task: ${n}
status: todo
duration: 30
---
# ${n}`),l}async getTasksFromFolder(n){let s=await this.getFilesFromFolder(n);return new Jn(this.app).buildGraph(s)}},Xl=class extends ut.PluginSettingTab{constructor(n,s){super(n,s);k(this,"plugin");this.plugin=s}display(){let{containerEl:n}=this;n.empty(),new ut.Setting(n).setName("Target Folder").setDesc("Folder where new thoughts and tasks will be created").addText(s=>s.setPlaceholder("todo-flow").setValue(this.plugin.settings.targetFolder).onChange(async o=>{this.plugin.settings.targetFolder=o,await this.plugin.saveSettings()})),new ut.Setting(n).setName("Export Folder").setDesc("Default folder for Stack exports (leave empty for Vault root)").addText(s=>s.setPlaceholder("e.g. Exports").setValue(this.plugin.settings.exportFolder).onChange(async o=>{this.plugin.settings.exportFolder=o,await this.plugin.saveSettings()})),new ut.Setting(n).setName("Timing Mode").setDesc("Choose how the Daily Stack schedule is calculated").addDropdown(s=>s.addOption("now","Dynamic (Start from Now)").addOption("fixed","Fixed (Start from specific time)").setValue(this.plugin.settings.timingMode).onChange(async o=>{this.plugin.settings.timingMode=o,await this.plugin.saveSettings(),this.plugin.refreshStackView(),this.display()})),this.plugin.settings.timingMode==="fixed"&&new ut.Setting(n).setName("Fixed Start Time").setDesc("Example: 09:00, 14:30").addText(s=>s.setPlaceholder("HH:mm").setValue(this.plugin.settings.fixedStartTime).onChange(async o=>{this.plugin.settings.fixedStartTime=o,await this.plugin.saveSettings(),this.plugin.refreshStackView()})),new ut.Setting(n).setName("Developer Mode").setDesc("Enable verbose diagnostic tracing in the console (Cmd+Option+I)").addToggle(s=>s.setValue(this.plugin.settings.debug).onChange(async o=>{this.plugin.settings.debug=o,await this.plugin.saveSettings(),this.plugin.refreshStackView()})),n.createEl("h3",{text:"Navigation"}),this.addKeySetting(n,"navUp","Move Focus Up"),this.addKeySetting(n,"navDown","Move Focus Down"),this.addKeySetting(n,"forceOpen","Force Open / Drill Down"),this.addKeySetting(n,"goBack","Go Back"),this.addKeySetting(n,"confirm","Open / Drill Down (Contextual)"),n.createEl("h3",{text:"Actions"}),this.addKeySetting(n,"toggleDone","Toggle Done"),this.addKeySetting(n,"createTask","Create Task"),this.addKeySetting(n,"quickAdd","Quick Add to Stack"),this.addKeySetting(n,"rename","Rename Task"),this.addKeySetting(n,"deleteTask","Delete Task"),this.addKeySetting(n,"export","Export to Note"),n.createEl("h3",{text:"Organization"}),this.addKeySetting(n,"moveUp","Move Task Up"),this.addKeySetting(n,"moveDown","Move Task Down"),this.addKeySetting(n,"anchor","Toggle Anchor"),this.addKeySetting(n,"durationUp","Increase Duration"),this.addKeySetting(n,"durationDown","Decrease Duration"),this.addKeySetting(n,"undo","Undo"),this.addKeySetting(n,"redo","Redo")}addKeySetting(n,s,o){new ut.Setting(n).setName(o).setDesc(`Current: ${Bl(this.plugin.settings.keys[s])}`).addText(l=>l.setPlaceholder("e.g. k, ArrowUp").setValue(Bl(this.plugin.settings.keys[s])).onChange(async f=>{let d=Nu(f);this.plugin.settings.keys[s]=d,await this.plugin.saveSettings(),this.plugin.refreshStackView()}))}};
/*! Bundled license information:

moment/moment.js:
  (*! moment.js *)
  (*! version : 2.30.1 *)
  (*! authors : Tim Wood, Iskren Chernev, Moment.js contributors *)
  (*! license : MIT *)
  (*! momentjs.com *)
*/
