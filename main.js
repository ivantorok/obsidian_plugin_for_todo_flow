/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

"use strict";var pm=Object.create;var Zi=Object.defineProperty;var hm=Object.getOwnPropertyDescriptor;var mm=Object.getOwnPropertyNames;var _m=Object.getPrototypeOf,vm=Object.prototype.hasOwnProperty;var Fc=r=>{throw TypeError(r)};var gm=(r,t,n)=>t in r?Zi(r,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):r[t]=n;var vn=(r,t)=>()=>(r&&(t=r(r=0)),t);var ym=(r,t)=>()=>(t||r((t={exports:{}}).exports,t),t.exports),Xi=(r,t)=>{for(var n in t)Zi(r,n,{get:t[n],enumerable:!0})},Ic=(r,t,n,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of mm(t))!vm.call(r,o)&&o!==n&&Zi(r,o,{get:()=>t[o],enumerable:!(s=hm(t,o))||s.enumerable});return r};var en=(r,t,n)=>(n=r!=null?pm(_m(r)):{},Ic(t||!r||!r.__esModule?Zi(n,"default",{value:r,enumerable:!0}):n,r)),wm=r=>Ic(Zi({},"__esModule",{value:!0}),r);var b=(r,t,n)=>gm(r,typeof t!="symbol"?t+"":t,n),Ca=(r,t,n)=>t.has(r)||Fc("Cannot "+n);var w=(r,t,n)=>(Ca(r,t,"read from private field"),n?n.call(r):t.get(r)),z=(r,t,n)=>t.has(r)?Fc("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(r):t.set(r,n),B=(r,t,n,s)=>(Ca(r,t,"write to private field"),s?s.call(r,n):t.set(r,n),n),Fe=(r,t,n)=>(Ca(r,t,"access private method"),n);var Hr=ym((Ol,Oi)=>{(function(r,t){typeof Ol=="object"&&typeof Oi!="undefined"?Oi.exports=t():typeof define=="function"&&define.amd?define(t):r.moment=t()})(Ol,(function(){"use strict";var r;function t(){return r.apply(null,arguments)}function n(e){r=e}function s(e){return e instanceof Array||Object.prototype.toString.call(e)==="[object Array]"}function o(e){return e!=null&&Object.prototype.toString.call(e)==="[object Object]"}function l(e,i){return Object.prototype.hasOwnProperty.call(e,i)}function f(e){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(e).length===0;var i;for(i in e)if(l(e,i))return!1;return!0}function d(e){return e===void 0}function p(e){return typeof e=="number"||Object.prototype.toString.call(e)==="[object Number]"}function h(e){return e instanceof Date||Object.prototype.toString.call(e)==="[object Date]"}function v(e,i){var a=[],c,u=e.length;for(c=0;c<u;++c)a.push(i(e[c],c));return a}function g(e,i){for(var a in i)l(i,a)&&(e[a]=i[a]);return l(i,"toString")&&(e.toString=i.toString),l(i,"valueOf")&&(e.valueOf=i.valueOf),e}function _(e,i,a,c){return dc(e,i,a,c,!0).utc()}function y(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function x(e){return e._pf==null&&(e._pf=y()),e._pf}var D;Array.prototype.some?D=Array.prototype.some:D=function(e){var i=Object(this),a=i.length>>>0,c;for(c=0;c<a;c++)if(c in i&&e.call(this,i[c],c,i))return!0;return!1};function S(e){var i=null,a=!1,c=e._d&&!isNaN(e._d.getTime());if(c&&(i=x(e),a=D.call(i.parsedDateParts,function(u){return u!=null}),c=i.overflow<0&&!i.empty&&!i.invalidEra&&!i.invalidMonth&&!i.invalidWeekday&&!i.weekdayMismatch&&!i.nullInput&&!i.invalidFormat&&!i.userInvalidated&&(!i.meridiem||i.meridiem&&a),e._strict&&(c=c&&i.charsLeftOver===0&&i.unusedTokens.length===0&&i.bigHour===void 0)),Object.isFrozen==null||!Object.isFrozen(e))e._isValid=c;else return c;return e._isValid}function M(e){var i=_(NaN);return e!=null?g(x(i),e):x(i).userInvalidated=!0,i}var N=t.momentProperties=[],G=!1;function J(e,i){var a,c,u,m=N.length;if(d(i._isAMomentObject)||(e._isAMomentObject=i._isAMomentObject),d(i._i)||(e._i=i._i),d(i._f)||(e._f=i._f),d(i._l)||(e._l=i._l),d(i._strict)||(e._strict=i._strict),d(i._tzm)||(e._tzm=i._tzm),d(i._isUTC)||(e._isUTC=i._isUTC),d(i._offset)||(e._offset=i._offset),d(i._pf)||(e._pf=x(i)),d(i._locale)||(e._locale=i._locale),m>0)for(a=0;a<m;a++)c=N[a],u=i[c],d(u)||(e[c]=u);return e}function L(e){J(this,e),this._d=new Date(e._d!=null?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),G===!1&&(G=!0,t.updateOffset(this),G=!1)}function Q(e){return e instanceof L||e!=null&&e._isAMomentObject!=null}function re(e){t.suppressDeprecationWarnings===!1&&typeof console!="undefined"&&console.warn&&console.warn("Deprecation warning: "+e)}function de(e,i){var a=!0;return g(function(){if(t.deprecationHandler!=null&&t.deprecationHandler(null,e),a){var c=[],u,m,k,A=arguments.length;for(m=0;m<A;m++){if(u="",typeof arguments[m]=="object"){u+=`
[`+m+"] ";for(k in arguments[0])l(arguments[0],k)&&(u+=k+": "+arguments[0][k]+", ");u=u.slice(0,-2)}else u=arguments[m];c.push(u)}re(e+`
Arguments: `+Array.prototype.slice.call(c).join("")+`
`+new Error().stack),a=!1}return i.apply(this,arguments)},i)}var st={};function ce(e,i){t.deprecationHandler!=null&&t.deprecationHandler(e,i),st[e]||(re(i),st[e]=!0)}t.suppressDeprecationWarnings=!1,t.deprecationHandler=null;function Me(e){return typeof Function!="undefined"&&e instanceof Function||Object.prototype.toString.call(e)==="[object Function]"}function gr(e){var i,a;for(a in e)l(e,a)&&(i=e[a],Me(i)?this[a]=i:this["_"+a]=i);this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function yt(e,i){var a=g({},e),c;for(c in i)l(i,c)&&(o(e[c])&&o(i[c])?(a[c]={},g(a[c],e[c]),g(a[c],i[c])):i[c]!=null?a[c]=i[c]:delete a[c]);for(c in e)l(e,c)&&!l(i,c)&&o(e[c])&&(a[c]=g({},a[c]));return a}function Qt(e){e!=null&&this.set(e)}var yr;Object.keys?yr=Object.keys:yr=function(e){var i,a=[];for(i in e)l(e,i)&&a.push(i);return a};var W={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function le(e,i,a){var c=this._calendar[e]||this._calendar.sameElse;return Me(c)?c.call(i,a):c}function fe(e,i,a){var c=""+Math.abs(e),u=i-c.length,m=e>=0;return(m?a?"+":"":"-")+Math.pow(10,Math.max(0,u)).toString().substr(1)+c}var Z=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Pe=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Xe={},ot={};function R(e,i,a,c){var u=c;typeof c=="string"&&(u=function(){return this[c]()}),e&&(ot[e]=u),i&&(ot[i[0]]=function(){return fe(u.apply(this,arguments),i[1],i[2])}),a&&(ot[a]=function(){return this.localeData().ordinal(u.apply(this,arguments),e)})}function er(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function Br(e){var i=e.match(Z),a,c;for(a=0,c=i.length;a<c;a++)ot[i[a]]?i[a]=ot[i[a]]:i[a]=er(i[a]);return function(u){var m="",k;for(k=0;k<c;k++)m+=Me(i[k])?i[k].call(u,e):i[k];return m}}function wt(e,i){return e.isValid()?(i=zt(i,e.localeData()),Xe[i]=Xe[i]||Br(i),Xe[i](e)):e.localeData().invalidDate()}function zt(e,i){var a=5;function c(u){return i.longDateFormat(u)||u}for(Pe.lastIndex=0;a>=0&&Pe.test(e);)e=e.replace(Pe,c),Pe.lastIndex=0,a-=1;return e}var wr={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function xr(e){var i=this._longDateFormat[e],a=this._longDateFormat[e.toUpperCase()];return i||!a?i:(this._longDateFormat[e]=a.match(Z).map(function(c){return c==="MMMM"||c==="MM"||c==="DD"||c==="dddd"?c.slice(1):c}).join(""),this._longDateFormat[e])}var xt="Invalid date";function kr(){return this._invalidDate}var Yi="%d",pe=/\d{1,2}/;function ge(e){return this._ordinal.replace("%d",e)}var It={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function Cs(e,i,a,c){var u=this._relativeTime[a];return Me(u)?u(e,i,a,c):u.replace(/%d/i,e)}function ua(e,i){var a=this._relativeTime[e>0?"future":"past"];return Me(a)?a(i):a.replace(/%s/i,i)}var Pi={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function pt(e){return typeof e=="string"?Pi[e]||Pi[e.toLowerCase()]:void 0}function Mn(e){var i={},a,c;for(c in e)l(e,c)&&(a=pt(c),a&&(i[a]=e[c]));return i}var Rs={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};function da(e){var i=[],a;for(a in e)l(e,a)&&i.push({unit:a,priority:Rs[a]});return i.sort(function(c,u){return c.priority-u.priority}),i}var Ne=/\d/,ee=/\d\d/,se=/\d{3}/,Ue=/\d{4}/,Re=/[+-]?\d{6}/,me=/\d\d?/,Fs=/\d\d\d\d?/,Is=/\d\d\d\d\d\d?/,Jn=/\d{1,3}/,Ui=/\d{1,4}/,Ls=/[+-]?\d{1,6}/,Qn=/\d+/,Ys=/[+-]?\d+/,Ou=/Z|[+-]\d\d:?\d\d/gi,Ps=/Z|[+-]\d\d(?::?\d\d)?/gi,Cu=/[+-]?\d+(\.\d{1,3})?/,Vi=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,ei=/^[1-9]\d?/,pa=/^([1-9]\d|\d)/,Us;Us={};function O(e,i,a){Us[e]=Me(i)?i:function(c,u){return c&&a?a:i}}function Ru(e,i){return l(Us,e)?Us[e](i._strict,i._locale):new RegExp(Fu(e))}function Fu(e){return Gr(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(i,a,c,u,m){return a||c||u||m}))}function Gr(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function jt(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function te(e){var i=+e,a=0;return i!==0&&isFinite(i)&&(a=jt(i)),a}var ha={};function he(e,i){var a,c=i,u;for(typeof e=="string"&&(e=[e]),p(i)&&(c=function(m,k){k[i]=te(m)}),u=e.length,a=0;a<u;a++)ha[e[a]]=c}function Wi(e,i){he(e,function(a,c,u,m){u._w=u._w||{},i(a,u._w,u,m)})}function Iu(e,i,a){i!=null&&l(ha,e)&&ha[e](i,a._a,a,e)}function Vs(e){return e%4===0&&e%100!==0||e%400===0}var at=0,zr=1,br=2,Ve=3,tr=4,jr=5,Nn=6,Lu=7,Yu=8;R("Y",0,0,function(){var e=this.year();return e<=9999?fe(e,4):"+"+e}),R(0,["YY",2],0,function(){return this.year()%100}),R(0,["YYYY",4],0,"year"),R(0,["YYYYY",5],0,"year"),R(0,["YYYYYY",6,!0],0,"year"),O("Y",Ys),O("YY",me,ee),O("YYYY",Ui,Ue),O("YYYYY",Ls,Re),O("YYYYYY",Ls,Re),he(["YYYYY","YYYYYY"],at),he("YYYY",function(e,i){i[at]=e.length===2?t.parseTwoDigitYear(e):te(e)}),he("YY",function(e,i){i[at]=t.parseTwoDigitYear(e)}),he("Y",function(e,i){i[at]=parseInt(e,10)});function Hi(e){return Vs(e)?366:365}t.parseTwoDigitYear=function(e){return te(e)+(te(e)>68?1900:2e3)};var Zl=ti("FullYear",!0);function Pu(){return Vs(this.year())}function ti(e,i){return function(a){return a!=null?(Xl(this,e,a),t.updateOffset(this,i),this):Bi(this,e)}}function Bi(e,i){if(!e.isValid())return NaN;var a=e._d,c=e._isUTC;switch(i){case"Milliseconds":return c?a.getUTCMilliseconds():a.getMilliseconds();case"Seconds":return c?a.getUTCSeconds():a.getSeconds();case"Minutes":return c?a.getUTCMinutes():a.getMinutes();case"Hours":return c?a.getUTCHours():a.getHours();case"Date":return c?a.getUTCDate():a.getDate();case"Day":return c?a.getUTCDay():a.getDay();case"Month":return c?a.getUTCMonth():a.getMonth();case"FullYear":return c?a.getUTCFullYear():a.getFullYear();default:return NaN}}function Xl(e,i,a){var c,u,m,k,A;if(!(!e.isValid()||isNaN(a))){switch(c=e._d,u=e._isUTC,i){case"Milliseconds":return void(u?c.setUTCMilliseconds(a):c.setMilliseconds(a));case"Seconds":return void(u?c.setUTCSeconds(a):c.setSeconds(a));case"Minutes":return void(u?c.setUTCMinutes(a):c.setMinutes(a));case"Hours":return void(u?c.setUTCHours(a):c.setHours(a));case"Date":return void(u?c.setUTCDate(a):c.setDate(a));case"FullYear":break;default:return}m=a,k=e.month(),A=e.date(),A=A===29&&k===1&&!Vs(m)?28:A,u?c.setUTCFullYear(m,k,A):c.setFullYear(m,k,A)}}function Uu(e){return e=pt(e),Me(this[e])?this[e]():this}function Vu(e,i){if(typeof e=="object"){e=Mn(e);var a=da(e),c,u=a.length;for(c=0;c<u;c++)this[a[c].unit](e[a[c].unit])}else if(e=pt(e),Me(this[e]))return this[e](i);return this}function Wu(e,i){return(e%i+i)%i}var Ae;Array.prototype.indexOf?Ae=Array.prototype.indexOf:Ae=function(e){var i;for(i=0;i<this.length;++i)if(this[i]===e)return i;return-1};function ma(e,i){if(isNaN(e)||isNaN(i))return NaN;var a=Wu(i,12);return e+=(i-a)/12,a===1?Vs(e)?29:28:31-a%7%2}R("M",["MM",2],"Mo",function(){return this.month()+1}),R("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)}),R("MMMM",0,0,function(e){return this.localeData().months(this,e)}),O("M",me,ei),O("MM",me,ee),O("MMM",function(e,i){return i.monthsShortRegex(e)}),O("MMMM",function(e,i){return i.monthsRegex(e)}),he(["M","MM"],function(e,i){i[zr]=te(e)-1}),he(["MMM","MMMM"],function(e,i,a,c){var u=a._locale.monthsParse(e,c,a._strict);u!=null?i[zr]=u:x(a).invalidMonth=e});var Hu="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Jl="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Ql=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Bu=Vi,Gu=Vi;function zu(e,i){return e?s(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||Ql).test(i)?"format":"standalone"][e.month()]:s(this._months)?this._months:this._months.standalone}function ju(e,i){return e?s(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[Ql.test(i)?"format":"standalone"][e.month()]:s(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function Ku(e,i,a){var c,u,m,k=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],c=0;c<12;++c)m=_([2e3,c]),this._shortMonthsParse[c]=this.monthsShort(m,"").toLocaleLowerCase(),this._longMonthsParse[c]=this.months(m,"").toLocaleLowerCase();return a?i==="MMM"?(u=Ae.call(this._shortMonthsParse,k),u!==-1?u:null):(u=Ae.call(this._longMonthsParse,k),u!==-1?u:null):i==="MMM"?(u=Ae.call(this._shortMonthsParse,k),u!==-1?u:(u=Ae.call(this._longMonthsParse,k),u!==-1?u:null)):(u=Ae.call(this._longMonthsParse,k),u!==-1?u:(u=Ae.call(this._shortMonthsParse,k),u!==-1?u:null))}function qu(e,i,a){var c,u,m;if(this._monthsParseExact)return Ku.call(this,e,i,a);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),c=0;c<12;c++){if(u=_([2e3,c]),a&&!this._longMonthsParse[c]&&(this._longMonthsParse[c]=new RegExp("^"+this.months(u,"").replace(".","")+"$","i"),this._shortMonthsParse[c]=new RegExp("^"+this.monthsShort(u,"").replace(".","")+"$","i")),!a&&!this._monthsParse[c]&&(m="^"+this.months(u,"")+"|^"+this.monthsShort(u,""),this._monthsParse[c]=new RegExp(m.replace(".",""),"i")),a&&i==="MMMM"&&this._longMonthsParse[c].test(e))return c;if(a&&i==="MMM"&&this._shortMonthsParse[c].test(e))return c;if(!a&&this._monthsParse[c].test(e))return c}}function ec(e,i){if(!e.isValid())return e;if(typeof i=="string"){if(/^\d+$/.test(i))i=te(i);else if(i=e.localeData().monthsParse(i),!p(i))return e}var a=i,c=e.date();return c=c<29?c:Math.min(c,ma(e.year(),a)),e._isUTC?e._d.setUTCMonth(a,c):e._d.setMonth(a,c),e}function tc(e){return e!=null?(ec(this,e),t.updateOffset(this,!0),this):Bi(this,"Month")}function Zu(){return ma(this.year(),this.month())}function Xu(e){return this._monthsParseExact?(l(this,"_monthsRegex")||rc.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(l(this,"_monthsShortRegex")||(this._monthsShortRegex=Bu),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)}function Ju(e){return this._monthsParseExact?(l(this,"_monthsRegex")||rc.call(this),e?this._monthsStrictRegex:this._monthsRegex):(l(this,"_monthsRegex")||(this._monthsRegex=Gu),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)}function rc(){function e(H,ne){return ne.length-H.length}var i=[],a=[],c=[],u,m,k,A;for(u=0;u<12;u++)m=_([2e3,u]),k=Gr(this.monthsShort(m,"")),A=Gr(this.months(m,"")),i.push(k),a.push(A),c.push(A),c.push(k);i.sort(e),a.sort(e),c.sort(e),this._monthsRegex=new RegExp("^("+c.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+a.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+i.join("|")+")","i")}function Qu(e,i,a,c,u,m,k){var A;return e<100&&e>=0?(A=new Date(e+400,i,a,c,u,m,k),isFinite(A.getFullYear())&&A.setFullYear(e)):A=new Date(e,i,a,c,u,m,k),A}function Gi(e){var i,a;return e<100&&e>=0?(a=Array.prototype.slice.call(arguments),a[0]=e+400,i=new Date(Date.UTC.apply(null,a)),isFinite(i.getUTCFullYear())&&i.setUTCFullYear(e)):i=new Date(Date.UTC.apply(null,arguments)),i}function Ws(e,i,a){var c=7+i-a,u=(7+Gi(e,0,c).getUTCDay()-i)%7;return-u+c-1}function nc(e,i,a,c,u){var m=(7+a-c)%7,k=Ws(e,c,u),A=1+7*(i-1)+m+k,H,ne;return A<=0?(H=e-1,ne=Hi(H)+A):A>Hi(e)?(H=e+1,ne=A-Hi(e)):(H=e,ne=A),{year:H,dayOfYear:ne}}function zi(e,i,a){var c=Ws(e.year(),i,a),u=Math.floor((e.dayOfYear()-c-1)/7)+1,m,k;return u<1?(k=e.year()-1,m=u+Kr(k,i,a)):u>Kr(e.year(),i,a)?(m=u-Kr(e.year(),i,a),k=e.year()+1):(k=e.year(),m=u),{week:m,year:k}}function Kr(e,i,a){var c=Ws(e,i,a),u=Ws(e+1,i,a);return(Hi(e)-c+u)/7}R("w",["ww",2],"wo","week"),R("W",["WW",2],"Wo","isoWeek"),O("w",me,ei),O("ww",me,ee),O("W",me,ei),O("WW",me,ee),Wi(["w","ww","W","WW"],function(e,i,a,c){i[c.substr(0,1)]=te(e)});function ed(e){return zi(e,this._week.dow,this._week.doy).week}var td={dow:0,doy:6};function rd(){return this._week.dow}function nd(){return this._week.doy}function id(e){var i=this.localeData().week(this);return e==null?i:this.add((e-i)*7,"d")}function sd(e){var i=zi(this,1,4).week;return e==null?i:this.add((e-i)*7,"d")}R("d",0,"do","day"),R("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)}),R("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),R("dddd",0,0,function(e){return this.localeData().weekdays(this,e)}),R("e",0,0,"weekday"),R("E",0,0,"isoWeekday"),O("d",me),O("e",me),O("E",me),O("dd",function(e,i){return i.weekdaysMinRegex(e)}),O("ddd",function(e,i){return i.weekdaysShortRegex(e)}),O("dddd",function(e,i){return i.weekdaysRegex(e)}),Wi(["dd","ddd","dddd"],function(e,i,a,c){var u=a._locale.weekdaysParse(e,c,a._strict);u!=null?i.d=u:x(a).invalidWeekday=e}),Wi(["d","e","E"],function(e,i,a,c){i[c]=te(e)});function od(e,i){return typeof e!="string"?e:isNaN(e)?(e=i.weekdaysParse(e),typeof e=="number"?e:null):parseInt(e,10)}function ad(e,i){return typeof e=="string"?i.weekdaysParse(e)%7||7:isNaN(e)?null:e}function _a(e,i){return e.slice(i,7).concat(e.slice(0,i))}var ld="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),ic="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),cd="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),fd=Vi,ud=Vi,dd=Vi;function pd(e,i){var a=s(this._weekdays)?this._weekdays:this._weekdays[e&&e!==!0&&this._weekdays.isFormat.test(i)?"format":"standalone"];return e===!0?_a(a,this._week.dow):e?a[e.day()]:a}function hd(e){return e===!0?_a(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort}function md(e){return e===!0?_a(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin}function _d(e,i,a){var c,u,m,k=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],c=0;c<7;++c)m=_([2e3,1]).day(c),this._minWeekdaysParse[c]=this.weekdaysMin(m,"").toLocaleLowerCase(),this._shortWeekdaysParse[c]=this.weekdaysShort(m,"").toLocaleLowerCase(),this._weekdaysParse[c]=this.weekdays(m,"").toLocaleLowerCase();return a?i==="dddd"?(u=Ae.call(this._weekdaysParse,k),u!==-1?u:null):i==="ddd"?(u=Ae.call(this._shortWeekdaysParse,k),u!==-1?u:null):(u=Ae.call(this._minWeekdaysParse,k),u!==-1?u:null):i==="dddd"?(u=Ae.call(this._weekdaysParse,k),u!==-1||(u=Ae.call(this._shortWeekdaysParse,k),u!==-1)?u:(u=Ae.call(this._minWeekdaysParse,k),u!==-1?u:null)):i==="ddd"?(u=Ae.call(this._shortWeekdaysParse,k),u!==-1||(u=Ae.call(this._weekdaysParse,k),u!==-1)?u:(u=Ae.call(this._minWeekdaysParse,k),u!==-1?u:null)):(u=Ae.call(this._minWeekdaysParse,k),u!==-1||(u=Ae.call(this._weekdaysParse,k),u!==-1)?u:(u=Ae.call(this._shortWeekdaysParse,k),u!==-1?u:null))}function vd(e,i,a){var c,u,m;if(this._weekdaysParseExact)return _d.call(this,e,i,a);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),c=0;c<7;c++){if(u=_([2e3,1]).day(c),a&&!this._fullWeekdaysParse[c]&&(this._fullWeekdaysParse[c]=new RegExp("^"+this.weekdays(u,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[c]=new RegExp("^"+this.weekdaysShort(u,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[c]=new RegExp("^"+this.weekdaysMin(u,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[c]||(m="^"+this.weekdays(u,"")+"|^"+this.weekdaysShort(u,"")+"|^"+this.weekdaysMin(u,""),this._weekdaysParse[c]=new RegExp(m.replace(".",""),"i")),a&&i==="dddd"&&this._fullWeekdaysParse[c].test(e))return c;if(a&&i==="ddd"&&this._shortWeekdaysParse[c].test(e))return c;if(a&&i==="dd"&&this._minWeekdaysParse[c].test(e))return c;if(!a&&this._weekdaysParse[c].test(e))return c}}function gd(e){if(!this.isValid())return e!=null?this:NaN;var i=Bi(this,"Day");return e!=null?(e=od(e,this.localeData()),this.add(e-i,"d")):i}function yd(e){if(!this.isValid())return e!=null?this:NaN;var i=(this.day()+7-this.localeData()._week.dow)%7;return e==null?i:this.add(e-i,"d")}function wd(e){if(!this.isValid())return e!=null?this:NaN;if(e!=null){var i=ad(e,this.localeData());return this.day(this.day()%7?i:i-7)}else return this.day()||7}function xd(e){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||va.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(l(this,"_weekdaysRegex")||(this._weekdaysRegex=fd),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)}function kd(e){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||va.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(l(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=ud),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function bd(e){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||va.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(l(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=dd),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function va(){function e(ht,Qr){return Qr.length-ht.length}var i=[],a=[],c=[],u=[],m,k,A,H,ne;for(m=0;m<7;m++)k=_([2e3,1]).day(m),A=Gr(this.weekdaysMin(k,"")),H=Gr(this.weekdaysShort(k,"")),ne=Gr(this.weekdays(k,"")),i.push(A),a.push(H),c.push(ne),u.push(A),u.push(H),u.push(ne);i.sort(e),a.sort(e),c.sort(e),u.sort(e),this._weekdaysRegex=new RegExp("^("+u.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+c.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+a.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+i.join("|")+")","i")}function ga(){return this.hours()%12||12}function Td(){return this.hours()||24}R("H",["HH",2],0,"hour"),R("h",["hh",2],0,ga),R("k",["kk",2],0,Td),R("hmm",0,0,function(){return""+ga.apply(this)+fe(this.minutes(),2)}),R("hmmss",0,0,function(){return""+ga.apply(this)+fe(this.minutes(),2)+fe(this.seconds(),2)}),R("Hmm",0,0,function(){return""+this.hours()+fe(this.minutes(),2)}),R("Hmmss",0,0,function(){return""+this.hours()+fe(this.minutes(),2)+fe(this.seconds(),2)});function sc(e,i){R(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),i)})}sc("a",!0),sc("A",!1);function oc(e,i){return i._meridiemParse}O("a",oc),O("A",oc),O("H",me,pa),O("h",me,ei),O("k",me,ei),O("HH",me,ee),O("hh",me,ee),O("kk",me,ee),O("hmm",Fs),O("hmmss",Is),O("Hmm",Fs),O("Hmmss",Is),he(["H","HH"],Ve),he(["k","kk"],function(e,i,a){var c=te(e);i[Ve]=c===24?0:c}),he(["a","A"],function(e,i,a){a._isPm=a._locale.isPM(e),a._meridiem=e}),he(["h","hh"],function(e,i,a){i[Ve]=te(e),x(a).bigHour=!0}),he("hmm",function(e,i,a){var c=e.length-2;i[Ve]=te(e.substr(0,c)),i[tr]=te(e.substr(c)),x(a).bigHour=!0}),he("hmmss",function(e,i,a){var c=e.length-4,u=e.length-2;i[Ve]=te(e.substr(0,c)),i[tr]=te(e.substr(c,2)),i[jr]=te(e.substr(u)),x(a).bigHour=!0}),he("Hmm",function(e,i,a){var c=e.length-2;i[Ve]=te(e.substr(0,c)),i[tr]=te(e.substr(c))}),he("Hmmss",function(e,i,a){var c=e.length-4,u=e.length-2;i[Ve]=te(e.substr(0,c)),i[tr]=te(e.substr(c,2)),i[jr]=te(e.substr(u))});function Sd(e){return(e+"").toLowerCase().charAt(0)==="p"}var Ed=/[ap]\.?m?\.?/i,$d=ti("Hours",!0);function Dd(e,i,a){return e>11?a?"pm":"PM":a?"am":"AM"}var ac={calendar:W,longDateFormat:wr,invalidDate:xt,ordinal:Yi,dayOfMonthOrdinalParse:pe,relativeTime:It,months:Hu,monthsShort:Jl,week:td,weekdays:ld,weekdaysMin:cd,weekdaysShort:ic,meridiemParse:Ed},ke={},ji={},Ki;function Md(e,i){var a,c=Math.min(e.length,i.length);for(a=0;a<c;a+=1)if(e[a]!==i[a])return a;return c}function lc(e){return e&&e.toLowerCase().replace("_","-")}function Nd(e){for(var i=0,a,c,u,m;i<e.length;){for(m=lc(e[i]).split("-"),a=m.length,c=lc(e[i+1]),c=c?c.split("-"):null;a>0;){if(u=Hs(m.slice(0,a).join("-")),u)return u;if(c&&c.length>=a&&Md(m,c)>=a-1)break;a--}i++}return Ki}function Ad(e){return!!(e&&e.match("^[^/\\\\]*$"))}function Hs(e){var i=null,a;if(ke[e]===void 0&&typeof Oi!="undefined"&&Oi&&Oi.exports&&Ad(e))try{i=Ki._abbr,a=require,a("./locale/"+e),hn(i)}catch(c){ke[e]=null}return ke[e]}function hn(e,i){var a;return e&&(d(i)?a=qr(e):a=ya(e,i),a?Ki=a:typeof console!="undefined"&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),Ki._abbr}function ya(e,i){if(i!==null){var a,c=ac;if(i.abbr=e,ke[e]!=null)ce("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),c=ke[e]._config;else if(i.parentLocale!=null)if(ke[i.parentLocale]!=null)c=ke[i.parentLocale]._config;else if(a=Hs(i.parentLocale),a!=null)c=a._config;else return ji[i.parentLocale]||(ji[i.parentLocale]=[]),ji[i.parentLocale].push({name:e,config:i}),null;return ke[e]=new Qt(yt(c,i)),ji[e]&&ji[e].forEach(function(u){ya(u.name,u.config)}),hn(e),ke[e]}else return delete ke[e],null}function Od(e,i){if(i!=null){var a,c,u=ac;ke[e]!=null&&ke[e].parentLocale!=null?ke[e].set(yt(ke[e]._config,i)):(c=Hs(e),c!=null&&(u=c._config),i=yt(u,i),c==null&&(i.abbr=e),a=new Qt(i),a.parentLocale=ke[e],ke[e]=a),hn(e)}else ke[e]!=null&&(ke[e].parentLocale!=null?(ke[e]=ke[e].parentLocale,e===hn()&&hn(e)):ke[e]!=null&&delete ke[e]);return ke[e]}function qr(e){var i;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return Ki;if(!s(e)){if(i=Hs(e),i)return i;e=[e]}return Nd(e)}function Cd(){return yr(ke)}function wa(e){var i,a=e._a;return a&&x(e).overflow===-2&&(i=a[zr]<0||a[zr]>11?zr:a[br]<1||a[br]>ma(a[at],a[zr])?br:a[Ve]<0||a[Ve]>24||a[Ve]===24&&(a[tr]!==0||a[jr]!==0||a[Nn]!==0)?Ve:a[tr]<0||a[tr]>59?tr:a[jr]<0||a[jr]>59?jr:a[Nn]<0||a[Nn]>999?Nn:-1,x(e)._overflowDayOfYear&&(i<at||i>br)&&(i=br),x(e)._overflowWeeks&&i===-1&&(i=Lu),x(e)._overflowWeekday&&i===-1&&(i=Yu),x(e).overflow=i),e}var Rd=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Fd=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Id=/Z|[+-]\d\d(?::?\d\d)?/,Bs=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],xa=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Ld=/^\/?Date\((-?\d+)/i,Yd=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,Pd={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function cc(e){var i,a,c=e._i,u=Rd.exec(c)||Fd.exec(c),m,k,A,H,ne=Bs.length,ht=xa.length;if(u){for(x(e).iso=!0,i=0,a=ne;i<a;i++)if(Bs[i][1].exec(u[1])){k=Bs[i][0],m=Bs[i][2]!==!1;break}if(k==null){e._isValid=!1;return}if(u[3]){for(i=0,a=ht;i<a;i++)if(xa[i][1].exec(u[3])){A=(u[2]||" ")+xa[i][0];break}if(A==null){e._isValid=!1;return}}if(!m&&A!=null){e._isValid=!1;return}if(u[4])if(Id.exec(u[4]))H="Z";else{e._isValid=!1;return}e._f=k+(A||"")+(H||""),ba(e)}else e._isValid=!1}function Ud(e,i,a,c,u,m){var k=[Vd(e),Jl.indexOf(i),parseInt(a,10),parseInt(c,10),parseInt(u,10)];return m&&k.push(parseInt(m,10)),k}function Vd(e){var i=parseInt(e,10);return i<=49?2e3+i:i<=999?1900+i:i}function Wd(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function Hd(e,i,a){if(e){var c=ic.indexOf(e),u=new Date(i[0],i[1],i[2]).getDay();if(c!==u)return x(a).weekdayMismatch=!0,a._isValid=!1,!1}return!0}function Bd(e,i,a){if(e)return Pd[e];if(i)return 0;var c=parseInt(a,10),u=c%100,m=(c-u)/100;return m*60+u}function fc(e){var i=Yd.exec(Wd(e._i)),a;if(i){if(a=Ud(i[4],i[3],i[2],i[5],i[6],i[7]),!Hd(i[1],a,e))return;e._a=a,e._tzm=Bd(i[8],i[9],i[10]),e._d=Gi.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),x(e).rfc2822=!0}else e._isValid=!1}function Gd(e){var i=Ld.exec(e._i);if(i!==null){e._d=new Date(+i[1]);return}if(cc(e),e._isValid===!1)delete e._isValid;else return;if(fc(e),e._isValid===!1)delete e._isValid;else return;e._strict?e._isValid=!1:t.createFromInputFallback(e)}t.createFromInputFallback=de("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))});function ri(e,i,a){return e!=null?e:i!=null?i:a}function zd(e){var i=new Date(t.now());return e._useUTC?[i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate()]:[i.getFullYear(),i.getMonth(),i.getDate()]}function ka(e){var i,a,c=[],u,m,k;if(!e._d){for(u=zd(e),e._w&&e._a[br]==null&&e._a[zr]==null&&jd(e),e._dayOfYear!=null&&(k=ri(e._a[at],u[at]),(e._dayOfYear>Hi(k)||e._dayOfYear===0)&&(x(e)._overflowDayOfYear=!0),a=Gi(k,0,e._dayOfYear),e._a[zr]=a.getUTCMonth(),e._a[br]=a.getUTCDate()),i=0;i<3&&e._a[i]==null;++i)e._a[i]=c[i]=u[i];for(;i<7;i++)e._a[i]=c[i]=e._a[i]==null?i===2?1:0:e._a[i];e._a[Ve]===24&&e._a[tr]===0&&e._a[jr]===0&&e._a[Nn]===0&&(e._nextDay=!0,e._a[Ve]=0),e._d=(e._useUTC?Gi:Qu).apply(null,c),m=e._useUTC?e._d.getUTCDay():e._d.getDay(),e._tzm!=null&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[Ve]=24),e._w&&typeof e._w.d!="undefined"&&e._w.d!==m&&(x(e).weekdayMismatch=!0)}}function jd(e){var i,a,c,u,m,k,A,H,ne;i=e._w,i.GG!=null||i.W!=null||i.E!=null?(m=1,k=4,a=ri(i.GG,e._a[at],zi(we(),1,4).year),c=ri(i.W,1),u=ri(i.E,1),(u<1||u>7)&&(H=!0)):(m=e._locale._week.dow,k=e._locale._week.doy,ne=zi(we(),m,k),a=ri(i.gg,e._a[at],ne.year),c=ri(i.w,ne.week),i.d!=null?(u=i.d,(u<0||u>6)&&(H=!0)):i.e!=null?(u=i.e+m,(i.e<0||i.e>6)&&(H=!0)):u=m),c<1||c>Kr(a,m,k)?x(e)._overflowWeeks=!0:H!=null?x(e)._overflowWeekday=!0:(A=nc(a,c,u,m,k),e._a[at]=A.year,e._dayOfYear=A.dayOfYear)}t.ISO_8601=function(){},t.RFC_2822=function(){};function ba(e){if(e._f===t.ISO_8601){cc(e);return}if(e._f===t.RFC_2822){fc(e);return}e._a=[],x(e).empty=!0;var i=""+e._i,a,c,u,m,k,A=i.length,H=0,ne,ht;for(u=zt(e._f,e._locale).match(Z)||[],ht=u.length,a=0;a<ht;a++)m=u[a],c=(i.match(Ru(m,e))||[])[0],c&&(k=i.substr(0,i.indexOf(c)),k.length>0&&x(e).unusedInput.push(k),i=i.slice(i.indexOf(c)+c.length),H+=c.length),ot[m]?(c?x(e).empty=!1:x(e).unusedTokens.push(m),Iu(m,c,e)):e._strict&&!c&&x(e).unusedTokens.push(m);x(e).charsLeftOver=A-H,i.length>0&&x(e).unusedInput.push(i),e._a[Ve]<=12&&x(e).bigHour===!0&&e._a[Ve]>0&&(x(e).bigHour=void 0),x(e).parsedDateParts=e._a.slice(0),x(e).meridiem=e._meridiem,e._a[Ve]=Kd(e._locale,e._a[Ve],e._meridiem),ne=x(e).era,ne!==null&&(e._a[at]=e._locale.erasConvertYear(ne,e._a[at])),ka(e),wa(e)}function Kd(e,i,a){var c;return a==null?i:e.meridiemHour!=null?e.meridiemHour(i,a):(e.isPM!=null&&(c=e.isPM(a),c&&i<12&&(i+=12),!c&&i===12&&(i=0)),i)}function qd(e){var i,a,c,u,m,k,A=!1,H=e._f.length;if(H===0){x(e).invalidFormat=!0,e._d=new Date(NaN);return}for(u=0;u<H;u++)m=0,k=!1,i=J({},e),e._useUTC!=null&&(i._useUTC=e._useUTC),i._f=e._f[u],ba(i),S(i)&&(k=!0),m+=x(i).charsLeftOver,m+=x(i).unusedTokens.length*10,x(i).score=m,A?m<c&&(c=m,a=i):(c==null||m<c||k)&&(c=m,a=i,k&&(A=!0));g(e,a||i)}function Zd(e){if(!e._d){var i=Mn(e._i),a=i.day===void 0?i.date:i.day;e._a=v([i.year,i.month,a,i.hour,i.minute,i.second,i.millisecond],function(c){return c&&parseInt(c,10)}),ka(e)}}function Xd(e){var i=new L(wa(uc(e)));return i._nextDay&&(i.add(1,"d"),i._nextDay=void 0),i}function uc(e){var i=e._i,a=e._f;return e._locale=e._locale||qr(e._l),i===null||a===void 0&&i===""?M({nullInput:!0}):(typeof i=="string"&&(e._i=i=e._locale.preparse(i)),Q(i)?new L(wa(i)):(h(i)?e._d=i:s(a)?qd(e):a?ba(e):Jd(e),S(e)||(e._d=null),e))}function Jd(e){var i=e._i;d(i)?e._d=new Date(t.now()):h(i)?e._d=new Date(i.valueOf()):typeof i=="string"?Gd(e):s(i)?(e._a=v(i.slice(0),function(a){return parseInt(a,10)}),ka(e)):o(i)?Zd(e):p(i)?e._d=new Date(i):t.createFromInputFallback(e)}function dc(e,i,a,c,u){var m={};return(i===!0||i===!1)&&(c=i,i=void 0),(a===!0||a===!1)&&(c=a,a=void 0),(o(e)&&f(e)||s(e)&&e.length===0)&&(e=void 0),m._isAMomentObject=!0,m._useUTC=m._isUTC=u,m._l=a,m._i=e,m._f=i,m._strict=c,Xd(m)}function we(e,i,a,c){return dc(e,i,a,c,!1)}var Qd=de("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=we.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:M()}),ep=de("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=we.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:M()});function pc(e,i){var a,c;if(i.length===1&&s(i[0])&&(i=i[0]),!i.length)return we();for(a=i[0],c=1;c<i.length;++c)(!i[c].isValid()||i[c][e](a))&&(a=i[c]);return a}function tp(){var e=[].slice.call(arguments,0);return pc("isBefore",e)}function rp(){var e=[].slice.call(arguments,0);return pc("isAfter",e)}var np=function(){return Date.now?Date.now():+new Date},qi=["year","quarter","month","week","day","hour","minute","second","millisecond"];function ip(e){var i,a=!1,c,u=qi.length;for(i in e)if(l(e,i)&&!(Ae.call(qi,i)!==-1&&(e[i]==null||!isNaN(e[i]))))return!1;for(c=0;c<u;++c)if(e[qi[c]]){if(a)return!1;parseFloat(e[qi[c]])!==te(e[qi[c]])&&(a=!0)}return!0}function sp(){return this._isValid}function op(){return rr(NaN)}function Gs(e){var i=Mn(e),a=i.year||0,c=i.quarter||0,u=i.month||0,m=i.week||i.isoWeek||0,k=i.day||0,A=i.hour||0,H=i.minute||0,ne=i.second||0,ht=i.millisecond||0;this._isValid=ip(i),this._milliseconds=+ht+ne*1e3+H*6e4+A*1e3*60*60,this._days=+k+m*7,this._months=+u+c*3+a*12,this._data={},this._locale=qr(),this._bubble()}function zs(e){return e instanceof Gs}function Ta(e){return e<0?Math.round(-1*e)*-1:Math.round(e)}function ap(e,i,a){var c=Math.min(e.length,i.length),u=Math.abs(e.length-i.length),m=0,k;for(k=0;k<c;k++)(a&&e[k]!==i[k]||!a&&te(e[k])!==te(i[k]))&&m++;return m+u}function hc(e,i){R(e,0,0,function(){var a=this.utcOffset(),c="+";return a<0&&(a=-a,c="-"),c+fe(~~(a/60),2)+i+fe(~~a%60,2)})}hc("Z",":"),hc("ZZ",""),O("Z",Ps),O("ZZ",Ps),he(["Z","ZZ"],function(e,i,a){a._useUTC=!0,a._tzm=Sa(Ps,e)});var lp=/([\+\-]|\d\d)/gi;function Sa(e,i){var a=(i||"").match(e),c,u,m;return a===null?null:(c=a[a.length-1]||[],u=(c+"").match(lp)||["-",0,0],m=+(u[1]*60)+te(u[2]),m===0?0:u[0]==="+"?m:-m)}function Ea(e,i){var a,c;return i._isUTC?(a=i.clone(),c=(Q(e)||h(e)?e.valueOf():we(e).valueOf())-a.valueOf(),a._d.setTime(a._d.valueOf()+c),t.updateOffset(a,!1),a):we(e).local()}function $a(e){return-Math.round(e._d.getTimezoneOffset())}t.updateOffset=function(){};function cp(e,i,a){var c=this._offset||0,u;if(!this.isValid())return e!=null?this:NaN;if(e!=null){if(typeof e=="string"){if(e=Sa(Ps,e),e===null)return this}else Math.abs(e)<16&&!a&&(e=e*60);return!this._isUTC&&i&&(u=$a(this)),this._offset=e,this._isUTC=!0,u!=null&&this.add(u,"m"),c!==e&&(!i||this._changeInProgress?gc(this,rr(e-c,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,t.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?c:$a(this)}function fp(e,i){return e!=null?(typeof e!="string"&&(e=-e),this.utcOffset(e,i),this):-this.utcOffset()}function up(e){return this.utcOffset(0,e)}function dp(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract($a(this),"m")),this}function pp(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var e=Sa(Ou,this._i);e!=null?this.utcOffset(e):this.utcOffset(0,!0)}return this}function hp(e){return this.isValid()?(e=e?we(e).utcOffset():0,(this.utcOffset()-e)%60===0):!1}function mp(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function _p(){if(!d(this._isDSTShifted))return this._isDSTShifted;var e={},i;return J(e,this),e=uc(e),e._a?(i=e._isUTC?_(e._a):we(e._a),this._isDSTShifted=this.isValid()&&ap(e._a,i.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function vp(){return this.isValid()?!this._isUTC:!1}function gp(){return this.isValid()?this._isUTC:!1}function mc(){return this.isValid()?this._isUTC&&this._offset===0:!1}var yp=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,wp=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function rr(e,i){var a=e,c=null,u,m,k;return zs(e)?a={ms:e._milliseconds,d:e._days,M:e._months}:p(e)||!isNaN(+e)?(a={},i?a[i]=+e:a.milliseconds=+e):(c=yp.exec(e))?(u=c[1]==="-"?-1:1,a={y:0,d:te(c[br])*u,h:te(c[Ve])*u,m:te(c[tr])*u,s:te(c[jr])*u,ms:te(Ta(c[Nn]*1e3))*u}):(c=wp.exec(e))?(u=c[1]==="-"?-1:1,a={y:An(c[2],u),M:An(c[3],u),w:An(c[4],u),d:An(c[5],u),h:An(c[6],u),m:An(c[7],u),s:An(c[8],u)}):a==null?a={}:typeof a=="object"&&("from"in a||"to"in a)&&(k=xp(we(a.from),we(a.to)),a={},a.ms=k.milliseconds,a.M=k.months),m=new Gs(a),zs(e)&&l(e,"_locale")&&(m._locale=e._locale),zs(e)&&l(e,"_isValid")&&(m._isValid=e._isValid),m}rr.fn=Gs.prototype,rr.invalid=op;function An(e,i){var a=e&&parseFloat(e.replace(",","."));return(isNaN(a)?0:a)*i}function _c(e,i){var a={};return a.months=i.month()-e.month()+(i.year()-e.year())*12,e.clone().add(a.months,"M").isAfter(i)&&--a.months,a.milliseconds=+i-+e.clone().add(a.months,"M"),a}function xp(e,i){var a;return e.isValid()&&i.isValid()?(i=Ea(i,e),e.isBefore(i)?a=_c(e,i):(a=_c(i,e),a.milliseconds=-a.milliseconds,a.months=-a.months),a):{milliseconds:0,months:0}}function vc(e,i){return function(a,c){var u,m;return c!==null&&!isNaN(+c)&&(ce(i,"moment()."+i+"(period, number) is deprecated. Please use moment()."+i+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),m=a,a=c,c=m),u=rr(a,c),gc(this,u,e),this}}function gc(e,i,a,c){var u=i._milliseconds,m=Ta(i._days),k=Ta(i._months);e.isValid()&&(c=c==null?!0:c,k&&ec(e,Bi(e,"Month")+k*a),m&&Xl(e,"Date",Bi(e,"Date")+m*a),u&&e._d.setTime(e._d.valueOf()+u*a),c&&t.updateOffset(e,m||k))}var kp=vc(1,"add"),bp=vc(-1,"subtract");function yc(e){return typeof e=="string"||e instanceof String}function Tp(e){return Q(e)||h(e)||yc(e)||p(e)||Ep(e)||Sp(e)||e===null||e===void 0}function Sp(e){var i=o(e)&&!f(e),a=!1,c=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],u,m,k=c.length;for(u=0;u<k;u+=1)m=c[u],a=a||l(e,m);return i&&a}function Ep(e){var i=s(e),a=!1;return i&&(a=e.filter(function(c){return!p(c)&&yc(e)}).length===0),i&&a}function $p(e){var i=o(e)&&!f(e),a=!1,c=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],u,m;for(u=0;u<c.length;u+=1)m=c[u],a=a||l(e,m);return i&&a}function Dp(e,i){var a=e.diff(i,"days",!0);return a<-6?"sameElse":a<-1?"lastWeek":a<0?"lastDay":a<1?"sameDay":a<2?"nextDay":a<7?"nextWeek":"sameElse"}function Mp(e,i){arguments.length===1&&(arguments[0]?Tp(arguments[0])?(e=arguments[0],i=void 0):$p(arguments[0])&&(i=arguments[0],e=void 0):(e=void 0,i=void 0));var a=e||we(),c=Ea(a,this).startOf("day"),u=t.calendarFormat(this,c)||"sameElse",m=i&&(Me(i[u])?i[u].call(this,a):i[u]);return this.format(m||this.localeData().calendar(u,this,we(a)))}function Np(){return new L(this)}function Ap(e,i){var a=Q(e)?e:we(e);return this.isValid()&&a.isValid()?(i=pt(i)||"millisecond",i==="millisecond"?this.valueOf()>a.valueOf():a.valueOf()<this.clone().startOf(i).valueOf()):!1}function Op(e,i){var a=Q(e)?e:we(e);return this.isValid()&&a.isValid()?(i=pt(i)||"millisecond",i==="millisecond"?this.valueOf()<a.valueOf():this.clone().endOf(i).valueOf()<a.valueOf()):!1}function Cp(e,i,a,c){var u=Q(e)?e:we(e),m=Q(i)?i:we(i);return this.isValid()&&u.isValid()&&m.isValid()?(c=c||"()",(c[0]==="("?this.isAfter(u,a):!this.isBefore(u,a))&&(c[1]===")"?this.isBefore(m,a):!this.isAfter(m,a))):!1}function Rp(e,i){var a=Q(e)?e:we(e),c;return this.isValid()&&a.isValid()?(i=pt(i)||"millisecond",i==="millisecond"?this.valueOf()===a.valueOf():(c=a.valueOf(),this.clone().startOf(i).valueOf()<=c&&c<=this.clone().endOf(i).valueOf())):!1}function Fp(e,i){return this.isSame(e,i)||this.isAfter(e,i)}function Ip(e,i){return this.isSame(e,i)||this.isBefore(e,i)}function Lp(e,i,a){var c,u,m;if(!this.isValid())return NaN;if(c=Ea(e,this),!c.isValid())return NaN;switch(u=(c.utcOffset()-this.utcOffset())*6e4,i=pt(i),i){case"year":m=js(this,c)/12;break;case"month":m=js(this,c);break;case"quarter":m=js(this,c)/3;break;case"second":m=(this-c)/1e3;break;case"minute":m=(this-c)/6e4;break;case"hour":m=(this-c)/36e5;break;case"day":m=(this-c-u)/864e5;break;case"week":m=(this-c-u)/6048e5;break;default:m=this-c}return a?m:jt(m)}function js(e,i){if(e.date()<i.date())return-js(i,e);var a=(i.year()-e.year())*12+(i.month()-e.month()),c=e.clone().add(a,"months"),u,m;return i-c<0?(u=e.clone().add(a-1,"months"),m=(i-c)/(c-u)):(u=e.clone().add(a+1,"months"),m=(i-c)/(u-c)),-(a+m)||0}t.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",t.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function Yp(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function Pp(e){if(!this.isValid())return null;var i=e!==!0,a=i?this.clone().utc():this;return a.year()<0||a.year()>9999?wt(a,i?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):Me(Date.prototype.toISOString)?i?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",wt(a,"Z")):wt(a,i?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function Up(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e="moment",i="",a,c,u,m;return this.isLocal()||(e=this.utcOffset()===0?"moment.utc":"moment.parseZone",i="Z"),a="["+e+'("]',c=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",u="-MM-DD[T]HH:mm:ss.SSS",m=i+'[")]',this.format(a+c+u+m)}function Vp(e){e||(e=this.isUtc()?t.defaultFormatUtc:t.defaultFormat);var i=wt(this,e);return this.localeData().postformat(i)}function Wp(e,i){return this.isValid()&&(Q(e)&&e.isValid()||we(e).isValid())?rr({to:this,from:e}).locale(this.locale()).humanize(!i):this.localeData().invalidDate()}function Hp(e){return this.from(we(),e)}function Bp(e,i){return this.isValid()&&(Q(e)&&e.isValid()||we(e).isValid())?rr({from:this,to:e}).locale(this.locale()).humanize(!i):this.localeData().invalidDate()}function Gp(e){return this.to(we(),e)}function wc(e){var i;return e===void 0?this._locale._abbr:(i=qr(e),i!=null&&(this._locale=i),this)}var xc=de("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return e===void 0?this.localeData():this.locale(e)});function kc(){return this._locale}var Ks=1e3,ni=60*Ks,qs=60*ni,bc=(365*400+97)*24*qs;function ii(e,i){return(e%i+i)%i}function Tc(e,i,a){return e<100&&e>=0?new Date(e+400,i,a)-bc:new Date(e,i,a).valueOf()}function Sc(e,i,a){return e<100&&e>=0?Date.UTC(e+400,i,a)-bc:Date.UTC(e,i,a)}function zp(e){var i,a;if(e=pt(e),e===void 0||e==="millisecond"||!this.isValid())return this;switch(a=this._isUTC?Sc:Tc,e){case"year":i=a(this.year(),0,1);break;case"quarter":i=a(this.year(),this.month()-this.month()%3,1);break;case"month":i=a(this.year(),this.month(),1);break;case"week":i=a(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":i=a(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":i=a(this.year(),this.month(),this.date());break;case"hour":i=this._d.valueOf(),i-=ii(i+(this._isUTC?0:this.utcOffset()*ni),qs);break;case"minute":i=this._d.valueOf(),i-=ii(i,ni);break;case"second":i=this._d.valueOf(),i-=ii(i,Ks);break}return this._d.setTime(i),t.updateOffset(this,!0),this}function jp(e){var i,a;if(e=pt(e),e===void 0||e==="millisecond"||!this.isValid())return this;switch(a=this._isUTC?Sc:Tc,e){case"year":i=a(this.year()+1,0,1)-1;break;case"quarter":i=a(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":i=a(this.year(),this.month()+1,1)-1;break;case"week":i=a(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":i=a(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":i=a(this.year(),this.month(),this.date()+1)-1;break;case"hour":i=this._d.valueOf(),i+=qs-ii(i+(this._isUTC?0:this.utcOffset()*ni),qs)-1;break;case"minute":i=this._d.valueOf(),i+=ni-ii(i,ni)-1;break;case"second":i=this._d.valueOf(),i+=Ks-ii(i,Ks)-1;break}return this._d.setTime(i),t.updateOffset(this,!0),this}function Kp(){return this._d.valueOf()-(this._offset||0)*6e4}function qp(){return Math.floor(this.valueOf()/1e3)}function Zp(){return new Date(this.valueOf())}function Xp(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function Jp(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function Qp(){return this.isValid()?this.toISOString():null}function eh(){return S(this)}function th(){return g({},x(this))}function rh(){return x(this).overflow}function nh(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}R("N",0,0,"eraAbbr"),R("NN",0,0,"eraAbbr"),R("NNN",0,0,"eraAbbr"),R("NNNN",0,0,"eraName"),R("NNNNN",0,0,"eraNarrow"),R("y",["y",1],"yo","eraYear"),R("y",["yy",2],0,"eraYear"),R("y",["yyy",3],0,"eraYear"),R("y",["yyyy",4],0,"eraYear"),O("N",Da),O("NN",Da),O("NNN",Da),O("NNNN",hh),O("NNNNN",mh),he(["N","NN","NNN","NNNN","NNNNN"],function(e,i,a,c){var u=a._locale.erasParse(e,c,a._strict);u?x(a).era=u:x(a).invalidEra=e}),O("y",Qn),O("yy",Qn),O("yyy",Qn),O("yyyy",Qn),O("yo",_h),he(["y","yy","yyy","yyyy"],at),he(["yo"],function(e,i,a,c){var u;a._locale._eraYearOrdinalRegex&&(u=e.match(a._locale._eraYearOrdinalRegex)),a._locale.eraYearOrdinalParse?i[at]=a._locale.eraYearOrdinalParse(e,u):i[at]=parseInt(e,10)});function ih(e,i){var a,c,u,m=this._eras||qr("en")._eras;for(a=0,c=m.length;a<c;++a)switch(typeof m[a].since==="string"&&(u=t(m[a].since).startOf("day"),m[a].since=u.valueOf()),typeof m[a].until){case"undefined":m[a].until=1/0;break;case"string":u=t(m[a].until).startOf("day").valueOf(),m[a].until=u.valueOf();break}return m}function sh(e,i,a){var c,u,m=this.eras(),k,A,H;for(e=e.toUpperCase(),c=0,u=m.length;c<u;++c)if(k=m[c].name.toUpperCase(),A=m[c].abbr.toUpperCase(),H=m[c].narrow.toUpperCase(),a)switch(i){case"N":case"NN":case"NNN":if(A===e)return m[c];break;case"NNNN":if(k===e)return m[c];break;case"NNNNN":if(H===e)return m[c];break}else if([k,A,H].indexOf(e)>=0)return m[c]}function oh(e,i){var a=e.since<=e.until?1:-1;return i===void 0?t(e.since).year():t(e.since).year()+(i-e.offset)*a}function ah(){var e,i,a,c=this.localeData().eras();for(e=0,i=c.length;e<i;++e)if(a=this.clone().startOf("day").valueOf(),c[e].since<=a&&a<=c[e].until||c[e].until<=a&&a<=c[e].since)return c[e].name;return""}function lh(){var e,i,a,c=this.localeData().eras();for(e=0,i=c.length;e<i;++e)if(a=this.clone().startOf("day").valueOf(),c[e].since<=a&&a<=c[e].until||c[e].until<=a&&a<=c[e].since)return c[e].narrow;return""}function ch(){var e,i,a,c=this.localeData().eras();for(e=0,i=c.length;e<i;++e)if(a=this.clone().startOf("day").valueOf(),c[e].since<=a&&a<=c[e].until||c[e].until<=a&&a<=c[e].since)return c[e].abbr;return""}function fh(){var e,i,a,c,u=this.localeData().eras();for(e=0,i=u.length;e<i;++e)if(a=u[e].since<=u[e].until?1:-1,c=this.clone().startOf("day").valueOf(),u[e].since<=c&&c<=u[e].until||u[e].until<=c&&c<=u[e].since)return(this.year()-t(u[e].since).year())*a+u[e].offset;return this.year()}function uh(e){return l(this,"_erasNameRegex")||Ma.call(this),e?this._erasNameRegex:this._erasRegex}function dh(e){return l(this,"_erasAbbrRegex")||Ma.call(this),e?this._erasAbbrRegex:this._erasRegex}function ph(e){return l(this,"_erasNarrowRegex")||Ma.call(this),e?this._erasNarrowRegex:this._erasRegex}function Da(e,i){return i.erasAbbrRegex(e)}function hh(e,i){return i.erasNameRegex(e)}function mh(e,i){return i.erasNarrowRegex(e)}function _h(e,i){return i._eraYearOrdinalRegex||Qn}function Ma(){var e=[],i=[],a=[],c=[],u,m,k,A,H,ne=this.eras();for(u=0,m=ne.length;u<m;++u)k=Gr(ne[u].name),A=Gr(ne[u].abbr),H=Gr(ne[u].narrow),i.push(k),e.push(A),a.push(H),c.push(k),c.push(A),c.push(H);this._erasRegex=new RegExp("^("+c.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+i.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+e.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+a.join("|")+")","i")}R(0,["gg",2],0,function(){return this.weekYear()%100}),R(0,["GG",2],0,function(){return this.isoWeekYear()%100});function Zs(e,i){R(0,[e,e.length],0,i)}Zs("gggg","weekYear"),Zs("ggggg","weekYear"),Zs("GGGG","isoWeekYear"),Zs("GGGGG","isoWeekYear"),O("G",Ys),O("g",Ys),O("GG",me,ee),O("gg",me,ee),O("GGGG",Ui,Ue),O("gggg",Ui,Ue),O("GGGGG",Ls,Re),O("ggggg",Ls,Re),Wi(["gggg","ggggg","GGGG","GGGGG"],function(e,i,a,c){i[c.substr(0,2)]=te(e)}),Wi(["gg","GG"],function(e,i,a,c){i[c]=t.parseTwoDigitYear(e)});function vh(e){return Ec.call(this,e,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)}function gh(e){return Ec.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function yh(){return Kr(this.year(),1,4)}function wh(){return Kr(this.isoWeekYear(),1,4)}function xh(){var e=this.localeData()._week;return Kr(this.year(),e.dow,e.doy)}function kh(){var e=this.localeData()._week;return Kr(this.weekYear(),e.dow,e.doy)}function Ec(e,i,a,c,u){var m;return e==null?zi(this,c,u).year:(m=Kr(e,c,u),i>m&&(i=m),bh.call(this,e,i,a,c,u))}function bh(e,i,a,c,u){var m=nc(e,i,a,c,u),k=Gi(m.year,0,m.dayOfYear);return this.year(k.getUTCFullYear()),this.month(k.getUTCMonth()),this.date(k.getUTCDate()),this}R("Q",0,"Qo","quarter"),O("Q",Ne),he("Q",function(e,i){i[zr]=(te(e)-1)*3});function Th(e){return e==null?Math.ceil((this.month()+1)/3):this.month((e-1)*3+this.month()%3)}R("D",["DD",2],"Do","date"),O("D",me,ei),O("DD",me,ee),O("Do",function(e,i){return e?i._dayOfMonthOrdinalParse||i._ordinalParse:i._dayOfMonthOrdinalParseLenient}),he(["D","DD"],br),he("Do",function(e,i){i[br]=te(e.match(me)[0])});var $c=ti("Date",!0);R("DDD",["DDDD",3],"DDDo","dayOfYear"),O("DDD",Jn),O("DDDD",se),he(["DDD","DDDD"],function(e,i,a){a._dayOfYear=te(e)});function Sh(e){var i=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return e==null?i:this.add(e-i,"d")}R("m",["mm",2],0,"minute"),O("m",me,pa),O("mm",me,ee),he(["m","mm"],tr);var Eh=ti("Minutes",!1);R("s",["ss",2],0,"second"),O("s",me,pa),O("ss",me,ee),he(["s","ss"],jr);var $h=ti("Seconds",!1);R("S",0,0,function(){return~~(this.millisecond()/100)}),R(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),R(0,["SSS",3],0,"millisecond"),R(0,["SSSS",4],0,function(){return this.millisecond()*10}),R(0,["SSSSS",5],0,function(){return this.millisecond()*100}),R(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3}),R(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4}),R(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5}),R(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6}),O("S",Jn,Ne),O("SS",Jn,ee),O("SSS",Jn,se);var mn,Dc;for(mn="SSSS";mn.length<=9;mn+="S")O(mn,Qn);function Dh(e,i){i[Nn]=te(("0."+e)*1e3)}for(mn="S";mn.length<=9;mn+="S")he(mn,Dh);Dc=ti("Milliseconds",!1),R("z",0,0,"zoneAbbr"),R("zz",0,0,"zoneName");function Mh(){return this._isUTC?"UTC":""}function Nh(){return this._isUTC?"Coordinated Universal Time":""}var $=L.prototype;$.add=kp,$.calendar=Mp,$.clone=Np,$.diff=Lp,$.endOf=jp,$.format=Vp,$.from=Wp,$.fromNow=Hp,$.to=Bp,$.toNow=Gp,$.get=Uu,$.invalidAt=rh,$.isAfter=Ap,$.isBefore=Op,$.isBetween=Cp,$.isSame=Rp,$.isSameOrAfter=Fp,$.isSameOrBefore=Ip,$.isValid=eh,$.lang=xc,$.locale=wc,$.localeData=kc,$.max=ep,$.min=Qd,$.parsingFlags=th,$.set=Vu,$.startOf=zp,$.subtract=bp,$.toArray=Xp,$.toObject=Jp,$.toDate=Zp,$.toISOString=Pp,$.inspect=Up,typeof Symbol!="undefined"&&Symbol.for!=null&&($[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),$.toJSON=Qp,$.toString=Yp,$.unix=qp,$.valueOf=Kp,$.creationData=nh,$.eraName=ah,$.eraNarrow=lh,$.eraAbbr=ch,$.eraYear=fh,$.year=Zl,$.isLeapYear=Pu,$.weekYear=vh,$.isoWeekYear=gh,$.quarter=$.quarters=Th,$.month=tc,$.daysInMonth=Zu,$.week=$.weeks=id,$.isoWeek=$.isoWeeks=sd,$.weeksInYear=xh,$.weeksInWeekYear=kh,$.isoWeeksInYear=yh,$.isoWeeksInISOWeekYear=wh,$.date=$c,$.day=$.days=gd,$.weekday=yd,$.isoWeekday=wd,$.dayOfYear=Sh,$.hour=$.hours=$d,$.minute=$.minutes=Eh,$.second=$.seconds=$h,$.millisecond=$.milliseconds=Dc,$.utcOffset=cp,$.utc=up,$.local=dp,$.parseZone=pp,$.hasAlignedHourOffset=hp,$.isDST=mp,$.isLocal=vp,$.isUtcOffset=gp,$.isUtc=mc,$.isUTC=mc,$.zoneAbbr=Mh,$.zoneName=Nh,$.dates=de("dates accessor is deprecated. Use date instead.",$c),$.months=de("months accessor is deprecated. Use month instead",tc),$.years=de("years accessor is deprecated. Use year instead",Zl),$.zone=de("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",fp),$.isDSTShifted=de("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",_p);function Ah(e){return we(e*1e3)}function Oh(){return we.apply(null,arguments).parseZone()}function Mc(e){return e}var oe=Qt.prototype;oe.calendar=le,oe.longDateFormat=xr,oe.invalidDate=kr,oe.ordinal=ge,oe.preparse=Mc,oe.postformat=Mc,oe.relativeTime=Cs,oe.pastFuture=ua,oe.set=gr,oe.eras=ih,oe.erasParse=sh,oe.erasConvertYear=oh,oe.erasAbbrRegex=dh,oe.erasNameRegex=uh,oe.erasNarrowRegex=ph,oe.months=zu,oe.monthsShort=ju,oe.monthsParse=qu,oe.monthsRegex=Ju,oe.monthsShortRegex=Xu,oe.week=ed,oe.firstDayOfYear=nd,oe.firstDayOfWeek=rd,oe.weekdays=pd,oe.weekdaysMin=md,oe.weekdaysShort=hd,oe.weekdaysParse=vd,oe.weekdaysRegex=xd,oe.weekdaysShortRegex=kd,oe.weekdaysMinRegex=bd,oe.isPM=Sd,oe.meridiem=Dd;function Xs(e,i,a,c){var u=qr(),m=_().set(c,i);return u[a](m,e)}function Nc(e,i,a){if(p(e)&&(i=e,e=void 0),e=e||"",i!=null)return Xs(e,i,a,"month");var c,u=[];for(c=0;c<12;c++)u[c]=Xs(e,c,a,"month");return u}function Na(e,i,a,c){typeof e=="boolean"?(p(i)&&(a=i,i=void 0),i=i||""):(i=e,a=i,e=!1,p(i)&&(a=i,i=void 0),i=i||"");var u=qr(),m=e?u._week.dow:0,k,A=[];if(a!=null)return Xs(i,(a+m)%7,c,"day");for(k=0;k<7;k++)A[k]=Xs(i,(k+m)%7,c,"day");return A}function Ch(e,i){return Nc(e,i,"months")}function Rh(e,i){return Nc(e,i,"monthsShort")}function Fh(e,i,a){return Na(e,i,a,"weekdays")}function Ih(e,i,a){return Na(e,i,a,"weekdaysShort")}function Lh(e,i,a){return Na(e,i,a,"weekdaysMin")}hn("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var i=e%10,a=te(e%100/10)===1?"th":i===1?"st":i===2?"nd":i===3?"rd":"th";return e+a}}),t.lang=de("moment.lang is deprecated. Use moment.locale instead.",hn),t.langData=de("moment.langData is deprecated. Use moment.localeData instead.",qr);var Zr=Math.abs;function Yh(){var e=this._data;return this._milliseconds=Zr(this._milliseconds),this._days=Zr(this._days),this._months=Zr(this._months),e.milliseconds=Zr(e.milliseconds),e.seconds=Zr(e.seconds),e.minutes=Zr(e.minutes),e.hours=Zr(e.hours),e.months=Zr(e.months),e.years=Zr(e.years),this}function Ac(e,i,a,c){var u=rr(i,a);return e._milliseconds+=c*u._milliseconds,e._days+=c*u._days,e._months+=c*u._months,e._bubble()}function Ph(e,i){return Ac(this,e,i,1)}function Uh(e,i){return Ac(this,e,i,-1)}function Oc(e){return e<0?Math.floor(e):Math.ceil(e)}function Vh(){var e=this._milliseconds,i=this._days,a=this._months,c=this._data,u,m,k,A,H;return e>=0&&i>=0&&a>=0||e<=0&&i<=0&&a<=0||(e+=Oc(Aa(a)+i)*864e5,i=0,a=0),c.milliseconds=e%1e3,u=jt(e/1e3),c.seconds=u%60,m=jt(u/60),c.minutes=m%60,k=jt(m/60),c.hours=k%24,i+=jt(k/24),H=jt(Cc(i)),a+=H,i-=Oc(Aa(H)),A=jt(a/12),a%=12,c.days=i,c.months=a,c.years=A,this}function Cc(e){return e*4800/146097}function Aa(e){return e*146097/4800}function Wh(e){if(!this.isValid())return NaN;var i,a,c=this._milliseconds;if(e=pt(e),e==="month"||e==="quarter"||e==="year")switch(i=this._days+c/864e5,a=this._months+Cc(i),e){case"month":return a;case"quarter":return a/3;case"year":return a/12}else switch(i=this._days+Math.round(Aa(this._months)),e){case"week":return i/7+c/6048e5;case"day":return i+c/864e5;case"hour":return i*24+c/36e5;case"minute":return i*1440+c/6e4;case"second":return i*86400+c/1e3;case"millisecond":return Math.floor(i*864e5)+c;default:throw new Error("Unknown unit "+e)}}function Xr(e){return function(){return this.as(e)}}var Rc=Xr("ms"),Hh=Xr("s"),Bh=Xr("m"),Gh=Xr("h"),zh=Xr("d"),jh=Xr("w"),Kh=Xr("M"),qh=Xr("Q"),Zh=Xr("y"),Xh=Rc;function Jh(){return rr(this)}function Qh(e){return e=pt(e),this.isValid()?this[e+"s"]():NaN}function On(e){return function(){return this.isValid()?this._data[e]:NaN}}var em=On("milliseconds"),tm=On("seconds"),rm=On("minutes"),nm=On("hours"),im=On("days"),sm=On("months"),om=On("years");function am(){return jt(this.days()/7)}var Jr=Math.round,si={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function lm(e,i,a,c,u){return u.relativeTime(i||1,!!a,e,c)}function cm(e,i,a,c){var u=rr(e).abs(),m=Jr(u.as("s")),k=Jr(u.as("m")),A=Jr(u.as("h")),H=Jr(u.as("d")),ne=Jr(u.as("M")),ht=Jr(u.as("w")),Qr=Jr(u.as("y")),_n=m<=a.ss&&["s",m]||m<a.s&&["ss",m]||k<=1&&["m"]||k<a.m&&["mm",k]||A<=1&&["h"]||A<a.h&&["hh",A]||H<=1&&["d"]||H<a.d&&["dd",H];return a.w!=null&&(_n=_n||ht<=1&&["w"]||ht<a.w&&["ww",ht]),_n=_n||ne<=1&&["M"]||ne<a.M&&["MM",ne]||Qr<=1&&["y"]||["yy",Qr],_n[2]=i,_n[3]=+e>0,_n[4]=c,lm.apply(null,_n)}function fm(e){return e===void 0?Jr:typeof e=="function"?(Jr=e,!0):!1}function um(e,i){return si[e]===void 0?!1:i===void 0?si[e]:(si[e]=i,e==="s"&&(si.ss=i-1),!0)}function dm(e,i){if(!this.isValid())return this.localeData().invalidDate();var a=!1,c=si,u,m;return typeof e=="object"&&(i=e,e=!1),typeof e=="boolean"&&(a=e),typeof i=="object"&&(c=Object.assign({},si,i),i.s!=null&&i.ss==null&&(c.ss=i.s-1)),u=this.localeData(),m=cm(this,!a,c,u),a&&(m=u.pastFuture(+this,m)),u.postformat(m)}var Oa=Math.abs;function oi(e){return(e>0)-(e<0)||+e}function Js(){if(!this.isValid())return this.localeData().invalidDate();var e=Oa(this._milliseconds)/1e3,i=Oa(this._days),a=Oa(this._months),c,u,m,k,A=this.asSeconds(),H,ne,ht,Qr;return A?(c=jt(e/60),u=jt(c/60),e%=60,c%=60,m=jt(a/12),a%=12,k=e?e.toFixed(3).replace(/\.?0+$/,""):"",H=A<0?"-":"",ne=oi(this._months)!==oi(A)?"-":"",ht=oi(this._days)!==oi(A)?"-":"",Qr=oi(this._milliseconds)!==oi(A)?"-":"",H+"P"+(m?ne+m+"Y":"")+(a?ne+a+"M":"")+(i?ht+i+"D":"")+(u||c||e?"T":"")+(u?Qr+u+"H":"")+(c?Qr+c+"M":"")+(e?Qr+k+"S":"")):"P0D"}var ie=Gs.prototype;ie.isValid=sp,ie.abs=Yh,ie.add=Ph,ie.subtract=Uh,ie.as=Wh,ie.asMilliseconds=Rc,ie.asSeconds=Hh,ie.asMinutes=Bh,ie.asHours=Gh,ie.asDays=zh,ie.asWeeks=jh,ie.asMonths=Kh,ie.asQuarters=qh,ie.asYears=Zh,ie.valueOf=Xh,ie._bubble=Vh,ie.clone=Jh,ie.get=Qh,ie.milliseconds=em,ie.seconds=tm,ie.minutes=rm,ie.hours=nm,ie.days=im,ie.weeks=am,ie.months=sm,ie.years=om,ie.humanize=dm,ie.toISOString=Js,ie.toString=Js,ie.toJSON=Js,ie.locale=wc,ie.localeData=kc,ie.toIsoString=de("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Js),ie.lang=xc,R("X",0,0,"unix"),R("x",0,0,"valueOf"),O("x",Ys),O("X",Cu),he("X",function(e,i,a){a._d=new Date(parseFloat(e)*1e3)}),he("x",function(e,i,a){a._d=new Date(te(e))});return t.version="2.30.1",n(we),t.fn=$,t.min=tp,t.max=rp,t.now=np,t.utc=_,t.unix=Ah,t.months=Ch,t.isDate=h,t.locale=hn,t.invalid=M,t.duration=rr,t.isMoment=Q,t.weekdays=Fh,t.parseZone=Oh,t.localeData=qr,t.isDuration=zs,t.monthsShort=Rh,t.weekdaysMin=Lh,t.defineLocale=ya,t.updateLocale=Od,t.locales=Cd,t.weekdaysShort=Ih,t.normalizeUnits=pt,t.relativeTimeRounding=fm,t.relativeTimeThreshold=um,t.calendarFormat=Dp,t.prototype=$,t.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},t}))});function vu(r,t){var f;let n=0,s=[],o=new Set([r.id]),l=[];if(r.children)for(let d of r.children)l.push(d);for(;l.length>0;){let d=l.shift();if(t!=null&&t.has(d.id)&&(d=t.get(d.id)),o.has(d.id)){s.push(`Skipped ${d.title}: already visited`);continue}if(d.status==="done"){s.push(`Pruned ${d.title}: status is done`),o.add(d.id);continue}o.add(d.id);let p=(f=d.originalDuration)!=null?f:d.duration;if(n+=p,s.push(`+${p}m from ${d.title}`),d.children)for(let h of d.children)l.push(h)}return{total:n,trace:s}}function Wo(r){return vu(r).total}function L_(r,t){var f;let n=(f=r.originalDuration)!=null?f:r.duration,s=vu(r,t),o=n+s.total,l=[`Base: ${n}m`,...s.trace];return r.status==="done"&&l.push(`Note: Status is DONE - This ${o}m is for display only and consumes 0m in schedule.`),{total:o,trace:l}}function gt(r,t){var p;let n=r.filter(h=>h.isAnchored&&h.startTime);n.sort((h,v)=>h.startTime.valueOf()-v.startTime.valueOf());let s=(0,Gt.default)(t).subtract(10,"years");for(let h of n){let v=(0,Gt.default)(h.startTime);v.isBefore(s)&&(v=(0,Gt.default)(s),h.startTime=v);let g=(p=h.originalDuration)!=null?p:h.duration;s=(0,Gt.default)(v).add(g,"minutes")}let o=n.map(h=>{var v;return{start:(0,Gt.default)(h.startTime),end:(0,Gt.default)(h.startTime).add((v=h.originalDuration)!=null?v:h.duration,"minutes")}}),l=(0,Gt.default)(t),f=new Map;for(let h of r)f.set(h.id,h);let d=r.map(h=>{var y;let v=(y=h.originalDuration)!=null?y:h.duration,{total:g,trace:_}=L_(h,f);return{...h,originalDuration:v,duration:g,trace:_,startTime:h.startTime?(0,Gt.default)(h.startTime):void 0}});for(let h=0;h<d.length;h++){let v=d[h];if(v.isAnchored){v.startTime&&(0,Gt.default)(v.startTime).add(v.duration,"minutes").isAfter(l);continue}let g=!1;for(;!g;){let _=(0,Gt.default)(l),y=v.status==="done"?0:v.duration,x=(0,Gt.default)(l).add(y,"minutes"),D=o.find(S=>_.isBefore(S.end)&&x.isAfter(S.start));D?l=(0,Gt.default)(D.end):(v.startTime=_,l=x,g=!0)}}return d.sort((h,v)=>{let g=h.startTime?h.startTime.valueOf():Number.MAX_SAFE_INTEGER,_=v.startTime?v.startTime.valueOf():Number.MAX_SAFE_INTEGER;return g-_})}var Gt,qe=vn(()=>{"use strict";Gt=en(Hr(),1)});var Z1,xu,jo,qn=vn(()=>{"use strict";Z1=require("obsidian"),xu=en(Hr(),1),jo=class{constructor(t,n){b(this,"LOG_FILE","todo-flow.log");b(this,"enabled");b(this,"app");b(this,"buildId");this.app=t,this.enabled=n,this.buildId=typeof process!="undefined"?"2026-01-26T23-33-27":"unknown"}setEnabled(t){this.enabled=t}async log(t,n){if(!this.enabled)return;let o=`[${(0,xu.default)().format("YYYY-MM-DD HH:mm:ss")}] [${this.buildId}] [${t}] ${n}
`;try{await this.app.vault.adapter.append(this.LOG_FILE,o)}catch(l){console.error("Failed to write to log file",l)}}async info(t){await this.log("INFO",t)}async warn(t){await this.log("WARN",t)}async error(t){await this.log("ERROR",t)}}});function na(r,t,n){if(r&&r.task)return r.task;if(t&&t.trim().length>0&&!t.trim().startsWith("---"))return t.trim().replace(/^#+\s+/,"");let s=n.replace(/\.md$/,""),o=s.match(/^\d{12}_[a-z0-9]{3}_(.*)$/);return o&&o[1]?o[1]:s}function ia(r){let t=r.split(`
`),n=!1;for(let s of t){let o=s.trim();if(o==="---")if(n){n=!1;continue}else{n=!0;continue}if(!n&&o.length>0)return o}return null}var Wl=vn(()=>{"use strict"});var hO,sa,Du=vn(()=>{"use strict";hO=require("obsidian");qe();Wl();sa=class{constructor(t){b(this,"app");this.app=t}async parse(t){let n=await this.app.vault.adapter.read(t),s=this.extractWikilinks(n);return await Promise.all(s.map(async l=>{var h,v,g;let f=this.app.metadataCache.getFirstLinkpathDest(l.path,t),d=f?f.path:l.path.endsWith(".md")?l.path:`${l.path}.md`,p=await this.resolveTaskMetadata(d);return{id:d,title:l.displayText||p.title,duration:(h=p.duration)!=null?h:30,status:(v=p.status)!=null?v:"todo",isAnchored:(g=p.isAnchored)!=null?g:!1,children:[]}}))}async resolveTaskMetadata(t){try{let n=this.getFilenameWithoutExtension(t);if(!await this.app.vault.adapter.exists(t))return{title:n};let o=await this.app.vault.adapter.read(t),l=/^---\s*\n([\s\S]*?)\n---/,f=o.match(l),d={};f&&f[1]&&(d=this.parseFrontmatter(f[1]));let p=ia(o);return{title:na(d,p,t.split("/").pop()||t),duration:d.duration,status:d.status,isAnchored:d.anchored}}catch(n){return{title:this.getFilenameWithoutExtension(t)}}}extractWikilinks(t){var l,f;let n=[],s=/\[\[([^\]|]+)(?:\|([^\]]+))?\]\]/g,o;for(;(o=s.exec(t))!==null;){let d=(l=o[1])==null?void 0:l.trim(),p=(f=o[2])==null?void 0:f.trim();d&&n.push({path:d,...p&&{displayText:p}})}return n}extractMarkdownLinks(t){return[]}extractFirstHeading(t){let n=/^#\s+(.+)$/m,s=t.match(n);return s&&s[1]?s[1].trim():null}getFilenameWithoutExtension(t){return(t.split("/").pop()||t).replace(/\.md$/,"")}async updateTaskMetadata(t,n){try{let s=await this.app.vault.adapter.exists(t),o="";s&&(o=await this.app.vault.adapter.read(t));let l=this.updateFrontmatter(o,n);await this.app.vault.adapter.write(t,l)}catch(s){throw console.error(`Failed to update metadata for ${t}:`,s),s}}updateFrontmatter(t,n){let s=/^---\s*\n([\s\S]*?)\n---\n?/,o=t.match(s),l={},f=t;if(o&&o[1]){let h=o[1];l=this.parseFrontmatter(h),f=t.substring(o[0].length)}let d={...l,...this.convertMetadataToFrontmatter(n)};return`---
${this.serializeFrontmatter(d)}---
${f}`}parseFrontmatter(t){let n={},s=t.split(`
`);for(let o of s){let l=o.match(/^(\w+):\s*(.+)$/);if(l&&l[1]&&l[2]){let f=l[1],d=l[2];if(d.startsWith("[")||d.startsWith("{"))try{d=JSON.parse(d)}catch(p){}else d==="true"?d=!0:d==="false"?d=!1:isNaN(Number(d))||(d=Number(d));n[f]=d}}return n}serializeFrontmatter(t){let n=[];for(let[s,o]of Object.entries(t)){if(o===void 0)continue;let l;typeof o=="object"?l=JSON.stringify(o):l=String(o),n.push(`${s}: ${l}`)}return n.join(`
`)+`
`}convertMetadataToFrontmatter(t){let n={};return t.duration!==void 0&&(n.duration=t.duration),t.status!==void 0&&(n.status=t.status),t.isAnchored!==void 0&&(n.anchored=t.isAnchored),t.startTime!==void 0&&(n.startTime=t.startTime),n}}});var oa={};Xi(oa,{GraphBuilder:()=>Zn});var yO,Mu,Zn,Ii=vn(()=>{"use strict";yO=require("obsidian");qe();Wl();Mu=en(Hr(),1),Zn=class{constructor(t){this.app=t}async buildGraph(t){return Promise.all(t.map(n=>this.buildNode(n,[])))}async buildNode(t,n){let s=this.app.metadataCache.getFileCache(t),o=(s==null?void 0:s.frontmatter)||{},l=o.status||"todo",f=await this.app.vault.read(t),d=ia(f),p={id:t.path,title:na(o,d,t.name),duration:o.duration||30,isAnchored:o.anchored||!1,status:l,children:[],startTime:o.startTime?(0,Mu.default)(o.startTime):void 0};if(l==="done")return p;let h=this.app.metadataCache.resolvedLinks[t.path]||{},v=[],g=[...n,t.path];for(let _ of Object.keys(h)){if(g.includes(_))continue;let y=this.app.vault.getAbstractFileByPath(_);y&&y.extension==="md"&&v.push(y)}return p.children=await Promise.all(v.map(_=>this.buildNode(_,g))),p}}});var Bl={};Xi(Bl,{TaskQueryService:()=>Hl});var Hl,Gl=vn(()=>{"use strict";Ii();qe();qn();Hl=class{constructor(t,n){this.app=t;this.logger=n}async getDumpedTasks(){return this.queryTasksByFlowState("dump")}async getShortlistedTasks(){return this.queryTasksByFlowState("shortlist")}async queryTasksByFlowState(t){let n=this.app.vault.getFiles();this.logger&&await this.logger.info(`[TaskQueryService] Searching for flow_state="${t}" in ${n.length} files...`);let s=n.filter(l=>{var p;let f=this.app.metadataCache.getCache(l.path),d=(p=f==null?void 0:f.frontmatter)==null?void 0:p.flow_state;return d===t?(this.logger&&this.logger.info(`[TaskQueryService] MATCH: ${l.path} has flow_state="${d}"`),!0):!1});return this.logger&&await this.logger.info(`[TaskQueryService] Found ${s.length} matches for "${t}".`),new Zn(this.app).buildGraph(s)}}});var Nu={};Xi(Nu,{StackLoader:()=>$s});var Xn,$s,aa=vn(()=>{"use strict";Xn=require("obsidian");qe();Du();qn();$s=class{constructor(t,n){b(this,"app");b(this,"parser");b(this,"logger");this.app=t,this.logger=n,this.parser=new sa(t)}async load(t){if(t==="QUERY:SHORTLIST")return this.loadShortlisted();let n=this.app.vault.getAbstractFileByPath(t);if(!n)return[];if(n instanceof Xn.TFolder){let{GraphBuilder:s}=await Promise.resolve().then(()=>(Ii(),oa)),o=new s(this.app),l=n.children.filter(f=>f instanceof Xn.TFile&&f.extension==="md");return await o.buildGraph(l)}else if(n instanceof Xn.TFile){let o=(await this.parser.parse(t)).map(d=>this.app.vault.getAbstractFileByPath(d.id)).filter(d=>d instanceof Xn.TFile),{GraphBuilder:l}=await Promise.resolve().then(()=>(Ii(),oa));return await new l(this.app).buildGraph(o)}return[]}async loadShortlisted(){let{TaskQueryService:t}=await Promise.resolve().then(()=>(Gl(),Bl));this.logger&&await this.logger.info("[StackLoader] loadShortlisted() called.");let s=await new t(this.app,this.logger).getShortlistedTasks();return this.logger&&await this.logger.info(`[StackLoader] loadShortlisted() returning ${s.length} tasks.`),s}async loadSpecificFiles(t){this.logger&&await this.logger.info(`[StackLoader] loadSpecificFiles() entry with ${t.length} IDs.`);let n=[];for(let l of t){let f=this.app.vault.getAbstractFileByPath(l);f instanceof Xn.TFile&&f.extension==="md"?(n.push(f),this.logger&&await this.logger.info(`[StackLoader] RESOLVED: ${l}`)):this.logger&&await this.logger.info(`[StackLoader] FAILED: ${l} (Not found or not markdown)`)}this.logger&&await this.logger.info(`[StackLoader] Total Resolved: ${n.length} valid files.`);let{GraphBuilder:s}=await Promise.resolve().then(()=>(Ii(),oa));return await new s(this.app).buildGraph(n)}}});var As={};Xi(As,{FileSuggester:()=>Kl,FolderSuggester:()=>jl});var Ns,jl,Kl,Os=vn(()=>{"use strict";Ns=require("obsidian"),jl=class extends Ns.FuzzySuggestModal{constructor(n,s){super(n);this.onChoose=s}getItems(){return this.app.vault.getAllLoadedFiles().filter(n=>n instanceof Ns.TFolder)}getItemText(n){return n.path}onChooseItem(n,s){this.onChoose(n)}},Kl=class extends Ns.FuzzySuggestModal{constructor(n,s){super(n);this.onChoose=s}getItems(){return this.app.vault.getMarkdownFiles()}getItemText(n){return n.path}onChooseItem(n,s){this.onChoose(n)}}});var _v={};Xi(_v,{default:()=>fa});module.exports=wm(_v);var dt=require("obsidian");var wu=require("obsidian");var Qs=!0;var Yc,Pc,Lc=(Pc=(Yc=globalThis.process)==null?void 0:Yc.env)==null?void 0:Pc.NODE_ENV,E=Lc&&!Lc.toLowerCase().startsWith("prod");var Tr=Array.isArray,Uc=Array.prototype.indexOf,ai=Array.from,Ra=Object.keys,Je=Object.defineProperty,kt=Object.getOwnPropertyDescriptor,eo=Object.getOwnPropertyDescriptors,Fa=Object.prototype,Vc=Array.prototype,Cn=Object.getPrototypeOf,Ia=Object.isExtensible;function La(r){return typeof r=="function"}var bt=()=>{};function Wc(r){return r()}function li(r){for(var t=0;t<r.length;t++)r[t]()}function to(){var r,t,n=new Promise((s,o)=>{r=s,t=o});return{promise:n,resolve:r,reject:t}}var He=Symbol("$state"),Ji=Symbol("legacy props"),Hc=Symbol(""),ro=Symbol("proxy path"),Sr=new class extends Error{constructor(){super(...arguments);b(this,"name","StaleReactionError");b(this,"message","The reaction that called `getAbortSignal()` was re-run or destroyed")}};var Qi=3,Tt=8;function no(r){if(E){let t=new Error(`lifecycle_outside_component
\`${r}(...)\` can only be used during component initialisation
https://svelte.dev/e/lifecycle_outside_component`);throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function Bc(){if(E){let r=new Error("async_derived_orphan\nCannot create a `$derived(...)` with an `await` expression outside of an effect tree\nhttps://svelte.dev/e/async_derived_orphan");throw r.name="Svelte error",r}else throw new Error("https://svelte.dev/e/async_derived_orphan")}function Ya(){if(E){let r=new Error("bind_invalid_checkbox_value\nUsing `bind:value` together with a checkbox input is not allowed. Use `bind:checked` instead\nhttps://svelte.dev/e/bind_invalid_checkbox_value");throw r.name="Svelte error",r}else throw new Error("https://svelte.dev/e/bind_invalid_checkbox_value")}function Gc(){if(E){let r=new Error(`derived_references_self
A derived value cannot reference itself recursively
https://svelte.dev/e/derived_references_self`);throw r.name="Svelte error",r}else throw new Error("https://svelte.dev/e/derived_references_self")}function zc(r){if(E){let t=new Error(`effect_in_teardown
\`${r}\` cannot be used inside an effect cleanup function
https://svelte.dev/e/effect_in_teardown`);throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/effect_in_teardown")}function jc(){if(E){let r=new Error("effect_in_unowned_derived\nEffect cannot be created inside a `$derived` value that was not itself created inside an effect\nhttps://svelte.dev/e/effect_in_unowned_derived");throw r.name="Svelte error",r}else throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Kc(r){if(E){let t=new Error(`effect_orphan
\`${r}\` can only be used inside an effect (e.g. during component initialisation)
https://svelte.dev/e/effect_orphan`);throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/effect_orphan")}function qc(){if(E){let r=new Error(`effect_update_depth_exceeded
Maximum update depth exceeded. This typically indicates that an effect reads and writes the same piece of state
https://svelte.dev/e/effect_update_depth_exceeded`);throw r.name="Svelte error",r}else throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Zc(){if(E){let r=new Error(`hydration_failed
Failed to hydrate the application
https://svelte.dev/e/hydration_failed`);throw r.name="Svelte error",r}else throw new Error("https://svelte.dev/e/hydration_failed")}function Xc(r){if(E){let t=new Error(`props_invalid_value
Cannot do \`bind:${r}={undefined}\` when \`${r}\` has a fallback value
https://svelte.dev/e/props_invalid_value`);throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/props_invalid_value")}function Jc(r){if(E){let t=new Error(`rune_outside_svelte
The \`${r}\` rune is only available inside \`.svelte\` and \`.svelte.js/ts\` files
https://svelte.dev/e/rune_outside_svelte`);throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/rune_outside_svelte")}function Qc(){if(E){let r=new Error("state_descriptors_fixed\nProperty descriptors defined on `$state` objects must contain `value` and always be `enumerable`, `configurable` and `writable`.\nhttps://svelte.dev/e/state_descriptors_fixed");throw r.name="Svelte error",r}else throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function ef(){if(E){let r=new Error("state_prototype_fixed\nCannot set prototype of `$state` object\nhttps://svelte.dev/e/state_prototype_fixed");throw r.name="Svelte error",r}else throw new Error("https://svelte.dev/e/state_prototype_fixed")}function tf(){if(E){let r=new Error("state_unsafe_mutation\nUpdating state inside `$derived(...)`, `$inspect(...)` or a template expression is forbidden. If the value should not be reactive, declare it without `$state`\nhttps://svelte.dev/e/state_unsafe_mutation");throw r.name="Svelte error",r}else throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function rf(){if(E){let r=new Error("svelte_boundary_reset_onerror\nA `<svelte:boundary>` `reset` function cannot be called while an error is still being handled\nhttps://svelte.dev/e/svelte_boundary_reset_onerror");throw r.name="Svelte error",r}else throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}var tn={};var xe=Symbol(),Kt=Symbol("filename");var nf="http://www.w3.org/1999/xhtml";var gn="font-weight: bold",yn="font-weight: normal";function sf(r,t){E?console.warn(`%c[svelte] await_waterfall
%cAn async derived, \`${r}\` (${t}) was not read immediately after it resolved. This often indicates an unnecessary waterfall, which can slow down your app
https://svelte.dev/e/await_waterfall`,gn,yn):console.warn("https://svelte.dev/e/await_waterfall")}function of(r,t,n){E?console.warn(`%c[svelte] hydration_attribute_changed
%cThe \`${r}\` attribute on \`${t}\` changed its value between server and client renders. The client value, \`${n}\`, will be ignored in favour of the server value
https://svelte.dev/e/hydration_attribute_changed`,gn,yn):console.warn("https://svelte.dev/e/hydration_attribute_changed")}function Rn(r){E?console.warn(`%c[svelte] hydration_mismatch
%c${r?`Hydration failed because the initial UI does not match what was rendered on the server. The error occurred near ${r}`:"Hydration failed because the initial UI does not match what was rendered on the server"}
https://svelte.dev/e/hydration_mismatch`,gn,yn):console.warn("https://svelte.dev/e/hydration_mismatch")}function af(){E?console.warn(`%c[svelte] lifecycle_double_unmount
%cTried to unmount a component that was not mounted
https://svelte.dev/e/lifecycle_double_unmount`,gn,yn):console.warn("https://svelte.dev/e/lifecycle_double_unmount")}function io(r){E?console.warn(`%c[svelte] state_proxy_equality_mismatch
%cReactive \`$state(...)\` proxies and the values they proxy have different identities. Because of this, comparisons with \`${r}\` will produce unexpected results
https://svelte.dev/e/state_proxy_equality_mismatch`,gn,yn):console.warn("https://svelte.dev/e/state_proxy_equality_mismatch")}function lf(){E?console.warn(`%c[svelte] state_proxy_unmount
%cTried to unmount a state proxy, rather than a component
https://svelte.dev/e/state_proxy_unmount`,gn,yn):console.warn("https://svelte.dev/e/state_proxy_unmount")}function cf(){E?console.warn("%c[svelte] svelte_boundary_reset_noop\n%cA `<svelte:boundary>` `reset` function only resets the boundary the first time it is called\nhttps://svelte.dev/e/svelte_boundary_reset_noop",gn,yn):console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function ff(r){E?console.warn(`%c[svelte] transition_slide_display
%cThe \`slide\` transition does not work correctly for elements with \`display: ${r}\`
https://svelte.dev/e/transition_slide_display`,gn,yn):console.warn("https://svelte.dev/e/transition_slide_display")}var I=!1;function Be(r){I=r}var j;function _e(r){if(r===null)throw Rn(),tn;return j=r}function tt(){return _e(rt(j))}function C(r){if(I){if(rt(j)!==null)throw Rn(),tn;j=r}}function Ie(r=1){if(I){for(var t=r,n=j;t--;)n=rt(n);j=n}}function nn(r=!0){for(var t=0,n=j;;){if(n.nodeType===Tt){var s=n.data;if(s==="]"){if(t===0)return n;t-=1}else(s==="["||s==="[!")&&(t+=1)}var o=rt(n);r&&n.remove(),n=o}}function oo(r){if(!r||r.nodeType!==Tt)throw Rn(),tn;return r.data}function ao(r){return r===this.v}function lo(r,t){return r!=r?t==t:r!==t||r!==null&&typeof r=="object"||typeof r=="function"}function co(r){return!lo(r,this.v)}var lt=!1,Er=!1,nr=!1;function uf(){Er=!0}var es=null;function St(r,t){return r.label=t,fo(r.v,t),r}function fo(r,t){var n;return(n=r==null?void 0:r[ro])==null||n.call(r,t),r}function $r(r){let t=new Error,n=km();return n.length===0?null:(n.unshift(`
`),Je(t,"stack",{value:n.join(`
`)}),Je(t,"name",{value:r}),t)}function km(){let r=Error.stackTraceLimit;Error.stackTraceLimit=1/0;let t=new Error().stack;if(Error.stackTraceLimit=r,!t)return[];let n=t.split(`
`),s=[];for(let o=0;o<n.length;o++){let l=n[o],f=l.replaceAll("\\","/");if(l.trim()!=="Error"){if(l.includes("validate_each_keys"))return[];f.includes("svelte/src/internal")||f.includes("node_modules/.vite")||s.push(l)}}return s}var X=null;function sn(r){X=r}var Dr=null;function fi(r){Dr=r}var ir=null;function uo(r){ir=r}function sr(r,t=!1,n){X={p:X,i:!1,c:null,e:null,s:r,x:null,l:Er&&!t?{s:null,u:null,$:[]}:null},E&&(X.function=n,ir=n)}function or(r){var o;var t=X,n=t.e;if(n!==null){t.e=null;for(var s of n)Ua(s)}return r!==void 0&&(t.x=r),t.i=!0,X=t.p,E&&(ir=(o=X==null?void 0:X.function)!=null?o:null),r!=null?r:{}}function Mr(){return!Er||X!==null&&X.l===null}var Fn=[];function pf(){var r=Fn;Fn=[],li(r)}function $e(r){if(Fn.length===0&&!In){var t=Fn;queueMicrotask(()=>{t===Fn&&pf()})}Fn.push(r)}function hf(){for(;Fn.length>0;)pf()}var Va=new WeakMap;function po(r){var t=P;if(t===null)return V.f|=8388608,r;if(E&&r instanceof Error&&!Va.has(r)&&Va.set(r,bm(r,t)),(t.f&32768)===0){if((t.f&128)===0)throw E&&!t.parent&&r instanceof Error&&mf(r),r;t.b.error(r)}else Ar(r,t)}function Ar(r,t){for(;t!==null;){if((t.f&128)!==0)try{t.b.error(r);return}catch(n){r=n}t=t.parent}throw E&&r instanceof Error&&mf(r),r}function bm(r,t){var f,d,p;let n=kt(r,"message");if(!(n&&!n.configurable)){for(var s=ts?"  ":"	",o=`
${s}in ${((f=t.fn)==null?void 0:f.name)||"<unknown>"}`,l=t.ctx;l!==null;)o+=`
${s}in ${(d=l.function)==null?void 0:d[Kt].split("/").pop()}`,l=l.p;return{message:r.message+`
${o}
`,stack:(p=r.stack)==null?void 0:p.split(`
`).filter(h=>!h.includes("svelte/src/internal")).join(`
`)}}}function mf(r){let t=Va.get(r);t&&(Je(r,"message",{value:t.message}),Je(r,"stack",{value:t.stack}))}var Tm=-7169;function ye(r,t){r.f=r.f&Tm|t}function di(r){(r.f&512)!==0||r.deps===null?ye(r,1024):ye(r,4096)}function _f(r){if(r!==null)for(let t of r)(t.f&2)===0||(t.f&32768)===0||(t.f^=32768,_f(t.deps))}function ho(r,t,n){(r.f&2048)!==0?t.add(r):(r.f&4096)!==0&&n.add(r),_f(r.deps),ye(r,1024)}var pi=new Set,K=null,is=null,We=null,Yt=[],_o=null,Wa=!1,In=!1,hi,mi,Ln,_i,ss,vi,gi,yi,Or,Ha,Ba,gf,za=class za{constructor(){z(this,Or);b(this,"committed",!1);b(this,"current",new Map);b(this,"previous",new Map);z(this,hi,new Set);z(this,mi,new Set);z(this,Ln,0);z(this,_i,0);z(this,ss,null);z(this,vi,new Set);z(this,gi,new Set);b(this,"skipped_effects",new Set);b(this,"is_fork",!1);z(this,yi,!1)}is_deferred(){return this.is_fork||w(this,_i)>0}process(t){var o;Yt=[],this.apply();var n=[],s=[];for(let l of t)Fe(this,Or,Ha).call(this,l,n,s);if(this.is_deferred())Fe(this,Or,Ba).call(this,s),Fe(this,Or,Ba).call(this,n);else{for(let l of w(this,hi))l();w(this,hi).clear(),w(this,Ln)===0&&Fe(this,Or,gf).call(this),is=this,K=null,vf(s),vf(n),is=null,(o=w(this,ss))==null||o.resolve()}We=null}capture(t,n){n!==xe&&!this.previous.has(t)&&this.previous.set(t,n),(t.f&8388608)===0&&(this.current.set(t,t.v),We==null||We.set(t,t.v))}activate(){K=this,this.apply()}deactivate(){K===this&&(K=null,We=null)}flush(){if(this.activate(),Yt.length>0){if(Ga(),K!==null&&K!==this)return}else w(this,Ln)===0&&this.process([]);this.deactivate()}discard(){for(let t of w(this,mi))t(this);w(this,mi).clear()}increment(t){B(this,Ln,w(this,Ln)+1),t&&B(this,_i,w(this,_i)+1)}decrement(t){B(this,Ln,w(this,Ln)-1),t&&B(this,_i,w(this,_i)-1),!w(this,yi)&&(B(this,yi,!0),$e(()=>{B(this,yi,!1),this.is_deferred()?Yt.length>0&&this.flush():this.revive()}))}revive(){for(let t of w(this,vi))w(this,gi).delete(t),ye(t,2048),Pt(t);for(let t of w(this,gi))ye(t,4096),Pt(t);this.flush()}oncommit(t){w(this,hi).add(t)}ondiscard(t){w(this,mi).add(t)}settled(){var t;return((t=w(this,ss))!=null?t:B(this,ss,to())).promise}static ensure(){if(K===null){let t=K=new za;pi.add(K),In||$e(()=>{K===t&&t.flush()})}return K}apply(){if(!(!lt||!this.is_fork&&pi.size===1)){We=new Map(this.current);for(let t of pi)if(t!==this)for(let[n,s]of t.previous)We.has(n)||We.set(n,s)}}};hi=new WeakMap,mi=new WeakMap,Ln=new WeakMap,_i=new WeakMap,ss=new WeakMap,vi=new WeakMap,gi=new WeakMap,yi=new WeakMap,Or=new WeakSet,Ha=function(t,n,s){var _;t.f^=1024;for(var o=t.first,l=null;o!==null;){var f=o.f,d=(f&96)!==0,p=d&&(f&1024)!==0,h=p||(f&8192)!==0||this.skipped_effects.has(o);if(lt&&l===null&&(f&128)!==0&&((_=o.b)!=null&&_.is_pending)&&(l=o),!h&&o.fn!==null){d?o.f^=1024:l!==null&&(f&16777228)!==0?l.b.defer_effect(o):(f&4)!==0?n.push(o):lt&&(f&16777224)!==0?s.push(o):bn(o)&&((f&16)!==0&&w(this,vi).add(o),kn(o));var v=o.first;if(v!==null){o=v;continue}}var g=o.parent;for(o=o.next;o===null&&g!==null;)g===l&&(l=null),o=g.next,g=g.parent}},Ba=function(t){for(var n=0;n<t.length;n+=1)ho(t[n],w(this,vi),w(this,gi))},gf=function(){var o;if(pi.size>1){this.previous.clear();var t=We,n=!0;for(let l of pi){if(l===this){n=!1;continue}let f=[];for(let[p,h]of this.current){if(l.current.has(p))if(n&&h!==l.current.get(p))l.current.set(p,h);else continue;f.push(p)}if(f.length===0)continue;let d=[...l.current.keys()].filter(p=>!this.current.has(p));if(d.length>0){var s=Yt;Yt=[];let p=new Set,h=new Map;for(let v of f)yf(v,d,p,h);if(Yt.length>0){K=l,l.apply();for(let v of Yt)Fe(o=l,Or,Ha).call(o,v,[],[]);l.deactivate()}Yt=s}}K=null,We=t}this.committed=!0,pi.delete(this)};var Dt=za;function Pn(r){var t=In;In=!0;try{var n;for(r&&(K!==null&&Ga(),n=r());;){if(hf(),Yt.length===0&&(K==null||K.flush(),Yt.length===0))return _o=null,n;Ga()}}finally{In=t}}function Ga(){var l;Wa=!0;var r=E?new Set:null;try{for(var t=0;Yt.length>0;){var n=Dt.ensure();if(t++>1e3){if(E){var s=new Map;for(let f of n.current.keys())for(let[d,p]of(l=f.updated)!=null?l:[]){var o=s.get(d);o||(o={error:p.error,count:0},s.set(d,o)),o.count+=p.count}for(let f of s.values())f.error&&console.error(f.error)}Em()}if(n.process(Yt),Cr.clear(),E)for(let f of n.current.keys())r.add(f)}}finally{if(Wa=!1,_o=null,E)for(let f of r)f.updated=null}}function Em(){try{qc()}catch(r){E&&Je(r,"stack",{value:""}),Ar(r,_o)}}var Et=null;function vf(r){var t=r.length;if(t!==0){for(var n=0;n<t;){var s=r[n++];if((s.f&24576)===0&&bn(s)&&(Et=new Set,kn(s),s.deps===null&&s.first===null&&s.nodes===null&&(s.teardown===null&&s.ac===null?ja(s):s.fn=null),(Et==null?void 0:Et.size)>0)){Cr.clear();for(let o of Et){if((o.f&24576)!==0)continue;let l=[o],f=o.parent;for(;f!==null;)Et.has(f)&&(Et.delete(f),l.push(f)),f=f.parent;for(let d=l.length-1;d>=0;d--){let p=l[d];(p.f&24576)===0&&kn(p)}}Et.clear()}}Et=null}}function yf(r,t,n,s){if(!n.has(r)&&(n.add(r),r.reactions!==null))for(let o of r.reactions){let l=o.f;(l&2)!==0?yf(o,t,n,s):(l&4194320)!==0&&(l&2048)===0&&wf(o,t,s)&&(ye(o,2048),Pt(o))}}function wf(r,t,n){let s=n.get(r);if(s!==void 0)return s;if(r.deps!==null)for(let o of r.deps){if(t.includes(o))return!0;if((o.f&2)!==0&&wf(o,t,n))return n.set(o,!0),!0}return n.set(r,!1),!1}function Pt(r){for(var t=_o=r;t.parent!==null;){t=t.parent;var n=t.f;if(Wa&&t===P&&(n&16)!==0&&(n&262144)===0)return;if((n&96)!==0){if((n&1024)===0)return;t.f^=1024}}Yt.push(t)}function kf(r){let t=0,n=ct(0),s;return E&&St(n,"createSubscriber version"),()=>{xn()&&(T(n),Ge(()=>(t===0&&(s=Y(()=>r(()=>Un(n)))),t+=1,()=>{$e(()=>{t-=1,t===0&&(s==null||s(),s=void 0,Un(n))})})))}}var Dm=589952;function Xa(r,t,n){new Ka(r,t,n)}var Ut,os,Rr,Vn,Fr,qt,Nt,Ir,on,Tn,Wn,an,ki,Hn,bi,Ti,Lr,xo,Le,bf,Tf,qa,yo,wo,Za,Ka=class{constructor(t,n,s){z(this,Le);b(this,"parent");b(this,"is_pending",!1);z(this,Ut);z(this,os,I?j:null);z(this,Rr);z(this,Vn);z(this,Fr);z(this,qt,null);z(this,Nt,null);z(this,Ir,null);z(this,on,null);z(this,Tn,null);z(this,Wn,0);z(this,an,0);z(this,ki,!1);z(this,Hn,!1);z(this,bi,new Set);z(this,Ti,new Set);z(this,Lr,null);z(this,xo,kf(()=>(B(this,Lr,ct(w(this,Wn))),E&&St(w(this,Lr),"$effect.pending()"),()=>{B(this,Lr,null)})));B(this,Ut,t),B(this,Rr,n),B(this,Vn,s),this.parent=P.b,this.is_pending=!!w(this,Rr).pending,B(this,Fr,Vt(()=>{if(P.b=this,I){let l=w(this,os);tt(),l.nodeType===Tt&&l.data==="[!"?Fe(this,Le,Tf).call(this):(Fe(this,Le,bf).call(this),w(this,an)===0&&(this.is_pending=!1))}else{var o=Fe(this,Le,qa).call(this);try{B(this,qt,ze(()=>s(o)))}catch(l){this.error(l)}w(this,an)>0?Fe(this,Le,wo).call(this):this.is_pending=!1}return()=>{var l;(l=w(this,Tn))==null||l.remove()}},Dm)),I&&B(this,Ut,j)}defer_effect(t){ho(t,w(this,bi),w(this,Ti))}is_rendered(){return!this.is_pending&&(!this.parent||this.parent.is_rendered())}has_pending_snippet(){return!!w(this,Rr).pending}update_pending_count(t){Fe(this,Le,Za).call(this,t),B(this,Wn,w(this,Wn)+t),!(!w(this,Lr)||w(this,ki))&&(B(this,ki,!0),$e(()=>{B(this,ki,!1),w(this,Lr)&&fr(w(this,Lr),w(this,Wn))}))}get_effect_pending(){return w(this,xo).call(this),T(w(this,Lr))}error(t){var n=w(this,Rr).onerror;let s=w(this,Rr).failed;if(w(this,Hn)||!n&&!s)throw t;w(this,qt)&&(De(w(this,qt)),B(this,qt,null)),w(this,Nt)&&(De(w(this,Nt)),B(this,Nt,null)),w(this,Ir)&&(De(w(this,Ir)),B(this,Ir,null)),I&&(_e(w(this,os)),Ie(),_e(nn()));var o=!1,l=!1;let f=()=>{if(o){cf();return}o=!0,l&&rf(),Dt.ensure(),B(this,Wn,0),w(this,Ir)!==null&&Yr(w(this,Ir),()=>{B(this,Ir,null)}),this.is_pending=this.has_pending_snippet(),B(this,qt,Fe(this,Le,yo).call(this,()=>(B(this,Hn,!1),ze(()=>w(this,Vn).call(this,w(this,Ut)))))),w(this,an)>0?Fe(this,Le,wo).call(this):this.is_pending=!1};var d=V;try{Oe(null),l=!0,n==null||n(t,f),l=!1}catch(p){Ar(p,w(this,Fr)&&w(this,Fr).parent)}finally{Oe(d)}s&&$e(()=>{B(this,Ir,Fe(this,Le,yo).call(this,()=>{Dt.ensure(),B(this,Hn,!0);try{return ze(()=>{s(w(this,Ut),()=>t,()=>f)})}catch(p){return Ar(p,w(this,Fr).parent),null}finally{B(this,Hn,!1)}}))})}};Ut=new WeakMap,os=new WeakMap,Rr=new WeakMap,Vn=new WeakMap,Fr=new WeakMap,qt=new WeakMap,Nt=new WeakMap,Ir=new WeakMap,on=new WeakMap,Tn=new WeakMap,Wn=new WeakMap,an=new WeakMap,ki=new WeakMap,Hn=new WeakMap,bi=new WeakMap,Ti=new WeakMap,Lr=new WeakMap,xo=new WeakMap,Le=new WeakSet,bf=function(){try{B(this,qt,ze(()=>w(this,Vn).call(this,w(this,Ut))))}catch(t){this.error(t)}},Tf=function(){let t=w(this,Rr).pending;t&&(B(this,Nt,ze(()=>t(w(this,Ut)))),$e(()=>{var n=Fe(this,Le,qa).call(this);B(this,qt,Fe(this,Le,yo).call(this,()=>(Dt.ensure(),ze(()=>w(this,Vn).call(this,n))))),w(this,an)>0?Fe(this,Le,wo).call(this):(Yr(w(this,Nt),()=>{B(this,Nt,null)}),this.is_pending=!1)}))},qa=function(){var t=w(this,Ut);return this.is_pending&&(B(this,Tn,Ke()),w(this,Ut).before(w(this,Tn)),t=w(this,Tn)),t},yo=function(t){var n=P,s=V,o=X;je(w(this,Fr)),Oe(w(this,Fr)),sn(w(this,Fr).ctx);try{return t()}catch(l){return po(l),null}finally{je(n),Oe(s),sn(o)}},wo=function(){let t=w(this,Rr).pending;w(this,qt)!==null&&(B(this,on,document.createDocumentFragment()),w(this,on).append(w(this,Tn)),ko(w(this,qt),w(this,on))),w(this,Nt)===null&&B(this,Nt,ze(()=>t(w(this,Ut))))},Za=function(t){var n;if(!this.has_pending_snippet()){this.parent&&Fe(n=this.parent,Le,Za).call(n,t);return}if(B(this,an,w(this,an)+t),w(this,an)===0){this.is_pending=!1;for(let s of w(this,bi))ye(s,2048),Pt(s);for(let s of w(this,Ti))ye(s,4096),Pt(s);w(this,bi).clear(),w(this,Ti).clear(),w(this,Nt)&&Yr(w(this,Nt),()=>{B(this,Nt,null)}),w(this,on)&&(w(this,Ut).before(w(this,on)),B(this,on,null))}};function bo(r,t,n,s){let o=Mr()?Sn:Bn;var l=r.filter(_=>!_.settled);if(n.length===0&&l.length===0){s(t.map(o));return}var f=K,d=P,p=Sf(),h=l.length===1?l[0].promise:l.length>1?Promise.all(l.map(_=>_.promise)):null;function v(_){p();try{s(_)}catch(y){(d.f&16384)===0&&Ar(y,d)}f==null||f.deactivate(),as()}if(n.length===0){h.then(()=>v(t.map(o)));return}function g(){p(),Promise.all(n.map(_=>Qa(_))).then(_=>v([...t.map(o),..._])).catch(_=>Ar(_,d))}h?h.then(g):g()}function Sf(){var r=P,t=V,n=X,s=K;if(E)var o=Dr;return function(f=!0){je(r),Oe(t),sn(n),f&&(s==null||s.activate()),E&&(Ja(null),fi(o))}}function as(){je(null),Oe(null),sn(null),E&&(Ja(null),fi(null))}var ls=null;function Ja(r){ls=r}var cs=new Set;function Sn(r){var t=2050,n=V!==null&&(V.f&2)!==0?V:null;P!==null&&(P.f|=524288);let s={ctx:X,deps:null,effects:null,equals:ao,f:t,fn:r,reactions:null,rv:0,v:xe,wv:0,parent:n!=null?n:P,ac:null};return E&&nr&&(s.created=$r("created at")),s}function Qa(r,t,n){let s=P;s===null&&Bc();var o=s.b,l=void 0,f=ct(xe);E&&(f.label=t);var d=!V,p=new Map;return Ef(()=>{var y;E&&(ls=P);var h=to();l=h.promise;try{Promise.resolve(r()).then(h.resolve,h.reject).then(()=>{v===K&&v.committed&&v.deactivate(),as()})}catch(x){h.reject(x),as()}E&&(ls=null);var v=K;if(d){var g=o.is_rendered();o.update_pending_count(1),v.increment(g),(y=p.get(v))==null||y.reject(Sr),p.delete(v),p.set(v,h)}let _=(x,D=void 0)=>{if(ls=null,v.activate(),D)D!==Sr&&(f.f|=8388608,fr(f,D));else{(f.f&8388608)!==0&&(f.f^=8388608),fr(f,x);for(let[S,M]of p){if(p.delete(S),S===v)break;M.reject(Sr)}E&&n!==void 0&&(cs.add(f),setTimeout(()=>{cs.has(f)&&(sf(f.label,n),cs.delete(f))}))}d&&(o.update_pending_count(-1),v.decrement(g))};h.promise.then(_,x=>_(null,x||"unknown"))}),ft(()=>{for(let h of p.values())h.reject(Sr)}),E&&(f.f|=4194304),new Promise(h=>{function v(g){function _(){g===l?h(f):v(l)}g.then(_,_)}v(l)})}function tl(r){let t=Sn(r);return lt||Eo(t),t}function Bn(r){let t=Sn(r);return t.equals=co,t}function To(r){var t=r.effects;if(t!==null){r.effects=null;for(var n=0;n<t.length;n+=1)De(t[n])}}var el=[];function Am(r){for(var t=r.parent;t!==null;){if((t.f&2)===0)return(t.f&16384)===0?t:null;t=t.parent}return null}function fs(r){var t,n=P;if(je(Am(r)),E){let s=Gn;vo(new Set);try{el.includes(r)&&Gc(),el.push(r),r.f&=-32769,To(r),t=So(r)}finally{je(n),vo(s),el.pop()}}else try{r.f&=-32769,To(r),t=So(r)}finally{je(n)}return t}function rl(r){var n,s;var t=fs(r);if(!r.equals(t)&&(r.wv=xi(),(!((n=K)!=null&&n.is_fork)||r.deps===null)&&(r.v=t,r.deps===null))){ye(r,1024);return}Zt||(We!==null?(xn()||(s=K)!=null&&s.is_fork)&&We.set(r,t):di(r))}var Gn=new Set,Cr=new Map;function vo(r){Gn=r}var nl=!1;function $f(){nl=!0}function ct(r,t){var n={f:0,v:r,reactions:null,equals:ao,rv:0,wv:0};return E&&nr&&(n.created=t!=null?t:$r("created at"),n.updated=null,n.set_during_effect=!1,n.trace=null),n}function Ye(r,t){let n=ct(r,t);return Eo(n),n}function Pr(r,t=!1,n=!0){var o,l;let s=ct(r);return t||(s.equals=co),Er&&n&&X!==null&&X.l!==null&&((l=(o=X.l).s)!=null?l:o.s=[]).push(s),s}function U(r,t,n=!1){var o;V!==null&&(!Ct||(V.f&131072)!==0)&&Mr()&&(V.f&4325394)!==0&&!((o=Rt)!=null&&o.includes(r))&&tf();let s=n?Ot(t):t;return E&&fo(s,r.label),fr(r,s)}function fr(r,t){var o,l,f;if(!r.equals(t)){var n=r.v;Zt?Cr.set(r,t):Cr.set(r,n),r.v=t;var s=Dt.ensure();if(s.capture(r,n),E){if(nr||P!==null){(o=r.updated)!=null||(r.updated=new Map);let d=((f=(l=r.updated.get(""))==null?void 0:l.count)!=null?f:0)+1;if(r.updated.set("",{error:null,count:d}),nr||d>5){let p=$r("updated at");if(p!==null){let h=r.updated.get(p.stack);h||(h={error:p,count:0},r.updated.set(p.stack,h)),h.count++}}}P!==null&&(r.set_during_effect=!0)}if((r.f&2)!==0){let d=r;(r.f&2048)!==0&&fs(d),di(d)}r.wv=xi(),Df(r,2048),Mr()&&P!==null&&(P.f&1024)!==0&&(P.f&96)===0&&(Wt===null?Mf([r]):Wt.push(r)),!s.is_fork&&Gn.size>0&&!nl&&go()}return t}function go(){nl=!1;for(let r of Gn)(r.f&1024)!==0&&ye(r,4096),bn(r)&&kn(r);Gn.clear()}function Un(r){U(r,r.v+1)}function Df(r,t){var v;var n=r.reactions;if(n!==null)for(var s=Mr(),o=n.length,l=0;l<o;l++){var f=n[l],d=f.f;if(!(!s&&f===P)){if(E&&(d&131072)!==0){Gn.add(f);continue}var p=(d&2048)===0;if(p&&ye(f,t),(d&2)!==0){var h=f;(v=We)==null||v.delete(h),(d&32768)===0&&(d&512&&(f.f|=32768),Df(h,4096))}else p&&((d&16)!==0&&Et!==null&&Et.add(f),Pt(f))}}}var Om=/^[a-zA-Z_$][a-zA-Z_$0-9]*$/;function Ot(r){if(typeof r!="object"||r===null||He in r)return r;let t=Cn(r);if(t!==Fa&&t!==Vc)return r;var n=new Map,s=Tr(r),o=Ye(0),l=E&&nr?$r("created at"):null,f=En,d=g=>{if(En===f)return g();var _=V,y=En;Oe(null),il(f);var x=g();return Oe(_),il(y),x};s&&(n.set("length",Ye(r.length,l)),E&&(r=Rm(r)));var p="";let h=!1;function v(g){if(!h){h=!0,p=g,St(o,`${p} version`);for(let[_,y]of n)St(y,zn(p,_));h=!1}}return new Proxy(r,{defineProperty(g,_,y){(!("value"in y)||y.configurable===!1||y.enumerable===!1||y.writable===!1)&&Qc();var x=n.get(_);return x===void 0?x=d(()=>{var D=Ye(y.value,l);return n.set(_,D),E&&typeof _=="string"&&St(D,zn(p,_)),D}):U(x,y.value,!0),!0},deleteProperty(g,_){var y=n.get(_);if(y===void 0){if(_ in g){let x=d(()=>Ye(xe,l));n.set(_,x),Un(o),E&&St(x,zn(p,_))}}else U(y,xe),Un(o);return!0},get(g,_,y){var M;if(_===He)return r;if(E&&_===ro)return v;var x=n.get(_),D=_ in g;if(x===void 0&&(!D||(M=kt(g,_))!=null&&M.writable)&&(x=d(()=>{var N=Ot(D?g[_]:xe),G=Ye(N,l);return E&&St(G,zn(p,_)),G}),n.set(_,x)),x!==void 0){var S=T(x);return S===xe?void 0:S}return Reflect.get(g,_,y)},getOwnPropertyDescriptor(g,_){var y=Reflect.getOwnPropertyDescriptor(g,_);if(y&&"value"in y){var x=n.get(_);x&&(y.value=T(x))}else if(y===void 0){var D=n.get(_),S=D==null?void 0:D.v;if(D!==void 0&&S!==xe)return{enumerable:!0,configurable:!0,value:S,writable:!0}}return y},has(g,_){var S;if(_===He)return!0;var y=n.get(_),x=y!==void 0&&y.v!==xe||Reflect.has(g,_);if(y!==void 0||P!==null&&(!x||(S=kt(g,_))!=null&&S.writable)){y===void 0&&(y=d(()=>{var M=x?Ot(g[_]):xe,N=Ye(M,l);return E&&St(N,zn(p,_)),N}),n.set(_,y));var D=T(y);if(D===xe)return!1}return x},set(g,_,y,x){var re;var D=n.get(_),S=_ in g;if(s&&_==="length")for(var M=y;M<D.v;M+=1){var N=n.get(M+"");N!==void 0?U(N,xe):M in g&&(N=d(()=>Ye(xe,l)),n.set(M+"",N),E&&St(N,zn(p,M)))}if(D===void 0)(!S||(re=kt(g,_))!=null&&re.writable)&&(D=d(()=>Ye(void 0,l)),E&&St(D,zn(p,_)),U(D,Ot(y)),n.set(_,D));else{S=D.v!==xe;var G=d(()=>Ot(y));U(D,G)}var J=Reflect.getOwnPropertyDescriptor(g,_);if(J!=null&&J.set&&J.set.call(x,y),!S){if(s&&typeof _=="string"){var L=n.get("length"),Q=Number(_);Number.isInteger(Q)&&Q>=L.v&&U(L,Q+1)}Un(o)}return!0},ownKeys(g){T(o);var _=Reflect.ownKeys(g).filter(D=>{var S=n.get(D);return S===void 0||S.v!==xe});for(var[y,x]of n)x.v!==xe&&!(y in g)&&_.push(y);return _},setPrototypeOf(){ef()}})}function zn(r,t){var n;return typeof t=="symbol"?`${r}[Symbol(${(n=t.description)!=null?n:""})]`:Om.test(t)?`${r}.${t}`:/^\d+$/.test(t)?`${r}[${t}]`:`${r}['${t}']`}function $o(r){try{if(r!==null&&typeof r=="object"&&He in r)return r[He]}catch(t){}return r}var Cm=new Set(["copyWithin","fill","pop","push","reverse","shift","sort","splice","unshift"]);function Rm(r){return new Proxy(r,{get(t,n,s){var o=Reflect.get(t,n,s);return Cm.has(n)?function(...l){$f();var f=o.apply(this,l);return go(),f}:o}})}function Nf(){let r=Array.prototype,t=Array.__svelte_cleanup;t&&t();let{indexOf:n,lastIndexOf:s,includes:o}=r;r.indexOf=function(l,f){let d=n.call(this,l,f);if(d===-1){for(let p=f!=null?f:0;p<this.length;p+=1)if($o(this[p])===l){io("array.indexOf(...)");break}}return d},r.lastIndexOf=function(l,f){let d=s.call(this,l,f!=null?f:this.length-1);if(d===-1){for(let p=0;p<=(f!=null?f:this.length-1);p+=1)if($o(this[p])===l){io("array.lastIndexOf(...)");break}}return d},r.includes=function(l,f){let d=o.call(this,l,f);if(!d){for(let p=0;p<this.length;p+=1)if($o(this[p])===l){io("array.includes(...)");break}}return d},Array.__svelte_cleanup=()=>{r.indexOf=n,r.lastIndexOf=s,r.includes=o}}var sl,Af,ts,Of,Cf;function Do(){if(sl===void 0){sl=window,Af=document,ts=/Firefox/.test(navigator.userAgent);var r=Element.prototype,t=Node.prototype,n=Text.prototype;Of=kt(t,"firstChild").get,Cf=kt(t,"nextSibling").get,Ia(r)&&(r.__click=void 0,r.__className=void 0,r.__attributes=null,r.__style=void 0,r.__e=void 0),Ia(n)&&(n.__t=void 0),E&&(r.__svelte_meta=null,Nf())}}function Ke(r=""){return document.createTextNode(r)}function it(r){return Of.call(r)}function rt(r){return Cf.call(r)}function F(r,t){if(!I)return it(r);var n=it(j);if(n===null)n=j.appendChild(Ke());else if(t&&n.nodeType!==Qi){var s=Ke();return n==null||n.before(s),_e(s),s}return _e(n),n}function ol(r,t=!1){var o,l;if(!I){var n=it(r);return n instanceof Comment&&n.data===""?rt(n):n}if(t&&((o=j)==null?void 0:o.nodeType)!==Qi){var s=Ke();return(l=j)==null||l.before(s),_e(s),s}return j}function q(r,t=1,n=!1){let s=I?j:r;for(var o;t--;)o=s,s=rt(s);if(!I)return s;if(n&&(s==null?void 0:s.nodeType)!==Qi){var l=Ke();return s===null?o==null||o.after(l):s.before(l),_e(l),l}return _e(s),s}function Si(r){r.textContent=""}function Mo(){if(!lt||Et!==null)return!1;var r=P.f;return(r&32768)!==0}function al(r){I&&it(r)!==null&&Si(r)}var Rf=!1;function No(){Rf||(Rf=!0,document.addEventListener("reset",r=>{Promise.resolve().then(()=>{var t;if(!r.defaultPrevented)for(let n of r.target.elements)(t=n.__on_r)==null||t.call(n)})},{capture:!0}))}function ur(r){var t=V,n=P;Oe(null),je(null);try{return r()}finally{Oe(t),je(n)}}function ll(r,t,n,s=n){r.addEventListener(t,()=>ur(n));let o=r.__on_r;o?r.__on_r=()=>{o(),s(!0)}:r.__on_r=()=>s(!0),No()}function fl(r){P===null&&(V===null&&Kc(r),jc()),Zt&&zc(r)}function Fm(r,t){var n=t.last;n===null?t.last=t.first=r:(n.next=r,r.prev=n,t.last=r)}function dr(r,t,n){var d;var s=P;if(E)for(;s!==null&&(s.f&131072)!==0;)s=s.parent;s!==null&&(s.f&8192)!==0&&(r|=8192);var o={ctx:X,deps:null,nodes:null,f:r|2048|512,first:null,fn:t,last:null,next:null,parent:s,b:s&&s.b,prev:null,teardown:null,wv:0,ac:null};if(E&&(o.component_function=ir),n)try{kn(o),o.f|=32768}catch(p){throw De(o),p}else t!==null&&Pt(o);var l=o;if(n&&l.deps===null&&l.teardown===null&&l.nodes===null&&l.first===l.last&&(l.f&524288)===0&&(l=l.first,(r&16)!==0&&(r&65536)!==0&&l!==null&&(l.f|=65536)),l!==null&&(l.parent=s,s!==null&&Fm(l,s),V!==null&&(V.f&2)!==0&&(r&64)===0)){var f=V;((d=f.effects)!=null?d:f.effects=[]).push(l)}return o}function xn(){return V!==null&&!Ct}function ft(r){let t=dr(8,null,!1);return ye(t,1024),t.teardown=r,t}function cn(r){var o;fl("$effect"),E&&Je(r,"name",{value:"$effect"});var t=P.f,n=!V&&(t&32)!==0&&(t&32768)===0;if(n){var s=X;((o=s.e)!=null?o:s.e=[]).push(r)}else return Ua(r)}function Ua(r){return dr(1048580,r,!1)}function us(r){return fl("$effect.pre"),E&&Je(r,"name",{value:"$effect.pre"}),dr(1048584,r,!0)}function ul(r){Dt.ensure();let t=dr(524352,r,!0);return()=>{De(t)}}function If(r){Dt.ensure();let t=dr(524352,r,!0);return(n={})=>new Promise(s=>{n.outro?Yr(t,()=>{De(t),s(void 0)}):(De(t),s(void 0))})}function vt(r){return dr(4,r,!1)}function Ef(r){return dr(4718592,r,!0)}function Ge(r,t=0){return dr(8|t,r,!0)}function Ce(r,t=[],n=[],s=[]){bo(s,t,n,o=>{dr(8,()=>r(...o.map(T)),!0)})}function Vt(r,t=0){var n=dr(16|t,r,!0);return E&&(n.dev_stack=Dr),n}function ze(r){return dr(524320,r,!0)}function dl(r){var t=r.teardown;if(t!==null){let n=Zt,s=V;cl(!0),Oe(null);try{t.call(null)}finally{cl(n),Oe(s)}}}function pl(r,t=!1){var n=r.first;for(r.first=r.last=null;n!==null;){let o=n.ac;o!==null&&ur(()=>{o.abort(Sr)});var s=n.next;(n.f&64)!==0?n.parent=null:De(n,t),n=s}}function Lf(r){for(var t=r.first;t!==null;){var n=t.next;(t.f&32)===0&&De(t),t=n}}function De(r,t=!0){var n=!1;(t||(r.f&262144)!==0)&&r.nodes!==null&&r.nodes.end!==null&&(Yf(r.nodes.start,r.nodes.end),n=!0),pl(r,t&&!n),ps(r,0),ye(r,16384);var s=r.nodes&&r.nodes.t;if(s!==null)for(let l of s)l.stop();dl(r);var o=r.parent;o!==null&&o.first!==null&&ja(r),E&&(r.component_function=null),r.next=r.prev=r.teardown=r.ctx=r.deps=r.fn=r.nodes=r.ac=null}function Yf(r,t){for(;r!==null;){var n=r===t?null:rt(r);r.remove(),r=n}}function ja(r){var t=r.parent,n=r.prev,s=r.next;n!==null&&(n.next=s),s!==null&&(s.prev=n),t!==null&&(t.first===r&&(t.first=s),t.last===r&&(t.last=n))}function Yr(r,t,n=!0){var s=[];Pf(r,s,!0);var o=()=>{n&&De(r),t&&t()},l=s.length;if(l>0){var f=()=>--l||o();for(var d of s)d.out(f)}else o()}function Pf(r,t,n){if((r.f&8192)===0){r.f^=8192;var s=r.nodes&&r.nodes.t;if(s!==null)for(let d of s)(d.is_global||n)&&t.push(d);for(var o=r.first;o!==null;){var l=o.next,f=(o.f&65536)!==0||(o.f&32)!==0&&(r.f&16)!==0;Pf(o,t,f?n:!1),o=l}}}function ds(r){Uf(r,!0)}function Uf(r,t){if((r.f&8192)!==0){r.f^=8192,(r.f&1024)===0&&(ye(r,2048),Pt(r));for(var n=r.first;n!==null;){var s=n.next,o=(n.f&65536)!==0||(n.f&32)!==0;Uf(n,o?t:!1),n=s}var l=r.nodes&&r.nodes.t;if(l!==null)for(let f of l)(f.is_global||t)&&f.in()}}function ko(r,t){if(r.nodes)for(var n=r.nodes.start,s=r.nodes.end;n!==null;){var o=n===s?null:rt(n);t.append(n),n=o}}var Vf=null;var Ao=!1,Zt=!1;function cl(r){Zt=r}var V=null,Ct=!1;function Oe(r){V=r}var P=null;function je(r){P=r}var Rt=null;function Eo(r){V!==null&&(!lt||(V.f&2)!==0)&&(Rt===null?Rt=[r]:Rt.push(r))}var Ft=null,Ht=0,Wt=null;function Mf(r){Wt=r}var Wf=1,jn=0,En=jn;function il(r){En=r}function xi(){return++Wf}function bn(r){var t=r.f;if((t&2048)!==0)return!0;if(t&2&&(r.f&=-32769),(t&4096)!==0){for(var n=r.deps,s=n.length,o=0;o<s;o++){var l=n[o];if(bn(l)&&rl(l),l.wv>r.wv)return!0}(t&512)!==0&&We===null&&ye(r,1024)}return!1}function Hf(r,t,n=!0){var s=r.reactions;if(s!==null&&!(!lt&&(Rt!=null&&Rt.includes(r))))for(var o=0;o<s.length;o++){var l=s[o];(l.f&2)!==0?Hf(l,t,!1):t===l&&(n?ye(l,2048):(l.f&1024)!==0&&ye(l,4096),Pt(l))}}function So(r){var x,D;var t=Ft,n=Ht,s=Wt,o=V,l=Rt,f=X,d=Ct,p=En,h=r.f;Ft=null,Ht=0,Wt=null,V=(h&96)===0?r:null,Rt=null,sn(r.ctx),Ct=!1,En=++jn,r.ac!==null&&(ur(()=>{r.ac.abort(Sr)}),r.ac=null);try{r.f|=2097152;var v=r.fn,g=v(),_=r.deps;if(Ft!==null){var y;if(ps(r,Ht),_!==null&&Ht>0)for(_.length=Ht+Ft.length,y=0;y<Ft.length;y++)_[Ht+y]=Ft[y];else r.deps=_=Ft;if(xn()&&(r.f&512)!==0)for(y=Ht;y<_.length;y++)((D=(x=_[y]).reactions)!=null?D:x.reactions=[]).push(r)}else _!==null&&Ht<_.length&&(ps(r,Ht),_.length=Ht);if(Mr()&&Wt!==null&&!Ct&&_!==null&&(r.f&6146)===0)for(y=0;y<Wt.length;y++)Hf(Wt[y],r);if(o!==null&&o!==r){if(jn++,o.deps!==null)for(let S=0;S<n;S+=1)o.deps[S].rv=jn;if(t!==null)for(let S of t)S.rv=jn;Wt!==null&&(s===null?s=Wt:s.push(...Wt))}return(r.f&8388608)!==0&&(r.f^=8388608),g}catch(S){return po(S)}finally{r.f^=2097152,Ft=t,Ht=n,Wt=s,V=o,Rt=l,sn(f),Ct=d,En=p}}function Im(r,t){let n=t.reactions;if(n!==null){var s=Uc.call(n,r);if(s!==-1){var o=n.length-1;o===0?n=t.reactions=null:(n[s]=n[o],n.pop())}}if(n===null&&(t.f&2)!==0&&(Ft===null||!Ft.includes(t))){var l=t;(l.f&512)!==0&&(l.f^=512,l.f&=-32769),di(l),To(l),ps(l,0)}}function ps(r,t){var n=r.deps;if(n!==null)for(var s=t;s<n.length;s++)Im(r,n[s])}function kn(r){var p;var t=r.f;if((t&16384)===0){ye(r,1024);var n=P,s=Ao;if(P=r,Ao=!0,E){var o=ir;uo(r.component_function);var l=Dr;fi((p=r.dev_stack)!=null?p:Dr)}try{(t&16777232)!==0?Lf(r):pl(r),dl(r);var f=So(r);if(r.teardown=typeof f=="function"?f:null,r.wv=Wf,E&&nr&&(r.f&2048)!==0&&r.deps!==null)for(var d of r.deps)d.set_during_effect&&(d.wv=xi(),d.set_during_effect=!1)}finally{Ao=s,P=n,E&&(uo(o),fi(l))}}}async function Co(){if(lt)return new Promise(r=>{requestAnimationFrame(()=>r()),setTimeout(()=>r())});await Promise.resolve(),Pn()}function T(r){var y,x,D;var t=r.f,n=(t&2)!==0;if((y=Vf)==null||y.add(r),V!==null&&!Ct){var s=P!==null&&(P.f&16384)!==0;if(!s&&!(Rt!=null&&Rt.includes(r))){var o=V.deps;if((V.f&2097152)!==0)r.rv<jn&&(r.rv=jn,Ft===null&&o!==null&&o[Ht]===r?Ht++:Ft===null?Ft=[r]:Ft.push(r));else{((x=V.deps)!=null?x:V.deps=[]).push(r);var l=r.reactions;l===null?r.reactions=[V]:l.includes(V)||l.push(V)}}}if(E&&(cs.delete(r),nr&&!Ct&&es!==null&&V!==null&&es.reaction===V))if(r.trace)r.trace();else{var f=$r("traced at");if(f){var d=es.entries.get(r);d===void 0&&(d={traces:[]},es.entries.set(r,d));var p=d.traces[d.traces.length-1];f.stack!==(p==null?void 0:p.stack)&&d.traces.push(f)}}if(Zt&&Cr.has(r))return Cr.get(r);if(n){var h=r;if(Zt){var v=h.v;return((h.f&1024)===0&&h.reactions!==null||Gf(h))&&(v=fs(h)),Cr.set(h,v),v}var g=(h.f&512)===0&&!Ct&&V!==null&&(Ao||(V.f&512)!==0),_=h.deps===null;bn(h)&&(g&&(h.f|=512),rl(h)),g&&!_&&Bf(h)}if((D=We)!=null&&D.has(r))return We.get(r);if((r.f&8388608)!==0)throw r.v;return r.v}function Bf(r){var t;if(r.deps!==null){r.f|=512;for(let n of r.deps)((t=n.reactions)!=null?t:n.reactions=[]).push(r),(n.f&2)!==0&&(n.f&512)===0&&Bf(n)}}function Gf(r){if(r.v===xe)return!0;if(r.deps===null)return!1;for(let t of r.deps)if(Cr.has(t)||(t.f&2)!==0&&Gf(t))return!0;return!1}function Y(r){var t=Ct;try{return Ct=!0,r()}finally{Ct=t}}function Se(r){if(!(typeof r!="object"||!r||r instanceof EventTarget)){if(He in r)Oo(r);else if(!Array.isArray(r))for(let t in r){let n=r[t];typeof n=="object"&&n&&He in n&&Oo(n)}}}function Oo(r,t=new Set){if(typeof r=="object"&&r!==null&&!(r instanceof EventTarget)&&!t.has(r)){t.add(r),r instanceof Date&&r.getTime();for(let s in r)try{Oo(r[s],t)}catch(o){}let n=Cn(r);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){let s=eo(n);for(let o in s){let l=s[o].get;if(l)try{l.call(r)}catch(f){}}}}}var Ym=["allowfullscreen","async","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","indeterminate","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected","webkitdirectory","defer","disablepictureinpicture","disableremoteplayback"];var dx=[...Ym,"formNoValidate","isMap","noModule","playsInline","readOnly","value","volume","defaultValue","defaultChecked","srcObject","noValidate","allowFullscreen","disablePictureInPicture","disableRemotePlayback"];var Pm=["touchstart","touchmove"];function zf(r){return Pm.includes(r)}var Um=["$state","$state.raw","$derived","$derived.by"],px=[...Um,"$state.eager","$state.snapshot","$props","$props.id","$bindable","$effect","$effect.pre","$effect.tracking","$effect.root","$effect.pending","$inspect","$inspect().with","$inspect.trace","$host"];var Kf=new Map;function qf(r,t){var n=Kf.get(r);n||(n=new Set,Kf.set(r,n)),n.add(t)}var ml=new Set,Ro=new Set;function Jf(r,t,n,s={}){function o(l){if(s.capture||$i.call(t,l),!l.cancelBubble)return ur(()=>n==null?void 0:n.call(this,l))}return r.startsWith("pointer")||r.startsWith("touch")||r==="wheel"?$e(()=>{t.addEventListener(r,o,s)}):t.addEventListener(r,o,s),o}function hs(r,t,n,s,o){var l={capture:s,passive:o},f=Jf(r,t,n,l);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&ft(()=>{t.removeEventListener(r,f,l)})}function Ei(r){for(var t=0;t<r.length;t++)ml.add(r[t]);for(var n of Ro)n(r)}var Xf=null;function $i(r){var S;var t=this,n=t.ownerDocument,s=r.type,o=((S=r.composedPath)==null?void 0:S.call(r))||[],l=o[0]||r.target;Xf=r;var f=0,d=Xf===r&&r.__root;if(d){var p=o.indexOf(d);if(p!==-1&&(t===document||t===window)){r.__root=t;return}var h=o.indexOf(t);if(h===-1)return;p<=h&&(f=p)}if(l=o[f]||r.target,l!==t){Je(r,"currentTarget",{configurable:!0,get(){return l||n}});var v=V,g=P;Oe(null),je(null);try{for(var _,y=[];l!==null;){var x=l.assignedSlot||l.parentNode||l.host||null;try{var D=l["__"+s];D!=null&&(!l.disabled||r.target===l)&&D.call(l,r)}catch(M){_?y.push(M):_=M}if(r.cancelBubble||x===t||x===null)break;l=x}if(_){for(let M of y)queueMicrotask(()=>{throw M});throw _}}finally{r.__root=t,delete r.currentTarget,Oe(v),je(g)}}}function Fo(r){var t=document.createElement("template");return t.innerHTML=r.replaceAll("<!>","<!---->"),t.content}function $n(r,t){var n=P;n.nodes===null&&(n.nodes={start:r,end:t,a:null,t:null})}function ue(r,t){var n=(t&1)!==0,s=(t&2)!==0,o,l=!r.startsWith("<!>");return()=>{if(I)return $n(j,null),j;o===void 0&&(o=Fo(l?r:"<!>"+r),n||(o=it(o)));var f=s||ts?document.importNode(o,!0):o.cloneNode(!0);if(n){var d=it(f),p=f.lastChild;$n(d,p)}else $n(f,f);return f}}function ae(r,t){if(I){var n=P;((n.f&32768)===0||n.nodes.end===null)&&(n.nodes.end=j),tt();return}r!==null&&r.before(t)}var Io=!0;function ve(r,t){var s;var n=t==null?"":typeof t=="object"?t+"":t;n!==((s=r.__t)!=null?s:r.__t=r.nodeValue)&&(r.__t=n,r.nodeValue=n+"")}function Ur(r,t){return eu(r,t)}function vl(r,t){var f;Do(),t.intro=(f=t.intro)!=null?f:!1;let n=t.target,s=I,o=j;try{for(var l=it(n);l&&(l.nodeType!==Tt||l.data!=="[");)l=rt(l);if(!l)throw tn;Be(!0),_e(l);let d=eu(r,{...t,anchor:l});return Be(!1),d}catch(d){if(d instanceof Error&&d.message.split(`
`).some(p=>p.startsWith("https://svelte.dev/e/")))throw d;return d!==tn&&console.warn("Failed to hydrate: ",d),t.recover===!1&&Zc(),Do(),Si(n),Be(!1),Ur(r,t)}finally{Be(s),_e(o)}}var Di=new Map;function eu(r,{target:t,anchor:n,props:s={},events:o,context:l,intro:f=!0}){Do();var d=new Set,p=g=>{for(var _=0;_<g.length;_++){var y=g[_];if(!d.has(y)){d.add(y);var x=zf(y);t.addEventListener(y,$i,{passive:x});var D=Di.get(y);D===void 0?(document.addEventListener(y,$i,{passive:x}),Di.set(y,1)):Di.set(y,D+1)}}};p(ai(ml)),Ro.add(p);var h=void 0,v=If(()=>{var g=n!=null?n:t.appendChild(Ke());return Xa(g,{pending:()=>{}},_=>{if(l){sr({});var y=X;y.c=l}if(o&&(s.$$events=o),I&&$n(_,null),Io=f,h=r(_,s)||{},Io=!0,I&&(P.nodes.end=j,j===null||j.nodeType!==Tt||j.data!=="]"))throw Rn(),tn;l&&or()}),()=>{var x;for(var _ of d){t.removeEventListener(_,$i);var y=Di.get(_);--y===0?(document.removeEventListener(_,$i),Di.delete(_)):Di.set(_,y)}Ro.delete(p),g!==n&&((x=g.parentNode)==null||x.removeChild(g))}});return _l.set(h,v),h}var _l=new WeakMap;function fn(r,t){let n=_l.get(r);return n?(_l.delete(r),n(t)):(E&&(He in r?lf():af()),Promise.resolve())}var pr,Vr,Bt,Kn,ms,_s,Lo,un=class{constructor(t,n=!0){b(this,"anchor");z(this,pr,new Map);z(this,Vr,new Map);z(this,Bt,new Map);z(this,Kn,new Set);z(this,ms,!0);z(this,_s,()=>{var t=K;if(w(this,pr).has(t)){var n=w(this,pr).get(t),s=w(this,Vr).get(n);if(s)ds(s),w(this,Kn).delete(n);else{var o=w(this,Bt).get(n);o&&(w(this,Vr).set(n,o.effect),w(this,Bt).delete(n),o.fragment.lastChild.remove(),this.anchor.before(o.fragment),s=o.effect)}for(let[l,f]of w(this,pr)){if(w(this,pr).delete(l),l===t)break;let d=w(this,Bt).get(f);d&&(De(d.effect),w(this,Bt).delete(f))}for(let[l,f]of w(this,Vr)){if(l===n||w(this,Kn).has(l))continue;let d=()=>{if(Array.from(w(this,pr).values()).includes(l)){var h=document.createDocumentFragment();ko(f,h),h.append(Ke()),w(this,Bt).set(l,{effect:f,fragment:h})}else De(f);w(this,Kn).delete(l),w(this,Vr).delete(l)};w(this,ms)||!s?(w(this,Kn).add(l),Yr(f,d,!1)):d()}}});z(this,Lo,t=>{w(this,pr).delete(t);let n=Array.from(w(this,pr).values());for(let[s,o]of w(this,Bt))n.includes(s)||(De(o.effect),w(this,Bt).delete(s))});this.anchor=t,B(this,ms,n)}ensure(t,n){var s=K,o=Mo();if(n&&!w(this,Vr).has(t)&&!w(this,Bt).has(t))if(o){var l=document.createDocumentFragment(),f=Ke();l.append(f),w(this,Bt).set(t,{effect:ze(()=>n(f)),fragment:l})}else w(this,Vr).set(t,ze(()=>n(this.anchor)));if(w(this,pr).set(s,t),o){for(let[d,p]of w(this,Vr))d===t?s.skipped_effects.delete(p):s.skipped_effects.add(p);for(let[d,p]of w(this,Bt))d===t?s.skipped_effects.delete(p.effect):s.skipped_effects.add(p.effect);s.oncommit(w(this,_s)),s.ondiscard(w(this,Lo))}else I&&(this.anchor=j),w(this,_s).call(this)}};pr=new WeakMap,Vr=new WeakMap,Bt=new WeakMap,Kn=new WeakMap,ms=new WeakMap,_s=new WeakMap,Lo=new WeakMap;function Xt(r,t,n=!1){I&&tt();var s=new un(r),o=n?65536:0;function l(f,d){if(I){let h=oo(r)==="[!";if(f===h){var p=nn();_e(p),s.anchor=p,Be(!1),s.ensure(f,d),Be(!0);return}}s.ensure(f,d)}Vt(()=>{var f=!1;t((d,p=!0)=>{f=!0,l(p,d)}),f||l(!1,null)},o)}function hr(r,t){return t}function Xm(r,t,n){var g;for(var s=[],o=t.length,l,f=t.length,d=0;d<o;d++){let _=t[d];Yr(_,()=>{if(l){if(l.pending.delete(_),l.done.add(_),l.pending.size===0){var y=r.outrogroups;gl(ai(l.done)),y.delete(l),y.size===0&&(r.outrogroups=null)}}else f-=1},!1)}if(f===0){var p=s.length===0&&n!==null;if(p){var h=n,v=h.parentNode;Si(v),v.append(h),r.items.clear()}gl(t,!p)}else l={pending:new Set(t),done:new Set},((g=r.outrogroups)!=null?g:r.outrogroups=new Set).add(l)}function gl(r,t=!0){for(var n=0;n<r.length;n++)De(r[n],t)}var Mi;function mr(r,t,n,s,o,l=null){var f=r,d=new Map,p=(t&4)!==0;if(p){var h=r;f=I?_e(it(h)):h.appendChild(Ke())}I&&tt();var v=null,g=Bn(()=>{var M=n();return Tr(M)?M:M==null?[]:ai(M)}),_,y=!0;function x(){S.fallback=v,Jm(S,_,f,t,s),v!==null&&(_.length===0?(v.f&33554432)===0?ds(v):(v.f^=33554432,vs(v,null,f)):Yr(v,()=>{v=null}))}var D=Vt(()=>{_=T(g);var M=_.length;let N=!1;if(I){var G=oo(f)==="[!";G!==(M===0)&&(f=nn(),_e(f),Be(!1),N=!0)}for(var J=new Set,L=K,Q=Mo(),re=0;re<M;re+=1){I&&j.nodeType===Tt&&j.data==="]"&&(f=j,N=!0,Be(!1));var de=_[re],st=s(de,re),ce=y?null:d.get(st);ce?(ce.v&&fr(ce.v,de),ce.i&&fr(ce.i,re),Q&&L.skipped_effects.delete(ce.e)):(ce=Qm(d,y?f:Mi!=null?Mi:Mi=Ke(),de,st,re,o,t,n),y||(ce.e.f|=33554432),d.set(st,ce)),J.add(st)}if(M===0&&l&&!v&&(y?v=ze(()=>l(f)):(v=ze(()=>l(Mi!=null?Mi:Mi=Ke())),v.f|=33554432)),I&&M>0&&_e(nn()),!y)if(Q){for(let[Me,gr]of d)J.has(Me)||L.skipped_effects.add(gr.e);L.oncommit(x),L.ondiscard(()=>{})}else x();N&&Be(!0),T(g)}),S={effect:D,flags:t,items:d,outrogroups:null,fallback:v};y=!1,I&&(f=j)}function Jm(r,t,n,s,o){var ce,Me,gr,yt,Qt,yr,W,le,fe;var l=(s&8)!==0,f=t.length,d=r.items,p=r.effect.first,h,v=null,g,_=[],y=[],x,D,S,M;if(l)for(M=0;M<f;M+=1)x=t[M],D=o(x,M),S=d.get(D).e,(S.f&33554432)===0&&((Me=(ce=S.nodes)==null?void 0:ce.a)==null||Me.measure(),(g!=null?g:g=new Set).add(S));for(M=0;M<f;M+=1){if(x=t[M],D=o(x,M),S=d.get(D).e,r.outrogroups!==null)for(let Z of r.outrogroups)Z.pending.delete(S),Z.done.delete(S);if((S.f&33554432)!==0)if(S.f^=33554432,S===p)vs(S,null,n);else{var N=v?v.next:p;S===r.effect.last&&(r.effect.last=S.prev),S.prev&&(S.prev.next=S.next),S.next&&(S.next.prev=S.prev),Dn(r,v,S),Dn(r,S,N),vs(S,N,n),v=S,_=[],y=[],p=v.next;continue}if((S.f&8192)!==0&&(ds(S),l&&((yt=(gr=S.nodes)==null?void 0:gr.a)==null||yt.unfix(),(g!=null?g:g=new Set).delete(S))),S!==p){if(h!==void 0&&h.has(S)){if(_.length<y.length){var G=y[0],J;v=G.prev;var L=_[0],Q=_[_.length-1];for(J=0;J<_.length;J+=1)vs(_[J],G,n);for(J=0;J<y.length;J+=1)h.delete(y[J]);Dn(r,L.prev,Q.next),Dn(r,v,L),Dn(r,Q,G),p=G,v=Q,M-=1,_=[],y=[]}else h.delete(S),vs(S,p,n),Dn(r,S.prev,S.next),Dn(r,S,v===null?r.effect.first:v.next),Dn(r,v,S),v=S;continue}for(_=[],y=[];p!==null&&p!==S;)(h!=null?h:h=new Set).add(p),y.push(p),p=p.next;if(p===null)continue}(S.f&33554432)===0&&_.push(S),v=S,p=S.next}if(r.outrogroups!==null){for(let Z of r.outrogroups)Z.pending.size===0&&(gl(ai(Z.done)),(Qt=r.outrogroups)==null||Qt.delete(Z));r.outrogroups.size===0&&(r.outrogroups=null)}if(p!==null||h!==void 0){var re=[];if(h!==void 0)for(S of h)(S.f&8192)===0&&re.push(S);for(;p!==null;)(p.f&8192)===0&&p!==r.fallback&&re.push(p),p=p.next;var de=re.length;if(de>0){var st=(s&4)!==0&&f===0?n:null;if(l){for(M=0;M<de;M+=1)(W=(yr=re[M].nodes)==null?void 0:yr.a)==null||W.measure();for(M=0;M<de;M+=1)(fe=(le=re[M].nodes)==null?void 0:le.a)==null||fe.fix()}Xm(r,re,st)}}l&&$e(()=>{var Z,Pe;if(g!==void 0)for(S of g)(Pe=(Z=S.nodes)==null?void 0:Z.a)==null||Pe.apply()})}function Qm(r,t,n,s,o,l,f,d){var p=(f&1)!==0?(f&16)===0?Pr(n,!1,!1):ct(n):null,h=(f&2)!==0?ct(o):null;return E&&p&&(p.trace=()=>{var v;d()[(v=h==null?void 0:h.v)!=null?v:o]}),{v:p,i:h,e:ze(()=>(l(t,p!=null?p:n,h!=null?h:o,d),()=>{r.delete(s)}))}}function vs(r,t,n){if(r.nodes)for(var s=r.nodes.start,o=r.nodes.end,l=t&&(t.f&33554432)===0?t.nodes.start:n;s!==null;){var f=rt(s);if(l.before(s),s===o)return;s=f}}function Dn(r,t,n){t===null?r.effect.first=n:t.next=n,n===null?r.effect.last=t:n.prev=t}function Yo(r,t,n,s,o){var d;I&&tt();var l=(d=t.$$slots)==null?void 0:d[n],f=!1;l===!0&&(l=t[n==="default"?"children":n],f=!0),l===void 0?o!==null&&o(r):l(r,f?()=>s:s)}function yl(r){let t={};r.children&&(t.default=!0);for(let n in r.$$slots)t[n]=!0;return t}var r_=Qs?()=>performance.now():()=>Date.now(),_r={tick:r=>(Qs?requestAnimationFrame:bt)(r),now:()=>r_(),tasks:new Set};function ru(){let r=_r.now();_r.tasks.forEach(t=>{t.c(r)||(_r.tasks.delete(t),t.f())}),_r.tasks.size!==0&&_r.tick(ru)}function nu(r){let t;return _r.tasks.size===0&&_r.tick(ru),{promise:new Promise(n=>{_r.tasks.add(t={c:r,f:n})}),abort(){_r.tasks.delete(t)}}}function Po(r,t){ur(()=>{r.dispatchEvent(new CustomEvent(t))})}function o_(r){if(r==="float")return"cssFloat";if(r==="offset")return"cssOffset";if(r.startsWith("--"))return r;let t=r.split("-");return t.length===1?t[0]:t[0]+t.slice(1).map(n=>n[0].toUpperCase()+n.slice(1)).join("")}function iu(r){let t={},n=r.split(";");for(let s of n){let[o,l]=s.split(":");if(!o||l===void 0)break;let f=o_(o.trim());t[f]=l.trim()}return t}var a_=r=>r;function gs(r,t,n,s){var G,J;var o=(r&1)!==0,l=(r&2)!==0,f=o&&l,d=(r&4)!==0,p=f?"both":o?"in":"out",h,v=t.inert,g=t.style.overflow,_,y;function x(){return ur(()=>{var L;return h!=null?h:h=n()(t,(L=s==null?void 0:s())!=null?L:{},{direction:p})})}var D={is_global:d,in(){var L;if(t.inert=v,!o){y==null||y.abort(),(L=y==null?void 0:y.reset)==null||L.call(y);return}l||_==null||_.abort(),Po(t,"introstart"),_=wl(t,x(),y,1,()=>{Po(t,"introend"),_==null||_.abort(),_=h=void 0,t.style.overflow=g})},out(L){if(!l){L==null||L(),h=void 0;return}t.inert=!0,Po(t,"outrostart"),y=wl(t,x(),_,0,()=>{Po(t,"outroend"),L==null||L()})},stop:()=>{_==null||_.abort(),y==null||y.abort()}},S=P;if(((J=(G=S.nodes).t)!=null?J:G.t=[]).push(D),o&&Io){var M=d;if(!M){for(var N=S.parent;N&&(N.f&65536)!==0;)for(;(N=N.parent)&&(N.f&16)===0;);M=!N||(N.f&32768)!==0}M&&vt(()=>{Y(()=>D.in())})}}function wl(r,t,n,s,o){var l=s===1;if(La(t)){var f,d=!1;return $e(()=>{if(!d){var S=t({direction:l?"in":"out"});f=wl(r,S,n,s,o)}}),{abort:()=>{d=!0,f==null||f.abort()},deactivate:()=>f.deactivate(),reset:()=>f.reset(),t:()=>f.t()}}if(n==null||n.deactivate(),!(t!=null&&t.duration))return o(),{abort:bt,deactivate:bt,reset:bt,t:()=>s};let{delay:p=0,css:h,tick:v,easing:g=a_}=t;var _=[];if(l&&n===void 0&&(v&&v(0,1),h)){var y=iu(h(0,1));_.push(y,y)}var x=()=>1-s,D=r.animate(_,{duration:p,fill:"forwards"});return D.onfinish=()=>{var st;D.cancel();var S=(st=n==null?void 0:n.t())!=null?st:1-s;n==null||n.abort();var M=s-S,N=t.duration*Math.abs(M),G=[];if(N>0){var J=!1;if(h)for(var L=Math.ceil(N/16.666666666666668),Q=0;Q<=L;Q+=1){var re=S+M*g(Q/L),de=iu(h(re,1-re));G.push(de),J||(J=de.overflow==="hidden")}J&&(r.style.overflow="hidden"),x=()=>{var ce=D.currentTime;return S+M*g(ce/N)},v&&nu(()=>{if(D.playState!=="running")return!1;var ce=x();return v(ce,1-ce),!0})}D=r.animate(G,{duration:N,fill:"forwards"}),D.onfinish=()=>{x=()=>s,v==null||v(s,1-s),o()}},{abort:()=>{D&&(D.cancel(),D.effect=null,D.onfinish=bt)},deactivate:()=>{o=bt},reset:()=>{s===0&&(v==null||v(1,0))},t:()=>x()}}function vr(r,t){vt(()=>{var o;var n=r.getRootNode(),s=n.host?n:(o=n.head)!=null?o:n.ownerDocument.head;if(!s.querySelector("#"+t.hash)){let l=document.createElement("style");l.id=t.hash,l.textContent=t.code,s.appendChild(l),E&&qf(t.hash,l)}})}function xl(r,t,n){vt(()=>{var s=Y(()=>t(r,n==null?void 0:n())||{});if(n&&(s!=null&&s.update)){var o=!1,l={};Ge(()=>{var f=n();Se(f),o&&lo(l,f)&&(l=f,s.update(f))}),o=!0}if(s!=null&&s.destroy)return()=>s.destroy()})}var su=[...` 	
\r\f\xA0\v\uFEFF`];function ou(r,t,n){var s=r==null?"":""+r;if(t&&(s=s?s+" "+t:t),n){for(var o in n)if(n[o])s=s?s+" "+o:o;else if(s.length)for(var l=o.length,f=0;(f=s.indexOf(o,f))>=0;){var d=f+l;(f===0||su.includes(s[f-1]))&&(d===s.length||su.includes(s[d]))?s=(f===0?"":s.substring(0,f))+s.substring(d+1):f=d}}return s===""?null:s}function Wr(r,t,n,s,o,l){var f=r.__className;if(I||f!==n||f===void 0){var d=ou(n,s,l);(!I||d!==r.getAttribute("class"))&&(d==null?r.removeAttribute("class"):t?r.className=d:r.setAttribute("class",d)),r.__className=n}else if(l&&o!==l)for(var p in l){var h=!!l[p];(o==null||h!==!!o[p])&&r.classList.toggle(p,h)}return l}var m_=Symbol("is custom element"),__=Symbol("is html");function Tl(r){if(I){var t=!1,n=()=>{if(!t){if(t=!0,r.hasAttribute("value")){var s=r.value;kl(r,"value",null),r.value=s}if(r.hasAttribute("checked")){var o=r.checked;kl(r,"checked",null),r.checked=o}}};r.__on_r=n,$e(n),No()}}function Sl(r,t){var n=fu(r);n.value===(n.value=t!=null?t:void 0)||r.value===t&&(t!==0||r.nodeName!=="PROGRESS")||(r.value=t!=null?t:"")}function kl(r,t,n,s){var o=fu(r);if(I&&(o[t]=r.getAttribute(t),t==="src"||t==="srcset"||t==="href"&&r.nodeName==="LINK")){s||g_(r,t,n!=null?n:"");return}o[t]!==(o[t]=n)&&(t==="loading"&&(r[Hc]=n),n==null?r.removeAttribute(t):typeof n!="string"&&v_(r).includes(t)?r[t]=n:r.setAttribute(t,n))}function fu(r){var t;return(t=r.__attributes)!=null?t:r.__attributes={[m_]:r.nodeName.includes("-"),[__]:r.namespaceURI===nf}}var au=new Map;function v_(r){var t=r.getAttribute("is")||r.nodeName,n=au.get(t);if(n)return n;au.set(t,n=[]);for(var s,o=r,l=Element.prototype;l!==o;){s=eo(o);for(var f in s)s[f].set&&n.push(f);o=Cn(o)}return n}function g_(r,t,n){var s;E&&(t==="srcset"&&y_(r,n)||bl((s=r.getAttribute(t))!=null?s:"",n)||of(t,r.outerHTML.replace(r.innerHTML,r.innerHTML&&"..."),String(n)))}function bl(r,t){return r===t?!0:new URL(r,document.baseURI).href===new URL(t,document.baseURI).href}function lu(r){return r.split(",").map(t=>t.trim().split(" ").filter(Boolean))}function y_(r,t){var n=lu(r.srcset),s=lu(t);return s.length===n.length&&s.every(([o,l],f)=>l===n[f][1]&&(bl(n[f][0],o)||bl(o,n[f][0])))}function Dl(r,t,n=t){var s=new WeakSet;ll(r,"input",async o=>{E&&r.type==="checkbox"&&Ya();var l=o?r.defaultValue:r.value;if(l=El(r)?$l(l):l,n(l),K!==null&&s.add(K),await Co(),l!==(l=t())){var f=r.selectionStart,d=r.selectionEnd,p=r.value.length;if(r.value=l!=null?l:"",d!==null){var h=r.value.length;f===d&&d===p&&h>p?(r.selectionStart=h,r.selectionEnd=h):(r.selectionStart=f,r.selectionEnd=Math.min(d,h))}}}),(I&&r.defaultValue!==r.value||Y(t)==null&&r.value)&&(n(El(r)?$l(r.value):r.value),K!==null&&s.add(K)),Ge(()=>{var f;E&&r.type==="checkbox"&&Ya();var o=t();if(r===document.activeElement){var l=(f=is)!=null?f:K;if(s.has(l))return}El(r)&&o===$l(r.value)||r.type==="date"&&!o&&!r.value||o!==r.value&&(r.value=o!=null?o:"")})}function El(r){var t=r.type;return t==="number"||t==="range"}function $l(r){return r===""?null:+r}function uu(r,t){return r===t||(r==null?void 0:r[He])===t}function Ni(r={},t,n,s){return vt(()=>{var o,l;return Ge(()=>{o=l,l=(s==null?void 0:s())||[],Y(()=>{r!==n(...l)&&(t(r,...l),o&&uu(n(...o),r)&&t(null,...o))})}),()=>{$e(()=>{l&&uu(n(...l),r)&&t(null,...l)})}}),r}function ys(r=!1){let t=X,n=t.l.u;if(!n)return;let s=()=>Se(t.s);if(r){let o=0,l={},f=Sn(()=>{let d=!1,p=t.s;for(let h in p)p[h]!==l[h]&&(l[h]=p[h],d=!0);return d&&o++,o});s=()=>T(f)}n.b.length&&us(()=>{du(t,s),li(n.b)}),cn(()=>{let o=Y(()=>n.m.map(Wc));return()=>{for(let l of o)typeof l=="function"&&l()}}),n.a.length&&cn(()=>{du(t,s),li(n.a)})}function du(r,t){if(r.l.s)for(let n of r.l.s)T(n);t()}var Vo=!1;function Ml(r){var t=Vo;try{return Vo=!1,[r(),Vo]}finally{Vo=t}}function ut(r,t,n,s){var G,J;var o=!Er||(n&2)!==0,l=(n&8)!==0,f=(n&16)!==0,d=s,p=!0,h=()=>(p&&(p=!1,d=f?Y(s):s),d),v;if(l){var g=He in r||Ji in r;v=(J=(G=kt(r,t))==null?void 0:G.set)!=null?J:g&&t in r?L=>r[t]=L:void 0}var _,y=!1;l?[_,y]=Ml(()=>r[t]):_=r[t],_===void 0&&s!==void 0&&(_=h(),v&&(o&&Xc(t),v(_)));var x;if(o?x=()=>{var L=r[t];return L===void 0?h():(p=!0,L)}:x=()=>{var L=r[t];return L!==void 0&&(d=void 0),L===void 0?d:L},o&&(n&4)===0)return x;if(v){var D=r.$$legacy;return(function(L,Q){return arguments.length>0?((!o||!Q||D||y)&&v(Q?x():L),L):x()})}var S=!1,M=((n&1)!==0?Sn:Bn)(()=>(S=!1,x()));E&&(M.label=t),l&&T(M);var N=P;return(function(L,Q){if(arguments.length>0){let re=Q?T(M):o&&l?Ot(L):L;return U(M,re),S=!0,d!==void 0&&(d=re),L}return Zt&&S||(N.f&16384)!==0?M.v:T(M)})}function pu(r){return new Nl(r)}var pn,Jt,Nl=class{constructor(t){z(this,pn);z(this,Jt);var l,f;var n=new Map,s=(d,p)=>{var h=Pr(p,!1,!1);return n.set(d,h),h};let o=new Proxy({...t.props||{},$$events:{}},{get(d,p){var h;return T((h=n.get(p))!=null?h:s(p,Reflect.get(d,p)))},has(d,p){var h;return p===Ji?!0:(T((h=n.get(p))!=null?h:s(p,Reflect.get(d,p))),Reflect.has(d,p))},set(d,p,h){var v;return U((v=n.get(p))!=null?v:s(p,h),h),Reflect.set(d,p,h)}});B(this,Jt,(t.hydrate?vl:Ur)(t.component,{target:t.target,anchor:t.anchor,props:o,context:t.context,intro:(l=t.intro)!=null?l:!1,recover:t.recover})),!lt&&(!((f=t==null?void 0:t.props)!=null&&f.$$host)||t.sync===!1)&&Pn(),B(this,pn,o.$$events);for(let d of Object.keys(w(this,Jt)))d==="$set"||d==="$destroy"||d==="$on"||Je(this,d,{get(){return w(this,Jt)[d]},set(p){w(this,Jt)[d]=p},enumerable:!0});w(this,Jt).$set=d=>{Object.assign(o,d)},w(this,Jt).$destroy=()=>{fn(w(this,Jt))}}$set(t){w(this,Jt).$set(t)}$on(t,n){w(this,pn)[t]=w(this,pn)[t]||[];let s=(...o)=>n.call(this,...o);return w(this,pn)[t].push(s),()=>{w(this,pn)[t]=w(this,pn)[t].filter(o=>o!==s)}}$destroy(){w(this,Jt).$destroy()}};pn=new WeakMap,Jt=new WeakMap;var C_;typeof HTMLElement=="function"&&(C_=class extends HTMLElement{constructor(t,n,s){super();b(this,"$$ctor");b(this,"$$s");b(this,"$$c");b(this,"$$cn",!1);b(this,"$$d",{});b(this,"$$r",!1);b(this,"$$p_d",{});b(this,"$$l",{});b(this,"$$l_u",new Map);b(this,"$$me");this.$$ctor=t,this.$$s=n,s&&this.attachShadow({mode:"open"})}addEventListener(t,n,s){if(this.$$l[t]=this.$$l[t]||[],this.$$l[t].push(n),this.$$c){let o=this.$$c.$on(t,n);this.$$l_u.set(n,o)}super.addEventListener(t,n,s)}removeEventListener(t,n,s){if(super.removeEventListener(t,n,s),this.$$c){let o=this.$$l_u.get(n);o&&(o(),this.$$l_u.delete(n))}}async connectedCallback(){if(this.$$cn=!0,!this.$$c){let t=function(o){return l=>{let f=document.createElement("slot");o!=="default"&&(f.name=o),ae(l,f)}};if(await Promise.resolve(),!this.$$cn||this.$$c)return;let n={},s=R_(this);for(let o of this.$$s)o in s&&(o==="default"&&!this.$$d.children?(this.$$d.children=t(o),n.default=!0):n[o]=t(o));for(let o of this.attributes){let l=this.$$g_p(o.name);l in this.$$d||(this.$$d[l]=Al(l,o.value,this.$$p_d,"toProp"))}for(let o in this.$$p_d)!(o in this.$$d)&&this[o]!==void 0&&(this.$$d[o]=this[o],delete this[o]);this.$$c=pu({component:this.$$ctor,target:this.shadowRoot||this,props:{...this.$$d,$$slots:n,$$host:this}}),this.$$me=ul(()=>{Ge(()=>{var o;this.$$r=!0;for(let l of Ra(this.$$c)){if(!((o=this.$$p_d[l])!=null&&o.reflect))continue;this.$$d[l]=this.$$c[l];let f=Al(l,this.$$d[l],this.$$p_d,"toAttribute");f==null?this.removeAttribute(this.$$p_d[l].attribute||l):this.setAttribute(this.$$p_d[l].attribute||l,f)}this.$$r=!1})});for(let o in this.$$l)for(let l of this.$$l[o]){let f=this.$$c.$on(o,l);this.$$l_u.set(l,f)}this.$$l={}}}attributeChangedCallback(t,n,s){var o;this.$$r||(t=this.$$g_p(t),this.$$d[t]=Al(t,s,this.$$p_d,"toProp"),(o=this.$$c)==null||o.$set({[t]:this.$$d[t]}))}disconnectedCallback(){this.$$cn=!1,Promise.resolve().then(()=>{!this.$$cn&&this.$$c&&(this.$$c.$destroy(),this.$$me(),this.$$c=void 0)})}$$g_p(t){return Ra(this.$$p_d).find(n=>this.$$p_d[n].attribute===t||!this.$$p_d[n].attribute&&n.toLowerCase()===t)||t}});function Al(r,t,n,s){var l;let o=(l=n[r])==null?void 0:l.type;if(t=o==="Boolean"&&typeof t!="boolean"?t!=null:t,!s||!n[r])return t;if(s==="toAttribute")switch(o){case"Object":case"Array":return t==null?null:JSON.stringify(t);case"Boolean":return t?"":null;case"Number":return t==null?null:t;default:return t}else switch(o){case"Object":case"Array":return t&&JSON.parse(t);case"Boolean":return t;case"Number":return t!=null?+t:t;default:return t}}function R_(r){let t={};return r.childNodes.forEach(n=>{t[n.slot||"default"]=!0}),t}if(E){let r=function(t){if(!(t in globalThis)){let n;Object.defineProperty(globalThis,t,{configurable:!0,get:()=>{if(n!==void 0)return n;Jc(t)},set:s=>{n=s}})}};r("$state"),r("$effect"),r("$derived"),r("$inspect"),r("$props"),r("$bindable")}function Ai(r){X===null&&no("onMount"),Er&&X.l!==null?F_(X).m.push(r):cn(()=>{let t=Y(r);if(typeof t=="function")return t})}function F_(r){var n;var t=r.l;return(n=t.u)!=null?n:t.u={a:[],b:[],m:[]}}var hu,mu,_u;typeof window!="undefined"&&((_u=(mu=(hu=window.__svelte)!=null?hu:window.__svelte={}).v)!=null?_u:mu.v=new Set).add("5");uf();var Cl=en(Hr(),1);qe();var D1=require("obsidian");function Ze(r,t,n){var l;let s=/^---\r?\n([\s\S]*?)\r?\n---/,o=r.match(s);if(o){let f=(l=o[1])!=null?l:"",d=r.slice(o[0].length),p=f.split(`
`),h=!1,v=p.map(g=>{let _=g.split(":");return(_[0]?_[0].trim():"")===t?(h=!0,`${t}: ${n}`):g});return h||v.push(`${t}: ${n}`),`---
${v.join(`
`).trim()}
---${d}`}else return`---
${t}: ${n}
---
${r}`}function Ho(r){let t=(0,Cl.default)().format("YYYY-MM-DD-HHmm"),n=Math.random().toString(36).substring(2,6).padEnd(4,"0"),o=r.replace(/[\\/:*?"<>|]/g,"-").replace(/\s+/g,"-").replace(/-+/g,"-");return`${t}-${n}-${o}.md`}function gu(r){let n=`## Daily Stack - ${(0,Cl.default)().format("YYYY-MM-DD")}

`;return r.forEach(s=>{let o=s.startTime?s.startTime.format("HH:mm"):"00:00",l=`[[${s.id}|${s.title}]]`;n+=`- [ ] ${o} ${l} (${s.duration}m)
`}),n}qe();var yu=en(Hr(),1),Bo=class{constructor(t,n){this.app=t;this.targetFolder=n}async submitThought(t){if(!t.trim())return null;await this.ensureFolderExists(this.targetFolder);let n=Ho(t),s=`${this.targetFolder}/${n}`,o=`# ${t}`;return o=Ze(o,"task",t),o=Ze(o,"status","todo"),o=Ze(o,"duration",30),o=Ze(o,"created",(0,yu.default)().format("YYYY-MM-DD HH:mm")),o=Ze(o,"type","task"),o=Ze(o,"flow_state","dump"),await this.app.vault.create(s,o),{id:s,title:t,status:"todo",duration:30,isAnchored:!1,children:[]}}async ensureFolderExists(t){this.app.vault.getAbstractFileByPath(t)||await this.app.vault.createFolder(t)}};var Y_=ue('<h2 class="todo-flow-card-header svelte-1s7zazm"> </h2>'),P_=ue('<div class="todo-flow-card-actions svelte-1s7zazm"><!></div>'),U_=ue('<div><!> <div class="todo-flow-card-body svelte-1s7zazm"><!></div> <!></div>'),V_={hash:"svelte-1s7zazm",code:`.todo-flow-card.svelte-1s7zazm {display:flex;flex-direction:column;width:100%;max-width:600px; /* Default constraint */background:var(--background-secondary);border:1px solid var(--background-modifier-border);border-radius:8px;padding:2rem;box-shadow:0 4px 12px rgba(0, 0, 0, 0.1);transition:transform 0.2s, opacity 0.2s;gap:1.5rem;}

   /* Headers */.todo-flow-card-header.svelte-1s7zazm {text-align:center;color:var(--text-muted);font-weight:500;margin:0;font-size:1.1rem;opacity:0.9;text-transform:uppercase;letter-spacing:0.05em;}

   /* Body */.todo-flow-card-body.svelte-1s7zazm {flex:1;width:100%;display:flex;flex-direction:column;align-items:center;justify-content:center;}

   /* Actions Footer */.todo-flow-card-actions.svelte-1s7zazm {display:flex;justify-content:center;gap:1rem;margin-top:auto;}

   /* Variant: Triage overrides */.todo-flow-card.variant-triage.svelte-1s7zazm {max-width:400px;height:300px;text-align:center;}

   /* Variant: Dump overrides */`};function xs(r,t){let n=yl(t);vr(r,V_);let s=ut(t,"title",8,void 0),o=ut(t,"variant",8,"default");var l=U_(),f=F(l);{var d=_=>{var y=Y_(),x=F(y,!0);C(y),Ce(()=>ve(x,s())),ae(_,y)};Xt(f,_=>{s()&&_(d)})}var p=q(f,2),h=F(p);Yo(h,t,"default",{},null),C(p);var v=q(p,2);{var g=_=>{var y=P_(),x=F(y);Yo(x,t,"actions",{},null),C(y),ae(_,y)};Xt(v,_=>{Y(()=>n.actions)&&_(g)})}C(l),Ce(()=>{var _;return Wr(l,1,`todo-flow-card variant-${(_=o())!=null?_:""}`,"svelte-1s7zazm")}),ae(r,l)}qe();var W_=ue('<textarea placeholder="Type and press Enter..." class="todo-flow-dump-input svelte-rg61pz"></textarea> <p class="todo-flow-dump-hint svelte-rg61pz">Type <strong>done</strong> and press Enter to start triage.</p>',1),H_=ue('<div class="todo-flow-dump-container svelte-rg61pz"><!></div>'),B_={hash:"svelte-rg61pz",code:`.todo-flow-dump-container.svelte-rg61pz {display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;width:100%;background:var(--background-primary);padding:2rem;}.todo-flow-dump-hint.svelte-rg61pz {text-align:center;color:var(--text-muted);font-size:0.85rem;margin-top:1rem;opacity:0.7;}.todo-flow-dump-input.svelte-rg61pz {width:100%;
        /* Minimal height that grows a bit if needed, but keeps layout centered */min-height:150px;font-size:1.5rem;border:none;outline:none;resize:none;background:transparent;color:var(--text-normal);line-height:1.6;font-family:inherit;text-align:left;}.todo-flow-dump-input.svelte-rg61pz::placeholder {color:var(--text-muted);font-style:italic;text-align:center; /* Placeholder can be centered */opacity:0.5;}`};function Rl(r,t){sr(t,!1),vr(r,B_);let n=ut(t,"app",8),s=ut(t,"folder",8),o=ut(t,"onComplete",8),l=Pr(""),f,d=Pr(),p=[];Ai(()=>{var _;f=new Bo(n(),s()),(_=T(d))==null||_.focus()});async function h(_){if(_.key==="Enter"&&!_.shiftKey){_.preventDefault();let y=T(l).trim();if(y.toLowerCase()==="done"){U(l,""),o()&&o()(p);return}if(y){U(l,"");let x=await f.submitThought(y);x&&(p=[...p,x])}}}ys();var v=H_(),g=F(v);xs(g,{title:"Dump your thoughts",variant:"dump",children:(_,y)=>{var x=W_(),D=ol(x);al(D),Ni(D,S=>U(d,S),()=>T(d)),Ie(2),Dl(D,()=>T(l),S=>U(l,S)),hs("keydown",D,h),ae(_,x)},$$slots:{default:!0}}),C(v),ae(r,v),or()}qe();var zo="todo-flow-dump-view",Go=class extends wu.ItemView{constructor(n,s,o){super(n);b(this,"component");b(this,"folder");b(this,"onComplete");this.folder=s,this.onComplete=o}getViewType(){return zo}getDisplayText(){return"Todo Dump"}async onOpen(){this.component=Ur(Rl,{target:this.contentEl,props:{app:this.app,folder:this.folder,onComplete:n=>{this.onComplete(n),this.leaf.detach()}}})}async onClose(){this.component&&fn(this.component)}};var Tu=require("obsidian");qe();qn();var Ko=class{constructor(t,n,s){this.app=t;this.tasks=n;b(this,"index",0);b(this,"shortlistIndices",new Set);b(this,"notNowIndices",new Set);b(this,"logger");this.logger=s,this.logger&&this.logger.info(`[TriageController] Initialized with ${n.length} tasks.`)}getCurrentTask(){return this.index>=this.tasks.length?null:this.tasks[this.index]}async swipeRight(){if(this.index>=this.tasks.length)return;let t=this.tasks[this.index];this.shortlistIndices.add(this.index),this.logger&&await this.logger.info(`[TriageController] Swiping Right on ${t.id} (flow_state -> shortlist)`),await this.updateFlowState(t.id,"shortlist"),this.index++}async swipeLeft(){this.index>=this.tasks.length||(this.notNowIndices.add(this.index),this.index++)}async updateFlowState(t,n){this.logger&&await this.logger.info(`[TriageController] updateFlowState: Setting ${t} to "${n}"`);let s=this.app.vault.getAbstractFileByPath(t);s&&s.extension==="md"&&await this.app.vault.process(s,o=>Ze(o,"flow_state",n))}getResults(){return{shortlist:this.tasks.filter((t,n)=>this.shortlistIndices.has(n)),notNow:this.tasks.filter((t,n)=>this.notNowIndices.has(n))}}};qe();var G_=r=>r;function z_(r){let t=r-1;return t*t*t+1}function ku(r,{delay:t=0,duration:n=400,easing:s=G_}={}){let o=+getComputedStyle(r).opacity;return{delay:t,duration:n,easing:s,css:l=>`opacity: ${l*o}`}}var Fl=!1;function bu(r,{delay:t=0,duration:n=400,easing:s=z_,axis:o="y"}={}){let l=getComputedStyle(r);E&&!Fl&&/(contents|inline|table)/.test(l.display)&&(Fl=!0,Promise.resolve().then(()=>Fl=!1),ff(l.display));let f=+l.opacity,d=o==="y"?"height":"width",p=parseFloat(l[d]),h=o==="y"?["top","bottom"]:["left","right"],v=h.map(M=>`${M[0].toUpperCase()}${M.slice(1)}`),g=parseFloat(l[`padding${v[0]}`]),_=parseFloat(l[`padding${v[1]}`]),y=parseFloat(l[`margin${v[0]}`]),x=parseFloat(l[`margin${v[1]}`]),D=parseFloat(l[`border${v[0]}Width`]),S=parseFloat(l[`border${v[1]}Width`]);return{delay:t,duration:n,easing:s,css:M=>`overflow: hidden;opacity: ${Math.min(M*20,1)*f};${d}: ${M*p}px;padding-${h[0]}: ${M*g}px;padding-${h[1]}: ${M*_}px;margin-${h[0]}: ${M*y}px;margin-${h[1]}: ${M*x}px;border-${h[0]}-width: ${M*D}px;border-${h[1]}-width: ${M*S}px;min-${d}: 0`}}var Ri={navUp:["k","ArrowUp"],navDown:["j","ArrowDown"],moveUp:["K","Shift+ArrowUp"],moveDown:["J","Shift+ArrowDown"],anchor:["Shift+F"],durationUp:["f","ArrowRight"],durationDown:["d","ArrowLeft"],undo:["u","U"],redo:["Shift+U"],confirm:["Enter"],cancel:["Escape"],toggleDone:["x","X"],createTask:["c","C"],deleteTask:["Backspace","Delete"],forceOpen:["Shift+Enter"],goBack:["h"],export:["Shift+E","Cmd+s","Ctrl+s"],rename:["e"],archive:["z","Z"],toggleHelp:["?"]},Ci=class{constructor(t){this.settings=t}resolveAction(t){for(let[n,s]of Object.entries(this.settings))if(Array.isArray(s)&&s.some(o=>this.matchesBinding(o,t))){let o=this.mapToActions(n);if(o)return this.settings.debug&&console.debug(`[TODO_FLOW_TRACE] Key matched: ${t.key} (code: ${t.code}) -> ${o}`),o}return null}mapToActions(t){return{navUp:"NAV_UP",navDown:"NAV_DOWN",moveUp:"MOVE_UP",moveDown:"MOVE_DOWN",anchor:"ANCHOR",durationUp:"DURATION_UP",durationDown:"DURATION_DOWN",undo:"UNDO",redo:"REDO",confirm:"CONFIRM",cancel:"CANCEL",toggleDone:"TOGGLE_DONE",createTask:"CREATE_TASK",deleteTask:"DELETE_TASK",forceOpen:"FORCE_OPEN",goBack:"GO_BACK",export:"EXPORT",rename:"RENAME",archive:"ARCHIVE",toggleHelp:"TOGGLE_HELP"}[t]||null}matchesBinding(t,n){let s=t.split("+"),o=s[s.length-1],l=s.slice(0,-1);if(o.length===1&&o.toLowerCase()!==o.toUpperCase()){if(l.length===0)return!(n.key!==o||n.ctrlKey||n.altKey||n.metaKey);if(n.key.toLowerCase()!==o.toLowerCase())return!1}else if(o!==n.key&&o!==n.code)return!1;let d=l.includes("Shift"),p=l.includes("Ctrl"),h=l.includes("Alt"),v=l.includes("Meta");return!!n.shiftKey!==d&&!(o.length===1&&n.key===o&&!d&&n.shiftKey)||!!n.ctrlKey!==p||!!n.altKey!==h||!!n.metaKey!==v?!1:(this.settings.debug&&n.key==="h"&&console.log(`[TODO_FLOW_TRACE] matchesBinding check for 'h': binding=${t}, key=${n.key}, shift=${n.shiftKey}, ctrl=${n.ctrlKey}, alt=${n.altKey}, meta=${n.metaKey}`),!0)}};var qo=class{constructor(){b(this,"undoStack",[]);b(this,"redoStack",[]);b(this,"maxStackSize",50)}async executeCommand(t){await t.execute(),this.undoStack.push(t),this.redoStack=[],this.undoStack.length>this.maxStackSize&&this.undoStack.shift()}undo(){let t=this.undoStack.pop();t&&(t.undo(),this.redoStack.push(t))}redo(){let t=this.redoStack.pop();t&&(t.execute(),this.undoStack.push(t))}canUndo(){return this.undoStack.length>0}canRedo(){return this.redoStack.length>0}clear(){this.undoStack=[],this.redoStack=[]}getStackSizes(){return{undo:this.undoStack.length,redo:this.redoStack.length}}};var Zo=class{constructor(t,n){b(this,"description");b(this,"controller");b(this,"direction");b(this,"previousIndex");this.controller=t,this.direction=n,this.description=`Swipe ${n}`,this.previousIndex=this.controller.index}async execute(){this.direction==="left"?await this.controller.swipeLeft():await this.controller.swipeRight()}undo(){this.controller.index=this.previousIndex,this.direction==="left"?this.controller.notNowIndices.delete(this.previousIndex):this.controller.shortlistIndices.delete(this.previousIndex)}};var j_=ue('<div class="todo-flow-triage-hint svelte-1nn2yzl">\u2190 Not Now | Shortlist \u2192</div>'),K_=ue("<div><!></div>"),q_=ue('<div class="todo-flow-triage-done"><h2>All done!</h2> <p>Your shortlist has been updated.</p></div>'),Z_=ue('<div class="todo-flow-triage-container svelte-1nn2yzl"><!> <div class="todo-flow-triage-controls svelte-1nn2yzl"><button class="control-btn not-now svelte-1nn2yzl">\u2190 Not Now</button> <button class="control-btn undo svelte-1nn2yzl">Undo</button> <button class="control-btn shortlist svelte-1nn2yzl">Shortlist \u2192</button></div></div>'),X_={hash:"svelte-1nn2yzl",code:`.todo-flow-triage-container.svelte-1nn2yzl {display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;padding:2rem;background:var(--background-primary);gap:2rem;}.triage-card-wrapper.svelte-1nn2yzl {
        /* Wrapper handles positioning and animation, Card handles visual box */transition:transform 0.2s, opacity 0.2s;width:100%;max-width:400px; /* Match Card variant-triage width */display:flex;justify-content:center;}.triage-card-wrapper.left.svelte-1nn2yzl {transform:translateX(-100px) rotate(-10deg);opacity:0;}.triage-card-wrapper.right.svelte-1nn2yzl {transform:translateX(100px) rotate(10deg);opacity:0;}.todo-flow-triage-hint.svelte-1nn2yzl {margin-top:1rem;color:var(--text-muted);font-size:0.9rem;}.todo-flow-triage-controls.svelte-1nn2yzl {display:flex;gap:1rem;}.control-btn.svelte-1nn2yzl {padding:0.5rem 1rem;border-radius:0.5rem;cursor:pointer;border:1px solid var(--background-modifier-border);background:var(--background-secondary);color:var(--text-normal);transition:background 0.2s;}.control-btn.svelte-1nn2yzl:hover {background:var(--background-modifier-hover);}.shortlist.svelte-1nn2yzl {background:var(--interactive-accent);color:var(--text-on-accent);}`};function Il(r,t){sr(t,!0),vr(r,X_);let n=ut(t,"debug",3,!1),s,o=Ye(null),l=Ye(null),f;Ai(()=>{s=new Ko(t.app,t.tasks),U(o,s.getCurrentTask(),!0),f=new Ci(t.keys||{navUp:[],navDown:[],moveUp:[],moveDown:[],anchor:[],durationUp:["ArrowRight"],durationDown:["ArrowLeft"],undo:["u"],confirm:[],cancel:[]})});function d(N){U(l,N,!0),setTimeout(async()=>{await t.historyManager.executeCommand(new Zo(s,N)),U(o,s.getCurrentTask(),!0),U(l,null),T(o)||t.onComplete(s.getResults())},200)}function p(N){if(n()&&console.debug("[TODO_FLOW_TRACE] Triage handleKeyDown:",N.key),N.target instanceof HTMLInputElement||N.target instanceof HTMLTextAreaElement||N.target.isContentEditable)return;["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"," "].includes(N.key)&&N.preventDefault();let G=f.resolveAction(N);if(G){if(N.preventDefault(),G==="UNDO"){t.historyManager.undo(),U(o,s.getCurrentTask(),!0);return}if(G==="REDO"){t.historyManager.redo(),U(o,s.getCurrentTask(),!0);return}switch(G){case"DURATION_DOWN":case"NAV_DOWN":d("left");break;case"DURATION_UP":case"NAV_UP":d("right");break}}}var h={handleKeyDown:p},v=Z_(),g=F(v);{var _=N=>{var G=K_(),J=F(G);xs(J,{get title(){return T(o).title},variant:"triage",children:(L,Q)=>{var re=j_();ae(L,re)},$$slots:{default:!0}}),C(G),Ce(()=>{var L;return Wr(G,1,`triage-card-wrapper ${(L=T(l))!=null?L:""}`,"svelte-1nn2yzl")}),gs(3,G,()=>bu),ae(N,G)},y=N=>{var G=q_();ae(N,G)};Xt(g,N=>{T(o)?N(_):N(y,!1)})}var x=q(g,2),D=F(x);D.__click=()=>d("left");var S=q(D,2);S.__click=()=>{t.historyManager.undo(),U(o,s.getCurrentTask(),!0)};var M=q(S,2);return M.__click=()=>d("right"),C(x),C(v),ae(r,v),or(h)}Ei(["click"]);qe();qn();var Ll="todo-flow-triage-view",ks=class r extends Tu.ItemView{constructor(n,s,o,l,f,d){super(n);b(this,"component");b(this,"tasks");b(this,"keys");b(this,"onComplete");b(this,"historyManager");b(this,"logger");this.tasks=s,this.keys=o||Ri,this.historyManager=l,this.logger=f,this.onComplete=d}getViewType(){return Ll}getDisplayText(){return"Task Triage"}async onOpen(){this.registerDomEvent(window,"keydown",n=>{this.app.workspace.getActiveViewOfType(r)===this&&this.component&&this.component.handleKeyDown(n)}),this.component=Ur(Il,{target:this.contentEl,props:{app:this.app,tasks:this.tasks,keys:this.keys,debug:this.keys.debug,historyManager:this.historyManager,onComplete:n=>{this.onComplete(n),this.leaf.detach()}}})}async onClose(){this.component&&fn(this.component)}};var Au=require("obsidian");var Yl=en(Hr(),1);qe();var Fi=[5,10,15,20,30,45,60,90,120,180,240,300,360,420,480],bs=class{constructor(t,n,s,o){b(this,"tasks");b(this,"currentTime");b(this,"onTaskUpdate");b(this,"onTaskCreate");this.currentTime=n,this.onTaskUpdate=s,this.onTaskCreate=o,this.tasks=gt(t,n)}updateTime(t){this.currentTime=t,this.tasks=gt(this.tasks,this.currentTime)}getTasks(){return this.tasks}moveUp(t){var l,f;if(t<=0||(l=this.tasks[t])!=null&&l.isAnchored)return t;let n=t-1;for(;n>=0&&((f=this.tasks[n])!=null&&f.isAnchored);)n--;if(n<0)return t;let s=this.tasks[t],o=[...this.tasks];return[o[t],o[n]]=[o[n],o[t]],this.tasks=gt(o,this.currentTime),this.tasks.findIndex(d=>d.id===s.id)}moveDown(t){var l,f;if(t>=this.tasks.length-1||(l=this.tasks[t])!=null&&l.isAnchored)return t;let n=t+1;for(;n<this.tasks.length&&((f=this.tasks[n])!=null&&f.isAnchored);)n++;if(n>=this.tasks.length)return t;let s=this.tasks[t],o=[...this.tasks];return[o[t],o[n]]=[o[n],o[t]],this.tasks=gt(o,this.currentTime),this.tasks.findIndex(d=>d.id===s.id)}toggleAnchor(t,n){var d;if(!this.tasks[t])return t;let s=this.tasks[t],o={...s};o.isAnchored=!o.isAnchored,o.isAnchored&&n?o.startTime=(0,Yl.default)(n):o.isAnchored&&(o.startTime=(0,Yl.default)(o.startTime));let l=[...this.tasks];l[t]=o,this.tasks=gt(l,this.currentTime);let f=this.tasks.findIndex(p=>p.id===s.id);return f!==-1?((d=this.onTaskUpdate)==null||d.call(this,this.tasks[f]),f):t}toggleStatus(t){var f;if(!this.tasks[t])return t;let n=this.tasks[t],s={...n};s.status=s.status==="todo"?"done":"todo";let o=[...this.tasks];o[t]=s,this.tasks=gt(o,this.currentTime);let l=this.tasks.findIndex(d=>d.id===n.id);return l!==-1?((f=this.onTaskUpdate)==null||f.call(this,this.tasks[l]),l):t}updateTaskTitle(t,n){var d;if(!this.tasks[t])return t;let s=this.tasks[t],o={...s};o.title=n;let l=[...this.tasks];l[t]=o,this.tasks=gt(l,this.currentTime);let f=this.tasks.findIndex(p=>p.id===s.id);return f!==-1?((d=this.onTaskUpdate)==null||d.call(this,this.tasks[f]),f):t}addTaskAt(t,n){if(!this.onTaskCreate)return null;let s=this.onTaskCreate(n),o=[...this.tasks];o.splice(t+1,0,s),this.tasks=gt(o,this.currentTime);let l=this.tasks.findIndex(f=>f.id===s.id);return{task:s,index:l}}removeTask(t){if(!this.tasks[t])return;let n=[...this.tasks];n.splice(t,1),this.tasks=gt(n,this.currentTime)}insertTask(t,n){let s=[...this.tasks];s.splice(t,0,n),this.tasks=gt(s,this.currentTime)}scaleDuration(t,n){var v,g;if(!this.tasks[t])return t;let s=this.tasks[t],o={...s},l=Wo(o),f=(v=o.originalDuration)!=null?v:o.duration,d=Fi.findIndex(_=>_>=f);d===-1&&(d=Fi.length-1),n==="up"?(Fi[d]===f&&(d=Math.min(Fi.length-1,d+1)),o.originalDuration=Fi[d]):(d=Math.max(0,d-1),o.originalDuration=Fi[d]);let p=[...this.tasks];p[t]=o,this.tasks=gt(p,this.currentTime);let h=this.tasks.findIndex(_=>_.id===s.id);return h!==-1?((g=this.onTaskUpdate)==null||g.call(this,this.tasks[h]),h):t}handleEnter(t,n=!1){if(!this.tasks[t])return null;let s=this.tasks[t];return!n&&s.children&&s.children.length>0?{action:"DRILL_DOWN",newStack:s.children}:{action:"OPEN_FILE",path:s.id}}};qe();function Su(r){if(r<60)return`${r}m`;let t=Math.floor(r/60),n=r%60;return n===0?`${t}h`:`${t}h ${n}m`}var Eu=en(Hr());qe();var Ts=class{constructor(t,n,s){b(this,"description");b(this,"controller");b(this,"index");b(this,"direction");b(this,"resultIndex",null);this.controller=t,this.index=n,this.direction=s,this.description=`Move task ${s} from index ${n}`}execute(){this.direction==="up"?this.resultIndex=this.controller.moveUp(this.index):this.resultIndex=this.controller.moveDown(this.index)}undo(){this.resultIndex!==null&&(this.direction==="up"?this.controller.moveDown(this.resultIndex):this.controller.moveUp(this.resultIndex))}},Xo=class{constructor(t,n){b(this,"description");b(this,"controller");b(this,"index");b(this,"resultIndex",null);this.controller=t,this.index=n,this.description=`Toggle anchor at index ${n}`}execute(){this.resultIndex=this.controller.toggleAnchor(this.index)}undo(){this.resultIndex!==null&&this.controller.toggleAnchor(this.resultIndex)}},Ss=class{constructor(t,n,s){b(this,"description");b(this,"controller");b(this,"index");b(this,"direction");b(this,"resultIndex",null);this.controller=t,this.index=n,this.direction=s,this.description=`Scale duration ${s} at index ${n}`}execute(){this.resultIndex=this.controller.scaleDuration(this.index,this.direction)}undo(){if(this.resultIndex===null)return;let t=this.direction==="up"?"down":"up";this.controller.scaleDuration(this.resultIndex,t)}},Jo=class{constructor(t,n){b(this,"description");b(this,"controller");b(this,"index");b(this,"resultIndex",null);this.controller=t,this.index=n,this.description=`Toggle status at index ${n}`}execute(){this.resultIndex=this.controller.toggleStatus(this.index)}undo(){this.resultIndex!==null&&this.controller.toggleStatus(this.resultIndex)}},Qo=class{constructor(t,n,s){b(this,"description");b(this,"controller");b(this,"index");b(this,"title");b(this,"addedTask",null);b(this,"resultIndex",null);this.controller=t,this.index=n,this.title=s,this.description=`Add task "${s}" at index ${n}`}execute(){let t=this.controller.addTaskAt(this.index,this.title);t&&(this.addedTask=t.task,this.resultIndex=t.index)}undo(){this.resultIndex!==null?this.controller.removeTask(this.resultIndex):this.controller.removeTask(this.index+1)}},ea=class{constructor(t,n){b(this,"description");b(this,"controller");b(this,"index");b(this,"deletedTask");this.controller=t,this.index=n,this.deletedTask=t.getTasks()[n]||null,this.description=`Delete task at index ${n}`}execute(){this.controller.removeTask(this.index)}undo(){this.deletedTask&&this.controller.insertTask(this.index,this.deletedTask)}},ta=class{constructor(t,n,s){b(this,"description");b(this,"controller");b(this,"index");b(this,"task");b(this,"onSync");this.controller=t,this.index=n,this.task=t.getTasks()[n],this.onSync=s,this.description=`Archive task at index ${n}`}async execute(){let t={...this.task,flow_state:"archived"};await this.onSync(t),this.controller.removeTask(this.index)}async undo(){let t={...this.task,flow_state:"shortlist"};await this.onSync(t),this.controller.insertTask(this.index,this.task)}};var J_=ue('<span class="key svelte-1erif2g"> </span>'),Q_=ue('<span class="key svelte-1erif2g"> </span>'),ev=ue('<span class="key svelte-1erif2g"> </span>'),tv=ue('<span class="key svelte-1erif2g"> </span>'),rv=ue('<span class="key svelte-1erif2g"> </span>'),nv=ue('<span class="key svelte-1erif2g"> </span>'),iv=ue('<span class="key svelte-1erif2g"> </span>'),sv=ue('<div class="todo-flow-help-modal svelte-1erif2g"><div class="content svelte-1erif2g"><h2 class="svelte-1erif2g">Keyboard Shortcuts</h2> <div class="grid svelte-1erif2g"><div class="section"><h3 class="svelte-1erif2g">Navigation</h3> <div class="row svelte-1erif2g"><div class="keys-group svelte-1erif2g"><!> / <!></div> <span>Move Focus</span></div> <div class="row svelte-1erif2g"><div class="keys-group svelte-1erif2g"><!> / <!></div> <span>Open / Drill Down</span></div> <div class="row svelte-1erif2g"><div class="keys-group svelte-1erif2g"></div> <span>Go Back</span></div></div> <div class="section"><h3 class="svelte-1erif2g">Actions</h3> <div class="row svelte-1erif2g"><span class="key svelte-1erif2g"> </span> <span>Toggle Done</span></div> <div class="row svelte-1erif2g"><span class="key svelte-1erif2g"> </span> <span>Create Task</span></div> <div class="row svelte-1erif2g"><span class="key svelte-1erif2g"> </span> <span>Rename Task</span></div> <div class="row svelte-1erif2g"><span class="key svelte-1erif2g"> </span> <span>Delete Task</span></div> <div class="row svelte-1erif2g"><span class="key svelte-1erif2g"> </span> <span>Export to Note</span></div></div> <div class="section"><h3 class="svelte-1erif2g">Organization</h3> <div class="row svelte-1erif2g"><div class="keys-group svelte-1erif2g"><span class="key svelte-1erif2g"> </span> / <span class="key svelte-1erif2g"> </span></div> <span>Move Task</span></div> <div class="row svelte-1erif2g"><span class="key svelte-1erif2g"> </span> <span>Toggle Anchor</span></div> <div class="row svelte-1erif2g"><div class="keys-group svelte-1erif2g"><!> / <!></div> <span>Adjust Duration</span></div> <div class="row svelte-1erif2g"><span class="key svelte-1erif2g"> </span> / <span class="key svelte-1erif2g"> </span> <span>Undo / Redo</span></div></div> <div class="section"><h3 class="svelte-1erif2g">System</h3> <div class="row svelte-1erif2g"><span>Timing Mode</span> <span> </span></div> <div class="help-text svelte-1erif2g">Toggle via Command Palette: <b>"Toggle Timing Mode"</b></div></div></div> <div class="footer svelte-1erif2g">Press <span class="key svelte-1erif2g">?</span> or <span class="key svelte-1erif2g">Esc</span> to close</div></div></div>'),ov={hash:"svelte-1erif2g",code:".todo-flow-help-modal.svelte-1erif2g {position:absolute;top:0;left:0;width:100%;height:100%;background:rgba(0, 0, 0, 0.85); /* Gmail style dark overlay */display:flex;align-items:center;justify-content:center;z-index:1000;backdrop-filter:blur(2px);}.content.svelte-1erif2g {background:var(--background-primary);color:var(--text-normal);border:1px solid var(--background-modifier-border);border-radius:8px;padding:30px;box-shadow:0 10px 30px rgba(0, 0, 0, 0.5);max-width:600px;width:90%;max-height:90%;overflow-y:auto;}h2.svelte-1erif2g {margin-top:0;margin-bottom:20px;text-align:center;color:var(--text-accent);}.grid.svelte-1erif2g {display:grid;grid-template-columns:repeat(auto-fit, minmax(180px, 1fr));gap:20px;margin-bottom:20px;}h3.svelte-1erif2g {font-size:0.9em;text-transform:uppercase;letter-spacing:0.1em;margin-bottom:10px;color:var(--text-muted);border-bottom:1px solid var(--background-modifier-border);padding-bottom:5px;}.row.svelte-1erif2g {display:flex;justify-content:space-between;margin-bottom:8px;font-size:0.95em;}.key.svelte-1erif2g {font-family:monospace;background:var(--background-secondary);border:1px solid var(--background-modifier-border);border-radius:4px;padding:2px 6px;font-size:0.85em;color:var(--text-normal);}.footer.svelte-1erif2g {text-align:center;margin-top:20px;color:var(--text-muted);font-size:0.9em;}.keys-group.svelte-1erif2g {display:flex;gap:6px;}.status-badge.svelte-1erif2g {font-size:0.85em;font-weight:bold;color:var(--text-accent);}.status-badge.fixed.svelte-1erif2g {color:var(--text-warning);}.help-text.svelte-1erif2g {font-size:0.8em;color:var(--text-muted);margin-top:10px;font-style:italic;}"};function Pl(r,t){sr(t,!1),vr(r,ov);let n=ut(t,"keys",8),s=ut(t,"settings",8);function o(Ne){return Ne?Ne.replace("ArrowUp","\u2191").replace("ArrowDown","\u2193").replace("ArrowLeft","\u2190").replace("ArrowRight","\u2192").replace("Enter","\u23CE").replace("Backspace","\u232B").replace("Shift","\u21E7").replace("Cmd","\u2318").replace("Ctrl","Ctrl").replace("Alt","Opt").replace("Meta","\u2318").replace(/\+/g,"+"):""}ys();var l=sv(),f=F(l),d=q(F(f),2),p=F(d),h=q(F(p),2),v=F(h),g=F(v);mr(g,1,()=>(Se(n()),Y(()=>n().navDown)),hr,(Ne,ee)=>{var se=J_(),Ue=F(se,!0);C(se),Ce(Re=>ve(Ue,Re),[()=>(T(ee),Y(()=>o(T(ee))))]),ae(Ne,se)});var _=q(g,2);mr(_,1,()=>(Se(n()),Y(()=>n().navUp)),hr,(Ne,ee)=>{var se=Q_(),Ue=F(se,!0);C(se),Ce(Re=>ve(Ue,Re),[()=>(T(ee),Y(()=>o(T(ee))))]),ae(Ne,se)}),C(v),Ie(2),C(h);var y=q(h,2),x=F(y),D=F(x);mr(D,1,()=>(Se(n()),Y(()=>n().confirm)),hr,(Ne,ee)=>{var se=ev(),Ue=F(se,!0);C(se),Ce(Re=>ve(Ue,Re),[()=>(T(ee),Y(()=>o(T(ee))))]),ae(Ne,se)});var S=q(D,2);mr(S,1,()=>(Se(n()),Y(()=>n().forceOpen)),hr,(Ne,ee)=>{var se=tv(),Ue=F(se,!0);C(se),Ce(Re=>ve(Ue,Re),[()=>(T(ee),Y(()=>o(T(ee))))]),ae(Ne,se)}),C(x),Ie(2),C(y);var M=q(y,2),N=F(M);mr(N,5,()=>(Se(n()),Y(()=>n().goBack)),hr,(Ne,ee)=>{var se=rv(),Ue=F(se,!0);C(se),Ce(Re=>ve(Ue,Re),[()=>(T(ee),Y(()=>o(T(ee))))]),ae(Ne,se)}),C(N),Ie(2),C(M),C(p);var G=q(p,2),J=q(F(G),2),L=F(J),Q=F(L,!0);C(L),Ie(2),C(J);var re=q(J,2),de=F(re),st=F(de,!0);C(de),Ie(2),C(re);var ce=q(re,2),Me=F(ce),gr=F(Me,!0);C(Me),Ie(2),C(ce);var yt=q(ce,2),Qt=F(yt),yr=F(Qt,!0);C(Qt),Ie(2),C(yt);var W=q(yt,2),le=F(W),fe=F(le,!0);C(le),Ie(2),C(W),C(G);var Z=q(G,2),Pe=q(F(Z),2),Xe=F(Pe),ot=F(Xe),R=F(ot,!0);C(ot);var er=q(ot,2),Br=F(er,!0);C(er),C(Xe),Ie(2),C(Pe);var wt=q(Pe,2),zt=F(wt),wr=F(zt,!0);C(zt),Ie(2),C(wt);var xr=q(wt,2),xt=F(xr),kr=F(xt);mr(kr,1,()=>(Se(n()),Y(()=>n().durationUp)),hr,(Ne,ee)=>{var se=nv(),Ue=F(se,!0);C(se),Ce(Re=>ve(Ue,Re),[()=>(T(ee),Y(()=>o(T(ee))))]),ae(Ne,se)});var Yi=q(kr,2);mr(Yi,1,()=>(Se(n()),Y(()=>n().durationDown)),hr,(Ne,ee)=>{var se=iv(),Ue=F(se,!0);C(se),Ce(Re=>ve(Ue,Re),[()=>(T(ee),Y(()=>o(T(ee))))]),ae(Ne,se)}),C(xt),Ie(2),C(xr);var pe=q(xr,2),ge=F(pe),It=F(ge,!0);C(ge);var Cs=q(ge,2),ua=F(Cs,!0);C(Cs),Ie(2),C(pe),C(Z);var Pi=q(Z,2),pt=q(F(Pi),2),Mn=q(F(pt),2);let Rs;var da=F(Mn,!0);C(Mn),C(pt),Ie(2),C(Pi),C(d),Ie(2),C(f),C(l),Ce((Ne,ee,se,Ue,Re,me,Fs,Is,Jn,Ui)=>{ve(Q,Ne),ve(st,ee),ve(gr,se),ve(yr,Ue),ve(fe,Re),ve(R,me),ve(Br,Fs),ve(wr,Is),ve(It,Jn),ve(ua,Ui),Rs=Wr(Mn,1,"status-badge svelte-1erif2g",null,Rs,{fixed:s().timingMode==="fixed"}),ve(da,(Se(s()),Y(()=>s().timingMode==="now"?"Dynamic (Now)":"Fixed ("+s().fixedStartTime+")")))},[()=>(Se(n()),Y(()=>o(n().toggleDone[0]))),()=>(Se(n()),Y(()=>o(n().createTask[0]))),()=>(Se(n()),Y(()=>o(n().rename[0]))),()=>(Se(n()),Y(()=>o(n().deleteTask[0]))),()=>(Se(n()),Y(()=>o(n().export[0]))),()=>(Se(n()),Y(()=>o(n().moveDown[0]))),()=>(Se(n()),Y(()=>o(n().moveUp[0]))),()=>(Se(n()),Y(()=>o(n().anchor[0]))),()=>(Se(n()),Y(()=>o(n().undo[0]))),()=>(Se(n()),Y(()=>o(n().redo[0])))]),gs(3,l,()=>ku,()=>({duration:100})),ae(r,l),or()}var av=ue('<div class="todo-flow-stack-header svelte-gkdjxn"> </div>'),lv=ue('<input type="text" class="todo-flow-title-input svelte-gkdjxn"/>'),cv=ue('<div class="title svelte-gkdjxn"> </div>'),fv=ue('<span class="constraint-indicator svelte-gkdjxn" title="Constrained by subtasks">\u2696\uFE0F</span>'),uv=ue('<div class="anchor-badge svelte-gkdjxn">\u2693</div>'),dv=ue('<div><div class="time-col svelte-gkdjxn"> </div> <div class="content-col svelte-gkdjxn"><!> <div class="duration svelte-gkdjxn"> <!></div></div> <!></div>'),pv=ue('<div class="todo-flow-stack-container svelte-gkdjxn" tabindex="0" role="application"><!> <div class="todo-flow-timeline svelte-gkdjxn"></div> <!></div>'),hv={hash:"svelte-gkdjxn",code:".todo-flow-stack-container.svelte-gkdjxn {padding:2rem;background:var(--background-primary);height:100%;overflow-y:auto;}.todo-flow-stack-header.svelte-gkdjxn {text-align:center;margin-bottom:2rem;font-size:0.9rem;color:var(--text-muted);opacity:0.6;text-transform:uppercase;letter-spacing:0.1em;}.todo-flow-timeline.svelte-gkdjxn {display:flex;flex-direction:column;gap:0.5rem;max-width:600px;margin:0 auto;}.todo-flow-task-card.svelte-gkdjxn {display:flex;padding:1rem;background:var(--background-secondary);border-radius:0.5rem;border:2px solid transparent;gap:1rem;align-items:center;transition:all 0.2s;opacity:0.8;}.todo-flow-task-card.focused.svelte-gkdjxn {border-color:var(--interactive-accent);opacity:1;transform:scale(1.02);}.todo-flow-task-card.anchored.svelte-gkdjxn {background:var(--background-secondary-alt);}.time-col.svelte-gkdjxn {font-family:var(--font-monospace);font-size:0.9rem;color:var(--text-muted);min-width:60px;}.content-col.svelte-gkdjxn {flex:1;}.title.svelte-gkdjxn {font-weight:500;color:var(--text-normal);}.duration.svelte-gkdjxn {font-size:0.8rem;color:var(--text-muted);}.anchor-badge.svelte-gkdjxn {font-size:1.2rem;}.constraint-indicator.svelte-gkdjxn {font-size:0.8rem;margin-left:0.3rem;opacity:0.7;cursor:help;}.is-done.svelte-gkdjxn {opacity:0.5;}.is-done.svelte-gkdjxn .title:where(.svelte-gkdjxn) {text-decoration:line-through;}.todo-flow-title-input.svelte-gkdjxn {width:100%;background:var(--background-modifier-form-field);border:1px solid var(--background-modifier-border);color:var(--text-normal);font-size:1rem;font-weight:500;padding:2px 4px;border-radius:4px;}"};function Ul(r,t){sr(t,!0),vr(r,hv);let n=ut(t,"now",19,Eu.default),s=ut(t,"debug",3,!1),o=Ye(Ot(t.settings)),l=Ye(Ot(n())),f=tl(()=>T(o).keys);function d(W){U(o,W,!0)}function p(W){U(l,W,!0)}let h,v=Ye(Ot([]));cn(()=>{if(T(l)){let W=T(l);Y(()=>{h&&(h.updateTime(W),U(v,h.getTasks(),!0),U(g,Math.min(T(g),T(v).length-1),!0))})}});let g=Ye(0),_=Ye(-1),y=Ye(!1),x,D,S=Ot([]);Ai(()=>{s()&&console.log("[TODO_FLOW_TRACE] onMount entry"),h=new bs(t.initialTasks,T(l),t.onTaskUpdate,t.onTaskCreate),U(v,h.getTasks(),!0),x=new Ci(T(f)),D&&!window.navigator.userAgent.includes("HappyDOM")&&D.focus()}),cn(()=>{S[T(g)]&&S[T(g)].scrollIntoView({block:"nearest",behavior:"smooth"})});function M(W){let le=T(v)[T(g)];le&&t.onNavigate&&t.onNavigate(le.id,T(g))}function N(){s()&&console.debug("[TODO_FLOW_TRACE] update() entry. Current tasks:",T(v).length),U(v,h.getTasks(),!0),s()&&console.debug("[TODO_FLOW_TRACE] update() complete. New tasks:",T(v).length)}function G(W){s()&&console.log("[TODO_FLOW_TRACE] setTasks entry. tasks count:",W.length),h=new bs(W,T(l),t.onTaskUpdate,t.onTaskCreate),U(v,h.getTasks(),!0),s()&&console.log("[TODO_FLOW_TRACE] setTasks complete. Scheduled count:",T(v).length)}function J(W){U(g,Math.max(0,Math.min(T(v).length-1,W)),!0)}function L(W){U(_,W,!0)}function Q(W,le){var fe;le.trim().length>0&&le!==((fe=T(v)[W])==null?void 0:fe.title)&&(h.updateTaskTitle(W,le),N()),U(_,-1),setTimeout(()=>D==null?void 0:D.focus(),50)}function re(W){W.focus(),W.select()}async function de(W){s()&&console.debug("[TODO_FLOW_TRACE] handleKeyDown entry:",W.key);let le=W.target,fe=document.activeElement;if(le instanceof HTMLInputElement||le instanceof HTMLTextAreaElement||le.isContentEditable||fe&&fe.isContentEditable)return;["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"," "].includes(W.key)&&W.preventDefault();let Z=x.resolveAction(W);if(console.log(`[Diagnostic] Key: "${W.key}" (code: ${W.code}), Shift: ${W.shiftKey} -> Resolved Action: ${Z}`),s()&&console.log(`[TODO_FLOW_TRACE] resolveAction: ${Z} for key: ${W.key}`),!!Z){if(T(y)){(Z==="TOGGLE_HELP"||Z==="CANCEL")&&(U(y,!1),W.stopPropagation());return}if(Z==="TOGGLE_HELP"){U(y,!0),W.stopPropagation();return}if(T(_)===-1){if(W.preventDefault(),Z==="UNDO"){t.historyManager.undo(),N();return}if(Z==="REDO"){t.historyManager.redo(),N();return}switch(Z){case"RENAME":L(T(g));break;case"FORCE_OPEN":let Pe=h.handleEnter(T(g),!0);Pe&&Pe.action==="OPEN_FILE"&&Pe.path&&t.onOpenFile(Pe.path);break;case"GO_BACK":s()&&console.log(`[TODO_FLOW_TRACE] Executing GO_BACK action. onGoBack callback exists: ${!!t.onGoBack}`),t.onGoBack&&t.onGoBack();break;case"CONFIRM":let Xe=h.handleEnter(T(g));if(Xe)if(Xe.action==="DRILL_DOWN"){let xt=T(v)[T(g)];xt&&t.onNavigate&&t.onNavigate(xt.id,T(g))}else Xe.action==="OPEN_FILE"&&Xe.path&&(t.onNavigate?t.onNavigate(Xe.path,T(g)):t.onOpenFile(Xe.path));break;case"NAV_DOWN":U(g,Math.min(T(v).length-1,T(g)+1),!0);break;case"NAV_UP":U(g,Math.max(0,T(g)-1),!0);break;case"MOVE_DOWN":let ot=new Ts(h,T(g),"down");await t.historyManager.executeCommand(ot),ot.resultIndex!==null&&U(g,ot.resultIndex,!0),N();break;case"MOVE_UP":let R=new Ts(h,T(g),"up");await t.historyManager.executeCommand(R),R.resultIndex!==null&&U(g,R.resultIndex,!0),N();break;case"ANCHOR":let er=new Xo(h,T(g));await t.historyManager.executeCommand(er),er.resultIndex!==null&&U(g,er.resultIndex,!0),N();break;case"DURATION_UP":let Br=new Ss(h,T(g),"up");await t.historyManager.executeCommand(Br),Br.resultIndex!==null&&U(g,Br.resultIndex,!0),N();break;case"DURATION_DOWN":let wt=new Ss(h,T(g),"down");await t.historyManager.executeCommand(wt),wt.resultIndex!==null&&U(g,wt.resultIndex,!0),N();break;case"TOGGLE_DONE":let zt=new Jo(h,T(g));await t.historyManager.executeCommand(zt),zt.resultIndex!==null&&U(g,zt.resultIndex,!0),N();break;case"CREATE_TASK":s()&&console.debug("[TODO_FLOW_TRACE] Action CREATE_TASK triggered"),t.openTaskModal?t.openTaskModal(async xt=>{s()&&console.debug("[TODO_FLOW_TRACE] Modal submitted:",xt);let kr=new Qo(h,T(g),xt);await t.historyManager.executeCommand(kr),kr.resultIndex!==null&&U(g,kr.resultIndex,!0),N()}):s()&&console.warn("[TODO_FLOW_TRACE] openTaskModal not available in props");break;case"DELETE_TASK":let wr=T(v)[T(g)];wr&&confirm(`Delete task "${wr.title}"?`)&&(await t.historyManager.executeCommand(new ea(h,T(g))),U(g,Math.max(0,T(g)-1),!0),new window.Notice(`Deleted: ${wr.title}`),N());break;case"ARCHIVE":let xr=T(v)[T(g)];xr&&(await t.historyManager.executeCommand(new ta(h,T(g),async xt=>{await t.onTaskUpdate(xt)})),U(g,Math.max(0,Math.min(T(v).length-1,T(g))),!0),new window.Notice(`Archived: ${xr.title}`),N());break;case"EXPORT":t.onExport&&t.onExport(T(v));break}}}}var st={updateSettings:d,updateNow:p,setTasks:G,setFocus:J,handleKeyDown:de},ce=pv();ce.__keydown=de;var Me=F(ce);{var gr=W=>{var le=av(),fe=F(le);C(le),Ce(Z=>ve(fe,`Starting at ${Z!=null?Z:""}`),[()=>T(l).format("HH:mm")]),ae(W,le)};Xt(Me,W=>{T(l)&&W(gr)})}var yt=q(Me,2);mr(yt,21,()=>T(v),hr,(W,le,fe)=>{var Z=dv();let Pe;Z.__click=()=>{U(g,fe,!0)};var Xe=F(Z),ot=F(Xe,!0);C(Xe);var R=q(Xe,2),er=F(R);{var Br=pe=>{var ge=lv();Tl(ge),ge.__keydown=It=>{It.key==="Enter"&&Q(fe,It.currentTarget.value),It.key==="Escape"&&U(_,-1)},xl(ge,It=>re==null?void 0:re(It)),Ce(()=>Sl(ge,T(le).title)),hs("blur",ge,It=>Q(fe,It.currentTarget.value)),ae(pe,ge)},wt=pe=>{var ge=cv(),It=F(ge,!0);C(ge),Ce(()=>ve(It,T(le).title)),ae(pe,ge)};Xt(er,pe=>{T(_)===fe?pe(Br):pe(wt,!1)})}var zt=q(er,2),wr=F(zt),xr=q(wr);{var xt=pe=>{var ge=fv();ae(pe,ge)};Xt(xr,pe=>{Wo(T(le))>0&&pe(xt)})}C(zt),C(R);var kr=q(R,2);{var Yi=pe=>{var ge=uv();ae(pe,ge)};Xt(kr,pe=>{T(le).isAnchored&&pe(Yi)})}C(Z),Ni(Z,(pe,ge)=>S[ge]=pe,pe=>S==null?void 0:S[pe],()=>[fe]),Ce((pe,ge)=>{Pe=Wr(Z,1,"todo-flow-task-card svelte-gkdjxn",null,Pe,{focused:T(g)===fe,anchored:T(le).isAnchored,"is-done":T(le).status==="done"}),ve(ot,pe),ve(wr,`${ge!=null?ge:""} `)},[()=>{var pe;return(pe=T(le).startTime)==null?void 0:pe.format("HH:mm")},()=>Su(T(le).duration)]),ae(W,Z)}),C(yt);var Qt=q(yt,2);{var yr=W=>{Pl(W,{get keys(){return T(f)},get settings(){return T(o)}})};Xt(Qt,W=>{T(y)&&W(yr)})}return C(ce),Ni(ce,W=>D=W,()=>D),ae(r,ce),or(st)}Ei(["keydown","click"]);qe();function Vl(r){return!r||!Array.isArray(r)?"":r.join(", ")}function $u(r){return!r||!r.trim()?[]:r.split(",").map(t=>t.trim()).filter(t=>t.length>0)}var Es=require("obsidian");var ra=class extends Es.Modal{constructor(n,s){super(n);b(this,"result","");b(this,"onSubmit");this.onSubmit=s}onOpen(){let{contentEl:n}=this;n.createEl("h2",{text:"New Task"}),new Es.Setting(n).setName("Title").addText(s=>s.onChange(o=>{this.result=o}).inputEl.addEventListener("keydown",o=>{o.key==="Enter"&&this.result.trim()&&(this.onSubmit(this.result.trim()),this.close())})),new Es.Setting(n).addButton(s=>s.setButtonText("Create").setCta().onClick(()=>{this.result.trim()&&(this.onSubmit(this.result.trim()),this.close())}))}onClose(){let{contentEl:n}=this;n.empty()}};qn();aa();qe();aa();var la=class{constructor(t,n){b(this,"state");b(this,"loader");b(this,"preprocessor");this.loader=t,this.preprocessor=n,this.state={currentStack:[],currentFocusedIndex:0,history:[],focusedHistory:[],sourceHistory:[],currentSource:""}}setStack(t,n){this.state.currentStack=[...t],this.state.currentSource=n}getCurrentStack(){return[...this.state.currentStack]}clear(){this.state={currentStack:[],currentFocusedIndex:0,history:[],focusedHistory:[],sourceHistory:[],currentSource:""}}async drillDown(t,n){let s=this.state.currentStack.find(l=>l.id===t);if(!s)return!1;let o=await this.loader.load(s.id);return o.length===0?!1:(console.log(`[NavigationManager] push history. Current stack size: ${this.state.currentStack.length}, History index before: ${this.state.history.length}`),this.state.history.push([...this.state.currentStack]),this.state.focusedHistory.push(n),this.state.sourceHistory.push(this.state.currentSource),console.log(`[NavigationManager] history pushed. Now depth: ${this.state.history.length}`),this.state.currentStack=this.preprocessor?this.preprocessor(o):o,this.state.currentSource=s.id,this.state.currentFocusedIndex=0,!0)}async goBack(){var l;if(console.log(`[NavigationManager] goBack() entry. History length: ${this.state.history.length}`),this.state.history.length===0)return console.log("[NavigationManager] goBack() failed: history empty"),{success:!1,focusedIndex:0};let t=this.state.history.pop(),n=this.state.sourceHistory.pop(),s=(l=this.state.focusedHistory.pop())!=null?l:0;if(console.log(`[NavigationManager] popping from history. prevSource: ${n}, prevFocus: ${s}`),n===void 0)return console.log("[NavigationManager] goBack() failed: previousSource undefined"),{success:!1,focusedIndex:0};console.log(`[NavigationManager] loading source: ${n}`);let o;if(n.startsWith("EXPLICIT"))if(t&&t.length>0){let f=t.map(d=>d.id);console.log(`[NavigationManager] Reloading Explicit Tray. IDs: ${f.length} items (${f.slice(0,3).join(", ")}...)`),o=await this.loader.loadSpecificFiles(f),console.log(`[NavigationManager] Reload result: ${o.length} items.`),o.length===0&&(console.warn("[NavigationManager] WARN: Reload returned 0 items. Falling back to cached history stack."),o=[...t])}else console.warn("[NavigationManager] Previous stack history was empty."),o=[];else o=await this.loader.load(n);return console.log(`[NavigationManager] load complete. Tasks found: ${o.length}`),this.state.currentStack=this.preprocessor?this.preprocessor(o):o,this.state.currentSource=n,this.state.currentFocusedIndex=s,{success:!0,focusedIndex:s}}canGoBack(){return this.state.history.length>0}getState(){return{...this.state}}setState(t){this.state=t}};var Ds=en(Hr(),1);var Li="todo-flow-stack-view",Ms=class r extends Au.ItemView{constructor(n,s,o,l,f,d){super(n);b(this,"component");b(this,"rootPath",null);b(this,"tasks",[]);b(this,"settings");b(this,"historyManager");b(this,"logger");b(this,"onTaskUpdate");b(this,"onTaskCreate");b(this,"loader");b(this,"navManager");this.settings=s,this.historyManager=o,this.logger=l,this.onTaskUpdate=f,this.onTaskCreate=d,this.loader=new $s(this.app,this.logger),this.navManager=new la(this.loader,p=>gt(p,(0,Ds.default)()))}getViewType(){return Li}getDisplayText(){return"Daily Stack"}getState(){return{rootPath:this.rootPath}}async setState(n,s){this.logger&&await this.logger.info(`[StackView] setState triggered. State keys: ${Object.keys(n||{}).join(", ")}`);let o=this.getNow();if(this.logger&&await this.logger.info(`[StackView] Schedule Basis: ${o.format("YYYY-MM-DD HH:mm")} (Mode: ${this.settings.timingMode})`),n&&(n.rootPath||n.ids)){let l=[];n.rootPath==="QUERY:SHORTLIST"?(this.logger&&await this.logger.info("[StackView] Loading shortlisted tasks..."),l=await this.loader.loadShortlisted(),this.logger&&await this.logger.info(`[StackView] Loaded ${l.length} shortlisted tasks.`),this.logger&&await this.logger.info(`[StackView] Loaded ${l.length} shortlisted tasks.`),this.rootPath="QUERY:SHORTLIST"):n.ids&&Array.isArray(n.ids)?(this.logger&&await this.logger.info(`[StackView] EXPLICIT MODE: Loading ${n.ids.length} tasks into Tray.`),l=await this.loader.loadSpecificFiles(n.ids),this.rootPath=`EXPLICIT:${n.ids.length}`):(this.logger&&await this.logger.info(`[StackView] PATH MODE: Loading tasks from ${n.rootPath}`),this.rootPath=n.rootPath,l=await this.loader.load(n.rootPath));let f=gt(l,o);await this.logStackDetails(f,"Initial Load"),this.navManager.setStack(f,this.rootPath),this.tasks=this.navManager.getCurrentStack(),this.component&&this.component.setTasks&&this.component.setTasks(this.tasks)}await super.setState(n,s)}async onOpen(){this.registerDomEvent(window,"keydown",n=>{n.defaultPrevented||(this.settings.keys.debug&&this.logger.info(`[TRACE] window keydown: ${n.key} (code: ${n.code})`),!this.leaf.view||this.app.workspace.getActiveViewOfType(r),this.component&&this.component.handleKeyDown(n))}),this.component=Ur(Ul,{target:this.contentEl,props:{initialTasks:this.tasks,settings:this.settings,now:this.getNow(),historyManager:this.historyManager,logger:this.logger,onTaskUpdate:this.onTaskUpdate,onTaskCreate:this.onTaskCreate,openTaskModal:n=>{new ra(this.app,n).open()},onOpenFile:n=>{this.app.workspace.openLinkText(n,"",!0)},onNavigate:async(n,s)=>{this.logger.info("[StackView] ========== DRILL DOWN TRIGGERED =========="),this.logger.info(`[StackView] Navigating to: ${n} from index ${s}`),this.logger.info("[StackView] Current state BEFORE drillDown:"),this.logger.info(`[StackView]   - this.tasks.length: ${this.tasks.length}`),this.logger.info(`[StackView]   - History size: ${this.navManager.getState().history.length}`);let o=await this.navManager.drillDown(n,s);if(this.logger.info(`[StackView] NavigationManager.drillDown() result: success=${o}`),o){let l=this.navManager.getCurrentStack();this.logger.info(`[StackView] Retrieved stack from NavigationManager: ${l.length} tasks`),this.tasks=l,this.logger.info(`[StackView] Updated this.tasks to ${this.tasks.length} tasks`),this.logStackDetails(this.tasks,"Drill Down Refreshed"),this.component&&this.component.setTasks?(this.logger.info(`[StackView] Calling component.setTasks() with ${this.tasks.length} tasks`),this.component.setTasks(this.tasks),this.logger.info("[StackView] component.setTasks() completed"),this.component.setFocus&&(this.logger.info("[StackView] Calling component.setFocus(0)"),this.component.setFocus(0))):this.logger.warn("[StackView] WARNING: component or component.setTasks is undefined!"),this.logger.info(`[StackView] Drilled down successfully. New stack size: ${this.tasks.length}`)}else this.logger.warn(`[StackView] Could not drill down into: ${n}. Falling back to opening file.`),this.app.workspace.openLinkText(n,"",!0);this.logger.info("[StackView] ========== DRILL DOWN FINISHED ==========")},onGoBack:async()=>{this.logger.info("[StackView] ========== GO BACK TRIGGERED =========="),this.logger.info("[StackView] Current state BEFORE goBack:"),this.logger.info(`[StackView]   - this.tasks.length: ${this.tasks.length}`),this.logger.info(`[StackView]   - History size: ${this.navManager.getState().history.length}`),this.logger.info(`[StackView]   - Current source: ${this.navManager.getState().currentSource}`);let n=await this.navManager.goBack(),{success:s,focusedIndex:o}=n;if(this.logger.info(`[StackView] NavigationManager.goBack() result: success=${s}, focusedIndex=${o}`),s){let l=this.navManager.getCurrentStack();this.logger.info(`[StackView] Retrieved stack from NavigationManager: ${l.length} tasks`),this.tasks=l,this.logger.info(`[StackView] Updated this.tasks to ${this.tasks.length} tasks`),await this.logStackDetails(this.tasks,"Go Back Refreshed"),this.component&&this.component.setTasks?(this.logger.info(`[StackView] Calling component.setTasks() with ${this.tasks.length} tasks`),this.component.setTasks(this.tasks),this.logger.info("[StackView] component.setTasks() completed"),this.component.setFocus&&(this.logger.info(`[StackView] Calling component.setFocus(${o})`),this.component.setFocus(o))):(this.logger.warn("[StackView] WARNING: component or component.setTasks is undefined!"),this.logger.warn(`[StackView]   - component exists: ${!!this.component}`),this.logger.warn(`[StackView]   - component.setTasks exists: ${!!(this.component&&this.component.setTasks)}`)),this.logger.info(`[StackView] Go back completed. Restored focus to ${o}`)}else this.logger.warn(`[StackView] Cannot go back. Result success: ${s}`);this.logger.info("[StackView] ========== GO BACK FINISHED ==========")},onExport:async n=>{let s=gu(n),o=`Stack Export ${(0,Ds.default)().format("YYYY-MM-DD HHmm")}.md`,l=o;this.settings.exportFolder&&(await this.app.vault.adapter.exists(this.settings.exportFolder)||await this.app.vault.createFolder(this.settings.exportFolder),l=`${this.settings.exportFolder}/${o}`),await this.app.vault.create(l,s),new window.Notice(`Stack saved to ${l} `)}}})}getNow(){if(this.settings.timingMode==="fixed"&&this.settings.fixedStartTime){let[n,s]=this.settings.fixedStartTime.split(":");return(0,Ds.default)().set({hour:parseInt(n||"9"),minute:parseInt(s||"0"),second:0,millisecond:0})}return(0,Ds.default)()}async logStackDetails(n,s){var o;if(this.logger){this.logger.info(`[DEBUG][${s}] Stack Contents(${n.length} tasks): `),this.logger.info("   FORMAT -> [Index] ID | Start: Displayed | Title: Displayed(On - Disk) | Dur: Displayed(On - Disk) | Status: Displayed(On - Disk) | Anchored: Displayed(On - Disk)");for(let l=0;l<n.length;l++){let f=n[l],d=await this.loader.parser.resolveTaskMetadata(f.id),p=((o=f.startTime)==null?void 0:o.format("HH:mm"))||"??:??",h=f.title===d.title?f.title:`${f.title} (${d.title})`,v=f.duration===d.duration?f.duration:`${f.duration} (${d.duration})`,g=f.status===d.status?f.status:`${f.status} (${d.status})`,_=f.isAnchored===d.isAnchored?f.isAnchored:`${f.isAnchored} (${d.isAnchored})`;this.logger.info(`   [${l}]ID: ${f.id} | Start: ${p} | Title: ${h} | Dur: ${v} | Status: ${g} | Anchored: ${_} `),f.duration!==d.duration&&f.trace&&f.trace.length>0&&this.logger.info(`      ROLLUP AUDIT: ${f.trace.join(" | ")} `)}}}updateSettings(n){this.settings=n,this.component&&(this.component.updateSettings&&this.component.updateSettings(this.settings),this.component.updateNow&&this.component.updateNow(this.getNow())),this.logger.info(`[StackView] Settings updated (Hot Reload). Debug: ${this.settings.debug}`)}async onClose(){this.component&&fn(this.component)}};qe();Ii();var hC=en(Hr(),1);var zl=require("obsidian");var ca=class{constructor(t){this.app=t}async syncExportToVault(t){let n=t.split(`
`),s=/-\s*\[x\]\s*.*\s*\[\[(.+?)(?:\|.+)?\]\]/,o=0;for(let l of n){let f=l.match(s);if(f){let d=f[1];d&&(await this.updateFileStatus(d,"done"),o++)}}return o}async updateFileStatus(t,n){let s=this.app.vault.getAbstractFileByPath(t);if(s instanceof zl.TFile&&s.extension==="md")await this.app.vault.process(s,o=>Ze(o,"status",n));else if(!s){let o=this.app.metadataCache.getFirstLinkpathDest(t,"");o instanceof zl.TFile&&await this.app.vault.process(o,l=>Ze(l,"status",n))}}};qn();var mv={targetFolder:"todo-flow",exportFolder:"",timingMode:"now",fixedStartTime:"09:00",keys:Ri,debug:!1,lastTray:null},fa=class extends dt.Plugin{constructor(){super(...arguments);b(this,"settings");b(this,"historyManager");b(this,"logger")}async onload(){await this.loadSettings(),this.historyManager=new qo,this.logger=new jo(this.app,this.settings.debug),await this.logger.info("Todo Flow Plugin loading..."),this.addSettingTab(new ql(this.app,this)),this.registerView(zo,n=>new Go(n,this.settings.targetFolder,s=>{this.activateTriage(s)})),this.registerView(Ll,n=>new ks(n,[],this.settings.keys,this.historyManager,this.logger,s=>{this.logger.info(`Triage complete: ${JSON.stringify(s)}`),this.app.commands.executeCommandById("todo-flow:open-daily-stack")})),this.registerView(Li,n=>new Ms(n,this.settings,this.historyManager,this.logger,s=>{this.syncTaskToNote(s)},s=>this.onCreateTask(s))),this.addCommand({id:"open-todo-dump",name:"Open Todo Dump",callback:()=>{this.activateView(zo)}}),this.addCommand({id:"start-triage",name:"Start Triage from target folder",callback:async()=>{let{TaskQueryService:n}=await Promise.resolve().then(()=>(Gl(),Bl)),o=await new n(this.app,this.logger).getDumpedTasks();if(o.length===0){new window.Notice("No items in Dump to triage!");return}this.activateTriage(o)}}),this.addCommand({id:"open-daily-stack",name:"Open Daily Stack",callback:async()=>{this.settings.lastTray&&this.settings.lastTray.length>0?await this.activateStack(this.settings.lastTray):await this.activateStack("QUERY:SHORTLIST")}}),this.addCommand({id:"sync-completed-tasks",name:"Sync Completed Tasks from Current Export",callback:async()=>{let n=this.app.workspace.getActiveViewOfType(this.app.workspace.getLeaf(!1).view.constructor),s=this.app.workspace.activeLeaf;if(!s||!s.view||s.view.getViewType()!=="markdown"){new window.Notice("Open a markdown export file to sync.");return}let o=s.view.editor;if(o){let l=o.getValue(),d=await new ca(this.app).syncExportToVault(l);new window.Notice(`Synced ${d} tasks from export.`)}}}),this.addCommand({id:"toggle-timing-mode",name:"Toggle Timing Mode (Now vs Fixed)",callback:()=>{this.settings.timingMode=this.settings.timingMode==="now"?"fixed":"now",this.saveSettings(),this.refreshStackView(),new window.Notice(`Timing Mode: ${this.settings.timingMode==="now"?"Dynamic (Now)":"Fixed ("+this.settings.fixedStartTime+")"}`)}}),this.addCommand({id:"toggle-dev-mode",name:"Toggle Developer Mode (Tracing)",callback:()=>{this.settings.debug=!this.settings.debug,this.logger.setEnabled(this.settings.debug),this.saveSettings(),new window.Notice(`Developer Mode: ${this.settings.debug?"ON":"OFF"}`)}}),this.addCommand({id:"clear-logs",name:"Clear Log File",callback:async()=>{await this.app.vault.adapter.exists("todo-flow.log")&&(await this.app.vault.adapter.write("todo-flow.log",""),new window.Notice("Logs cleared"))}}),this.addCommand({id:"open-folder-as-stack",name:"Open Folder as Stack",callback:async()=>{let{FolderSuggester:n}=await Promise.resolve().then(()=>(Os(),As));new n(this.app,s=>{this.activateStack(s.path)}).open()}}),this.addCommand({id:"open-file-as-stack",name:"Open File as Stack",callback:async()=>{let{FileSuggester:n}=await Promise.resolve().then(()=>(Os(),As));new n(this.app,s=>{this.activateStack(s.path)}).open()}}),this.addCommand({id:"triage-folder",name:"Triage Folder",callback:async()=>{let{FolderSuggester:n}=await Promise.resolve().then(()=>(Os(),As));new n(this.app,async s=>{let o=await this.getTasksFromFolder(s.path);if(o.length===0){new window.Notice("No markdown files in folder!");return}this.activateTriage(o)}).open()}}),this.addCommand({id:"triage-file",name:"Triage File",callback:async()=>{let{FileSuggester:n}=await Promise.resolve().then(()=>(Os(),As));new n(this.app,async s=>{this.logger.info(`[main.ts] Triage File: Selected ${s.path}. Resolving child tasks...`);let{StackLoader:o}=await Promise.resolve().then(()=>(aa(),Nu)),f=await new o(this.app,this.logger).load(s.path);if(f.length===0){new window.Notice("No tasks found linked in this file!");return}this.activateTriage(f)}).open()}})}async activateView(n,s){let{workspace:o}=this.app,l,f=o.getLeavesOfType(n);f.length>0?l=f[0]:(l=o.getLeaf(!0),await l.setViewState({type:n,active:!0})),o.revealLeaf(l)}async activateTriage(n){let{workspace:s}=this.app,o=s.getLeaf(!0);this.logger.info(`[main.ts] activateTriage: Initializing session with ${n.length} tasks.`);let l=new ks(o,n,this.settings.keys,this.historyManager,this.logger,f=>{let d=f.shortlist.map(p=>p.id);this.logger.info(`[main.ts] Triage callback: Session isolation active. Received ${d.length} shortlisted tasks: ${JSON.stringify(d)}`),this.activateStack(d)});await o.open(l),s.revealLeaf(o)}async activateStack(n){let{workspace:s}=this.app,o;this.logger.info(`[main.ts] activateStack target: ${Array.isArray(n)?`EXPLICIT LIST (${n.length} IDs)`:n}`),Array.isArray(n)&&(this.settings.lastTray=n,await this.saveData(this.settings));let l=s.getLeavesOfType(Li);l.length>0?o=l[0]:o=s.getLeaf(!0);let f={active:!0};Array.isArray(n)?f.state={ids:n}:f.state={rootPath:n},await o.setViewState({type:Li,active:!0,state:f.state}),s.revealLeaf(o)}refreshStackView(){this.app.workspace.getLeavesOfType(Li).forEach(s=>{s.view instanceof Ms&&s.view.updateSettings(this.settings)})}async loadSettings(){let n=await this.loadData();if(this.settings=Object.assign({},mv,n),n&&n.keys){this.settings.keys=Object.assign({},Ri,n.keys);let s=this.settings.keys.export;Array.isArray(s)&&s.includes("e")&&(this.settings.keys.export=s.filter(l=>l!=="e"),this.settings.keys.export.includes("Shift+E")||this.settings.keys.export.push("Shift+E"),console.log('[Todo Flow] Migrated settings: Removed "e" from export keys to fix collision with Rename.'));let o=this.settings.keys.goBack;Array.isArray(o)&&o.includes("Backspace")&&(this.settings.keys.goBack=o.filter(l=>l!=="Backspace"),console.log('[Todo Flow] Migrated settings: Removed "Backspace" from goBack keys to fix collision with DeleteTask.')),this.settings.keys.anchor.includes("a")&&this.settings.keys.confirm.includes("f")&&(this.settings.keys=Object.assign({},Ri),console.log('[Todo Flow] Migrated settings to final corrected "dfjk" + Duration layout.'))}}async saveSettings(){await this.saveData(this.settings)}async getFilesFromFolder(n){let s=this.app.vault.getAbstractFileByPath(n);if(s instanceof dt.TFolder){let o=[];return s.children.forEach(l=>{l instanceof dt.TFile&&l.extension==="md"&&o.push(l)}),o}return[]}async syncTaskToNote(n){var l;let s=(l=n.originalDuration)!=null?l:n.duration;this.logger.info(`[DEBUG] Syncing Task Metadata to Disk: ID=${n.id} | Title=${n.title} | Dur=${s} (Rollup: ${n.duration}) | Status=${n.status} | Anchored=${n.isAnchored}`);let o=this.app.vault.getAbstractFileByPath(n.id);o instanceof dt.TFile&&await this.app.vault.process(o,f=>{let d=f;return d=Ze(d,"task",n.title),d=Ze(d,"duration",s),d=Ze(d,"status",n.status),d=Ze(d,"anchored",n.isAnchored),n.isAnchored&&n.startTime&&(d=Ze(d,"startTime",n.startTime.format("YYYY-MM-DD HH:mm"))),d})}onCreateTask(n){let s=Ho(n),o=`${this.settings.targetFolder}/${s}`,l={id:o,title:n,duration:30,status:"todo",isAnchored:!1,children:[]};return this.app.vault.create(o,`---
task: ${n}
status: todo
duration: 30
---
# ${n}`),l}async getTasksFromFolder(n){let s=await this.getFilesFromFolder(n);return new Zn(this.app).buildGraph(s)}},ql=class extends dt.PluginSettingTab{constructor(n,s){super(n,s);b(this,"plugin");this.plugin=s}display(){let{containerEl:n}=this;n.empty(),new dt.Setting(n).setName("Target Folder").setDesc("Folder where new thoughts and tasks will be created").addText(s=>s.setPlaceholder("todo-flow").setValue(this.plugin.settings.targetFolder).onChange(async o=>{this.plugin.settings.targetFolder=o,await this.plugin.saveSettings()})),new dt.Setting(n).setName("Export Folder").setDesc("Default folder for Stack exports (leave empty for Vault root)").addText(s=>s.setPlaceholder("e.g. Exports").setValue(this.plugin.settings.exportFolder).onChange(async o=>{this.plugin.settings.exportFolder=o,await this.plugin.saveSettings()})),new dt.Setting(n).setName("Timing Mode").setDesc("Choose how the Daily Stack schedule is calculated").addDropdown(s=>s.addOption("now","Dynamic (Start from Now)").addOption("fixed","Fixed (Start from specific time)").setValue(this.plugin.settings.timingMode).onChange(async o=>{this.plugin.settings.timingMode=o,await this.plugin.saveSettings(),this.plugin.refreshStackView(),this.display()})),this.plugin.settings.timingMode==="fixed"&&new dt.Setting(n).setName("Fixed Start Time").setDesc("Example: 09:00, 14:30").addText(s=>s.setPlaceholder("HH:mm").setValue(this.plugin.settings.fixedStartTime).onChange(async o=>{this.plugin.settings.fixedStartTime=o,await this.plugin.saveSettings(),this.plugin.refreshStackView()})),new dt.Setting(n).setName("Developer Mode").setDesc("Enable verbose diagnostic tracing in the console (Cmd+Option+I)").addToggle(s=>s.setValue(this.plugin.settings.debug).onChange(async o=>{this.plugin.settings.debug=o,await this.plugin.saveSettings(),this.plugin.refreshStackView()})),n.createEl("h3",{text:"Navigation"}),this.addKeySetting(n,"navUp","Move Focus Up"),this.addKeySetting(n,"navDown","Move Focus Down"),this.addKeySetting(n,"forceOpen","Force Open / Drill Down"),this.addKeySetting(n,"goBack","Go Back"),this.addKeySetting(n,"confirm","Open / Drill Down (Contextual)"),n.createEl("h3",{text:"Actions"}),this.addKeySetting(n,"toggleDone","Toggle Done"),this.addKeySetting(n,"createTask","Create Task"),this.addKeySetting(n,"rename","Rename Task"),this.addKeySetting(n,"deleteTask","Delete Task"),this.addKeySetting(n,"export","Export to Note"),n.createEl("h3",{text:"Organization"}),this.addKeySetting(n,"moveUp","Move Task Up"),this.addKeySetting(n,"moveDown","Move Task Down"),this.addKeySetting(n,"anchor","Toggle Anchor"),this.addKeySetting(n,"durationUp","Increase Duration"),this.addKeySetting(n,"durationDown","Decrease Duration"),this.addKeySetting(n,"undo","Undo"),this.addKeySetting(n,"redo","Redo")}addKeySetting(n,s,o){new dt.Setting(n).setName(o).setDesc(`Current: ${Vl(this.plugin.settings.keys[s])}`).addText(l=>l.setPlaceholder("e.g. k, ArrowUp").setValue(Vl(this.plugin.settings.keys[s])).onChange(async f=>{let d=$u(f);this.plugin.settings.keys[s]=d,await this.plugin.saveSettings(),this.plugin.refreshStackView()}))}};
/*! Bundled license information:

moment/moment.js:
  (*! moment.js *)
  (*! version : 2.30.1 *)
  (*! authors : Tim Wood, Iskren Chernev, Moment.js contributors *)
  (*! license : MIT *)
  (*! momentjs.com *)
*/
