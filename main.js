/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

"use strict";var pm=Object.create;var Ji=Object.defineProperty;var mm=Object.getOwnPropertyDescriptor;var _m=Object.getOwnPropertyNames;var gm=Object.getPrototypeOf,vm=Object.prototype.hasOwnProperty;var Ic=r=>{throw TypeError(r)};var ym=(r,t,n)=>t in r?Ji(r,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):r[t]=n;var vn=(r,t)=>()=>(r&&(t=r(r=0)),t);var wm=(r,t)=>()=>(t||r((t={exports:{}}).exports,t),t.exports),Qi=(r,t)=>{for(var n in t)Ji(r,n,{get:t[n],enumerable:!0})},Lc=(r,t,n,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of _m(t))!vm.call(r,o)&&o!==n&&Ji(r,o,{get:()=>t[o],enumerable:!(s=mm(t,o))||s.enumerable});return r};var tn=(r,t,n)=>(n=r!=null?pm(gm(r)):{},Lc(t||!r||!r.__esModule?Ji(n,"default",{value:r,enumerable:!0}):n,r)),km=r=>Lc(Ji({},"__esModule",{value:!0}),r);var b=(r,t,n)=>ym(r,typeof t!="symbol"?t+"":t,n),Fa=(r,t,n)=>t.has(r)||Ic("Cannot "+n);var w=(r,t,n)=>(Fa(r,t,"read from private field"),n?n.call(r):t.get(r)),z=(r,t,n)=>t.has(r)?Ic("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(r):t.set(r,n),G=(r,t,n,s)=>(Fa(r,t,"write to private field"),s?s.call(r,n):t.set(r,n),n),Le=(r,t,n)=>(Fa(r,t,"access private method"),n);var Hr=wm((Rl,Fi)=>{(function(r,t){typeof Rl=="object"&&typeof Fi!="undefined"?Fi.exports=t():typeof define=="function"&&define.amd?define(t):r.moment=t()})(Rl,(function(){"use strict";var r;function t(){return r.apply(null,arguments)}function n(e){r=e}function s(e){return e instanceof Array||Object.prototype.toString.call(e)==="[object Array]"}function o(e){return e!=null&&Object.prototype.toString.call(e)==="[object Object]"}function l(e,i){return Object.prototype.hasOwnProperty.call(e,i)}function f(e){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(e).length===0;var i;for(i in e)if(l(e,i))return!1;return!0}function d(e){return e===void 0}function h(e){return typeof e=="number"||Object.prototype.toString.call(e)==="[object Number]"}function p(e){return e instanceof Date||Object.prototype.toString.call(e)==="[object Date]"}function g(e,i){var a=[],c,u=e.length;for(c=0;c<u;++c)a.push(i(e[c],c));return a}function v(e,i){for(var a in i)l(i,a)&&(e[a]=i[a]);return l(i,"toString")&&(e.toString=i.toString),l(i,"valueOf")&&(e.valueOf=i.valueOf),e}function _(e,i,a,c){return hc(e,i,a,c,!0).utc()}function y(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function k(e){return e._pf==null&&(e._pf=y()),e._pf}var E;Array.prototype.some?E=Array.prototype.some:E=function(e){var i=Object(this),a=i.length>>>0,c;for(c=0;c<a;c++)if(c in i&&e.call(this,i[c],c,i))return!0;return!1};function S(e){var i=null,a=!1,c=e._d&&!isNaN(e._d.getTime());if(c&&(i=k(e),a=E.call(i.parsedDateParts,function(u){return u!=null}),c=i.overflow<0&&!i.empty&&!i.invalidEra&&!i.invalidMonth&&!i.invalidWeekday&&!i.weekdayMismatch&&!i.nullInput&&!i.invalidFormat&&!i.userInvalidated&&(!i.meridiem||i.meridiem&&a),e._strict&&(c=c&&i.charsLeftOver===0&&i.unusedTokens.length===0&&i.bigHour===void 0)),Object.isFrozen==null||!Object.isFrozen(e))e._isValid=c;else return c;return e._isValid}function M(e){var i=_(NaN);return e!=null?v(k(i),e):k(i).userInvalidated=!0,i}var V=t.momentProperties=[],se=!1;function J(e,i){var a,c,u,m=V.length;if(d(i._isAMomentObject)||(e._isAMomentObject=i._isAMomentObject),d(i._i)||(e._i=i._i),d(i._f)||(e._f=i._f),d(i._l)||(e._l=i._l),d(i._strict)||(e._strict=i._strict),d(i._tzm)||(e._tzm=i._tzm),d(i._isUTC)||(e._isUTC=i._isUTC),d(i._offset)||(e._offset=i._offset),d(i._pf)||(e._pf=k(i)),d(i._locale)||(e._locale=i._locale),m>0)for(a=0;a<m;a++)c=V[a],u=i[c],d(u)||(e[c]=u);return e}function N(e){J(this,e),this._d=new Date(e._d!=null?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),se===!1&&(se=!0,t.updateOffset(this),se=!1)}function W(e){return e instanceof N||e!=null&&e._isAMomentObject!=null}function ne(e){t.suppressDeprecationWarnings===!1&&typeof console!="undefined"&&console.warn&&console.warn("Deprecation warning: "+e)}function te(e,i){var a=!0;return v(function(){if(t.deprecationHandler!=null&&t.deprecationHandler(null,e),a){var c=[],u,m,x,A=arguments.length;for(m=0;m<A;m++){if(u="",typeof arguments[m]=="object"){u+=`
[`+m+"] ";for(x in arguments[0])l(arguments[0],x)&&(u+=x+": "+arguments[0][x]+", ");u=u.slice(0,-2)}else u=arguments[m];c.push(u)}ne(e+`
Arguments: `+Array.prototype.slice.call(c).join("")+`
`+new Error().stack),a=!1}return i.apply(this,arguments)},i)}var We={};function he(e,i){t.deprecationHandler!=null&&t.deprecationHandler(e,i),We[e]||(ne(i),We[e]=!0)}t.suppressDeprecationWarnings=!1,t.deprecationHandler=null;function ke(e){return typeof Function!="undefined"&&e instanceof Function||Object.prototype.toString.call(e)==="[object Function]"}function er(e){var i,a;for(a in e)l(e,a)&&(i=e[a],ke(i)?this[a]=i:this["_"+a]=i);this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function zt(e,i){var a=v({},e),c;for(c in i)l(i,c)&&(o(e[c])&&o(i[c])?(a[c]={},v(a[c],e[c]),v(a[c],i[c])):i[c]!=null?a[c]=i[c]:delete a[c]);for(c in e)l(e,c)&&!l(i,c)&&o(e[c])&&(a[c]=v({},a[c]));return a}function Ft(e){e!=null&&this.set(e)}var yr;Object.keys?yr=Object.keys:yr=function(e){var i,a=[];for(i in e)l(e,i)&&a.push(i);return a};var Wr={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function H(e,i,a){var c=this._calendar[e]||this._calendar.sameElse;return ke(c)?c.call(i,a):c}function q(e,i,a){var c=""+Math.abs(e),u=i-c.length,m=e>=0;return(m?a?"+":"":"-")+Math.pow(10,Math.max(0,u)).toString().substr(1)+c}var oe=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,ae=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,gt={},Ne={};function R(e,i,a,c){var u=c;typeof c=="string"&&(u=function(){return this[c]()}),e&&(Ne[e]=u),i&&(Ne[i[0]]=function(){return q(u.apply(this,arguments),i[1],i[2])}),a&&(Ne[a]=function(){return this.localeData().ordinal(u.apply(this,arguments),e)})}function jt(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function wr(e){var i=e.match(oe),a,c;for(a=0,c=i.length;a<c;a++)Ne[i[a]]?i[a]=Ne[i[a]]:i[a]=jt(i[a]);return function(u){var m="",x;for(x=0;x<c;x++)m+=ke(i[x])?i[x].call(u,e):i[x];return m}}function vt(e,i){return e.isValid()?(i=tr(i,e.localeData()),gt[i]=gt[i]||wr(i),gt[i](e)):e.localeData().invalidDate()}function tr(e,i){var a=5;function c(u){return i.longDateFormat(u)||u}for(ae.lastIndex=0;a>=0&&ae.test(e);)e=e.replace(ae,c),ae.lastIndex=0,a-=1;return e}var kr={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function Kt(e){var i=this._longDateFormat[e],a=this._longDateFormat[e.toUpperCase()];return i||!a?i:(this._longDateFormat[e]=a.match(oe).map(function(c){return c==="MMMM"||c==="MM"||c==="DD"||c==="dddd"?c.slice(1):c}).join(""),this._longDateFormat[e])}var Br="Invalid date";function yt(){return this._invalidDate}var Gr="%d",ei=/\d{1,2}/;function de(e){return this._ordinal.replace("%d",e)}var xe={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function wt(e,i,a,c){var u=this._relativeTime[a];return ke(u)?u(e,i,a,c):u.replace(/%d/i,e)}function ha(e,i){var a=this._relativeTime[e>0?"future":"past"];return ke(a)?a(i):a.replace(/%s/i,i)}var Ui={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function ut(e){return typeof e=="string"?Ui[e]||Ui[e.toLowerCase()]:void 0}function An(e){var i={},a,c;for(c in e)l(e,c)&&(a=ut(c),a&&(i[a]=e[c]));return i}var Fs={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};function pa(e){var i=[],a;for(a in e)l(e,a)&&i.push({unit:a,priority:Fs[a]});return i.sort(function(c,u){return c.priority-u.priority}),i}var Ae=/\d/,Q=/\d\d/,le=/\d{3}/,Ve=/\d{4}/,Ie=/[+-]?\d{6}/,me=/\d\d?/,Is=/\d\d\d\d?/,Ls=/\d\d\d\d\d\d?/,ti=/\d{1,3}/,Hi=/\d{1,4}/,Ps=/[+-]?\d{1,6}/,ri=/\d+/,Ys=/[+-]?\d+/,Cu=/Z|[+-]\d\d:?\d\d/gi,Vs=/Z|[+-]\d\d(?::?\d\d)?/gi,Ru=/[+-]?\d+(\.\d{1,3})?/,Wi=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,ni=/^[1-9]\d?/,ma=/^([1-9]\d|\d)/,Us;Us={};function O(e,i,a){Us[e]=ke(i)?i:function(c,u){return c&&a?a:i}}function Fu(e,i){return l(Us,e)?Us[e](i._strict,i._locale):new RegExp(Iu(e))}function Iu(e){return zr(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(i,a,c,u,m){return a||c||u||m}))}function zr(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function qt(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function ee(e){var i=+e,a=0;return i!==0&&isFinite(i)&&(a=qt(i)),a}var _a={};function pe(e,i){var a,c=i,u;for(typeof e=="string"&&(e=[e]),h(i)&&(c=function(m,x){x[i]=ee(m)}),u=e.length,a=0;a<u;a++)_a[e[a]]=c}function Bi(e,i){pe(e,function(a,c,u,m){u._w=u._w||{},i(a,u._w,u,m)})}function Lu(e,i,a){i!=null&&l(_a,e)&&_a[e](i,a._a,a,e)}function Hs(e){return e%4===0&&e%100!==0||e%400===0}var st=0,jr=1,xr=2,Ue=3,rr=4,Kr=5,On=6,Pu=7,Yu=8;R("Y",0,0,function(){var e=this.year();return e<=9999?q(e,4):"+"+e}),R(0,["YY",2],0,function(){return this.year()%100}),R(0,["YYYY",4],0,"year"),R(0,["YYYYY",5],0,"year"),R(0,["YYYYYY",6,!0],0,"year"),O("Y",Ys),O("YY",me,Q),O("YYYY",Hi,Ve),O("YYYYY",Ps,Ie),O("YYYYYY",Ps,Ie),pe(["YYYYY","YYYYYY"],st),pe("YYYY",function(e,i){i[st]=e.length===2?t.parseTwoDigitYear(e):ee(e)}),pe("YY",function(e,i){i[st]=t.parseTwoDigitYear(e)}),pe("Y",function(e,i){i[st]=parseInt(e,10)});function Gi(e){return Hs(e)?366:365}t.parseTwoDigitYear=function(e){return ee(e)+(ee(e)>68?1900:2e3)};var Xl=ii("FullYear",!0);function Vu(){return Hs(this.year())}function ii(e,i){return function(a){return a!=null?(Jl(this,e,a),t.updateOffset(this,i),this):zi(this,e)}}function zi(e,i){if(!e.isValid())return NaN;var a=e._d,c=e._isUTC;switch(i){case"Milliseconds":return c?a.getUTCMilliseconds():a.getMilliseconds();case"Seconds":return c?a.getUTCSeconds():a.getSeconds();case"Minutes":return c?a.getUTCMinutes():a.getMinutes();case"Hours":return c?a.getUTCHours():a.getHours();case"Date":return c?a.getUTCDate():a.getDate();case"Day":return c?a.getUTCDay():a.getDay();case"Month":return c?a.getUTCMonth():a.getMonth();case"FullYear":return c?a.getUTCFullYear():a.getFullYear();default:return NaN}}function Jl(e,i,a){var c,u,m,x,A;if(!(!e.isValid()||isNaN(a))){switch(c=e._d,u=e._isUTC,i){case"Milliseconds":return void(u?c.setUTCMilliseconds(a):c.setMilliseconds(a));case"Seconds":return void(u?c.setUTCSeconds(a):c.setSeconds(a));case"Minutes":return void(u?c.setUTCMinutes(a):c.setMinutes(a));case"Hours":return void(u?c.setUTCHours(a):c.setHours(a));case"Date":return void(u?c.setUTCDate(a):c.setDate(a));case"FullYear":break;default:return}m=a,x=e.month(),A=e.date(),A=A===29&&x===1&&!Hs(m)?28:A,u?c.setUTCFullYear(m,x,A):c.setFullYear(m,x,A)}}function Uu(e){return e=ut(e),ke(this[e])?this[e]():this}function Hu(e,i){if(typeof e=="object"){e=An(e);var a=pa(e),c,u=a.length;for(c=0;c<u;c++)this[a[c].unit](e[a[c].unit])}else if(e=ut(e),ke(this[e]))return this[e](i);return this}function Wu(e,i){return(e%i+i)%i}var Oe;Array.prototype.indexOf?Oe=Array.prototype.indexOf:Oe=function(e){var i;for(i=0;i<this.length;++i)if(this[i]===e)return i;return-1};function ga(e,i){if(isNaN(e)||isNaN(i))return NaN;var a=Wu(i,12);return e+=(i-a)/12,a===1?Hs(e)?29:28:31-a%7%2}R("M",["MM",2],"Mo",function(){return this.month()+1}),R("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)}),R("MMMM",0,0,function(e){return this.localeData().months(this,e)}),O("M",me,ni),O("MM",me,Q),O("MMM",function(e,i){return i.monthsShortRegex(e)}),O("MMMM",function(e,i){return i.monthsRegex(e)}),pe(["M","MM"],function(e,i){i[jr]=ee(e)-1}),pe(["MMM","MMMM"],function(e,i,a,c){var u=a._locale.monthsParse(e,c,a._strict);u!=null?i[jr]=u:k(a).invalidMonth=e});var Bu="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Ql="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),ec=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Gu=Wi,zu=Wi;function ju(e,i){return e?s(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||ec).test(i)?"format":"standalone"][e.month()]:s(this._months)?this._months:this._months.standalone}function Ku(e,i){return e?s(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[ec.test(i)?"format":"standalone"][e.month()]:s(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function qu(e,i,a){var c,u,m,x=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],c=0;c<12;++c)m=_([2e3,c]),this._shortMonthsParse[c]=this.monthsShort(m,"").toLocaleLowerCase(),this._longMonthsParse[c]=this.months(m,"").toLocaleLowerCase();return a?i==="MMM"?(u=Oe.call(this._shortMonthsParse,x),u!==-1?u:null):(u=Oe.call(this._longMonthsParse,x),u!==-1?u:null):i==="MMM"?(u=Oe.call(this._shortMonthsParse,x),u!==-1?u:(u=Oe.call(this._longMonthsParse,x),u!==-1?u:null)):(u=Oe.call(this._longMonthsParse,x),u!==-1?u:(u=Oe.call(this._shortMonthsParse,x),u!==-1?u:null))}function Zu(e,i,a){var c,u,m;if(this._monthsParseExact)return qu.call(this,e,i,a);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),c=0;c<12;c++){if(u=_([2e3,c]),a&&!this._longMonthsParse[c]&&(this._longMonthsParse[c]=new RegExp("^"+this.months(u,"").replace(".","")+"$","i"),this._shortMonthsParse[c]=new RegExp("^"+this.monthsShort(u,"").replace(".","")+"$","i")),!a&&!this._monthsParse[c]&&(m="^"+this.months(u,"")+"|^"+this.monthsShort(u,""),this._monthsParse[c]=new RegExp(m.replace(".",""),"i")),a&&i==="MMMM"&&this._longMonthsParse[c].test(e))return c;if(a&&i==="MMM"&&this._shortMonthsParse[c].test(e))return c;if(!a&&this._monthsParse[c].test(e))return c}}function tc(e,i){if(!e.isValid())return e;if(typeof i=="string"){if(/^\d+$/.test(i))i=ee(i);else if(i=e.localeData().monthsParse(i),!h(i))return e}var a=i,c=e.date();return c=c<29?c:Math.min(c,ga(e.year(),a)),e._isUTC?e._d.setUTCMonth(a,c):e._d.setMonth(a,c),e}function rc(e){return e!=null?(tc(this,e),t.updateOffset(this,!0),this):zi(this,"Month")}function Xu(){return ga(this.year(),this.month())}function Ju(e){return this._monthsParseExact?(l(this,"_monthsRegex")||nc.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(l(this,"_monthsShortRegex")||(this._monthsShortRegex=Gu),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)}function Qu(e){return this._monthsParseExact?(l(this,"_monthsRegex")||nc.call(this),e?this._monthsStrictRegex:this._monthsRegex):(l(this,"_monthsRegex")||(this._monthsRegex=zu),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)}function nc(){function e(B,re){return re.length-B.length}var i=[],a=[],c=[],u,m,x,A;for(u=0;u<12;u++)m=_([2e3,u]),x=zr(this.monthsShort(m,"")),A=zr(this.months(m,"")),i.push(x),a.push(A),c.push(A),c.push(x);i.sort(e),a.sort(e),c.sort(e),this._monthsRegex=new RegExp("^("+c.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+a.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+i.join("|")+")","i")}function ed(e,i,a,c,u,m,x){var A;return e<100&&e>=0?(A=new Date(e+400,i,a,c,u,m,x),isFinite(A.getFullYear())&&A.setFullYear(e)):A=new Date(e,i,a,c,u,m,x),A}function ji(e){var i,a;return e<100&&e>=0?(a=Array.prototype.slice.call(arguments),a[0]=e+400,i=new Date(Date.UTC.apply(null,a)),isFinite(i.getUTCFullYear())&&i.setUTCFullYear(e)):i=new Date(Date.UTC.apply(null,arguments)),i}function Ws(e,i,a){var c=7+i-a,u=(7+ji(e,0,c).getUTCDay()-i)%7;return-u+c-1}function ic(e,i,a,c,u){var m=(7+a-c)%7,x=Ws(e,c,u),A=1+7*(i-1)+m+x,B,re;return A<=0?(B=e-1,re=Gi(B)+A):A>Gi(e)?(B=e+1,re=A-Gi(e)):(B=e,re=A),{year:B,dayOfYear:re}}function Ki(e,i,a){var c=Ws(e.year(),i,a),u=Math.floor((e.dayOfYear()-c-1)/7)+1,m,x;return u<1?(x=e.year()-1,m=u+qr(x,i,a)):u>qr(e.year(),i,a)?(m=u-qr(e.year(),i,a),x=e.year()+1):(x=e.year(),m=u),{week:m,year:x}}function qr(e,i,a){var c=Ws(e,i,a),u=Ws(e+1,i,a);return(Gi(e)-c+u)/7}R("w",["ww",2],"wo","week"),R("W",["WW",2],"Wo","isoWeek"),O("w",me,ni),O("ww",me,Q),O("W",me,ni),O("WW",me,Q),Bi(["w","ww","W","WW"],function(e,i,a,c){i[c.substr(0,1)]=ee(e)});function td(e){return Ki(e,this._week.dow,this._week.doy).week}var rd={dow:0,doy:6};function nd(){return this._week.dow}function id(){return this._week.doy}function sd(e){var i=this.localeData().week(this);return e==null?i:this.add((e-i)*7,"d")}function od(e){var i=Ki(this,1,4).week;return e==null?i:this.add((e-i)*7,"d")}R("d",0,"do","day"),R("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)}),R("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),R("dddd",0,0,function(e){return this.localeData().weekdays(this,e)}),R("e",0,0,"weekday"),R("E",0,0,"isoWeekday"),O("d",me),O("e",me),O("E",me),O("dd",function(e,i){return i.weekdaysMinRegex(e)}),O("ddd",function(e,i){return i.weekdaysShortRegex(e)}),O("dddd",function(e,i){return i.weekdaysRegex(e)}),Bi(["dd","ddd","dddd"],function(e,i,a,c){var u=a._locale.weekdaysParse(e,c,a._strict);u!=null?i.d=u:k(a).invalidWeekday=e}),Bi(["d","e","E"],function(e,i,a,c){i[c]=ee(e)});function ad(e,i){return typeof e!="string"?e:isNaN(e)?(e=i.weekdaysParse(e),typeof e=="number"?e:null):parseInt(e,10)}function ld(e,i){return typeof e=="string"?i.weekdaysParse(e)%7||7:isNaN(e)?null:e}function va(e,i){return e.slice(i,7).concat(e.slice(0,i))}var cd="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),sc="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),fd="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),ud=Wi,dd=Wi,hd=Wi;function pd(e,i){var a=s(this._weekdays)?this._weekdays:this._weekdays[e&&e!==!0&&this._weekdays.isFormat.test(i)?"format":"standalone"];return e===!0?va(a,this._week.dow):e?a[e.day()]:a}function md(e){return e===!0?va(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort}function _d(e){return e===!0?va(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin}function gd(e,i,a){var c,u,m,x=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],c=0;c<7;++c)m=_([2e3,1]).day(c),this._minWeekdaysParse[c]=this.weekdaysMin(m,"").toLocaleLowerCase(),this._shortWeekdaysParse[c]=this.weekdaysShort(m,"").toLocaleLowerCase(),this._weekdaysParse[c]=this.weekdays(m,"").toLocaleLowerCase();return a?i==="dddd"?(u=Oe.call(this._weekdaysParse,x),u!==-1?u:null):i==="ddd"?(u=Oe.call(this._shortWeekdaysParse,x),u!==-1?u:null):(u=Oe.call(this._minWeekdaysParse,x),u!==-1?u:null):i==="dddd"?(u=Oe.call(this._weekdaysParse,x),u!==-1||(u=Oe.call(this._shortWeekdaysParse,x),u!==-1)?u:(u=Oe.call(this._minWeekdaysParse,x),u!==-1?u:null)):i==="ddd"?(u=Oe.call(this._shortWeekdaysParse,x),u!==-1||(u=Oe.call(this._weekdaysParse,x),u!==-1)?u:(u=Oe.call(this._minWeekdaysParse,x),u!==-1?u:null)):(u=Oe.call(this._minWeekdaysParse,x),u!==-1||(u=Oe.call(this._weekdaysParse,x),u!==-1)?u:(u=Oe.call(this._shortWeekdaysParse,x),u!==-1?u:null))}function vd(e,i,a){var c,u,m;if(this._weekdaysParseExact)return gd.call(this,e,i,a);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),c=0;c<7;c++){if(u=_([2e3,1]).day(c),a&&!this._fullWeekdaysParse[c]&&(this._fullWeekdaysParse[c]=new RegExp("^"+this.weekdays(u,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[c]=new RegExp("^"+this.weekdaysShort(u,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[c]=new RegExp("^"+this.weekdaysMin(u,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[c]||(m="^"+this.weekdays(u,"")+"|^"+this.weekdaysShort(u,"")+"|^"+this.weekdaysMin(u,""),this._weekdaysParse[c]=new RegExp(m.replace(".",""),"i")),a&&i==="dddd"&&this._fullWeekdaysParse[c].test(e))return c;if(a&&i==="ddd"&&this._shortWeekdaysParse[c].test(e))return c;if(a&&i==="dd"&&this._minWeekdaysParse[c].test(e))return c;if(!a&&this._weekdaysParse[c].test(e))return c}}function yd(e){if(!this.isValid())return e!=null?this:NaN;var i=zi(this,"Day");return e!=null?(e=ad(e,this.localeData()),this.add(e-i,"d")):i}function wd(e){if(!this.isValid())return e!=null?this:NaN;var i=(this.day()+7-this.localeData()._week.dow)%7;return e==null?i:this.add(e-i,"d")}function kd(e){if(!this.isValid())return e!=null?this:NaN;if(e!=null){var i=ld(e,this.localeData());return this.day(this.day()%7?i:i-7)}else return this.day()||7}function xd(e){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||ya.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(l(this,"_weekdaysRegex")||(this._weekdaysRegex=ud),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)}function bd(e){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||ya.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(l(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=dd),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function Td(e){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||ya.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(l(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=hd),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function ya(){function e(dt,en){return en.length-dt.length}var i=[],a=[],c=[],u=[],m,x,A,B,re;for(m=0;m<7;m++)x=_([2e3,1]).day(m),A=zr(this.weekdaysMin(x,"")),B=zr(this.weekdaysShort(x,"")),re=zr(this.weekdays(x,"")),i.push(A),a.push(B),c.push(re),u.push(A),u.push(B),u.push(re);i.sort(e),a.sort(e),c.sort(e),u.sort(e),this._weekdaysRegex=new RegExp("^("+u.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+c.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+a.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+i.join("|")+")","i")}function wa(){return this.hours()%12||12}function Sd(){return this.hours()||24}R("H",["HH",2],0,"hour"),R("h",["hh",2],0,wa),R("k",["kk",2],0,Sd),R("hmm",0,0,function(){return""+wa.apply(this)+q(this.minutes(),2)}),R("hmmss",0,0,function(){return""+wa.apply(this)+q(this.minutes(),2)+q(this.seconds(),2)}),R("Hmm",0,0,function(){return""+this.hours()+q(this.minutes(),2)}),R("Hmmss",0,0,function(){return""+this.hours()+q(this.minutes(),2)+q(this.seconds(),2)});function oc(e,i){R(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),i)})}oc("a",!0),oc("A",!1);function ac(e,i){return i._meridiemParse}O("a",ac),O("A",ac),O("H",me,ma),O("h",me,ni),O("k",me,ni),O("HH",me,Q),O("hh",me,Q),O("kk",me,Q),O("hmm",Is),O("hmmss",Ls),O("Hmm",Is),O("Hmmss",Ls),pe(["H","HH"],Ue),pe(["k","kk"],function(e,i,a){var c=ee(e);i[Ue]=c===24?0:c}),pe(["a","A"],function(e,i,a){a._isPm=a._locale.isPM(e),a._meridiem=e}),pe(["h","hh"],function(e,i,a){i[Ue]=ee(e),k(a).bigHour=!0}),pe("hmm",function(e,i,a){var c=e.length-2;i[Ue]=ee(e.substr(0,c)),i[rr]=ee(e.substr(c)),k(a).bigHour=!0}),pe("hmmss",function(e,i,a){var c=e.length-4,u=e.length-2;i[Ue]=ee(e.substr(0,c)),i[rr]=ee(e.substr(c,2)),i[Kr]=ee(e.substr(u)),k(a).bigHour=!0}),pe("Hmm",function(e,i,a){var c=e.length-2;i[Ue]=ee(e.substr(0,c)),i[rr]=ee(e.substr(c))}),pe("Hmmss",function(e,i,a){var c=e.length-4,u=e.length-2;i[Ue]=ee(e.substr(0,c)),i[rr]=ee(e.substr(c,2)),i[Kr]=ee(e.substr(u))});function $d(e){return(e+"").toLowerCase().charAt(0)==="p"}var Ed=/[ap]\.?m?\.?/i,Dd=ii("Hours",!0);function Md(e,i,a){return e>11?a?"pm":"PM":a?"am":"AM"}var lc={calendar:Wr,longDateFormat:kr,invalidDate:Br,ordinal:Gr,dayOfMonthOrdinalParse:ei,relativeTime:xe,months:Bu,monthsShort:Ql,week:rd,weekdays:cd,weekdaysMin:fd,weekdaysShort:sc,meridiemParse:Ed},be={},qi={},Zi;function Nd(e,i){var a,c=Math.min(e.length,i.length);for(a=0;a<c;a+=1)if(e[a]!==i[a])return a;return c}function cc(e){return e&&e.toLowerCase().replace("_","-")}function Ad(e){for(var i=0,a,c,u,m;i<e.length;){for(m=cc(e[i]).split("-"),a=m.length,c=cc(e[i+1]),c=c?c.split("-"):null;a>0;){if(u=Bs(m.slice(0,a).join("-")),u)return u;if(c&&c.length>=a&&Nd(m,c)>=a-1)break;a--}i++}return Zi}function Od(e){return!!(e&&e.match("^[^/\\\\]*$"))}function Bs(e){var i=null,a;if(be[e]===void 0&&typeof Fi!="undefined"&&Fi&&Fi.exports&&Od(e))try{i=Zi._abbr,a=require,a("./locale/"+e),mn(i)}catch(c){be[e]=null}return be[e]}function mn(e,i){var a;return e&&(d(i)?a=Zr(e):a=ka(e,i),a?Zi=a:typeof console!="undefined"&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),Zi._abbr}function ka(e,i){if(i!==null){var a,c=lc;if(i.abbr=e,be[e]!=null)he("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),c=be[e]._config;else if(i.parentLocale!=null)if(be[i.parentLocale]!=null)c=be[i.parentLocale]._config;else if(a=Bs(i.parentLocale),a!=null)c=a._config;else return qi[i.parentLocale]||(qi[i.parentLocale]=[]),qi[i.parentLocale].push({name:e,config:i}),null;return be[e]=new Ft(zt(c,i)),qi[e]&&qi[e].forEach(function(u){ka(u.name,u.config)}),mn(e),be[e]}else return delete be[e],null}function Cd(e,i){if(i!=null){var a,c,u=lc;be[e]!=null&&be[e].parentLocale!=null?be[e].set(zt(be[e]._config,i)):(c=Bs(e),c!=null&&(u=c._config),i=zt(u,i),c==null&&(i.abbr=e),a=new Ft(i),a.parentLocale=be[e],be[e]=a),mn(e)}else be[e]!=null&&(be[e].parentLocale!=null?(be[e]=be[e].parentLocale,e===mn()&&mn(e)):be[e]!=null&&delete be[e]);return be[e]}function Zr(e){var i;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return Zi;if(!s(e)){if(i=Bs(e),i)return i;e=[e]}return Ad(e)}function Rd(){return yr(be)}function xa(e){var i,a=e._a;return a&&k(e).overflow===-2&&(i=a[jr]<0||a[jr]>11?jr:a[xr]<1||a[xr]>ga(a[st],a[jr])?xr:a[Ue]<0||a[Ue]>24||a[Ue]===24&&(a[rr]!==0||a[Kr]!==0||a[On]!==0)?Ue:a[rr]<0||a[rr]>59?rr:a[Kr]<0||a[Kr]>59?Kr:a[On]<0||a[On]>999?On:-1,k(e)._overflowDayOfYear&&(i<st||i>xr)&&(i=xr),k(e)._overflowWeeks&&i===-1&&(i=Pu),k(e)._overflowWeekday&&i===-1&&(i=Yu),k(e).overflow=i),e}var Fd=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Id=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Ld=/Z|[+-]\d\d(?::?\d\d)?/,Gs=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],ba=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Pd=/^\/?Date\((-?\d+)/i,Yd=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,Vd={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function fc(e){var i,a,c=e._i,u=Fd.exec(c)||Id.exec(c),m,x,A,B,re=Gs.length,dt=ba.length;if(u){for(k(e).iso=!0,i=0,a=re;i<a;i++)if(Gs[i][1].exec(u[1])){x=Gs[i][0],m=Gs[i][2]!==!1;break}if(x==null){e._isValid=!1;return}if(u[3]){for(i=0,a=dt;i<a;i++)if(ba[i][1].exec(u[3])){A=(u[2]||" ")+ba[i][0];break}if(A==null){e._isValid=!1;return}}if(!m&&A!=null){e._isValid=!1;return}if(u[4])if(Ld.exec(u[4]))B="Z";else{e._isValid=!1;return}e._f=x+(A||"")+(B||""),Sa(e)}else e._isValid=!1}function Ud(e,i,a,c,u,m){var x=[Hd(e),Ql.indexOf(i),parseInt(a,10),parseInt(c,10),parseInt(u,10)];return m&&x.push(parseInt(m,10)),x}function Hd(e){var i=parseInt(e,10);return i<=49?2e3+i:i<=999?1900+i:i}function Wd(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function Bd(e,i,a){if(e){var c=sc.indexOf(e),u=new Date(i[0],i[1],i[2]).getDay();if(c!==u)return k(a).weekdayMismatch=!0,a._isValid=!1,!1}return!0}function Gd(e,i,a){if(e)return Vd[e];if(i)return 0;var c=parseInt(a,10),u=c%100,m=(c-u)/100;return m*60+u}function uc(e){var i=Yd.exec(Wd(e._i)),a;if(i){if(a=Ud(i[4],i[3],i[2],i[5],i[6],i[7]),!Bd(i[1],a,e))return;e._a=a,e._tzm=Gd(i[8],i[9],i[10]),e._d=ji.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),k(e).rfc2822=!0}else e._isValid=!1}function zd(e){var i=Pd.exec(e._i);if(i!==null){e._d=new Date(+i[1]);return}if(fc(e),e._isValid===!1)delete e._isValid;else return;if(uc(e),e._isValid===!1)delete e._isValid;else return;e._strict?e._isValid=!1:t.createFromInputFallback(e)}t.createFromInputFallback=te("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))});function si(e,i,a){return e!=null?e:i!=null?i:a}function jd(e){var i=new Date(t.now());return e._useUTC?[i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate()]:[i.getFullYear(),i.getMonth(),i.getDate()]}function Ta(e){var i,a,c=[],u,m,x;if(!e._d){for(u=jd(e),e._w&&e._a[xr]==null&&e._a[jr]==null&&Kd(e),e._dayOfYear!=null&&(x=si(e._a[st],u[st]),(e._dayOfYear>Gi(x)||e._dayOfYear===0)&&(k(e)._overflowDayOfYear=!0),a=ji(x,0,e._dayOfYear),e._a[jr]=a.getUTCMonth(),e._a[xr]=a.getUTCDate()),i=0;i<3&&e._a[i]==null;++i)e._a[i]=c[i]=u[i];for(;i<7;i++)e._a[i]=c[i]=e._a[i]==null?i===2?1:0:e._a[i];e._a[Ue]===24&&e._a[rr]===0&&e._a[Kr]===0&&e._a[On]===0&&(e._nextDay=!0,e._a[Ue]=0),e._d=(e._useUTC?ji:ed).apply(null,c),m=e._useUTC?e._d.getUTCDay():e._d.getDay(),e._tzm!=null&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[Ue]=24),e._w&&typeof e._w.d!="undefined"&&e._w.d!==m&&(k(e).weekdayMismatch=!0)}}function Kd(e){var i,a,c,u,m,x,A,B,re;i=e._w,i.GG!=null||i.W!=null||i.E!=null?(m=1,x=4,a=si(i.GG,e._a[st],Ki(ye(),1,4).year),c=si(i.W,1),u=si(i.E,1),(u<1||u>7)&&(B=!0)):(m=e._locale._week.dow,x=e._locale._week.doy,re=Ki(ye(),m,x),a=si(i.gg,e._a[st],re.year),c=si(i.w,re.week),i.d!=null?(u=i.d,(u<0||u>6)&&(B=!0)):i.e!=null?(u=i.e+m,(i.e<0||i.e>6)&&(B=!0)):u=m),c<1||c>qr(a,m,x)?k(e)._overflowWeeks=!0:B!=null?k(e)._overflowWeekday=!0:(A=ic(a,c,u,m,x),e._a[st]=A.year,e._dayOfYear=A.dayOfYear)}t.ISO_8601=function(){},t.RFC_2822=function(){};function Sa(e){if(e._f===t.ISO_8601){fc(e);return}if(e._f===t.RFC_2822){uc(e);return}e._a=[],k(e).empty=!0;var i=""+e._i,a,c,u,m,x,A=i.length,B=0,re,dt;for(u=tr(e._f,e._locale).match(oe)||[],dt=u.length,a=0;a<dt;a++)m=u[a],c=(i.match(Fu(m,e))||[])[0],c&&(x=i.substr(0,i.indexOf(c)),x.length>0&&k(e).unusedInput.push(x),i=i.slice(i.indexOf(c)+c.length),B+=c.length),Ne[m]?(c?k(e).empty=!1:k(e).unusedTokens.push(m),Lu(m,c,e)):e._strict&&!c&&k(e).unusedTokens.push(m);k(e).charsLeftOver=A-B,i.length>0&&k(e).unusedInput.push(i),e._a[Ue]<=12&&k(e).bigHour===!0&&e._a[Ue]>0&&(k(e).bigHour=void 0),k(e).parsedDateParts=e._a.slice(0),k(e).meridiem=e._meridiem,e._a[Ue]=qd(e._locale,e._a[Ue],e._meridiem),re=k(e).era,re!==null&&(e._a[st]=e._locale.erasConvertYear(re,e._a[st])),Ta(e),xa(e)}function qd(e,i,a){var c;return a==null?i:e.meridiemHour!=null?e.meridiemHour(i,a):(e.isPM!=null&&(c=e.isPM(a),c&&i<12&&(i+=12),!c&&i===12&&(i=0)),i)}function Zd(e){var i,a,c,u,m,x,A=!1,B=e._f.length;if(B===0){k(e).invalidFormat=!0,e._d=new Date(NaN);return}for(u=0;u<B;u++)m=0,x=!1,i=J({},e),e._useUTC!=null&&(i._useUTC=e._useUTC),i._f=e._f[u],Sa(i),S(i)&&(x=!0),m+=k(i).charsLeftOver,m+=k(i).unusedTokens.length*10,k(i).score=m,A?m<c&&(c=m,a=i):(c==null||m<c||x)&&(c=m,a=i,x&&(A=!0));v(e,a||i)}function Xd(e){if(!e._d){var i=An(e._i),a=i.day===void 0?i.date:i.day;e._a=g([i.year,i.month,a,i.hour,i.minute,i.second,i.millisecond],function(c){return c&&parseInt(c,10)}),Ta(e)}}function Jd(e){var i=new N(xa(dc(e)));return i._nextDay&&(i.add(1,"d"),i._nextDay=void 0),i}function dc(e){var i=e._i,a=e._f;return e._locale=e._locale||Zr(e._l),i===null||a===void 0&&i===""?M({nullInput:!0}):(typeof i=="string"&&(e._i=i=e._locale.preparse(i)),W(i)?new N(xa(i)):(p(i)?e._d=i:s(a)?Zd(e):a?Sa(e):Qd(e),S(e)||(e._d=null),e))}function Qd(e){var i=e._i;d(i)?e._d=new Date(t.now()):p(i)?e._d=new Date(i.valueOf()):typeof i=="string"?zd(e):s(i)?(e._a=g(i.slice(0),function(a){return parseInt(a,10)}),Ta(e)):o(i)?Xd(e):h(i)?e._d=new Date(i):t.createFromInputFallback(e)}function hc(e,i,a,c,u){var m={};return(i===!0||i===!1)&&(c=i,i=void 0),(a===!0||a===!1)&&(c=a,a=void 0),(o(e)&&f(e)||s(e)&&e.length===0)&&(e=void 0),m._isAMomentObject=!0,m._useUTC=m._isUTC=u,m._l=a,m._i=e,m._f=i,m._strict=c,Jd(m)}function ye(e,i,a,c){return hc(e,i,a,c,!1)}var eh=te("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=ye.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:M()}),th=te("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=ye.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:M()});function pc(e,i){var a,c;if(i.length===1&&s(i[0])&&(i=i[0]),!i.length)return ye();for(a=i[0],c=1;c<i.length;++c)(!i[c].isValid()||i[c][e](a))&&(a=i[c]);return a}function rh(){var e=[].slice.call(arguments,0);return pc("isBefore",e)}function nh(){var e=[].slice.call(arguments,0);return pc("isAfter",e)}var ih=function(){return Date.now?Date.now():+new Date},Xi=["year","quarter","month","week","day","hour","minute","second","millisecond"];function sh(e){var i,a=!1,c,u=Xi.length;for(i in e)if(l(e,i)&&!(Oe.call(Xi,i)!==-1&&(e[i]==null||!isNaN(e[i]))))return!1;for(c=0;c<u;++c)if(e[Xi[c]]){if(a)return!1;parseFloat(e[Xi[c]])!==ee(e[Xi[c]])&&(a=!0)}return!0}function oh(){return this._isValid}function ah(){return nr(NaN)}function zs(e){var i=An(e),a=i.year||0,c=i.quarter||0,u=i.month||0,m=i.week||i.isoWeek||0,x=i.day||0,A=i.hour||0,B=i.minute||0,re=i.second||0,dt=i.millisecond||0;this._isValid=sh(i),this._milliseconds=+dt+re*1e3+B*6e4+A*1e3*60*60,this._days=+x+m*7,this._months=+u+c*3+a*12,this._data={},this._locale=Zr(),this._bubble()}function js(e){return e instanceof zs}function $a(e){return e<0?Math.round(-1*e)*-1:Math.round(e)}function lh(e,i,a){var c=Math.min(e.length,i.length),u=Math.abs(e.length-i.length),m=0,x;for(x=0;x<c;x++)(a&&e[x]!==i[x]||!a&&ee(e[x])!==ee(i[x]))&&m++;return m+u}function mc(e,i){R(e,0,0,function(){var a=this.utcOffset(),c="+";return a<0&&(a=-a,c="-"),c+q(~~(a/60),2)+i+q(~~a%60,2)})}mc("Z",":"),mc("ZZ",""),O("Z",Vs),O("ZZ",Vs),pe(["Z","ZZ"],function(e,i,a){a._useUTC=!0,a._tzm=Ea(Vs,e)});var ch=/([\+\-]|\d\d)/gi;function Ea(e,i){var a=(i||"").match(e),c,u,m;return a===null?null:(c=a[a.length-1]||[],u=(c+"").match(ch)||["-",0,0],m=+(u[1]*60)+ee(u[2]),m===0?0:u[0]==="+"?m:-m)}function Da(e,i){var a,c;return i._isUTC?(a=i.clone(),c=(W(e)||p(e)?e.valueOf():ye(e).valueOf())-a.valueOf(),a._d.setTime(a._d.valueOf()+c),t.updateOffset(a,!1),a):ye(e).local()}function Ma(e){return-Math.round(e._d.getTimezoneOffset())}t.updateOffset=function(){};function fh(e,i,a){var c=this._offset||0,u;if(!this.isValid())return e!=null?this:NaN;if(e!=null){if(typeof e=="string"){if(e=Ea(Vs,e),e===null)return this}else Math.abs(e)<16&&!a&&(e=e*60);return!this._isUTC&&i&&(u=Ma(this)),this._offset=e,this._isUTC=!0,u!=null&&this.add(u,"m"),c!==e&&(!i||this._changeInProgress?yc(this,nr(e-c,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,t.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?c:Ma(this)}function uh(e,i){return e!=null?(typeof e!="string"&&(e=-e),this.utcOffset(e,i),this):-this.utcOffset()}function dh(e){return this.utcOffset(0,e)}function hh(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(Ma(this),"m")),this}function ph(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var e=Ea(Cu,this._i);e!=null?this.utcOffset(e):this.utcOffset(0,!0)}return this}function mh(e){return this.isValid()?(e=e?ye(e).utcOffset():0,(this.utcOffset()-e)%60===0):!1}function _h(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function gh(){if(!d(this._isDSTShifted))return this._isDSTShifted;var e={},i;return J(e,this),e=dc(e),e._a?(i=e._isUTC?_(e._a):ye(e._a),this._isDSTShifted=this.isValid()&&lh(e._a,i.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function vh(){return this.isValid()?!this._isUTC:!1}function yh(){return this.isValid()?this._isUTC:!1}function _c(){return this.isValid()?this._isUTC&&this._offset===0:!1}var wh=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,kh=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function nr(e,i){var a=e,c=null,u,m,x;return js(e)?a={ms:e._milliseconds,d:e._days,M:e._months}:h(e)||!isNaN(+e)?(a={},i?a[i]=+e:a.milliseconds=+e):(c=wh.exec(e))?(u=c[1]==="-"?-1:1,a={y:0,d:ee(c[xr])*u,h:ee(c[Ue])*u,m:ee(c[rr])*u,s:ee(c[Kr])*u,ms:ee($a(c[On]*1e3))*u}):(c=kh.exec(e))?(u=c[1]==="-"?-1:1,a={y:Cn(c[2],u),M:Cn(c[3],u),w:Cn(c[4],u),d:Cn(c[5],u),h:Cn(c[6],u),m:Cn(c[7],u),s:Cn(c[8],u)}):a==null?a={}:typeof a=="object"&&("from"in a||"to"in a)&&(x=xh(ye(a.from),ye(a.to)),a={},a.ms=x.milliseconds,a.M=x.months),m=new zs(a),js(e)&&l(e,"_locale")&&(m._locale=e._locale),js(e)&&l(e,"_isValid")&&(m._isValid=e._isValid),m}nr.fn=zs.prototype,nr.invalid=ah;function Cn(e,i){var a=e&&parseFloat(e.replace(",","."));return(isNaN(a)?0:a)*i}function gc(e,i){var a={};return a.months=i.month()-e.month()+(i.year()-e.year())*12,e.clone().add(a.months,"M").isAfter(i)&&--a.months,a.milliseconds=+i-+e.clone().add(a.months,"M"),a}function xh(e,i){var a;return e.isValid()&&i.isValid()?(i=Da(i,e),e.isBefore(i)?a=gc(e,i):(a=gc(i,e),a.milliseconds=-a.milliseconds,a.months=-a.months),a):{milliseconds:0,months:0}}function vc(e,i){return function(a,c){var u,m;return c!==null&&!isNaN(+c)&&(he(i,"moment()."+i+"(period, number) is deprecated. Please use moment()."+i+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),m=a,a=c,c=m),u=nr(a,c),yc(this,u,e),this}}function yc(e,i,a,c){var u=i._milliseconds,m=$a(i._days),x=$a(i._months);e.isValid()&&(c=c==null?!0:c,x&&tc(e,zi(e,"Month")+x*a),m&&Jl(e,"Date",zi(e,"Date")+m*a),u&&e._d.setTime(e._d.valueOf()+u*a),c&&t.updateOffset(e,m||x))}var bh=vc(1,"add"),Th=vc(-1,"subtract");function wc(e){return typeof e=="string"||e instanceof String}function Sh(e){return W(e)||p(e)||wc(e)||h(e)||Eh(e)||$h(e)||e===null||e===void 0}function $h(e){var i=o(e)&&!f(e),a=!1,c=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],u,m,x=c.length;for(u=0;u<x;u+=1)m=c[u],a=a||l(e,m);return i&&a}function Eh(e){var i=s(e),a=!1;return i&&(a=e.filter(function(c){return!h(c)&&wc(e)}).length===0),i&&a}function Dh(e){var i=o(e)&&!f(e),a=!1,c=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],u,m;for(u=0;u<c.length;u+=1)m=c[u],a=a||l(e,m);return i&&a}function Mh(e,i){var a=e.diff(i,"days",!0);return a<-6?"sameElse":a<-1?"lastWeek":a<0?"lastDay":a<1?"sameDay":a<2?"nextDay":a<7?"nextWeek":"sameElse"}function Nh(e,i){arguments.length===1&&(arguments[0]?Sh(arguments[0])?(e=arguments[0],i=void 0):Dh(arguments[0])&&(i=arguments[0],e=void 0):(e=void 0,i=void 0));var a=e||ye(),c=Da(a,this).startOf("day"),u=t.calendarFormat(this,c)||"sameElse",m=i&&(ke(i[u])?i[u].call(this,a):i[u]);return this.format(m||this.localeData().calendar(u,this,ye(a)))}function Ah(){return new N(this)}function Oh(e,i){var a=W(e)?e:ye(e);return this.isValid()&&a.isValid()?(i=ut(i)||"millisecond",i==="millisecond"?this.valueOf()>a.valueOf():a.valueOf()<this.clone().startOf(i).valueOf()):!1}function Ch(e,i){var a=W(e)?e:ye(e);return this.isValid()&&a.isValid()?(i=ut(i)||"millisecond",i==="millisecond"?this.valueOf()<a.valueOf():this.clone().endOf(i).valueOf()<a.valueOf()):!1}function Rh(e,i,a,c){var u=W(e)?e:ye(e),m=W(i)?i:ye(i);return this.isValid()&&u.isValid()&&m.isValid()?(c=c||"()",(c[0]==="("?this.isAfter(u,a):!this.isBefore(u,a))&&(c[1]===")"?this.isBefore(m,a):!this.isAfter(m,a))):!1}function Fh(e,i){var a=W(e)?e:ye(e),c;return this.isValid()&&a.isValid()?(i=ut(i)||"millisecond",i==="millisecond"?this.valueOf()===a.valueOf():(c=a.valueOf(),this.clone().startOf(i).valueOf()<=c&&c<=this.clone().endOf(i).valueOf())):!1}function Ih(e,i){return this.isSame(e,i)||this.isAfter(e,i)}function Lh(e,i){return this.isSame(e,i)||this.isBefore(e,i)}function Ph(e,i,a){var c,u,m;if(!this.isValid())return NaN;if(c=Da(e,this),!c.isValid())return NaN;switch(u=(c.utcOffset()-this.utcOffset())*6e4,i=ut(i),i){case"year":m=Ks(this,c)/12;break;case"month":m=Ks(this,c);break;case"quarter":m=Ks(this,c)/3;break;case"second":m=(this-c)/1e3;break;case"minute":m=(this-c)/6e4;break;case"hour":m=(this-c)/36e5;break;case"day":m=(this-c-u)/864e5;break;case"week":m=(this-c-u)/6048e5;break;default:m=this-c}return a?m:qt(m)}function Ks(e,i){if(e.date()<i.date())return-Ks(i,e);var a=(i.year()-e.year())*12+(i.month()-e.month()),c=e.clone().add(a,"months"),u,m;return i-c<0?(u=e.clone().add(a-1,"months"),m=(i-c)/(c-u)):(u=e.clone().add(a+1,"months"),m=(i-c)/(u-c)),-(a+m)||0}t.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",t.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function Yh(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function Vh(e){if(!this.isValid())return null;var i=e!==!0,a=i?this.clone().utc():this;return a.year()<0||a.year()>9999?vt(a,i?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):ke(Date.prototype.toISOString)?i?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",vt(a,"Z")):vt(a,i?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function Uh(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e="moment",i="",a,c,u,m;return this.isLocal()||(e=this.utcOffset()===0?"moment.utc":"moment.parseZone",i="Z"),a="["+e+'("]',c=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",u="-MM-DD[T]HH:mm:ss.SSS",m=i+'[")]',this.format(a+c+u+m)}function Hh(e){e||(e=this.isUtc()?t.defaultFormatUtc:t.defaultFormat);var i=vt(this,e);return this.localeData().postformat(i)}function Wh(e,i){return this.isValid()&&(W(e)&&e.isValid()||ye(e).isValid())?nr({to:this,from:e}).locale(this.locale()).humanize(!i):this.localeData().invalidDate()}function Bh(e){return this.from(ye(),e)}function Gh(e,i){return this.isValid()&&(W(e)&&e.isValid()||ye(e).isValid())?nr({from:this,to:e}).locale(this.locale()).humanize(!i):this.localeData().invalidDate()}function zh(e){return this.to(ye(),e)}function kc(e){var i;return e===void 0?this._locale._abbr:(i=Zr(e),i!=null&&(this._locale=i),this)}var xc=te("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return e===void 0?this.localeData():this.locale(e)});function bc(){return this._locale}var qs=1e3,oi=60*qs,Zs=60*oi,Tc=(365*400+97)*24*Zs;function ai(e,i){return(e%i+i)%i}function Sc(e,i,a){return e<100&&e>=0?new Date(e+400,i,a)-Tc:new Date(e,i,a).valueOf()}function $c(e,i,a){return e<100&&e>=0?Date.UTC(e+400,i,a)-Tc:Date.UTC(e,i,a)}function jh(e){var i,a;if(e=ut(e),e===void 0||e==="millisecond"||!this.isValid())return this;switch(a=this._isUTC?$c:Sc,e){case"year":i=a(this.year(),0,1);break;case"quarter":i=a(this.year(),this.month()-this.month()%3,1);break;case"month":i=a(this.year(),this.month(),1);break;case"week":i=a(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":i=a(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":i=a(this.year(),this.month(),this.date());break;case"hour":i=this._d.valueOf(),i-=ai(i+(this._isUTC?0:this.utcOffset()*oi),Zs);break;case"minute":i=this._d.valueOf(),i-=ai(i,oi);break;case"second":i=this._d.valueOf(),i-=ai(i,qs);break}return this._d.setTime(i),t.updateOffset(this,!0),this}function Kh(e){var i,a;if(e=ut(e),e===void 0||e==="millisecond"||!this.isValid())return this;switch(a=this._isUTC?$c:Sc,e){case"year":i=a(this.year()+1,0,1)-1;break;case"quarter":i=a(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":i=a(this.year(),this.month()+1,1)-1;break;case"week":i=a(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":i=a(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":i=a(this.year(),this.month(),this.date()+1)-1;break;case"hour":i=this._d.valueOf(),i+=Zs-ai(i+(this._isUTC?0:this.utcOffset()*oi),Zs)-1;break;case"minute":i=this._d.valueOf(),i+=oi-ai(i,oi)-1;break;case"second":i=this._d.valueOf(),i+=qs-ai(i,qs)-1;break}return this._d.setTime(i),t.updateOffset(this,!0),this}function qh(){return this._d.valueOf()-(this._offset||0)*6e4}function Zh(){return Math.floor(this.valueOf()/1e3)}function Xh(){return new Date(this.valueOf())}function Jh(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function Qh(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function ep(){return this.isValid()?this.toISOString():null}function tp(){return S(this)}function rp(){return v({},k(this))}function np(){return k(this).overflow}function ip(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}R("N",0,0,"eraAbbr"),R("NN",0,0,"eraAbbr"),R("NNN",0,0,"eraAbbr"),R("NNNN",0,0,"eraName"),R("NNNNN",0,0,"eraNarrow"),R("y",["y",1],"yo","eraYear"),R("y",["yy",2],0,"eraYear"),R("y",["yyy",3],0,"eraYear"),R("y",["yyyy",4],0,"eraYear"),O("N",Na),O("NN",Na),O("NNN",Na),O("NNNN",mp),O("NNNNN",_p),pe(["N","NN","NNN","NNNN","NNNNN"],function(e,i,a,c){var u=a._locale.erasParse(e,c,a._strict);u?k(a).era=u:k(a).invalidEra=e}),O("y",ri),O("yy",ri),O("yyy",ri),O("yyyy",ri),O("yo",gp),pe(["y","yy","yyy","yyyy"],st),pe(["yo"],function(e,i,a,c){var u;a._locale._eraYearOrdinalRegex&&(u=e.match(a._locale._eraYearOrdinalRegex)),a._locale.eraYearOrdinalParse?i[st]=a._locale.eraYearOrdinalParse(e,u):i[st]=parseInt(e,10)});function sp(e,i){var a,c,u,m=this._eras||Zr("en")._eras;for(a=0,c=m.length;a<c;++a)switch(typeof m[a].since==="string"&&(u=t(m[a].since).startOf("day"),m[a].since=u.valueOf()),typeof m[a].until){case"undefined":m[a].until=1/0;break;case"string":u=t(m[a].until).startOf("day").valueOf(),m[a].until=u.valueOf();break}return m}function op(e,i,a){var c,u,m=this.eras(),x,A,B;for(e=e.toUpperCase(),c=0,u=m.length;c<u;++c)if(x=m[c].name.toUpperCase(),A=m[c].abbr.toUpperCase(),B=m[c].narrow.toUpperCase(),a)switch(i){case"N":case"NN":case"NNN":if(A===e)return m[c];break;case"NNNN":if(x===e)return m[c];break;case"NNNNN":if(B===e)return m[c];break}else if([x,A,B].indexOf(e)>=0)return m[c]}function ap(e,i){var a=e.since<=e.until?1:-1;return i===void 0?t(e.since).year():t(e.since).year()+(i-e.offset)*a}function lp(){var e,i,a,c=this.localeData().eras();for(e=0,i=c.length;e<i;++e)if(a=this.clone().startOf("day").valueOf(),c[e].since<=a&&a<=c[e].until||c[e].until<=a&&a<=c[e].since)return c[e].name;return""}function cp(){var e,i,a,c=this.localeData().eras();for(e=0,i=c.length;e<i;++e)if(a=this.clone().startOf("day").valueOf(),c[e].since<=a&&a<=c[e].until||c[e].until<=a&&a<=c[e].since)return c[e].narrow;return""}function fp(){var e,i,a,c=this.localeData().eras();for(e=0,i=c.length;e<i;++e)if(a=this.clone().startOf("day").valueOf(),c[e].since<=a&&a<=c[e].until||c[e].until<=a&&a<=c[e].since)return c[e].abbr;return""}function up(){var e,i,a,c,u=this.localeData().eras();for(e=0,i=u.length;e<i;++e)if(a=u[e].since<=u[e].until?1:-1,c=this.clone().startOf("day").valueOf(),u[e].since<=c&&c<=u[e].until||u[e].until<=c&&c<=u[e].since)return(this.year()-t(u[e].since).year())*a+u[e].offset;return this.year()}function dp(e){return l(this,"_erasNameRegex")||Aa.call(this),e?this._erasNameRegex:this._erasRegex}function hp(e){return l(this,"_erasAbbrRegex")||Aa.call(this),e?this._erasAbbrRegex:this._erasRegex}function pp(e){return l(this,"_erasNarrowRegex")||Aa.call(this),e?this._erasNarrowRegex:this._erasRegex}function Na(e,i){return i.erasAbbrRegex(e)}function mp(e,i){return i.erasNameRegex(e)}function _p(e,i){return i.erasNarrowRegex(e)}function gp(e,i){return i._eraYearOrdinalRegex||ri}function Aa(){var e=[],i=[],a=[],c=[],u,m,x,A,B,re=this.eras();for(u=0,m=re.length;u<m;++u)x=zr(re[u].name),A=zr(re[u].abbr),B=zr(re[u].narrow),i.push(x),e.push(A),a.push(B),c.push(x),c.push(A),c.push(B);this._erasRegex=new RegExp("^("+c.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+i.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+e.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+a.join("|")+")","i")}R(0,["gg",2],0,function(){return this.weekYear()%100}),R(0,["GG",2],0,function(){return this.isoWeekYear()%100});function Xs(e,i){R(0,[e,e.length],0,i)}Xs("gggg","weekYear"),Xs("ggggg","weekYear"),Xs("GGGG","isoWeekYear"),Xs("GGGGG","isoWeekYear"),O("G",Ys),O("g",Ys),O("GG",me,Q),O("gg",me,Q),O("GGGG",Hi,Ve),O("gggg",Hi,Ve),O("GGGGG",Ps,Ie),O("ggggg",Ps,Ie),Bi(["gggg","ggggg","GGGG","GGGGG"],function(e,i,a,c){i[c.substr(0,2)]=ee(e)}),Bi(["gg","GG"],function(e,i,a,c){i[c]=t.parseTwoDigitYear(e)});function vp(e){return Ec.call(this,e,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)}function yp(e){return Ec.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function wp(){return qr(this.year(),1,4)}function kp(){return qr(this.isoWeekYear(),1,4)}function xp(){var e=this.localeData()._week;return qr(this.year(),e.dow,e.doy)}function bp(){var e=this.localeData()._week;return qr(this.weekYear(),e.dow,e.doy)}function Ec(e,i,a,c,u){var m;return e==null?Ki(this,c,u).year:(m=qr(e,c,u),i>m&&(i=m),Tp.call(this,e,i,a,c,u))}function Tp(e,i,a,c,u){var m=ic(e,i,a,c,u),x=ji(m.year,0,m.dayOfYear);return this.year(x.getUTCFullYear()),this.month(x.getUTCMonth()),this.date(x.getUTCDate()),this}R("Q",0,"Qo","quarter"),O("Q",Ae),pe("Q",function(e,i){i[jr]=(ee(e)-1)*3});function Sp(e){return e==null?Math.ceil((this.month()+1)/3):this.month((e-1)*3+this.month()%3)}R("D",["DD",2],"Do","date"),O("D",me,ni),O("DD",me,Q),O("Do",function(e,i){return e?i._dayOfMonthOrdinalParse||i._ordinalParse:i._dayOfMonthOrdinalParseLenient}),pe(["D","DD"],xr),pe("Do",function(e,i){i[xr]=ee(e.match(me)[0])});var Dc=ii("Date",!0);R("DDD",["DDDD",3],"DDDo","dayOfYear"),O("DDD",ti),O("DDDD",le),pe(["DDD","DDDD"],function(e,i,a){a._dayOfYear=ee(e)});function $p(e){var i=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return e==null?i:this.add(e-i,"d")}R("m",["mm",2],0,"minute"),O("m",me,ma),O("mm",me,Q),pe(["m","mm"],rr);var Ep=ii("Minutes",!1);R("s",["ss",2],0,"second"),O("s",me,ma),O("ss",me,Q),pe(["s","ss"],Kr);var Dp=ii("Seconds",!1);R("S",0,0,function(){return~~(this.millisecond()/100)}),R(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),R(0,["SSS",3],0,"millisecond"),R(0,["SSSS",4],0,function(){return this.millisecond()*10}),R(0,["SSSSS",5],0,function(){return this.millisecond()*100}),R(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3}),R(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4}),R(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5}),R(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6}),O("S",ti,Ae),O("SS",ti,Q),O("SSS",ti,le);var _n,Mc;for(_n="SSSS";_n.length<=9;_n+="S")O(_n,ri);function Mp(e,i){i[On]=ee(("0."+e)*1e3)}for(_n="S";_n.length<=9;_n+="S")pe(_n,Mp);Mc=ii("Milliseconds",!1),R("z",0,0,"zoneAbbr"),R("zz",0,0,"zoneName");function Np(){return this._isUTC?"UTC":""}function Ap(){return this._isUTC?"Coordinated Universal Time":""}var D=N.prototype;D.add=bh,D.calendar=Nh,D.clone=Ah,D.diff=Ph,D.endOf=Kh,D.format=Hh,D.from=Wh,D.fromNow=Bh,D.to=Gh,D.toNow=zh,D.get=Uu,D.invalidAt=np,D.isAfter=Oh,D.isBefore=Ch,D.isBetween=Rh,D.isSame=Fh,D.isSameOrAfter=Ih,D.isSameOrBefore=Lh,D.isValid=tp,D.lang=xc,D.locale=kc,D.localeData=bc,D.max=th,D.min=eh,D.parsingFlags=rp,D.set=Hu,D.startOf=jh,D.subtract=Th,D.toArray=Jh,D.toObject=Qh,D.toDate=Xh,D.toISOString=Vh,D.inspect=Uh,typeof Symbol!="undefined"&&Symbol.for!=null&&(D[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),D.toJSON=ep,D.toString=Yh,D.unix=Zh,D.valueOf=qh,D.creationData=ip,D.eraName=lp,D.eraNarrow=cp,D.eraAbbr=fp,D.eraYear=up,D.year=Xl,D.isLeapYear=Vu,D.weekYear=vp,D.isoWeekYear=yp,D.quarter=D.quarters=Sp,D.month=rc,D.daysInMonth=Xu,D.week=D.weeks=sd,D.isoWeek=D.isoWeeks=od,D.weeksInYear=xp,D.weeksInWeekYear=bp,D.isoWeeksInYear=wp,D.isoWeeksInISOWeekYear=kp,D.date=Dc,D.day=D.days=yd,D.weekday=wd,D.isoWeekday=kd,D.dayOfYear=$p,D.hour=D.hours=Dd,D.minute=D.minutes=Ep,D.second=D.seconds=Dp,D.millisecond=D.milliseconds=Mc,D.utcOffset=fh,D.utc=dh,D.local=hh,D.parseZone=ph,D.hasAlignedHourOffset=mh,D.isDST=_h,D.isLocal=vh,D.isUtcOffset=yh,D.isUtc=_c,D.isUTC=_c,D.zoneAbbr=Np,D.zoneName=Ap,D.dates=te("dates accessor is deprecated. Use date instead.",Dc),D.months=te("months accessor is deprecated. Use month instead",rc),D.years=te("years accessor is deprecated. Use year instead",Xl),D.zone=te("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",uh),D.isDSTShifted=te("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",gh);function Op(e){return ye(e*1e3)}function Cp(){return ye.apply(null,arguments).parseZone()}function Nc(e){return e}var ce=Ft.prototype;ce.calendar=H,ce.longDateFormat=Kt,ce.invalidDate=yt,ce.ordinal=de,ce.preparse=Nc,ce.postformat=Nc,ce.relativeTime=wt,ce.pastFuture=ha,ce.set=er,ce.eras=sp,ce.erasParse=op,ce.erasConvertYear=ap,ce.erasAbbrRegex=hp,ce.erasNameRegex=dp,ce.erasNarrowRegex=pp,ce.months=ju,ce.monthsShort=Ku,ce.monthsParse=Zu,ce.monthsRegex=Qu,ce.monthsShortRegex=Ju,ce.week=td,ce.firstDayOfYear=id,ce.firstDayOfWeek=nd,ce.weekdays=pd,ce.weekdaysMin=_d,ce.weekdaysShort=md,ce.weekdaysParse=vd,ce.weekdaysRegex=xd,ce.weekdaysShortRegex=bd,ce.weekdaysMinRegex=Td,ce.isPM=$d,ce.meridiem=Md;function Js(e,i,a,c){var u=Zr(),m=_().set(c,i);return u[a](m,e)}function Ac(e,i,a){if(h(e)&&(i=e,e=void 0),e=e||"",i!=null)return Js(e,i,a,"month");var c,u=[];for(c=0;c<12;c++)u[c]=Js(e,c,a,"month");return u}function Oa(e,i,a,c){typeof e=="boolean"?(h(i)&&(a=i,i=void 0),i=i||""):(i=e,a=i,e=!1,h(i)&&(a=i,i=void 0),i=i||"");var u=Zr(),m=e?u._week.dow:0,x,A=[];if(a!=null)return Js(i,(a+m)%7,c,"day");for(x=0;x<7;x++)A[x]=Js(i,(x+m)%7,c,"day");return A}function Rp(e,i){return Ac(e,i,"months")}function Fp(e,i){return Ac(e,i,"monthsShort")}function Ip(e,i,a){return Oa(e,i,a,"weekdays")}function Lp(e,i,a){return Oa(e,i,a,"weekdaysShort")}function Pp(e,i,a){return Oa(e,i,a,"weekdaysMin")}mn("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var i=e%10,a=ee(e%100/10)===1?"th":i===1?"st":i===2?"nd":i===3?"rd":"th";return e+a}}),t.lang=te("moment.lang is deprecated. Use moment.locale instead.",mn),t.langData=te("moment.langData is deprecated. Use moment.localeData instead.",Zr);var Xr=Math.abs;function Yp(){var e=this._data;return this._milliseconds=Xr(this._milliseconds),this._days=Xr(this._days),this._months=Xr(this._months),e.milliseconds=Xr(e.milliseconds),e.seconds=Xr(e.seconds),e.minutes=Xr(e.minutes),e.hours=Xr(e.hours),e.months=Xr(e.months),e.years=Xr(e.years),this}function Oc(e,i,a,c){var u=nr(i,a);return e._milliseconds+=c*u._milliseconds,e._days+=c*u._days,e._months+=c*u._months,e._bubble()}function Vp(e,i){return Oc(this,e,i,1)}function Up(e,i){return Oc(this,e,i,-1)}function Cc(e){return e<0?Math.floor(e):Math.ceil(e)}function Hp(){var e=this._milliseconds,i=this._days,a=this._months,c=this._data,u,m,x,A,B;return e>=0&&i>=0&&a>=0||e<=0&&i<=0&&a<=0||(e+=Cc(Ca(a)+i)*864e5,i=0,a=0),c.milliseconds=e%1e3,u=qt(e/1e3),c.seconds=u%60,m=qt(u/60),c.minutes=m%60,x=qt(m/60),c.hours=x%24,i+=qt(x/24),B=qt(Rc(i)),a+=B,i-=Cc(Ca(B)),A=qt(a/12),a%=12,c.days=i,c.months=a,c.years=A,this}function Rc(e){return e*4800/146097}function Ca(e){return e*146097/4800}function Wp(e){if(!this.isValid())return NaN;var i,a,c=this._milliseconds;if(e=ut(e),e==="month"||e==="quarter"||e==="year")switch(i=this._days+c/864e5,a=this._months+Rc(i),e){case"month":return a;case"quarter":return a/3;case"year":return a/12}else switch(i=this._days+Math.round(Ca(this._months)),e){case"week":return i/7+c/6048e5;case"day":return i+c/864e5;case"hour":return i*24+c/36e5;case"minute":return i*1440+c/6e4;case"second":return i*86400+c/1e3;case"millisecond":return Math.floor(i*864e5)+c;default:throw new Error("Unknown unit "+e)}}function Jr(e){return function(){return this.as(e)}}var Fc=Jr("ms"),Bp=Jr("s"),Gp=Jr("m"),zp=Jr("h"),jp=Jr("d"),Kp=Jr("w"),qp=Jr("M"),Zp=Jr("Q"),Xp=Jr("y"),Jp=Fc;function Qp(){return nr(this)}function em(e){return e=ut(e),this.isValid()?this[e+"s"]():NaN}function Rn(e){return function(){return this.isValid()?this._data[e]:NaN}}var tm=Rn("milliseconds"),rm=Rn("seconds"),nm=Rn("minutes"),im=Rn("hours"),sm=Rn("days"),om=Rn("months"),am=Rn("years");function lm(){return qt(this.days()/7)}var Qr=Math.round,li={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function cm(e,i,a,c,u){return u.relativeTime(i||1,!!a,e,c)}function fm(e,i,a,c){var u=nr(e).abs(),m=Qr(u.as("s")),x=Qr(u.as("m")),A=Qr(u.as("h")),B=Qr(u.as("d")),re=Qr(u.as("M")),dt=Qr(u.as("w")),en=Qr(u.as("y")),gn=m<=a.ss&&["s",m]||m<a.s&&["ss",m]||x<=1&&["m"]||x<a.m&&["mm",x]||A<=1&&["h"]||A<a.h&&["hh",A]||B<=1&&["d"]||B<a.d&&["dd",B];return a.w!=null&&(gn=gn||dt<=1&&["w"]||dt<a.w&&["ww",dt]),gn=gn||re<=1&&["M"]||re<a.M&&["MM",re]||en<=1&&["y"]||["yy",en],gn[2]=i,gn[3]=+e>0,gn[4]=c,cm.apply(null,gn)}function um(e){return e===void 0?Qr:typeof e=="function"?(Qr=e,!0):!1}function dm(e,i){return li[e]===void 0?!1:i===void 0?li[e]:(li[e]=i,e==="s"&&(li.ss=i-1),!0)}function hm(e,i){if(!this.isValid())return this.localeData().invalidDate();var a=!1,c=li,u,m;return typeof e=="object"&&(i=e,e=!1),typeof e=="boolean"&&(a=e),typeof i=="object"&&(c=Object.assign({},li,i),i.s!=null&&i.ss==null&&(c.ss=i.s-1)),u=this.localeData(),m=fm(this,!a,c,u),a&&(m=u.pastFuture(+this,m)),u.postformat(m)}var Ra=Math.abs;function ci(e){return(e>0)-(e<0)||+e}function Qs(){if(!this.isValid())return this.localeData().invalidDate();var e=Ra(this._milliseconds)/1e3,i=Ra(this._days),a=Ra(this._months),c,u,m,x,A=this.asSeconds(),B,re,dt,en;return A?(c=qt(e/60),u=qt(c/60),e%=60,c%=60,m=qt(a/12),a%=12,x=e?e.toFixed(3).replace(/\.?0+$/,""):"",B=A<0?"-":"",re=ci(this._months)!==ci(A)?"-":"",dt=ci(this._days)!==ci(A)?"-":"",en=ci(this._milliseconds)!==ci(A)?"-":"",B+"P"+(m?re+m+"Y":"")+(a?re+a+"M":"")+(i?dt+i+"D":"")+(u||c||e?"T":"")+(u?en+u+"H":"")+(c?en+c+"M":"")+(e?en+x+"S":"")):"P0D"}var ie=zs.prototype;ie.isValid=oh,ie.abs=Yp,ie.add=Vp,ie.subtract=Up,ie.as=Wp,ie.asMilliseconds=Fc,ie.asSeconds=Bp,ie.asMinutes=Gp,ie.asHours=zp,ie.asDays=jp,ie.asWeeks=Kp,ie.asMonths=qp,ie.asQuarters=Zp,ie.asYears=Xp,ie.valueOf=Jp,ie._bubble=Hp,ie.clone=Qp,ie.get=em,ie.milliseconds=tm,ie.seconds=rm,ie.minutes=nm,ie.hours=im,ie.days=sm,ie.weeks=lm,ie.months=om,ie.years=am,ie.humanize=hm,ie.toISOString=Qs,ie.toString=Qs,ie.toJSON=Qs,ie.locale=kc,ie.localeData=bc,ie.toIsoString=te("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Qs),ie.lang=xc,R("X",0,0,"unix"),R("x",0,0,"valueOf"),O("x",Ys),O("X",Ru),pe("X",function(e,i,a){a._d=new Date(parseFloat(e)*1e3)}),pe("x",function(e,i,a){a._d=new Date(ee(e))});return t.version="2.30.1",n(ye),t.fn=D,t.min=rh,t.max=nh,t.now=ih,t.utc=_,t.unix=Op,t.months=Rp,t.isDate=p,t.locale=mn,t.invalid=M,t.duration=nr,t.isMoment=W,t.weekdays=Ip,t.parseZone=Cp,t.localeData=Zr,t.isDuration=js,t.monthsShort=Fp,t.weekdaysMin=Pp,t.defineLocale=ka,t.updateLocale=Cd,t.locales=Rd,t.weekdaysShort=Lp,t.normalizeUnits=ut,t.relativeTimeRounding=um,t.relativeTimeThreshold=dm,t.calendarFormat=Mh,t.prototype=D,t.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},t}))});function vu(r,t){var f;let n=0,s=[],o=new Set([r.id]),l=[];if(r.children)for(let d of r.children)l.push(d);for(;l.length>0;){let d=l.shift();if(t!=null&&t.has(d.id)&&(d=t.get(d.id)),o.has(d.id)){s.push(`Skipped ${d.title}: already visited`);continue}if(d.status==="done"){s.push(`Pruned ${d.title}: status is done`),o.add(d.id);continue}o.add(d.id);let h=(f=d.originalDuration)!=null?f:d.duration;if(n+=h,s.push(`+${h}m from ${d.title}`),d.children)for(let p of d.children)l.push(p)}return{total:n,trace:s}}function Wo(r){return vu(r).total}function P_(r,t){var f;let n=(f=r.originalDuration)!=null?f:r.duration,s=vu(r,t),o=n+s.total,l=[`Base: ${n}m`,...s.trace];return r.status==="done"&&l.push(`Note: Status is DONE - This ${o}m is for display only and consumes 0m in schedule.`),{total:o,trace:l}}function _t(r,t){var h;let n=r.filter(p=>p.isAnchored&&p.startTime);n.sort((p,g)=>p.startTime.valueOf()-g.startTime.valueOf());let s=(0,Gt.default)(t).subtract(10,"years");for(let p of n){let g=(0,Gt.default)(p.startTime);g.isBefore(s)&&(g=(0,Gt.default)(s),p.startTime=g);let v=(h=p.originalDuration)!=null?h:p.duration;s=(0,Gt.default)(g).add(v,"minutes")}let o=n.map(p=>{var g;return{start:(0,Gt.default)(p.startTime),end:(0,Gt.default)(p.startTime).add((g=p.originalDuration)!=null?g:p.duration,"minutes")}}),l=(0,Gt.default)(t),f=new Map;for(let p of r)f.set(p.id,p);let d=r.map(p=>{var y;let g=(y=p.originalDuration)!=null?y:p.duration,{total:v,trace:_}=P_(p,f);return{...p,originalDuration:g,duration:v,trace:_,startTime:p.startTime?(0,Gt.default)(p.startTime):void 0}});for(let p=0;p<d.length;p++){let g=d[p];if(g.isAnchored){g.startTime&&(0,Gt.default)(g.startTime).add(g.duration,"minutes").isAfter(l);continue}let v=!1;for(;!v;){let _=(0,Gt.default)(l),y=g.status==="done"?0:g.duration,k=(0,Gt.default)(l).add(y,"minutes"),E=o.find(S=>_.isBefore(S.end)&&k.isAfter(S.start));E?l=(0,Gt.default)(E.end):(g.startTime=_,l=k,v=!0)}}return d.sort((p,g)=>{let v=p.startTime?p.startTime.valueOf():Number.MAX_SAFE_INTEGER,_=g.startTime?g.startTime.valueOf():Number.MAX_SAFE_INTEGER;return v-_})}var Gt,Ze=vn(()=>{"use strict";Gt=tn(Hr(),1)});var X1,xu,Ko,Nn=vn(()=>{"use strict";X1=require("obsidian"),xu=tn(Hr(),1),Ko=class{constructor(t,n){b(this,"LOG_FILE","todo-flow.log");b(this,"enabled");b(this,"app");b(this,"buildId");this.app=t,this.enabled=n,this.buildId=typeof process!="undefined"?"2026-01-27T16-45-57":"unknown"}setEnabled(t){this.enabled=t}async log(t,n){if(!this.enabled)return;let o=`[${(0,xu.default)().format("YYYY-MM-DD HH:mm:ss")}] [${this.buildId}] [${t}] ${n}
`;try{await this.app.vault.adapter.append(this.LOG_FILE,o)}catch(l){console.error("Failed to write to log file",l)}}async info(t){await this.log("INFO",t)}async warn(t){await this.log("WARN",t)}async error(t){await this.log("ERROR",t)}}});function ia(r,t,n){if(r&&r.task)return r.task;if(t&&t.trim().length>0&&!t.trim().startsWith("---"))return t.trim().replace(/^#+\s+/,"");let s=n.replace(/\.md$/,""),o=s.match(/^\d{12}_[a-z0-9]{3}_(.*)$/);return o&&o[1]?o[1]:s}function sa(r){let t=r.split(`
`),n=!1;for(let s of t){let o=s.trim();if(o==="---")if(n){n=!1;continue}else{n=!0;continue}if(!n&&o.length>0)return o}return null}var Wl=vn(()=>{"use strict"});var vO,oa,Mu=vn(()=>{"use strict";vO=require("obsidian");Ze();Wl();oa=class{constructor(t){b(this,"app");this.app=t}async parse(t){let n=await this.app.vault.adapter.read(t),s=this.extractWikilinks(n);return await Promise.all(s.map(async l=>{var p,g,v;let f=this.app.metadataCache.getFirstLinkpathDest(l.path,t),d=f?f.path:l.path.endsWith(".md")?l.path:`${l.path}.md`,h=await this.resolveTaskMetadata(d);return{id:d,title:l.displayText||h.title,duration:(p=h.duration)!=null?p:30,status:(g=h.status)!=null?g:"todo",isAnchored:(v=h.isAnchored)!=null?v:!1,children:[]}}))}async resolveTaskMetadata(t){try{let n=this.getFilenameWithoutExtension(t);if(!await this.app.vault.adapter.exists(t))return{title:n};let o=await this.app.vault.adapter.read(t),l=/^---\s*\n([\s\S]*?)\n---/,f=o.match(l),d={};f&&f[1]&&(d=this.parseFrontmatter(f[1]));let h=sa(o);return{title:ia(d,h,t.split("/").pop()||t),duration:d.duration,status:d.status,isAnchored:d.anchored}}catch(n){return{title:this.getFilenameWithoutExtension(t)}}}extractWikilinks(t){var l,f;let n=[],s=/\[\[([^\]|]+)(?:\|([^\]]+))?\]\]/g,o;for(;(o=s.exec(t))!==null;){let d=(l=o[1])==null?void 0:l.trim(),h=(f=o[2])==null?void 0:f.trim();d&&n.push({path:d,...h&&{displayText:h}})}return n}extractMarkdownLinks(t){return[]}extractFirstHeading(t){let n=/^#\s+(.+)$/m,s=t.match(n);return s&&s[1]?s[1].trim():null}getFilenameWithoutExtension(t){return(t.split("/").pop()||t).replace(/\.md$/,"")}async updateTaskMetadata(t,n){try{let s=await this.app.vault.adapter.exists(t),o="";s&&(o=await this.app.vault.adapter.read(t));let l=this.updateFrontmatter(o,n);await this.app.vault.adapter.write(t,l)}catch(s){throw console.error(`Failed to update metadata for ${t}:`,s),s}}updateFrontmatter(t,n){let s=/^---\s*\n([\s\S]*?)\n---\n?/,o=t.match(s),l={},f=t;if(o&&o[1]){let p=o[1];l=this.parseFrontmatter(p),f=t.substring(o[0].length)}let d={...l,...this.convertMetadataToFrontmatter(n)};return`---
${this.serializeFrontmatter(d)}---
${f}`}parseFrontmatter(t){let n={},s=t.split(`
`);for(let o of s){let l=o.match(/^(\w+):\s*(.+)$/);if(l&&l[1]&&l[2]){let f=l[1],d=l[2];if(d.startsWith("[")||d.startsWith("{"))try{d=JSON.parse(d)}catch(h){}else d==="true"?d=!0:d==="false"?d=!1:isNaN(Number(d))||(d=Number(d));n[f]=d}}return n}serializeFrontmatter(t){let n=[];for(let[s,o]of Object.entries(t)){if(o===void 0)continue;let l;typeof o=="object"?l=JSON.stringify(o):l=String(o),n.push(`${s}: ${l}`)}return n.join(`
`)+`
`}convertMetadataToFrontmatter(t){let n={};return t.duration!==void 0&&(n.duration=t.duration),t.status!==void 0&&(n.status=t.status),t.isAnchored!==void 0&&(n.anchored=t.isAnchored),t.startTime!==void 0&&(n.startTime=t.startTime),n}}});var aa={};Qi(aa,{GraphBuilder:()=>Xn});var bO,Nu,Xn,Yi=vn(()=>{"use strict";bO=require("obsidian");Ze();Wl();Nu=tn(Hr(),1),Xn=class{constructor(t){this.app=t}async buildGraph(t){return Promise.all(t.map(n=>this.buildNode(n,[])))}async buildNode(t,n){let s=this.app.metadataCache.getFileCache(t),o=(s==null?void 0:s.frontmatter)||{},l=o.status||"todo",f=await this.app.vault.read(t),d=sa(f),h={id:t.path,title:ia(o,d,t.name),duration:o.duration||30,isAnchored:o.anchored||!1,status:l,children:[],startTime:o.startTime?(0,Nu.default)(o.startTime):void 0};if(l==="done")return h;let p=this.app.metadataCache.resolvedLinks[t.path]||{},g=[],v=[...n,t.path];for(let _ of Object.keys(p)){if(v.includes(_))continue;let y=this.app.vault.getAbstractFileByPath(_);y&&y.extension==="md"&&g.push(y)}return h.children=await Promise.all(g.map(_=>this.buildNode(_,v))),h}}});var Gl={};Qi(Gl,{TaskQueryService:()=>Bl});var Bl,zl=vn(()=>{"use strict";Yi();Ze();Nn();Bl=class{constructor(t,n){this.app=t;this.logger=n}async getDumpedTasks(){return this.queryTasksByFlowState("dump")}async getShortlistedTasks(){return this.queryTasksByFlowState("shortlist")}async queryTasksByFlowState(t){let n=this.app.vault.getFiles();this.logger&&await this.logger.info(`[TaskQueryService] Searching for flow_state="${t}" in ${n.length} files...`);let s=n.filter(l=>{var h;let f=this.app.metadataCache.getCache(l.path),d=(h=f==null?void 0:f.frontmatter)==null?void 0:h.flow_state;return d===t?(this.logger&&this.logger.info(`[TaskQueryService] MATCH: ${l.path} has flow_state="${d}"`),!0):!1});return this.logger&&await this.logger.info(`[TaskQueryService] Found ${s.length} matches for "${t}".`),new Xn(this.app).buildGraph(s)}}});var Au={};Qi(Au,{StackLoader:()=>Ns});var Jn,Ns,la=vn(()=>{"use strict";Jn=require("obsidian");Ze();Mu();Nn();Ns=class{constructor(t,n){b(this,"app");b(this,"parser");b(this,"logger");this.app=t,this.logger=n,this.parser=new oa(t)}async load(t){if(t==="QUERY:SHORTLIST")return this.loadShortlisted();let n=this.app.vault.getAbstractFileByPath(t);if(!n)return this.logger&&await this.logger.warn(`[StackLoader] [UNHAPPY] Path not found: "${t}"`),[];try{if(n instanceof Jn.TFolder){let{GraphBuilder:s}=await Promise.resolve().then(()=>(Yi(),aa)),o=new s(this.app),l=n.children.filter(d=>d instanceof Jn.TFile&&d.extension==="md"),f=await o.buildGraph(l);return f.length===0&&this.logger&&await this.logger.warn(`[StackLoader] Folder "${t}" loaded 0 tasks.`),f}else if(n instanceof Jn.TFile){let o=(await this.parser.parse(t)).map(d=>this.app.vault.getAbstractFileByPath(d.id)).filter(d=>d instanceof Jn.TFile),{GraphBuilder:l}=await Promise.resolve().then(()=>(Yi(),aa));return await new l(this.app).buildGraph(o)}}catch(s){this.logger&&await this.logger.error(`[StackLoader] CRITICAL ERROR loading path "${t}": ${s}`),console.error(s)}return[]}async loadShortlisted(){let{TaskQueryService:t}=await Promise.resolve().then(()=>(zl(),Gl));this.logger&&await this.logger.info("[StackLoader] loadShortlisted() called.");let s=await new t(this.app,this.logger).getShortlistedTasks();return this.logger&&await this.logger.info(`[StackLoader] loadShortlisted() returning ${s.length} tasks.`),s}async loadSpecificFiles(t){this.logger&&await this.logger.info(`[StackLoader] loadSpecificFiles() entry with ${t.length} IDs.`);let n=[];for(let l of t){let f=this.app.vault.getAbstractFileByPath(l);f instanceof Jn.TFile&&f.extension==="md"?(n.push(f),this.logger&&await this.logger.info(`[StackLoader] RESOLVED: ${l}`)):this.logger&&await this.logger.info(`[StackLoader] FAILED: ${l} (Not found or not markdown)`)}this.logger&&await this.logger.info(`[StackLoader] Total Resolved: ${n.length} valid files.`);let{GraphBuilder:s}=await Promise.resolve().then(()=>(Yi(),aa));return await new s(this.app).buildGraph(n)}}});var Cs={};Qi(Cs,{FileSuggester:()=>ql,FolderSuggester:()=>Kl});var Os,Kl,ql,Rs=vn(()=>{"use strict";Os=require("obsidian"),Kl=class extends Os.FuzzySuggestModal{constructor(n,s){super(n);this.onChoose=s}getItems(){return this.app.vault.getAllLoadedFiles().filter(n=>n instanceof Os.TFolder)}getItemText(n){return n.path}onChooseItem(n,s){this.onChoose(n)}},ql=class extends Os.FuzzySuggestModal{constructor(n,s){super(n);this.onChoose=s}getItems(){return this.app.vault.getMarkdownFiles()}getItemText(n){return n.path}onChooseItem(n,s){this.onChoose(n)}}});var gg={};Qi(gg,{default:()=>da});module.exports=km(gg);var ft=require("obsidian");var ku=require("obsidian");var eo=!0;var Yc,Vc,Pc=(Vc=(Yc=globalThis.process)==null?void 0:Yc.env)==null?void 0:Vc.NODE_ENV,$=Pc&&!Pc.toLowerCase().startsWith("prod");var br=Array.isArray,Uc=Array.prototype.indexOf,fi=Array.from,Ia=Object.keys,Je=Object.defineProperty,kt=Object.getOwnPropertyDescriptor,to=Object.getOwnPropertyDescriptors,La=Object.prototype,Hc=Array.prototype,Fn=Object.getPrototypeOf,Pa=Object.isExtensible;function Ya(r){return typeof r=="function"}var xt=()=>{};function Wc(r){return r()}function ui(r){for(var t=0;t<r.length;t++)r[t]()}function ro(){var r,t,n=new Promise((s,o)=>{r=s,t=o});return{promise:n,resolve:r,reject:t}}var Be=Symbol("$state"),es=Symbol("legacy props"),Bc=Symbol(""),no=Symbol("proxy path"),Tr=new class extends Error{constructor(){super(...arguments);b(this,"name","StaleReactionError");b(this,"message","The reaction that called `getAbortSignal()` was re-run or destroyed")}};var ts=3,bt=8;function io(r){if($){let t=new Error(`lifecycle_outside_component
\`${r}(...)\` can only be used during component initialisation
https://svelte.dev/e/lifecycle_outside_component`);throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function Gc(){if($){let r=new Error("async_derived_orphan\nCannot create a `$derived(...)` with an `await` expression outside of an effect tree\nhttps://svelte.dev/e/async_derived_orphan");throw r.name="Svelte error",r}else throw new Error("https://svelte.dev/e/async_derived_orphan")}function Va(){if($){let r=new Error("bind_invalid_checkbox_value\nUsing `bind:value` together with a checkbox input is not allowed. Use `bind:checked` instead\nhttps://svelte.dev/e/bind_invalid_checkbox_value");throw r.name="Svelte error",r}else throw new Error("https://svelte.dev/e/bind_invalid_checkbox_value")}function zc(){if($){let r=new Error(`derived_references_self
A derived value cannot reference itself recursively
https://svelte.dev/e/derived_references_self`);throw r.name="Svelte error",r}else throw new Error("https://svelte.dev/e/derived_references_self")}function jc(r){if($){let t=new Error(`effect_in_teardown
\`${r}\` cannot be used inside an effect cleanup function
https://svelte.dev/e/effect_in_teardown`);throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/effect_in_teardown")}function Kc(){if($){let r=new Error("effect_in_unowned_derived\nEffect cannot be created inside a `$derived` value that was not itself created inside an effect\nhttps://svelte.dev/e/effect_in_unowned_derived");throw r.name="Svelte error",r}else throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function qc(r){if($){let t=new Error(`effect_orphan
\`${r}\` can only be used inside an effect (e.g. during component initialisation)
https://svelte.dev/e/effect_orphan`);throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/effect_orphan")}function Zc(){if($){let r=new Error(`effect_update_depth_exceeded
Maximum update depth exceeded. This typically indicates that an effect reads and writes the same piece of state
https://svelte.dev/e/effect_update_depth_exceeded`);throw r.name="Svelte error",r}else throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Xc(){if($){let r=new Error(`hydration_failed
Failed to hydrate the application
https://svelte.dev/e/hydration_failed`);throw r.name="Svelte error",r}else throw new Error("https://svelte.dev/e/hydration_failed")}function Jc(r){if($){let t=new Error(`props_invalid_value
Cannot do \`bind:${r}={undefined}\` when \`${r}\` has a fallback value
https://svelte.dev/e/props_invalid_value`);throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/props_invalid_value")}function Qc(r){if($){let t=new Error(`rune_outside_svelte
The \`${r}\` rune is only available inside \`.svelte\` and \`.svelte.js/ts\` files
https://svelte.dev/e/rune_outside_svelte`);throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/rune_outside_svelte")}function ef(){if($){let r=new Error("state_descriptors_fixed\nProperty descriptors defined on `$state` objects must contain `value` and always be `enumerable`, `configurable` and `writable`.\nhttps://svelte.dev/e/state_descriptors_fixed");throw r.name="Svelte error",r}else throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function tf(){if($){let r=new Error("state_prototype_fixed\nCannot set prototype of `$state` object\nhttps://svelte.dev/e/state_prototype_fixed");throw r.name="Svelte error",r}else throw new Error("https://svelte.dev/e/state_prototype_fixed")}function rf(){if($){let r=new Error("state_unsafe_mutation\nUpdating state inside `$derived(...)`, `$inspect(...)` or a template expression is forbidden. If the value should not be reactive, declare it without `$state`\nhttps://svelte.dev/e/state_unsafe_mutation");throw r.name="Svelte error",r}else throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function nf(){if($){let r=new Error("svelte_boundary_reset_onerror\nA `<svelte:boundary>` `reset` function cannot be called while an error is still being handled\nhttps://svelte.dev/e/svelte_boundary_reset_onerror");throw r.name="Svelte error",r}else throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}var rn={};var we=Symbol(),Zt=Symbol("filename");var sf="http://www.w3.org/1999/xhtml";var yn="font-weight: bold",wn="font-weight: normal";function of(r,t){$?console.warn(`%c[svelte] await_waterfall
%cAn async derived, \`${r}\` (${t}) was not read immediately after it resolved. This often indicates an unnecessary waterfall, which can slow down your app
https://svelte.dev/e/await_waterfall`,yn,wn):console.warn("https://svelte.dev/e/await_waterfall")}function af(r,t,n){$?console.warn(`%c[svelte] hydration_attribute_changed
%cThe \`${r}\` attribute on \`${t}\` changed its value between server and client renders. The client value, \`${n}\`, will be ignored in favour of the server value
https://svelte.dev/e/hydration_attribute_changed`,yn,wn):console.warn("https://svelte.dev/e/hydration_attribute_changed")}function In(r){$?console.warn(`%c[svelte] hydration_mismatch
%c${r?`Hydration failed because the initial UI does not match what was rendered on the server. The error occurred near ${r}`:"Hydration failed because the initial UI does not match what was rendered on the server"}
https://svelte.dev/e/hydration_mismatch`,yn,wn):console.warn("https://svelte.dev/e/hydration_mismatch")}function lf(){$?console.warn(`%c[svelte] lifecycle_double_unmount
%cTried to unmount a component that was not mounted
https://svelte.dev/e/lifecycle_double_unmount`,yn,wn):console.warn("https://svelte.dev/e/lifecycle_double_unmount")}function so(r){$?console.warn(`%c[svelte] state_proxy_equality_mismatch
%cReactive \`$state(...)\` proxies and the values they proxy have different identities. Because of this, comparisons with \`${r}\` will produce unexpected results
https://svelte.dev/e/state_proxy_equality_mismatch`,yn,wn):console.warn("https://svelte.dev/e/state_proxy_equality_mismatch")}function cf(){$?console.warn(`%c[svelte] state_proxy_unmount
%cTried to unmount a state proxy, rather than a component
https://svelte.dev/e/state_proxy_unmount`,yn,wn):console.warn("https://svelte.dev/e/state_proxy_unmount")}function ff(){$?console.warn("%c[svelte] svelte_boundary_reset_noop\n%cA `<svelte:boundary>` `reset` function only resets the boundary the first time it is called\nhttps://svelte.dev/e/svelte_boundary_reset_noop",yn,wn):console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function uf(r){$?console.warn(`%c[svelte] transition_slide_display
%cThe \`slide\` transition does not work correctly for elements with \`display: ${r}\`
https://svelte.dev/e/transition_slide_display`,yn,wn):console.warn("https://svelte.dev/e/transition_slide_display")}var I=!1;function Ge(r){I=r}var j;function _e(r){if(r===null)throw In(),rn;return j=r}function tt(){return _e(rt(j))}function C(r){if(I){if(rt(j)!==null)throw In(),rn;j=r}}function Pe(r=1){if(I){for(var t=r,n=j;t--;)n=rt(n);j=n}}function sn(r=!0){for(var t=0,n=j;;){if(n.nodeType===bt){var s=n.data;if(s==="]"){if(t===0)return n;t-=1}else(s==="["||s==="[!")&&(t+=1)}var o=rt(n);r&&n.remove(),n=o}}function ao(r){if(!r||r.nodeType!==bt)throw In(),rn;return r.data}function lo(r){return r===this.v}function co(r,t){return r!=r?t==t:r!==t||r!==null&&typeof r=="object"||typeof r=="function"}function fo(r){return!co(r,this.v)}var ot=!1,Sr=!1,ir=!1;function df(){Sr=!0}var rs=null;function Tt(r,t){return r.label=t,uo(r.v,t),r}function uo(r,t){var n;return(n=r==null?void 0:r[no])==null||n.call(r,t),r}function $r(r){let t=new Error,n=bm();return n.length===0?null:(n.unshift(`
`),Je(t,"stack",{value:n.join(`
`)}),Je(t,"name",{value:r}),t)}function bm(){let r=Error.stackTraceLimit;Error.stackTraceLimit=1/0;let t=new Error().stack;if(Error.stackTraceLimit=r,!t)return[];let n=t.split(`
`),s=[];for(let o=0;o<n.length;o++){let l=n[o],f=l.replaceAll("\\","/");if(l.trim()!=="Error"){if(l.includes("validate_each_keys"))return[];f.includes("svelte/src/internal")||f.includes("node_modules/.vite")||s.push(l)}}return s}var X=null;function on(r){X=r}var Er=null;function hi(r){Er=r}var sr=null;function ho(r){sr=r}function or(r,t=!1,n){X={p:X,i:!1,c:null,e:null,s:r,x:null,l:Sr&&!t?{s:null,u:null,$:[]}:null},$&&(X.function=n,sr=n)}function ar(r){var o;var t=X,n=t.e;if(n!==null){t.e=null;for(var s of n)Ha(s)}return r!==void 0&&(t.x=r),t.i=!0,X=t.p,$&&(sr=(o=X==null?void 0:X.function)!=null?o:null),r!=null?r:{}}function Dr(){return!Sr||X!==null&&X.l===null}var Ln=[];function pf(){var r=Ln;Ln=[],ui(r)}function De(r){if(Ln.length===0&&!Pn){var t=Ln;queueMicrotask(()=>{t===Ln&&pf()})}Ln.push(r)}function mf(){for(;Ln.length>0;)pf()}var Wa=new WeakMap;function po(r){var t=P;if(t===null)return U.f|=8388608,r;if($&&r instanceof Error&&!Wa.has(r)&&Wa.set(r,Tm(r,t)),(t.f&32768)===0){if((t.f&128)===0)throw $&&!t.parent&&r instanceof Error&&_f(r),r;t.b.error(r)}else Nr(r,t)}function Nr(r,t){for(;t!==null;){if((t.f&128)!==0)try{t.b.error(r);return}catch(n){r=n}t=t.parent}throw $&&r instanceof Error&&_f(r),r}function Tm(r,t){var f,d,h;let n=kt(r,"message");if(!(n&&!n.configurable)){for(var s=ns?"  ":"	",o=`
${s}in ${((f=t.fn)==null?void 0:f.name)||"<unknown>"}`,l=t.ctx;l!==null;)o+=`
${s}in ${(d=l.function)==null?void 0:d[Zt].split("/").pop()}`,l=l.p;return{message:r.message+`
${o}
`,stack:(h=r.stack)==null?void 0:h.split(`
`).filter(p=>!p.includes("svelte/src/internal")).join(`
`)}}}function _f(r){let t=Wa.get(r);t&&(Je(r,"message",{value:t.message}),Je(r,"stack",{value:t.stack}))}var Sm=-7169;function ve(r,t){r.f=r.f&Sm|t}function mi(r){(r.f&512)!==0||r.deps===null?ve(r,1024):ve(r,4096)}function gf(r){if(r!==null)for(let t of r)(t.f&2)===0||(t.f&32768)===0||(t.f^=32768,gf(t.deps))}function mo(r,t,n){(r.f&2048)!==0?t.add(r):(r.f&4096)!==0&&n.add(r),gf(r.deps),ve(r,1024)}var _i=new Set,Z=null,os=null,He=null,Lt=[],go=null,Ba=!1,Pn=!1,gi,vi,Yn,yi,as,wi,ki,xi,Ar,Ga,za,yf,Ka=class Ka{constructor(){z(this,Ar);b(this,"committed",!1);b(this,"current",new Map);b(this,"previous",new Map);z(this,gi,new Set);z(this,vi,new Set);z(this,Yn,0);z(this,yi,0);z(this,as,null);z(this,wi,new Set);z(this,ki,new Set);b(this,"skipped_effects",new Set);b(this,"is_fork",!1);z(this,xi,!1)}is_deferred(){return this.is_fork||w(this,yi)>0}process(t){var o;Lt=[],this.apply();var n=[],s=[];for(let l of t)Le(this,Ar,Ga).call(this,l,n,s);if(this.is_deferred())Le(this,Ar,za).call(this,s),Le(this,Ar,za).call(this,n);else{for(let l of w(this,gi))l();w(this,gi).clear(),w(this,Yn)===0&&Le(this,Ar,yf).call(this),os=this,Z=null,vf(s),vf(n),os=null,(o=w(this,as))==null||o.resolve()}He=null}capture(t,n){n!==we&&!this.previous.has(t)&&this.previous.set(t,n),(t.f&8388608)===0&&(this.current.set(t,t.v),He==null||He.set(t,t.v))}activate(){Z=this,this.apply()}deactivate(){Z===this&&(Z=null,He=null)}flush(){if(this.activate(),Lt.length>0){if(ja(),Z!==null&&Z!==this)return}else w(this,Yn)===0&&this.process([]);this.deactivate()}discard(){for(let t of w(this,vi))t(this);w(this,vi).clear()}increment(t){G(this,Yn,w(this,Yn)+1),t&&G(this,yi,w(this,yi)+1)}decrement(t){G(this,Yn,w(this,Yn)-1),t&&G(this,yi,w(this,yi)-1),!w(this,xi)&&(G(this,xi,!0),De(()=>{G(this,xi,!1),this.is_deferred()?Lt.length>0&&this.flush():this.revive()}))}revive(){for(let t of w(this,wi))w(this,ki).delete(t),ve(t,2048),Pt(t);for(let t of w(this,ki))ve(t,4096),Pt(t);this.flush()}oncommit(t){w(this,gi).add(t)}ondiscard(t){w(this,vi).add(t)}settled(){var t;return((t=w(this,as))!=null?t:G(this,as,ro())).promise}static ensure(){if(Z===null){let t=Z=new Ka;_i.add(Z),Pn||De(()=>{Z===t&&t.flush()})}return Z}apply(){if(!(!ot||!this.is_fork&&_i.size===1)){He=new Map(this.current);for(let t of _i)if(t!==this)for(let[n,s]of t.previous)He.has(n)||He.set(n,s)}}};gi=new WeakMap,vi=new WeakMap,Yn=new WeakMap,yi=new WeakMap,as=new WeakMap,wi=new WeakMap,ki=new WeakMap,xi=new WeakMap,Ar=new WeakSet,Ga=function(t,n,s){var _;t.f^=1024;for(var o=t.first,l=null;o!==null;){var f=o.f,d=(f&96)!==0,h=d&&(f&1024)!==0,p=h||(f&8192)!==0||this.skipped_effects.has(o);if(ot&&l===null&&(f&128)!==0&&((_=o.b)!=null&&_.is_pending)&&(l=o),!p&&o.fn!==null){d?o.f^=1024:l!==null&&(f&16777228)!==0?l.b.defer_effect(o):(f&4)!==0?n.push(o):ot&&(f&16777224)!==0?s.push(o):Tn(o)&&((f&16)!==0&&w(this,wi).add(o),bn(o));var g=o.first;if(g!==null){o=g;continue}}var v=o.parent;for(o=o.next;o===null&&v!==null;)v===l&&(l=null),o=v.next,v=v.parent}},za=function(t){for(var n=0;n<t.length;n+=1)mo(t[n],w(this,wi),w(this,ki))},yf=function(){var o;if(_i.size>1){this.previous.clear();var t=He,n=!0;for(let l of _i){if(l===this){n=!1;continue}let f=[];for(let[h,p]of this.current){if(l.current.has(h))if(n&&p!==l.current.get(h))l.current.set(h,p);else continue;f.push(h)}if(f.length===0)continue;let d=[...l.current.keys()].filter(h=>!this.current.has(h));if(d.length>0){var s=Lt;Lt=[];let h=new Set,p=new Map;for(let g of f)wf(g,d,h,p);if(Lt.length>0){Z=l,l.apply();for(let g of Lt)Le(o=l,Ar,Ga).call(o,g,[],[]);l.deactivate()}Lt=s}}Z=null,He=t}this.committed=!0,_i.delete(this)};var Et=Ka;function Un(r){var t=Pn;Pn=!0;try{var n;for(r&&(Z!==null&&ja(),n=r());;){if(mf(),Lt.length===0&&(Z==null||Z.flush(),Lt.length===0))return go=null,n;ja()}}finally{Pn=t}}function ja(){var l;Ba=!0;var r=$?new Set:null;try{for(var t=0;Lt.length>0;){var n=Et.ensure();if(t++>1e3){if($){var s=new Map;for(let f of n.current.keys())for(let[d,h]of(l=f.updated)!=null?l:[]){var o=s.get(d);o||(o={error:h.error,count:0},s.set(d,o)),o.count+=h.count}for(let f of s.values())f.error&&console.error(f.error)}Em()}if(n.process(Lt),Or.clear(),$)for(let f of n.current.keys())r.add(f)}}finally{if(Ba=!1,go=null,$)for(let f of r)f.updated=null}}function Em(){try{Zc()}catch(r){$&&Je(r,"stack",{value:""}),Nr(r,go)}}var St=null;function vf(r){var t=r.length;if(t!==0){for(var n=0;n<t;){var s=r[n++];if((s.f&24576)===0&&Tn(s)&&(St=new Set,bn(s),s.deps===null&&s.first===null&&s.nodes===null&&(s.teardown===null&&s.ac===null?qa(s):s.fn=null),(St==null?void 0:St.size)>0)){Or.clear();for(let o of St){if((o.f&24576)!==0)continue;let l=[o],f=o.parent;for(;f!==null;)St.has(f)&&(St.delete(f),l.push(f)),f=f.parent;for(let d=l.length-1;d>=0;d--){let h=l[d];(h.f&24576)===0&&bn(h)}}St.clear()}}St=null}}function wf(r,t,n,s){if(!n.has(r)&&(n.add(r),r.reactions!==null))for(let o of r.reactions){let l=o.f;(l&2)!==0?wf(o,t,n,s):(l&4194320)!==0&&(l&2048)===0&&kf(o,t,s)&&(ve(o,2048),Pt(o))}}function kf(r,t,n){let s=n.get(r);if(s!==void 0)return s;if(r.deps!==null)for(let o of r.deps){if(t.includes(o))return!0;if((o.f&2)!==0&&kf(o,t,n))return n.set(o,!0),!0}return n.set(r,!1),!1}function Pt(r){for(var t=go=r;t.parent!==null;){t=t.parent;var n=t.f;if(Ba&&t===P&&(n&16)!==0&&(n&262144)===0)return;if((n&96)!==0){if((n&1024)===0)return;t.f^=1024}}Lt.push(t)}function bf(r){let t=0,n=at(0),s;return $&&Tt(n,"createSubscriber version"),()=>{xn()&&(T(n),ze(()=>(t===0&&(s=L(()=>r(()=>Hn(n)))),t+=1,()=>{De(()=>{t-=1,t===0&&(s==null||s(),s=void 0,Hn(n))})})))}}var Mm=589952;function Qa(r,t,n){new Za(r,t,n)}var Yt,ls,Cr,Wn,Rr,Xt,Mt,Fr,an,Sn,Bn,ln,Si,Gn,$i,Ei,Ir,xo,Ye,Tf,Sf,Xa,wo,ko,Ja,Za=class{constructor(t,n,s){z(this,Ye);b(this,"parent");b(this,"is_pending",!1);z(this,Yt);z(this,ls,I?j:null);z(this,Cr);z(this,Wn);z(this,Rr);z(this,Xt,null);z(this,Mt,null);z(this,Fr,null);z(this,an,null);z(this,Sn,null);z(this,Bn,0);z(this,ln,0);z(this,Si,!1);z(this,Gn,!1);z(this,$i,new Set);z(this,Ei,new Set);z(this,Ir,null);z(this,xo,bf(()=>(G(this,Ir,at(w(this,Bn))),$&&Tt(w(this,Ir),"$effect.pending()"),()=>{G(this,Ir,null)})));G(this,Yt,t),G(this,Cr,n),G(this,Wn,s),this.parent=P.b,this.is_pending=!!w(this,Cr).pending,G(this,Rr,Vt(()=>{if(P.b=this,I){let l=w(this,ls);tt(),l.nodeType===bt&&l.data==="[!"?Le(this,Ye,Sf).call(this):(Le(this,Ye,Tf).call(this),w(this,ln)===0&&(this.is_pending=!1))}else{var o=Le(this,Ye,Xa).call(this);try{G(this,Xt,je(()=>s(o)))}catch(l){this.error(l)}w(this,ln)>0?Le(this,Ye,ko).call(this):this.is_pending=!1}return()=>{var l;(l=w(this,Sn))==null||l.remove()}},Mm)),I&&G(this,Yt,j)}defer_effect(t){mo(t,w(this,$i),w(this,Ei))}is_rendered(){return!this.is_pending&&(!this.parent||this.parent.is_rendered())}has_pending_snippet(){return!!w(this,Cr).pending}update_pending_count(t){Le(this,Ye,Ja).call(this,t),G(this,Bn,w(this,Bn)+t),!(!w(this,Ir)||w(this,Si))&&(G(this,Si,!0),De(()=>{G(this,Si,!1),w(this,Ir)&&ur(w(this,Ir),w(this,Bn))}))}get_effect_pending(){return w(this,xo).call(this),T(w(this,Ir))}error(t){var n=w(this,Cr).onerror;let s=w(this,Cr).failed;if(w(this,Gn)||!n&&!s)throw t;w(this,Xt)&&(Me(w(this,Xt)),G(this,Xt,null)),w(this,Mt)&&(Me(w(this,Mt)),G(this,Mt,null)),w(this,Fr)&&(Me(w(this,Fr)),G(this,Fr,null)),I&&(_e(w(this,ls)),Pe(),_e(sn()));var o=!1,l=!1;let f=()=>{if(o){ff();return}o=!0,l&&nf(),Et.ensure(),G(this,Bn,0),w(this,Fr)!==null&&Lr(w(this,Fr),()=>{G(this,Fr,null)}),this.is_pending=this.has_pending_snippet(),G(this,Xt,Le(this,Ye,wo).call(this,()=>(G(this,Gn,!1),je(()=>w(this,Wn).call(this,w(this,Yt)))))),w(this,ln)>0?Le(this,Ye,ko).call(this):this.is_pending=!1};var d=U;try{Ce(null),l=!0,n==null||n(t,f),l=!1}catch(h){Nr(h,w(this,Rr)&&w(this,Rr).parent)}finally{Ce(d)}s&&De(()=>{G(this,Fr,Le(this,Ye,wo).call(this,()=>{Et.ensure(),G(this,Gn,!0);try{return je(()=>{s(w(this,Yt),()=>t,()=>f)})}catch(h){return Nr(h,w(this,Rr).parent),null}finally{G(this,Gn,!1)}}))})}};Yt=new WeakMap,ls=new WeakMap,Cr=new WeakMap,Wn=new WeakMap,Rr=new WeakMap,Xt=new WeakMap,Mt=new WeakMap,Fr=new WeakMap,an=new WeakMap,Sn=new WeakMap,Bn=new WeakMap,ln=new WeakMap,Si=new WeakMap,Gn=new WeakMap,$i=new WeakMap,Ei=new WeakMap,Ir=new WeakMap,xo=new WeakMap,Ye=new WeakSet,Tf=function(){try{G(this,Xt,je(()=>w(this,Wn).call(this,w(this,Yt))))}catch(t){this.error(t)}},Sf=function(){let t=w(this,Cr).pending;t&&(G(this,Mt,je(()=>t(w(this,Yt)))),De(()=>{var n=Le(this,Ye,Xa).call(this);G(this,Xt,Le(this,Ye,wo).call(this,()=>(Et.ensure(),je(()=>w(this,Wn).call(this,n))))),w(this,ln)>0?Le(this,Ye,ko).call(this):(Lr(w(this,Mt),()=>{G(this,Mt,null)}),this.is_pending=!1)}))},Xa=function(){var t=w(this,Yt);return this.is_pending&&(G(this,Sn,qe()),w(this,Yt).before(w(this,Sn)),t=w(this,Sn)),t},wo=function(t){var n=P,s=U,o=X;Ke(w(this,Rr)),Ce(w(this,Rr)),on(w(this,Rr).ctx);try{return t()}catch(l){return po(l),null}finally{Ke(n),Ce(s),on(o)}},ko=function(){let t=w(this,Cr).pending;w(this,Xt)!==null&&(G(this,an,document.createDocumentFragment()),w(this,an).append(w(this,Sn)),bo(w(this,Xt),w(this,an))),w(this,Mt)===null&&G(this,Mt,je(()=>t(w(this,Yt))))},Ja=function(t){var n;if(!this.has_pending_snippet()){this.parent&&Le(n=this.parent,Ye,Ja).call(n,t);return}if(G(this,ln,w(this,ln)+t),w(this,ln)===0){this.is_pending=!1;for(let s of w(this,$i))ve(s,2048),Pt(s);for(let s of w(this,Ei))ve(s,4096),Pt(s);w(this,$i).clear(),w(this,Ei).clear(),w(this,Mt)&&Lr(w(this,Mt),()=>{G(this,Mt,null)}),w(this,an)&&(w(this,Yt).before(w(this,an)),G(this,an,null))}};function To(r,t,n,s){let o=Dr()?$n:zn;var l=r.filter(_=>!_.settled);if(n.length===0&&l.length===0){s(t.map(o));return}var f=Z,d=P,h=$f(),p=l.length===1?l[0].promise:l.length>1?Promise.all(l.map(_=>_.promise)):null;function g(_){h();try{s(_)}catch(y){(d.f&16384)===0&&Nr(y,d)}f==null||f.deactivate(),cs()}if(n.length===0){p.then(()=>g(t.map(o)));return}function v(){h(),Promise.all(n.map(_=>tl(_))).then(_=>g([...t.map(o),..._])).catch(_=>Nr(_,d))}p?p.then(v):v()}function $f(){var r=P,t=U,n=X,s=Z;if($)var o=Er;return function(f=!0){Ke(r),Ce(t),on(n),f&&(s==null||s.activate()),$&&(el(null),hi(o))}}function cs(){Ke(null),Ce(null),on(null),$&&(el(null),hi(null))}var fs=null;function el(r){fs=r}var us=new Set;function $n(r){var t=2050,n=U!==null&&(U.f&2)!==0?U:null;P!==null&&(P.f|=524288);let s={ctx:X,deps:null,effects:null,equals:lo,f:t,fn:r,reactions:null,rv:0,v:we,wv:0,parent:n!=null?n:P,ac:null};return $&&ir&&(s.created=$r("created at")),s}function tl(r,t,n){let s=P;s===null&&Gc();var o=s.b,l=void 0,f=at(we);$&&(f.label=t);var d=!U,h=new Map;return Ef(()=>{var y;$&&(fs=P);var p=ro();l=p.promise;try{Promise.resolve(r()).then(p.resolve,p.reject).then(()=>{g===Z&&g.committed&&g.deactivate(),cs()})}catch(k){p.reject(k),cs()}$&&(fs=null);var g=Z;if(d){var v=o.is_rendered();o.update_pending_count(1),g.increment(v),(y=h.get(g))==null||y.reject(Tr),h.delete(g),h.set(g,p)}let _=(k,E=void 0)=>{if(fs=null,g.activate(),E)E!==Tr&&(f.f|=8388608,ur(f,E));else{(f.f&8388608)!==0&&(f.f^=8388608),ur(f,k);for(let[S,M]of h){if(h.delete(S),S===g)break;M.reject(Tr)}$&&n!==void 0&&(us.add(f),setTimeout(()=>{us.has(f)&&(of(f.label,n),us.delete(f))}))}d&&(o.update_pending_count(-1),g.decrement(v))};p.promise.then(_,k=>_(null,k||"unknown"))}),lt(()=>{for(let p of h.values())p.reject(Tr)}),$&&(f.f|=4194304),new Promise(p=>{function g(v){function _(){v===l?p(f):g(l)}v.then(_,_)}g(l)})}function nl(r){let t=$n(r);return ot||Eo(t),t}function zn(r){let t=$n(r);return t.equals=fo,t}function So(r){var t=r.effects;if(t!==null){r.effects=null;for(var n=0;n<t.length;n+=1)Me(t[n])}}var rl=[];function Om(r){for(var t=r.parent;t!==null;){if((t.f&2)===0)return(t.f&16384)===0?t:null;t=t.parent}return null}function ds(r){var t,n=P;if(Ke(Om(r)),$){let s=jn;vo(new Set);try{rl.includes(r)&&zc(),rl.push(r),r.f&=-32769,So(r),t=$o(r)}finally{Ke(n),vo(s),rl.pop()}}else try{r.f&=-32769,So(r),t=$o(r)}finally{Ke(n)}return t}function il(r){var n,s;var t=ds(r);if(!r.equals(t)&&(r.wv=Ti(),(!((n=Z)!=null&&n.is_fork)||r.deps===null)&&(r.v=t,r.deps===null))){ve(r,1024);return}Jt||(He!==null?(xn()||(s=Z)!=null&&s.is_fork)&&He.set(r,t):mi(r))}var jn=new Set,Or=new Map;function vo(r){jn=r}var sl=!1;function Df(){sl=!0}function at(r,t){var n={f:0,v:r,reactions:null,equals:lo,rv:0,wv:0};return $&&ir&&(n.created=t!=null?t:$r("created at"),n.updated=null,n.set_during_effect=!1,n.trace=null),n}function Re(r,t){let n=at(r,t);return Eo(n),n}function Pr(r,t=!1,n=!0){var o,l;let s=at(r);return t||(s.equals=fo),Sr&&n&&X!==null&&X.l!==null&&((l=(o=X.l).s)!=null?l:o.s=[]).push(s),s}function Y(r,t,n=!1){var o;U!==null&&(!Ot||(U.f&131072)!==0)&&Dr()&&(U.f&4325394)!==0&&!((o=Ct)!=null&&o.includes(r))&&rf();let s=n?At(t):t;return $&&uo(s,r.label),ur(r,s)}function ur(r,t){var o,l,f;if(!r.equals(t)){var n=r.v;Jt?Or.set(r,t):Or.set(r,n),r.v=t;var s=Et.ensure();if(s.capture(r,n),$){if(ir||P!==null){(o=r.updated)!=null||(r.updated=new Map);let d=((f=(l=r.updated.get(""))==null?void 0:l.count)!=null?f:0)+1;if(r.updated.set("",{error:null,count:d}),ir||d>5){let h=$r("updated at");if(h!==null){let p=r.updated.get(h.stack);p||(p={error:h,count:0},r.updated.set(h.stack,p)),p.count++}}}P!==null&&(r.set_during_effect=!0)}if((r.f&2)!==0){let d=r;(r.f&2048)!==0&&ds(d),mi(d)}r.wv=Ti(),Mf(r,2048),Dr()&&P!==null&&(P.f&1024)!==0&&(P.f&96)===0&&(Ut===null?Nf([r]):Ut.push(r)),!s.is_fork&&jn.size>0&&!sl&&yo()}return t}function yo(){sl=!1;for(let r of jn)(r.f&1024)!==0&&ve(r,4096),Tn(r)&&bn(r);jn.clear()}function Hn(r){Y(r,r.v+1)}function Mf(r,t){var g;var n=r.reactions;if(n!==null)for(var s=Dr(),o=n.length,l=0;l<o;l++){var f=n[l],d=f.f;if(!(!s&&f===P)){if($&&(d&131072)!==0){jn.add(f);continue}var h=(d&2048)===0;if(h&&ve(f,t),(d&2)!==0){var p=f;(g=He)==null||g.delete(p),(d&32768)===0&&(d&512&&(f.f|=32768),Mf(p,4096))}else h&&((d&16)!==0&&St!==null&&St.add(f),Pt(f))}}}var Cm=/^[a-zA-Z_$][a-zA-Z_$0-9]*$/;function At(r){if(typeof r!="object"||r===null||Be in r)return r;let t=Fn(r);if(t!==La&&t!==Hc)return r;var n=new Map,s=br(r),o=Re(0),l=$&&ir?$r("created at"):null,f=En,d=v=>{if(En===f)return v();var _=U,y=En;Ce(null),ol(f);var k=v();return Ce(_),ol(y),k};s&&(n.set("length",Re(r.length,l)),$&&(r=Fm(r)));var h="";let p=!1;function g(v){if(!p){p=!0,h=v,Tt(o,`${h} version`);for(let[_,y]of n)Tt(y,Kn(h,_));p=!1}}return new Proxy(r,{defineProperty(v,_,y){(!("value"in y)||y.configurable===!1||y.enumerable===!1||y.writable===!1)&&ef();var k=n.get(_);return k===void 0?k=d(()=>{var E=Re(y.value,l);return n.set(_,E),$&&typeof _=="string"&&Tt(E,Kn(h,_)),E}):Y(k,y.value,!0),!0},deleteProperty(v,_){var y=n.get(_);if(y===void 0){if(_ in v){let k=d(()=>Re(we,l));n.set(_,k),Hn(o),$&&Tt(k,Kn(h,_))}}else Y(y,we),Hn(o);return!0},get(v,_,y){var M;if(_===Be)return r;if($&&_===no)return g;var k=n.get(_),E=_ in v;if(k===void 0&&(!E||(M=kt(v,_))!=null&&M.writable)&&(k=d(()=>{var V=At(E?v[_]:we),se=Re(V,l);return $&&Tt(se,Kn(h,_)),se}),n.set(_,k)),k!==void 0){var S=T(k);return S===we?void 0:S}return Reflect.get(v,_,y)},getOwnPropertyDescriptor(v,_){var y=Reflect.getOwnPropertyDescriptor(v,_);if(y&&"value"in y){var k=n.get(_);k&&(y.value=T(k))}else if(y===void 0){var E=n.get(_),S=E==null?void 0:E.v;if(E!==void 0&&S!==we)return{enumerable:!0,configurable:!0,value:S,writable:!0}}return y},has(v,_){var S;if(_===Be)return!0;var y=n.get(_),k=y!==void 0&&y.v!==we||Reflect.has(v,_);if(y!==void 0||P!==null&&(!k||(S=kt(v,_))!=null&&S.writable)){y===void 0&&(y=d(()=>{var M=k?At(v[_]):we,V=Re(M,l);return $&&Tt(V,Kn(h,_)),V}),n.set(_,y));var E=T(y);if(E===we)return!1}return k},set(v,_,y,k){var ne;var E=n.get(_),S=_ in v;if(s&&_==="length")for(var M=y;M<E.v;M+=1){var V=n.get(M+"");V!==void 0?Y(V,we):M in v&&(V=d(()=>Re(we,l)),n.set(M+"",V),$&&Tt(V,Kn(h,M)))}if(E===void 0)(!S||(ne=kt(v,_))!=null&&ne.writable)&&(E=d(()=>Re(void 0,l)),$&&Tt(E,Kn(h,_)),Y(E,At(y)),n.set(_,E));else{S=E.v!==we;var se=d(()=>At(y));Y(E,se)}var J=Reflect.getOwnPropertyDescriptor(v,_);if(J!=null&&J.set&&J.set.call(k,y),!S){if(s&&typeof _=="string"){var N=n.get("length"),W=Number(_);Number.isInteger(W)&&W>=N.v&&Y(N,W+1)}Hn(o)}return!0},ownKeys(v){T(o);var _=Reflect.ownKeys(v).filter(E=>{var S=n.get(E);return S===void 0||S.v!==we});for(var[y,k]of n)k.v!==we&&!(y in v)&&_.push(y);return _},setPrototypeOf(){tf()}})}function Kn(r,t){var n;return typeof t=="symbol"?`${r}[Symbol(${(n=t.description)!=null?n:""})]`:Cm.test(t)?`${r}.${t}`:/^\d+$/.test(t)?`${r}[${t}]`:`${r}['${t}']`}function Do(r){try{if(r!==null&&typeof r=="object"&&Be in r)return r[Be]}catch(t){}return r}var Rm=new Set(["copyWithin","fill","pop","push","reverse","shift","sort","splice","unshift"]);function Fm(r){return new Proxy(r,{get(t,n,s){var o=Reflect.get(t,n,s);return Rm.has(n)?function(...l){Df();var f=o.apply(this,l);return yo(),f}:o}})}function Af(){let r=Array.prototype,t=Array.__svelte_cleanup;t&&t();let{indexOf:n,lastIndexOf:s,includes:o}=r;r.indexOf=function(l,f){let d=n.call(this,l,f);if(d===-1){for(let h=f!=null?f:0;h<this.length;h+=1)if(Do(this[h])===l){so("array.indexOf(...)");break}}return d},r.lastIndexOf=function(l,f){let d=s.call(this,l,f!=null?f:this.length-1);if(d===-1){for(let h=0;h<=(f!=null?f:this.length-1);h+=1)if(Do(this[h])===l){so("array.lastIndexOf(...)");break}}return d},r.includes=function(l,f){let d=o.call(this,l,f);if(!d){for(let h=0;h<this.length;h+=1)if(Do(this[h])===l){so("array.includes(...)");break}}return d},Array.__svelte_cleanup=()=>{r.indexOf=n,r.lastIndexOf=s,r.includes=o}}var al,Of,ns,Cf,Rf;function Mo(){if(al===void 0){al=window,Of=document,ns=/Firefox/.test(navigator.userAgent);var r=Element.prototype,t=Node.prototype,n=Text.prototype;Cf=kt(t,"firstChild").get,Rf=kt(t,"nextSibling").get,Pa(r)&&(r.__click=void 0,r.__className=void 0,r.__attributes=null,r.__style=void 0,r.__e=void 0),Pa(n)&&(n.__t=void 0),$&&(r.__svelte_meta=null,Af())}}function qe(r=""){return document.createTextNode(r)}function it(r){return Cf.call(r)}function rt(r){return Rf.call(r)}function F(r,t){if(!I)return it(r);var n=it(j);if(n===null)n=j.appendChild(qe());else if(t&&n.nodeType!==ts){var s=qe();return n==null||n.before(s),_e(s),s}return _e(n),n}function ll(r,t=!1){var o,l;if(!I){var n=it(r);return n instanceof Comment&&n.data===""?rt(n):n}if(t&&((o=j)==null?void 0:o.nodeType)!==ts){var s=qe();return(l=j)==null||l.before(s),_e(s),s}return j}function K(r,t=1,n=!1){let s=I?j:r;for(var o;t--;)o=s,s=rt(s);if(!I)return s;if(n&&(s==null?void 0:s.nodeType)!==ts){var l=qe();return s===null?o==null||o.after(l):s.before(l),_e(l),l}return _e(s),s}function Di(r){r.textContent=""}function No(){if(!ot||St!==null)return!1;var r=P.f;return(r&32768)!==0}function cl(r){I&&it(r)!==null&&Di(r)}var Ff=!1;function Ao(){Ff||(Ff=!0,document.addEventListener("reset",r=>{Promise.resolve().then(()=>{var t;if(!r.defaultPrevented)for(let n of r.target.elements)(t=n.__on_r)==null||t.call(n)})},{capture:!0}))}function dr(r){var t=U,n=P;Ce(null),Ke(null);try{return r()}finally{Ce(t),Ke(n)}}function fl(r,t,n,s=n){r.addEventListener(t,()=>dr(n));let o=r.__on_r;o?r.__on_r=()=>{o(),s(!0)}:r.__on_r=()=>s(!0),Ao()}function dl(r){P===null&&(U===null&&qc(r),Kc()),Jt&&jc(r)}function Im(r,t){var n=t.last;n===null?t.last=t.first=r:(n.next=r,r.prev=n,t.last=r)}function hr(r,t,n){var d;var s=P;if($)for(;s!==null&&(s.f&131072)!==0;)s=s.parent;s!==null&&(s.f&8192)!==0&&(r|=8192);var o={ctx:X,deps:null,nodes:null,f:r|2048|512,first:null,fn:t,last:null,next:null,parent:s,b:s&&s.b,prev:null,teardown:null,wv:0,ac:null};if($&&(o.component_function=sr),n)try{bn(o),o.f|=32768}catch(h){throw Me(o),h}else t!==null&&Pt(o);var l=o;if(n&&l.deps===null&&l.teardown===null&&l.nodes===null&&l.first===l.last&&(l.f&524288)===0&&(l=l.first,(r&16)!==0&&(r&65536)!==0&&l!==null&&(l.f|=65536)),l!==null&&(l.parent=s,s!==null&&Im(l,s),U!==null&&(U.f&2)!==0&&(r&64)===0)){var f=U;((d=f.effects)!=null?d:f.effects=[]).push(l)}return o}function xn(){return U!==null&&!Ot}function lt(r){let t=hr(8,null,!1);return ve(t,1024),t.teardown=r,t}function fn(r){var o;dl("$effect"),$&&Je(r,"name",{value:"$effect"});var t=P.f,n=!U&&(t&32)!==0&&(t&32768)===0;if(n){var s=X;((o=s.e)!=null?o:s.e=[]).push(r)}else return Ha(r)}function Ha(r){return hr(1048580,r,!1)}function hs(r){return dl("$effect.pre"),$&&Je(r,"name",{value:"$effect.pre"}),hr(1048584,r,!0)}function hl(r){Et.ensure();let t=hr(524352,r,!0);return()=>{Me(t)}}function Lf(r){Et.ensure();let t=hr(524352,r,!0);return(n={})=>new Promise(s=>{n.outro?Lr(t,()=>{Me(t),s(void 0)}):(Me(t),s(void 0))})}function mt(r){return hr(4,r,!1)}function Ef(r){return hr(4718592,r,!0)}function ze(r,t=0){return hr(8|t,r,!0)}function Fe(r,t=[],n=[],s=[]){To(s,t,n,o=>{hr(8,()=>r(...o.map(T)),!0)})}function Vt(r,t=0){var n=hr(16|t,r,!0);return $&&(n.dev_stack=Er),n}function je(r){return hr(524320,r,!0)}function pl(r){var t=r.teardown;if(t!==null){let n=Jt,s=U;ul(!0),Ce(null);try{t.call(null)}finally{ul(n),Ce(s)}}}function ml(r,t=!1){var n=r.first;for(r.first=r.last=null;n!==null;){let o=n.ac;o!==null&&dr(()=>{o.abort(Tr)});var s=n.next;(n.f&64)!==0?n.parent=null:Me(n,t),n=s}}function Pf(r){for(var t=r.first;t!==null;){var n=t.next;(t.f&32)===0&&Me(t),t=n}}function Me(r,t=!0){var n=!1;(t||(r.f&262144)!==0)&&r.nodes!==null&&r.nodes.end!==null&&(Yf(r.nodes.start,r.nodes.end),n=!0),ml(r,t&&!n),ms(r,0),ve(r,16384);var s=r.nodes&&r.nodes.t;if(s!==null)for(let l of s)l.stop();pl(r);var o=r.parent;o!==null&&o.first!==null&&qa(r),$&&(r.component_function=null),r.next=r.prev=r.teardown=r.ctx=r.deps=r.fn=r.nodes=r.ac=null}function Yf(r,t){for(;r!==null;){var n=r===t?null:rt(r);r.remove(),r=n}}function qa(r){var t=r.parent,n=r.prev,s=r.next;n!==null&&(n.next=s),s!==null&&(s.prev=n),t!==null&&(t.first===r&&(t.first=s),t.last===r&&(t.last=n))}function Lr(r,t,n=!0){var s=[];Vf(r,s,!0);var o=()=>{n&&Me(r),t&&t()},l=s.length;if(l>0){var f=()=>--l||o();for(var d of s)d.out(f)}else o()}function Vf(r,t,n){if((r.f&8192)===0){r.f^=8192;var s=r.nodes&&r.nodes.t;if(s!==null)for(let d of s)(d.is_global||n)&&t.push(d);for(var o=r.first;o!==null;){var l=o.next,f=(o.f&65536)!==0||(o.f&32)!==0&&(r.f&16)!==0;Vf(o,t,f?n:!1),o=l}}}function ps(r){Uf(r,!0)}function Uf(r,t){if((r.f&8192)!==0){r.f^=8192,(r.f&1024)===0&&(ve(r,2048),Pt(r));for(var n=r.first;n!==null;){var s=n.next,o=(n.f&65536)!==0||(n.f&32)!==0;Uf(n,o?t:!1),n=s}var l=r.nodes&&r.nodes.t;if(l!==null)for(let f of l)(f.is_global||t)&&f.in()}}function bo(r,t){if(r.nodes)for(var n=r.nodes.start,s=r.nodes.end;n!==null;){var o=n===s?null:rt(n);t.append(n),n=o}}var Hf=null;var Oo=!1,Jt=!1;function ul(r){Jt=r}var U=null,Ot=!1;function Ce(r){U=r}var P=null;function Ke(r){P=r}var Ct=null;function Eo(r){U!==null&&(!ot||(U.f&2)!==0)&&(Ct===null?Ct=[r]:Ct.push(r))}var Rt=null,Ht=0,Ut=null;function Nf(r){Ut=r}var Wf=1,qn=0,En=qn;function ol(r){En=r}function Ti(){return++Wf}function Tn(r){var t=r.f;if((t&2048)!==0)return!0;if(t&2&&(r.f&=-32769),(t&4096)!==0){for(var n=r.deps,s=n.length,o=0;o<s;o++){var l=n[o];if(Tn(l)&&il(l),l.wv>r.wv)return!0}(t&512)!==0&&He===null&&ve(r,1024)}return!1}function Bf(r,t,n=!0){var s=r.reactions;if(s!==null&&!(!ot&&(Ct!=null&&Ct.includes(r))))for(var o=0;o<s.length;o++){var l=s[o];(l.f&2)!==0?Bf(l,t,!1):t===l&&(n?ve(l,2048):(l.f&1024)!==0&&ve(l,4096),Pt(l))}}function $o(r){var k,E;var t=Rt,n=Ht,s=Ut,o=U,l=Ct,f=X,d=Ot,h=En,p=r.f;Rt=null,Ht=0,Ut=null,U=(p&96)===0?r:null,Ct=null,on(r.ctx),Ot=!1,En=++qn,r.ac!==null&&(dr(()=>{r.ac.abort(Tr)}),r.ac=null);try{r.f|=2097152;var g=r.fn,v=g(),_=r.deps;if(Rt!==null){var y;if(ms(r,Ht),_!==null&&Ht>0)for(_.length=Ht+Rt.length,y=0;y<Rt.length;y++)_[Ht+y]=Rt[y];else r.deps=_=Rt;if(xn()&&(r.f&512)!==0)for(y=Ht;y<_.length;y++)((E=(k=_[y]).reactions)!=null?E:k.reactions=[]).push(r)}else _!==null&&Ht<_.length&&(ms(r,Ht),_.length=Ht);if(Dr()&&Ut!==null&&!Ot&&_!==null&&(r.f&6146)===0)for(y=0;y<Ut.length;y++)Bf(Ut[y],r);if(o!==null&&o!==r){if(qn++,o.deps!==null)for(let S=0;S<n;S+=1)o.deps[S].rv=qn;if(t!==null)for(let S of t)S.rv=qn;Ut!==null&&(s===null?s=Ut:s.push(...Ut))}return(r.f&8388608)!==0&&(r.f^=8388608),v}catch(S){return po(S)}finally{r.f^=2097152,Rt=t,Ht=n,Ut=s,U=o,Ct=l,on(f),Ot=d,En=h}}function Lm(r,t){let n=t.reactions;if(n!==null){var s=Uc.call(n,r);if(s!==-1){var o=n.length-1;o===0?n=t.reactions=null:(n[s]=n[o],n.pop())}}if(n===null&&(t.f&2)!==0&&(Rt===null||!Rt.includes(t))){var l=t;(l.f&512)!==0&&(l.f^=512,l.f&=-32769),mi(l),So(l),ms(l,0)}}function ms(r,t){var n=r.deps;if(n!==null)for(var s=t;s<n.length;s++)Lm(r,n[s])}function bn(r){var h;var t=r.f;if((t&16384)===0){ve(r,1024);var n=P,s=Oo;if(P=r,Oo=!0,$){var o=sr;ho(r.component_function);var l=Er;hi((h=r.dev_stack)!=null?h:Er)}try{(t&16777232)!==0?Pf(r):ml(r),pl(r);var f=$o(r);if(r.teardown=typeof f=="function"?f:null,r.wv=Wf,$&&ir&&(r.f&2048)!==0&&r.deps!==null)for(var d of r.deps)d.set_during_effect&&(d.wv=Ti(),d.set_during_effect=!1)}finally{Oo=s,P=n,$&&(ho(o),hi(l))}}}async function Ro(){if(ot)return new Promise(r=>{requestAnimationFrame(()=>r()),setTimeout(()=>r())});await Promise.resolve(),Un()}function T(r){var y,k,E;var t=r.f,n=(t&2)!==0;if((y=Hf)==null||y.add(r),U!==null&&!Ot){var s=P!==null&&(P.f&16384)!==0;if(!s&&!(Ct!=null&&Ct.includes(r))){var o=U.deps;if((U.f&2097152)!==0)r.rv<qn&&(r.rv=qn,Rt===null&&o!==null&&o[Ht]===r?Ht++:Rt===null?Rt=[r]:Rt.push(r));else{((k=U.deps)!=null?k:U.deps=[]).push(r);var l=r.reactions;l===null?r.reactions=[U]:l.includes(U)||l.push(U)}}}if($&&(us.delete(r),ir&&!Ot&&rs!==null&&U!==null&&rs.reaction===U))if(r.trace)r.trace();else{var f=$r("traced at");if(f){var d=rs.entries.get(r);d===void 0&&(d={traces:[]},rs.entries.set(r,d));var h=d.traces[d.traces.length-1];f.stack!==(h==null?void 0:h.stack)&&d.traces.push(f)}}if(Jt&&Or.has(r))return Or.get(r);if(n){var p=r;if(Jt){var g=p.v;return((p.f&1024)===0&&p.reactions!==null||zf(p))&&(g=ds(p)),Or.set(p,g),g}var v=(p.f&512)===0&&!Ot&&U!==null&&(Oo||(U.f&512)!==0),_=p.deps===null;Tn(p)&&(v&&(p.f|=512),il(p)),v&&!_&&Gf(p)}if((E=He)!=null&&E.has(r))return He.get(r);if((r.f&8388608)!==0)throw r.v;return r.v}function Gf(r){var t;if(r.deps!==null){r.f|=512;for(let n of r.deps)((t=n.reactions)!=null?t:n.reactions=[]).push(r),(n.f&2)!==0&&(n.f&512)===0&&Gf(n)}}function zf(r){if(r.v===we)return!0;if(r.deps===null)return!1;for(let t of r.deps)if(Or.has(t)||(t.f&2)!==0&&zf(t))return!0;return!1}function L(r){var t=Ot;try{return Ot=!0,r()}finally{Ot=t}}function $e(r){if(!(typeof r!="object"||!r||r instanceof EventTarget)){if(Be in r)Co(r);else if(!Array.isArray(r))for(let t in r){let n=r[t];typeof n=="object"&&n&&Be in n&&Co(n)}}}function Co(r,t=new Set){if(typeof r=="object"&&r!==null&&!(r instanceof EventTarget)&&!t.has(r)){t.add(r),r instanceof Date&&r.getTime();for(let s in r)try{Co(r[s],t)}catch(o){}let n=Fn(r);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){let s=to(n);for(let o in s){let l=s[o].get;if(l)try{l.call(r)}catch(f){}}}}}var Ym=["allowfullscreen","async","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","indeterminate","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected","webkitdirectory","defer","disablepictureinpicture","disableremoteplayback"];var hk=[...Ym,"formNoValidate","isMap","noModule","playsInline","readOnly","value","volume","defaultValue","defaultChecked","srcObject","noValidate","allowFullscreen","disablePictureInPicture","disableRemotePlayback"];var Vm=["touchstart","touchmove"];function jf(r){return Vm.includes(r)}var Um=["$state","$state.raw","$derived","$derived.by"],pk=[...Um,"$state.eager","$state.snapshot","$props","$props.id","$bindable","$effect","$effect.pre","$effect.tracking","$effect.root","$effect.pending","$inspect","$inspect().with","$inspect.trace","$host"];var qf=new Map;function Zf(r,t){var n=qf.get(r);n||(n=new Set,qf.set(r,n)),n.add(t)}var gl=new Set,Fo=new Set;function Qf(r,t,n,s={}){function o(l){if(s.capture||Ni.call(t,l),!l.cancelBubble)return dr(()=>n==null?void 0:n.call(this,l))}return r.startsWith("pointer")||r.startsWith("touch")||r==="wheel"?De(()=>{t.addEventListener(r,o,s)}):t.addEventListener(r,o,s),o}function _s(r,t,n,s,o){var l={capture:s,passive:o},f=Qf(r,t,n,l);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&lt(()=>{t.removeEventListener(r,f,l)})}function Mi(r){for(var t=0;t<r.length;t++)gl.add(r[t]);for(var n of Fo)n(r)}var Jf=null;function Ni(r){var S;var t=this,n=t.ownerDocument,s=r.type,o=((S=r.composedPath)==null?void 0:S.call(r))||[],l=o[0]||r.target;Jf=r;var f=0,d=Jf===r&&r.__root;if(d){var h=o.indexOf(d);if(h!==-1&&(t===document||t===window)){r.__root=t;return}var p=o.indexOf(t);if(p===-1)return;h<=p&&(f=h)}if(l=o[f]||r.target,l!==t){Je(r,"currentTarget",{configurable:!0,get(){return l||n}});var g=U,v=P;Ce(null),Ke(null);try{for(var _,y=[];l!==null;){var k=l.assignedSlot||l.parentNode||l.host||null;try{var E=l["__"+s];E!=null&&(!l.disabled||r.target===l)&&E.call(l,r)}catch(M){_?y.push(M):_=M}if(r.cancelBubble||k===t||k===null)break;l=k}if(_){for(let M of y)queueMicrotask(()=>{throw M});throw _}}finally{r.__root=t,delete r.currentTarget,Ce(g),Ke(v)}}}function Io(r){var t=document.createElement("template");return t.innerHTML=r.replaceAll("<!>","<!---->"),t.content}function Dn(r,t){var n=P;n.nodes===null&&(n.nodes={start:r,end:t,a:null,t:null})}function ue(r,t){var n=(t&1)!==0,s=(t&2)!==0,o,l=!r.startsWith("<!>");return()=>{if(I)return Dn(j,null),j;o===void 0&&(o=Io(l?r:"<!>"+r),n||(o=it(o)));var f=s||ns?document.importNode(o,!0):o.cloneNode(!0);if(n){var d=it(f),h=f.lastChild;Dn(d,h)}else Dn(f,f);return f}}function fe(r,t){if(I){var n=P;((n.f&32768)===0||n.nodes.end===null)&&(n.nodes.end=j),tt();return}r!==null&&r.before(t)}var Lo=!0;function ge(r,t){var s;var n=t==null?"":typeof t=="object"?t+"":t;n!==((s=r.__t)!=null?s:r.__t=r.nodeValue)&&(r.__t=n,r.nodeValue=n+"")}function Yr(r,t){return tu(r,t)}function yl(r,t){var f;Mo(),t.intro=(f=t.intro)!=null?f:!1;let n=t.target,s=I,o=j;try{for(var l=it(n);l&&(l.nodeType!==bt||l.data!=="[");)l=rt(l);if(!l)throw rn;Ge(!0),_e(l);let d=tu(r,{...t,anchor:l});return Ge(!1),d}catch(d){if(d instanceof Error&&d.message.split(`
`).some(h=>h.startsWith("https://svelte.dev/e/")))throw d;return d!==rn&&console.warn("Failed to hydrate: ",d),t.recover===!1&&Xc(),Mo(),Di(n),Ge(!1),Yr(r,t)}finally{Ge(s),_e(o)}}var Ai=new Map;function tu(r,{target:t,anchor:n,props:s={},events:o,context:l,intro:f=!0}){Mo();var d=new Set,h=v=>{for(var _=0;_<v.length;_++){var y=v[_];if(!d.has(y)){d.add(y);var k=jf(y);t.addEventListener(y,Ni,{passive:k});var E=Ai.get(y);E===void 0?(document.addEventListener(y,Ni,{passive:k}),Ai.set(y,1)):Ai.set(y,E+1)}}};h(fi(gl)),Fo.add(h);var p=void 0,g=Lf(()=>{var v=n!=null?n:t.appendChild(qe());return Qa(v,{pending:()=>{}},_=>{if(l){or({});var y=X;y.c=l}if(o&&(s.$$events=o),I&&Dn(_,null),Lo=f,p=r(_,s)||{},Lo=!0,I&&(P.nodes.end=j,j===null||j.nodeType!==bt||j.data!=="]"))throw In(),rn;l&&ar()}),()=>{var k;for(var _ of d){t.removeEventListener(_,Ni);var y=Ai.get(_);--y===0?(document.removeEventListener(_,Ni),Ai.delete(_)):Ai.set(_,y)}Fo.delete(h),v!==n&&((k=v.parentNode)==null||k.removeChild(v))}});return vl.set(p,g),p}var vl=new WeakMap;function un(r,t){let n=vl.get(r);return n?(vl.delete(r),n(t)):($&&(Be in r?cf():lf()),Promise.resolve())}var pr,Vr,Wt,Zn,gs,vs,Po,dn=class{constructor(t,n=!0){b(this,"anchor");z(this,pr,new Map);z(this,Vr,new Map);z(this,Wt,new Map);z(this,Zn,new Set);z(this,gs,!0);z(this,vs,()=>{var t=Z;if(w(this,pr).has(t)){var n=w(this,pr).get(t),s=w(this,Vr).get(n);if(s)ps(s),w(this,Zn).delete(n);else{var o=w(this,Wt).get(n);o&&(w(this,Vr).set(n,o.effect),w(this,Wt).delete(n),o.fragment.lastChild.remove(),this.anchor.before(o.fragment),s=o.effect)}for(let[l,f]of w(this,pr)){if(w(this,pr).delete(l),l===t)break;let d=w(this,Wt).get(f);d&&(Me(d.effect),w(this,Wt).delete(f))}for(let[l,f]of w(this,Vr)){if(l===n||w(this,Zn).has(l))continue;let d=()=>{if(Array.from(w(this,pr).values()).includes(l)){var p=document.createDocumentFragment();bo(f,p),p.append(qe()),w(this,Wt).set(l,{effect:f,fragment:p})}else Me(f);w(this,Zn).delete(l),w(this,Vr).delete(l)};w(this,gs)||!s?(w(this,Zn).add(l),Lr(f,d,!1)):d()}}});z(this,Po,t=>{w(this,pr).delete(t);let n=Array.from(w(this,pr).values());for(let[s,o]of w(this,Wt))n.includes(s)||(Me(o.effect),w(this,Wt).delete(s))});this.anchor=t,G(this,gs,n)}ensure(t,n){var s=Z,o=No();if(n&&!w(this,Vr).has(t)&&!w(this,Wt).has(t))if(o){var l=document.createDocumentFragment(),f=qe();l.append(f),w(this,Wt).set(t,{effect:je(()=>n(f)),fragment:l})}else w(this,Vr).set(t,je(()=>n(this.anchor)));if(w(this,pr).set(s,t),o){for(let[d,h]of w(this,Vr))d===t?s.skipped_effects.delete(h):s.skipped_effects.add(h);for(let[d,h]of w(this,Wt))d===t?s.skipped_effects.delete(h.effect):s.skipped_effects.add(h.effect);s.oncommit(w(this,vs)),s.ondiscard(w(this,Po))}else I&&(this.anchor=j),w(this,vs).call(this)}};pr=new WeakMap,Vr=new WeakMap,Wt=new WeakMap,Zn=new WeakMap,gs=new WeakMap,vs=new WeakMap,Po=new WeakMap;function Bt(r,t,n=!1){I&&tt();var s=new dn(r),o=n?65536:0;function l(f,d){if(I){let p=ao(r)==="[!";if(f===p){var h=sn();_e(h),s.anchor=h,Ge(!1),s.ensure(f,d),Ge(!0);return}}s.ensure(f,d)}Vt(()=>{var f=!1;t((d,h=!0)=>{f=!0,l(h,d)}),f||l(!1,null)},o)}function mr(r,t){return t}function Jm(r,t,n){var v;for(var s=[],o=t.length,l,f=t.length,d=0;d<o;d++){let _=t[d];Lr(_,()=>{if(l){if(l.pending.delete(_),l.done.add(_),l.pending.size===0){var y=r.outrogroups;wl(fi(l.done)),y.delete(l),y.size===0&&(r.outrogroups=null)}}else f-=1},!1)}if(f===0){var h=s.length===0&&n!==null;if(h){var p=n,g=p.parentNode;Di(g),g.append(p),r.items.clear()}wl(t,!h)}else l={pending:new Set(t),done:new Set},((v=r.outrogroups)!=null?v:r.outrogroups=new Set).add(l)}function wl(r,t=!0){for(var n=0;n<r.length;n++)Me(r[n],t)}var Oi;function _r(r,t,n,s,o,l=null){var f=r,d=new Map,h=(t&4)!==0;if(h){var p=r;f=I?_e(it(p)):p.appendChild(qe())}I&&tt();var g=null,v=zn(()=>{var M=n();return br(M)?M:M==null?[]:fi(M)}),_,y=!0;function k(){S.fallback=g,Qm(S,_,f,t,s),g!==null&&(_.length===0?(g.f&33554432)===0?ps(g):(g.f^=33554432,ys(g,null,f)):Lr(g,()=>{g=null}))}var E=Vt(()=>{_=T(v);var M=_.length;let V=!1;if(I){var se=ao(f)==="[!";se!==(M===0)&&(f=sn(),_e(f),Ge(!1),V=!0)}for(var J=new Set,N=Z,W=No(),ne=0;ne<M;ne+=1){I&&j.nodeType===bt&&j.data==="]"&&(f=j,V=!0,Ge(!1));var te=_[ne],We=s(te,ne),he=y?null:d.get(We);he?(he.v&&ur(he.v,te),he.i&&ur(he.i,ne),W&&N.skipped_effects.delete(he.e)):(he=e_(d,y?f:Oi!=null?Oi:Oi=qe(),te,We,ne,o,t,n),y||(he.e.f|=33554432),d.set(We,he)),J.add(We)}if(M===0&&l&&!g&&(y?g=je(()=>l(f)):(g=je(()=>l(Oi!=null?Oi:Oi=qe())),g.f|=33554432)),I&&M>0&&_e(sn()),!y)if(W){for(let[ke,er]of d)J.has(ke)||N.skipped_effects.add(er.e);N.oncommit(k),N.ondiscard(()=>{})}else k();V&&Ge(!0),T(v)}),S={effect:E,flags:t,items:d,outrogroups:null,fallback:g};y=!1,I&&(f=j)}function Qm(r,t,n,s,o){var he,ke,er,zt,Ft,yr,Wr,H,q;var l=(s&8)!==0,f=t.length,d=r.items,h=r.effect.first,p,g=null,v,_=[],y=[],k,E,S,M;if(l)for(M=0;M<f;M+=1)k=t[M],E=o(k,M),S=d.get(E).e,(S.f&33554432)===0&&((ke=(he=S.nodes)==null?void 0:he.a)==null||ke.measure(),(v!=null?v:v=new Set).add(S));for(M=0;M<f;M+=1){if(k=t[M],E=o(k,M),S=d.get(E).e,r.outrogroups!==null)for(let oe of r.outrogroups)oe.pending.delete(S),oe.done.delete(S);if((S.f&33554432)!==0)if(S.f^=33554432,S===h)ys(S,null,n);else{var V=g?g.next:h;S===r.effect.last&&(r.effect.last=S.prev),S.prev&&(S.prev.next=S.next),S.next&&(S.next.prev=S.prev),Mn(r,g,S),Mn(r,S,V),ys(S,V,n),g=S,_=[],y=[],h=g.next;continue}if((S.f&8192)!==0&&(ps(S),l&&((zt=(er=S.nodes)==null?void 0:er.a)==null||zt.unfix(),(v!=null?v:v=new Set).delete(S))),S!==h){if(p!==void 0&&p.has(S)){if(_.length<y.length){var se=y[0],J;g=se.prev;var N=_[0],W=_[_.length-1];for(J=0;J<_.length;J+=1)ys(_[J],se,n);for(J=0;J<y.length;J+=1)p.delete(y[J]);Mn(r,N.prev,W.next),Mn(r,g,N),Mn(r,W,se),h=se,g=W,M-=1,_=[],y=[]}else p.delete(S),ys(S,h,n),Mn(r,S.prev,S.next),Mn(r,S,g===null?r.effect.first:g.next),Mn(r,g,S),g=S;continue}for(_=[],y=[];h!==null&&h!==S;)(p!=null?p:p=new Set).add(h),y.push(h),h=h.next;if(h===null)continue}(S.f&33554432)===0&&_.push(S),g=S,h=S.next}if(r.outrogroups!==null){for(let oe of r.outrogroups)oe.pending.size===0&&(wl(fi(oe.done)),(Ft=r.outrogroups)==null||Ft.delete(oe));r.outrogroups.size===0&&(r.outrogroups=null)}if(h!==null||p!==void 0){var ne=[];if(p!==void 0)for(S of p)(S.f&8192)===0&&ne.push(S);for(;h!==null;)(h.f&8192)===0&&h!==r.fallback&&ne.push(h),h=h.next;var te=ne.length;if(te>0){var We=(s&4)!==0&&f===0?n:null;if(l){for(M=0;M<te;M+=1)(Wr=(yr=ne[M].nodes)==null?void 0:yr.a)==null||Wr.measure();for(M=0;M<te;M+=1)(q=(H=ne[M].nodes)==null?void 0:H.a)==null||q.fix()}Jm(r,ne,We)}}l&&De(()=>{var oe,ae;if(v!==void 0)for(S of v)(ae=(oe=S.nodes)==null?void 0:oe.a)==null||ae.apply()})}function e_(r,t,n,s,o,l,f,d){var h=(f&1)!==0?(f&16)===0?Pr(n,!1,!1):at(n):null,p=(f&2)!==0?at(o):null;return $&&h&&(h.trace=()=>{var g;d()[(g=p==null?void 0:p.v)!=null?g:o]}),{v:h,i:p,e:je(()=>(l(t,h!=null?h:n,p!=null?p:o,d),()=>{r.delete(s)}))}}function ys(r,t,n){if(r.nodes)for(var s=r.nodes.start,o=r.nodes.end,l=t&&(t.f&33554432)===0?t.nodes.start:n;s!==null;){var f=rt(s);if(l.before(s),s===o)return;s=f}}function Mn(r,t,n){t===null?r.effect.first=n:t.next=n,n===null?r.effect.last=t:n.prev=t}function Yo(r,t,n,s,o){var d;I&&tt();var l=(d=t.$$slots)==null?void 0:d[n],f=!1;l===!0&&(l=t[n==="default"?"children":n],f=!0),l===void 0?o!==null&&o(r):l(r,f?()=>s:s)}function kl(r){let t={};r.children&&(t.default=!0);for(let n in r.$$slots)t[n]=!0;return t}var n_=eo?()=>performance.now():()=>Date.now(),gr={tick:r=>(eo?requestAnimationFrame:xt)(r),now:()=>n_(),tasks:new Set};function nu(){let r=gr.now();gr.tasks.forEach(t=>{t.c(r)||(gr.tasks.delete(t),t.f())}),gr.tasks.size!==0&&gr.tick(nu)}function iu(r){let t;return gr.tasks.size===0&&gr.tick(nu),{promise:new Promise(n=>{gr.tasks.add(t={c:r,f:n})}),abort(){gr.tasks.delete(t)}}}function Vo(r,t){dr(()=>{r.dispatchEvent(new CustomEvent(t))})}function a_(r){if(r==="float")return"cssFloat";if(r==="offset")return"cssOffset";if(r.startsWith("--"))return r;let t=r.split("-");return t.length===1?t[0]:t[0]+t.slice(1).map(n=>n[0].toUpperCase()+n.slice(1)).join("")}function su(r){let t={},n=r.split(";");for(let s of n){let[o,l]=s.split(":");if(!o||l===void 0)break;let f=a_(o.trim());t[f]=l.trim()}return t}var l_=r=>r;function ws(r,t,n,s){var se,J;var o=(r&1)!==0,l=(r&2)!==0,f=o&&l,d=(r&4)!==0,h=f?"both":o?"in":"out",p,g=t.inert,v=t.style.overflow,_,y;function k(){return dr(()=>{var N;return p!=null?p:p=n()(t,(N=s==null?void 0:s())!=null?N:{},{direction:h})})}var E={is_global:d,in(){var N;if(t.inert=g,!o){y==null||y.abort(),(N=y==null?void 0:y.reset)==null||N.call(y);return}l||_==null||_.abort(),Vo(t,"introstart"),_=xl(t,k(),y,1,()=>{Vo(t,"introend"),_==null||_.abort(),_=p=void 0,t.style.overflow=v})},out(N){if(!l){N==null||N(),p=void 0;return}t.inert=!0,Vo(t,"outrostart"),y=xl(t,k(),_,0,()=>{Vo(t,"outroend"),N==null||N()})},stop:()=>{_==null||_.abort(),y==null||y.abort()}},S=P;if(((J=(se=S.nodes).t)!=null?J:se.t=[]).push(E),o&&Lo){var M=d;if(!M){for(var V=S.parent;V&&(V.f&65536)!==0;)for(;(V=V.parent)&&(V.f&16)===0;);M=!V||(V.f&32768)!==0}M&&mt(()=>{L(()=>E.in())})}}function xl(r,t,n,s,o){var l=s===1;if(Ya(t)){var f,d=!1;return De(()=>{if(!d){var S=t({direction:l?"in":"out"});f=xl(r,S,n,s,o)}}),{abort:()=>{d=!0,f==null||f.abort()},deactivate:()=>f.deactivate(),reset:()=>f.reset(),t:()=>f.t()}}if(n==null||n.deactivate(),!(t!=null&&t.duration))return o(),{abort:xt,deactivate:xt,reset:xt,t:()=>s};let{delay:h=0,css:p,tick:g,easing:v=l_}=t;var _=[];if(l&&n===void 0&&(g&&g(0,1),p)){var y=su(p(0,1));_.push(y,y)}var k=()=>1-s,E=r.animate(_,{duration:h,fill:"forwards"});return E.onfinish=()=>{var We;E.cancel();var S=(We=n==null?void 0:n.t())!=null?We:1-s;n==null||n.abort();var M=s-S,V=t.duration*Math.abs(M),se=[];if(V>0){var J=!1;if(p)for(var N=Math.ceil(V/16.666666666666668),W=0;W<=N;W+=1){var ne=S+M*v(W/N),te=su(p(ne,1-ne));se.push(te),J||(J=te.overflow==="hidden")}J&&(r.style.overflow="hidden"),k=()=>{var he=E.currentTime;return S+M*v(he/V)},g&&iu(()=>{if(E.playState!=="running")return!1;var he=k();return g(he,1-he),!0})}E=r.animate(se,{duration:V,fill:"forwards"}),E.onfinish=()=>{k=()=>s,g==null||g(s,1-s),o()}},{abort:()=>{E&&(E.cancel(),E.effect=null,E.onfinish=xt)},deactivate:()=>{o=xt},reset:()=>{s===0&&(g==null||g(1,0))},t:()=>k()}}function vr(r,t){mt(()=>{var o;var n=r.getRootNode(),s=n.host?n:(o=n.head)!=null?o:n.ownerDocument.head;if(!s.querySelector("#"+t.hash)){let l=document.createElement("style");l.id=t.hash,l.textContent=t.code,s.appendChild(l),$&&Zf(t.hash,l)}})}function bl(r,t,n){mt(()=>{var s=L(()=>t(r,n==null?void 0:n())||{});if(n&&(s!=null&&s.update)){var o=!1,l={};ze(()=>{var f=n();$e(f),o&&co(l,f)&&(l=f,s.update(f))}),o=!0}if(s!=null&&s.destroy)return()=>s.destroy()})}var ou=[...` 	
\r\f\xA0\v\uFEFF`];function au(r,t,n){var s=r==null?"":""+r;if(t&&(s=s?s+" "+t:t),n){for(var o in n)if(n[o])s=s?s+" "+o:o;else if(s.length)for(var l=o.length,f=0;(f=s.indexOf(o,f))>=0;){var d=f+l;(f===0||ou.includes(s[f-1]))&&(d===s.length||ou.includes(s[d]))?s=(f===0?"":s.substring(0,f))+s.substring(d+1):f=d}}return s===""?null:s}function Ur(r,t,n,s,o,l){var f=r.__className;if(I||f!==n||f===void 0){var d=au(n,s,l);(!I||d!==r.getAttribute("class"))&&(d==null?r.removeAttribute("class"):t?r.className=d:r.setAttribute("class",d)),r.__className=n}else if(l&&o!==l)for(var h in l){var p=!!l[h];(o==null||p!==!!o[h])&&r.classList.toggle(h,p)}return l}var __=Symbol("is custom element"),g_=Symbol("is html");function $l(r){if(I){var t=!1,n=()=>{if(!t){if(t=!0,r.hasAttribute("value")){var s=r.value;Tl(r,"value",null),r.value=s}if(r.hasAttribute("checked")){var o=r.checked;Tl(r,"checked",null),r.checked=o}}};r.__on_r=n,De(n),Ao()}}function El(r,t){var n=uu(r);n.value===(n.value=t!=null?t:void 0)||r.value===t&&(t!==0||r.nodeName!=="PROGRESS")||(r.value=t!=null?t:"")}function Tl(r,t,n,s){var o=uu(r);if(I&&(o[t]=r.getAttribute(t),t==="src"||t==="srcset"||t==="href"&&r.nodeName==="LINK")){s||y_(r,t,n!=null?n:"");return}o[t]!==(o[t]=n)&&(t==="loading"&&(r[Bc]=n),n==null?r.removeAttribute(t):typeof n!="string"&&v_(r).includes(t)?r[t]=n:r.setAttribute(t,n))}function uu(r){var t;return(t=r.__attributes)!=null?t:r.__attributes={[__]:r.nodeName.includes("-"),[g_]:r.namespaceURI===sf}}var lu=new Map;function v_(r){var t=r.getAttribute("is")||r.nodeName,n=lu.get(t);if(n)return n;lu.set(t,n=[]);for(var s,o=r,l=Element.prototype;l!==o;){s=to(o);for(var f in s)s[f].set&&n.push(f);o=Fn(o)}return n}function y_(r,t,n){var s;$&&(t==="srcset"&&w_(r,n)||Sl((s=r.getAttribute(t))!=null?s:"",n)||af(t,r.outerHTML.replace(r.innerHTML,r.innerHTML&&"..."),String(n)))}function Sl(r,t){return r===t?!0:new URL(r,document.baseURI).href===new URL(t,document.baseURI).href}function cu(r){return r.split(",").map(t=>t.trim().split(" ").filter(Boolean))}function w_(r,t){var n=cu(r.srcset),s=cu(t);return s.length===n.length&&s.every(([o,l],f)=>l===n[f][1]&&(Sl(n[f][0],o)||Sl(o,n[f][0])))}function Nl(r,t,n=t){var s=new WeakSet;fl(r,"input",async o=>{$&&r.type==="checkbox"&&Va();var l=o?r.defaultValue:r.value;if(l=Dl(r)?Ml(l):l,n(l),Z!==null&&s.add(Z),await Ro(),l!==(l=t())){var f=r.selectionStart,d=r.selectionEnd,h=r.value.length;if(r.value=l!=null?l:"",d!==null){var p=r.value.length;f===d&&d===h&&p>h?(r.selectionStart=p,r.selectionEnd=p):(r.selectionStart=f,r.selectionEnd=Math.min(d,p))}}}),(I&&r.defaultValue!==r.value||L(t)==null&&r.value)&&(n(Dl(r)?Ml(r.value):r.value),Z!==null&&s.add(Z)),ze(()=>{var f;$&&r.type==="checkbox"&&Va();var o=t();if(r===document.activeElement){var l=(f=os)!=null?f:Z;if(s.has(l))return}Dl(r)&&o===Ml(r.value)||r.type==="date"&&!o&&!r.value||o!==r.value&&(r.value=o!=null?o:"")})}function Dl(r){var t=r.type;return t==="number"||t==="range"}function Ml(r){return r===""?null:+r}function du(r,t){return r===t||(r==null?void 0:r[Be])===t}function Ci(r={},t,n,s){return mt(()=>{var o,l;return ze(()=>{o=l,l=(s==null?void 0:s())||[],L(()=>{r!==n(...l)&&(t(r,...l),o&&du(n(...o),r)&&t(null,...o))})}),()=>{De(()=>{l&&du(n(...l),r)&&t(null,...l)})}}),r}function ks(r=!1){let t=X,n=t.l.u;if(!n)return;let s=()=>$e(t.s);if(r){let o=0,l={},f=$n(()=>{let d=!1,h=t.s;for(let p in h)h[p]!==l[p]&&(l[p]=h[p],d=!0);return d&&o++,o});s=()=>T(f)}n.b.length&&hs(()=>{hu(t,s),ui(n.b)}),fn(()=>{let o=L(()=>n.m.map(Wc));return()=>{for(let l of o)typeof l=="function"&&l()}}),n.a.length&&fn(()=>{hu(t,s),ui(n.a)})}function hu(r,t){if(r.l.s)for(let n of r.l.s)T(n);t()}var Ho=!1;function Al(r){var t=Ho;try{return Ho=!1,[r(),Ho]}finally{Ho=t}}function ct(r,t,n,s){var se,J;var o=!Sr||(n&2)!==0,l=(n&8)!==0,f=(n&16)!==0,d=s,h=!0,p=()=>(h&&(h=!1,d=f?L(s):s),d),g;if(l){var v=Be in r||es in r;g=(J=(se=kt(r,t))==null?void 0:se.set)!=null?J:v&&t in r?N=>r[t]=N:void 0}var _,y=!1;l?[_,y]=Al(()=>r[t]):_=r[t],_===void 0&&s!==void 0&&(_=p(),g&&(o&&Jc(t),g(_)));var k;if(o?k=()=>{var N=r[t];return N===void 0?p():(h=!0,N)}:k=()=>{var N=r[t];return N!==void 0&&(d=void 0),N===void 0?d:N},o&&(n&4)===0)return k;if(g){var E=r.$$legacy;return(function(N,W){return arguments.length>0?((!o||!W||E||y)&&g(W?k():N),N):k()})}var S=!1,M=((n&1)!==0?$n:zn)(()=>(S=!1,k()));$&&(M.label=t),l&&T(M);var V=P;return(function(N,W){if(arguments.length>0){let ne=W?T(M):o&&l?At(N):N;return Y(M,ne),S=!0,d!==void 0&&(d=ne),N}return Jt&&S||(V.f&16384)!==0?M.v:T(M)})}function pu(r){return new Ol(r)}var pn,Qt,Ol=class{constructor(t){z(this,pn);z(this,Qt);var l,f;var n=new Map,s=(d,h)=>{var p=Pr(h,!1,!1);return n.set(d,p),p};let o=new Proxy({...t.props||{},$$events:{}},{get(d,h){var p;return T((p=n.get(h))!=null?p:s(h,Reflect.get(d,h)))},has(d,h){var p;return h===es?!0:(T((p=n.get(h))!=null?p:s(h,Reflect.get(d,h))),Reflect.has(d,h))},set(d,h,p){var g;return Y((g=n.get(h))!=null?g:s(h,p),p),Reflect.set(d,h,p)}});G(this,Qt,(t.hydrate?yl:Yr)(t.component,{target:t.target,anchor:t.anchor,props:o,context:t.context,intro:(l=t.intro)!=null?l:!1,recover:t.recover})),!ot&&(!((f=t==null?void 0:t.props)!=null&&f.$$host)||t.sync===!1)&&Un(),G(this,pn,o.$$events);for(let d of Object.keys(w(this,Qt)))d==="$set"||d==="$destroy"||d==="$on"||Je(this,d,{get(){return w(this,Qt)[d]},set(h){w(this,Qt)[d]=h},enumerable:!0});w(this,Qt).$set=d=>{Object.assign(o,d)},w(this,Qt).$destroy=()=>{un(w(this,Qt))}}$set(t){w(this,Qt).$set(t)}$on(t,n){w(this,pn)[t]=w(this,pn)[t]||[];let s=(...o)=>n.call(this,...o);return w(this,pn)[t].push(s),()=>{w(this,pn)[t]=w(this,pn)[t].filter(o=>o!==s)}}$destroy(){w(this,Qt).$destroy()}};pn=new WeakMap,Qt=new WeakMap;var R_;typeof HTMLElement=="function"&&(R_=class extends HTMLElement{constructor(t,n,s){super();b(this,"$$ctor");b(this,"$$s");b(this,"$$c");b(this,"$$cn",!1);b(this,"$$d",{});b(this,"$$r",!1);b(this,"$$p_d",{});b(this,"$$l",{});b(this,"$$l_u",new Map);b(this,"$$me");this.$$ctor=t,this.$$s=n,s&&this.attachShadow({mode:"open"})}addEventListener(t,n,s){if(this.$$l[t]=this.$$l[t]||[],this.$$l[t].push(n),this.$$c){let o=this.$$c.$on(t,n);this.$$l_u.set(n,o)}super.addEventListener(t,n,s)}removeEventListener(t,n,s){if(super.removeEventListener(t,n,s),this.$$c){let o=this.$$l_u.get(n);o&&(o(),this.$$l_u.delete(n))}}async connectedCallback(){if(this.$$cn=!0,!this.$$c){let t=function(o){return l=>{let f=document.createElement("slot");o!=="default"&&(f.name=o),fe(l,f)}};if(await Promise.resolve(),!this.$$cn||this.$$c)return;let n={},s=F_(this);for(let o of this.$$s)o in s&&(o==="default"&&!this.$$d.children?(this.$$d.children=t(o),n.default=!0):n[o]=t(o));for(let o of this.attributes){let l=this.$$g_p(o.name);l in this.$$d||(this.$$d[l]=Cl(l,o.value,this.$$p_d,"toProp"))}for(let o in this.$$p_d)!(o in this.$$d)&&this[o]!==void 0&&(this.$$d[o]=this[o],delete this[o]);this.$$c=pu({component:this.$$ctor,target:this.shadowRoot||this,props:{...this.$$d,$$slots:n,$$host:this}}),this.$$me=hl(()=>{ze(()=>{var o;this.$$r=!0;for(let l of Ia(this.$$c)){if(!((o=this.$$p_d[l])!=null&&o.reflect))continue;this.$$d[l]=this.$$c[l];let f=Cl(l,this.$$d[l],this.$$p_d,"toAttribute");f==null?this.removeAttribute(this.$$p_d[l].attribute||l):this.setAttribute(this.$$p_d[l].attribute||l,f)}this.$$r=!1})});for(let o in this.$$l)for(let l of this.$$l[o]){let f=this.$$c.$on(o,l);this.$$l_u.set(l,f)}this.$$l={}}}attributeChangedCallback(t,n,s){var o;this.$$r||(t=this.$$g_p(t),this.$$d[t]=Cl(t,s,this.$$p_d,"toProp"),(o=this.$$c)==null||o.$set({[t]:this.$$d[t]}))}disconnectedCallback(){this.$$cn=!1,Promise.resolve().then(()=>{!this.$$cn&&this.$$c&&(this.$$c.$destroy(),this.$$me(),this.$$c=void 0)})}$$g_p(t){return Ia(this.$$p_d).find(n=>this.$$p_d[n].attribute===t||!this.$$p_d[n].attribute&&n.toLowerCase()===t)||t}});function Cl(r,t,n,s){var l;let o=(l=n[r])==null?void 0:l.type;if(t=o==="Boolean"&&typeof t!="boolean"?t!=null:t,!s||!n[r])return t;if(s==="toAttribute")switch(o){case"Object":case"Array":return t==null?null:JSON.stringify(t);case"Boolean":return t?"":null;case"Number":return t==null?null:t;default:return t}else switch(o){case"Object":case"Array":return t&&JSON.parse(t);case"Boolean":return t;case"Number":return t!=null?+t:t;default:return t}}function F_(r){let t={};return r.childNodes.forEach(n=>{t[n.slot||"default"]=!0}),t}if($){let r=function(t){if(!(t in globalThis)){let n;Object.defineProperty(globalThis,t,{configurable:!0,get:()=>{if(n!==void 0)return n;Qc(t)},set:s=>{n=s}})}};r("$state"),r("$effect"),r("$derived"),r("$inspect"),r("$props"),r("$bindable")}function Ri(r){X===null&&io("onMount"),Sr&&X.l!==null?I_(X).m.push(r):fn(()=>{let t=L(r);if(typeof t=="function")return t})}function I_(r){var n;var t=r.l;return(n=t.u)!=null?n:t.u={a:[],b:[],m:[]}}var mu,_u,gu;typeof window!="undefined"&&((gu=(_u=(mu=window.__svelte)!=null?mu:window.__svelte={}).v)!=null?gu:_u.v=new Set).add("5");df();var Fl=tn(Hr(),1);Ze();var M1=require("obsidian");function Xe(r,t,n){var l;let s=/^---\r?\n([\s\S]*?)\r?\n---/,o=r.match(s);if(o){let f=(l=o[1])!=null?l:"",d=r.slice(o[0].length),h=f.split(`
`),p=!1,g=h.map(v=>{let _=v.split(":");return(_[0]?_[0].trim():"")===t?(p=!0,`${t}: ${n}`):v});return p||g.push(`${t}: ${n}`),`---
${g.join(`
`).trim()}
---${d}`}else return`---
${t}: ${n}
---
${r}`}function Bo(r){let t=(0,Fl.default)().format("YYYY-MM-DD-HHmm"),n=Math.random().toString(36).substring(2,6).padEnd(4,"0"),o=r.replace(/[\\/:*?"<>|]/g,"-").replace(/\s+/g,"-").replace(/-+/g,"-");return`${t}-${n}-${o}.md`}function yu(r){let n=`## Daily Stack - ${(0,Fl.default)().format("YYYY-MM-DD")}

`;return r.forEach(s=>{let o=s.startTime?s.startTime.format("HH:mm"):"00:00",l=`[[${s.id}|${s.title}]]`;n+=`- [ ] ${o} ${l} (${s.duration}m)
`}),n}Ze();var wu=tn(Hr(),1),Go=class{constructor(t,n){this.app=t;this.targetFolder=n}async submitThought(t){if(!t.trim())return null;await this.ensureFolderExists(this.targetFolder);let n=Bo(t),s=`${this.targetFolder}/${n}`,o=`# ${t}`;return o=Xe(o,"task",t),o=Xe(o,"status","todo"),o=Xe(o,"duration",30),o=Xe(o,"created",(0,wu.default)().format("YYYY-MM-DD HH:mm")),o=Xe(o,"type","task"),o=Xe(o,"flow_state","dump"),await this.app.vault.create(s,o),{id:s,title:t,status:"todo",duration:30,isAnchored:!1,children:[]}}async ensureFolderExists(t){this.app.vault.getAbstractFileByPath(t)||await this.app.vault.createFolder(t)}};var Y_=ue('<h2 class="todo-flow-card-header svelte-1s7zazm"> </h2>'),V_=ue('<div class="todo-flow-card-actions svelte-1s7zazm"><!></div>'),U_=ue('<div><!> <div class="todo-flow-card-body svelte-1s7zazm"><!></div> <!></div>'),H_={hash:"svelte-1s7zazm",code:`.todo-flow-card.svelte-1s7zazm {display:flex;flex-direction:column;width:100%;max-width:600px; /* Default constraint */background:var(--background-secondary);border:1px solid var(--background-modifier-border);border-radius:8px;padding:2rem;box-shadow:0 4px 12px rgba(0, 0, 0, 0.1);transition:transform 0.2s, opacity 0.2s;gap:1.5rem;}

   /* Headers */.todo-flow-card-header.svelte-1s7zazm {text-align:center;color:var(--text-muted);font-weight:500;margin:0;font-size:1.1rem;opacity:0.9;text-transform:uppercase;letter-spacing:0.05em;}

   /* Body */.todo-flow-card-body.svelte-1s7zazm {flex:1;width:100%;display:flex;flex-direction:column;align-items:center;justify-content:center;}

   /* Actions Footer */.todo-flow-card-actions.svelte-1s7zazm {display:flex;justify-content:center;gap:1rem;margin-top:auto;}

   /* Variant: Triage overrides */.todo-flow-card.variant-triage.svelte-1s7zazm {max-width:400px;height:300px;text-align:center;}

   /* Variant: Dump overrides */`};function bs(r,t){let n=kl(t);vr(r,H_);let s=ct(t,"title",8,void 0),o=ct(t,"variant",8,"default");var l=U_(),f=F(l);{var d=_=>{var y=Y_(),k=F(y,!0);C(y),Fe(()=>ge(k,s())),fe(_,y)};Bt(f,_=>{s()&&_(d)})}var h=K(f,2),p=F(h);Yo(p,t,"default",{},null),C(h);var g=K(h,2);{var v=_=>{var y=V_(),k=F(y);Yo(k,t,"actions",{},null),C(y),fe(_,y)};Bt(g,_=>{L(()=>n.actions)&&_(v)})}C(l),Fe(()=>{var _;return Ur(l,1,`todo-flow-card variant-${(_=o())!=null?_:""}`,"svelte-1s7zazm")}),fe(r,l)}Ze();var W_=ue('<textarea placeholder="Type and press Enter..." class="todo-flow-dump-input svelte-rg61pz"></textarea> <p class="todo-flow-dump-hint svelte-rg61pz">Type <strong>done</strong> and press Enter to start triage.</p>',1),B_=ue('<div class="todo-flow-dump-container svelte-rg61pz"><!></div>'),G_={hash:"svelte-rg61pz",code:`.todo-flow-dump-container.svelte-rg61pz {display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;width:100%;background:var(--background-primary);padding:2rem;}.todo-flow-dump-hint.svelte-rg61pz {text-align:center;color:var(--text-muted);font-size:0.85rem;margin-top:1rem;opacity:0.7;}.todo-flow-dump-input.svelte-rg61pz {width:100%;
        /* Minimal height that grows a bit if needed, but keeps layout centered */min-height:150px;font-size:1.5rem;border:none;outline:none;resize:none;background:transparent;color:var(--text-normal);line-height:1.6;font-family:inherit;text-align:left;}.todo-flow-dump-input.svelte-rg61pz::placeholder {color:var(--text-muted);font-style:italic;text-align:center; /* Placeholder can be centered */opacity:0.5;}`};function Il(r,t){or(t,!1),vr(r,G_);let n=ct(t,"app",8),s=ct(t,"folder",8),o=ct(t,"onComplete",8),l=Pr(""),f,d=Pr(),h=[];Ri(()=>{var _;f=new Go(n(),s()),(_=T(d))==null||_.focus()});async function p(_){if(_.key==="Enter"&&!_.shiftKey){_.preventDefault();let y=T(l).trim();if(y.toLowerCase()==="done"){Y(l,""),o()&&o()(h);return}if(y){Y(l,"");let k=await f.submitThought(y);k&&(h=[...h,k])}}}ks();var g=B_(),v=F(g);bs(v,{title:"Dump your thoughts",variant:"dump",children:(_,y)=>{var k=W_(),E=ll(k);cl(E),Ci(E,S=>Y(d,S),()=>T(d)),Pe(2),Nl(E,()=>T(l),S=>Y(l,S)),_s("keydown",E,p),fe(_,k)},$$slots:{default:!0}}),C(g),fe(r,g),ar()}Ze();var jo="todo-flow-dump-view",zo=class extends ku.ItemView{constructor(n,s,o){super(n);b(this,"component");b(this,"folder");b(this,"onComplete");this.folder=s,this.onComplete=o}getViewType(){return jo}getDisplayText(){return"Todo Dump"}async onOpen(){this.component=Yr(Il,{target:this.contentEl,props:{app:this.app,folder:this.folder,onComplete:n=>{this.onComplete(n),this.leaf.detach()}}})}async onClose(){this.component&&un(this.component)}};var Su=require("obsidian");Ze();Nn();var qo=class{constructor(t,n,s){this.app=t;this.tasks=n;b(this,"index",0);b(this,"shortlistIndices",new Set);b(this,"notNowIndices",new Set);b(this,"liveFiles",[]);b(this,"logger");this.logger=s,this.logger&&this.logger.info(`[TriageController] Initialized with ${n.length} tasks.`)}getCurrentTask(){return this.index>=this.tasks.length?null:this.tasks[this.index]}async openCurrentTask(){let t=this.getCurrentTask();t&&await this.app.workspace.openLinkText(t.id,"",!0)}async swipeRight(){if(this.index>=this.tasks.length)return;let t=this.tasks[this.index];this.shortlistIndices.add(this.index),this.logger&&await this.logger.info(`[TriageController] Swiping Right on ${t.id} (flow_state -> shortlist)`),await this.updateFlowState(t.id,"shortlist"),this.index++}async swipeLeft(){this.index>=this.tasks.length||(this.notNowIndices.add(this.index),this.index++)}async updateFlowState(t,n){this.logger&&await this.logger.info(`[TriageController] updateFlowState: Setting ${t} to "${n}"`);let s=this.app.vault.getAbstractFileByPath(t);s&&s.extension==="md"&&await this.app.vault.process(s,o=>Xe(o,"flow_state",n))}getResults(){return{shortlist:this.tasks.filter((t,n)=>this.shortlistIndices.has(n)),notNow:this.tasks.filter((t,n)=>this.notNowIndices.has(n))}}};Ze();var z_=r=>r;function j_(r){let t=r-1;return t*t*t+1}function bu(r,{delay:t=0,duration:n=400,easing:s=z_}={}){let o=+getComputedStyle(r).opacity;return{delay:t,duration:n,easing:s,css:l=>`opacity: ${l*o}`}}var Ll=!1;function Tu(r,{delay:t=0,duration:n=400,easing:s=j_,axis:o="y"}={}){let l=getComputedStyle(r);$&&!Ll&&/(contents|inline|table)/.test(l.display)&&(Ll=!0,Promise.resolve().then(()=>Ll=!1),uf(l.display));let f=+l.opacity,d=o==="y"?"height":"width",h=parseFloat(l[d]),p=o==="y"?["top","bottom"]:["left","right"],g=p.map(M=>`${M[0].toUpperCase()}${M.slice(1)}`),v=parseFloat(l[`padding${g[0]}`]),_=parseFloat(l[`padding${g[1]}`]),y=parseFloat(l[`margin${g[0]}`]),k=parseFloat(l[`margin${g[1]}`]),E=parseFloat(l[`border${g[0]}Width`]),S=parseFloat(l[`border${g[1]}Width`]);return{delay:t,duration:n,easing:s,css:M=>`overflow: hidden;opacity: ${Math.min(M*20,1)*f};${d}: ${M*h}px;padding-${p[0]}: ${M*v}px;padding-${p[1]}: ${M*_}px;margin-${p[0]}: ${M*y}px;margin-${p[1]}: ${M*k}px;border-${p[0]}-width: ${M*E}px;border-${p[1]}-width: ${M*S}px;min-${d}: 0`}}var Li={navUp:["k","ArrowUp"],navDown:["j","ArrowDown"],moveUp:["K","Shift+ArrowUp"],moveDown:["J","Shift+ArrowDown"],anchor:["Shift+F"],durationUp:["f","ArrowRight"],durationDown:["d","ArrowLeft"],undo:["u","U"],redo:["Shift+U"],confirm:["Enter"],cancel:["Escape"],toggleDone:["x","X"],createTask:["c","C"],deleteTask:["Backspace","Delete"],forceOpen:["Shift+Enter"],goBack:["h"],export:["Shift+E","Cmd+s","Ctrl+s"],rename:["e"],archive:["z","Z"],toggleHelp:["?"]},Ii=class{constructor(t){this.settings=t}resolveAction(t){for(let[n,s]of Object.entries(this.settings))if(Array.isArray(s)&&s.some(o=>this.matchesBinding(o,t))){let o=this.mapToActions(n);if(o)return this.settings.debug&&console.debug(`[TODO_FLOW_TRACE] Key matched: ${t.key} (code: ${t.code}) -> ${o}`),o}return null}mapToActions(t){return{navUp:"NAV_UP",navDown:"NAV_DOWN",moveUp:"MOVE_UP",moveDown:"MOVE_DOWN",anchor:"ANCHOR",durationUp:"DURATION_UP",durationDown:"DURATION_DOWN",undo:"UNDO",redo:"REDO",confirm:"CONFIRM",cancel:"CANCEL",toggleDone:"TOGGLE_DONE",createTask:"CREATE_TASK",deleteTask:"DELETE_TASK",forceOpen:"FORCE_OPEN",goBack:"GO_BACK",export:"EXPORT",rename:"RENAME",archive:"ARCHIVE",toggleHelp:"TOGGLE_HELP"}[t]||null}matchesBinding(t,n){let s=t.split("+"),o=s[s.length-1],l=s.slice(0,-1);if(o.length===1&&o.toLowerCase()!==o.toUpperCase()){if(l.length===0)return!(n.key!==o||n.ctrlKey||n.altKey||n.metaKey);if(n.key.toLowerCase()!==o.toLowerCase())return!1}else if(o!==n.key&&o!==n.code)return!1;let d=l.includes("Shift"),h=l.includes("Ctrl"),p=l.includes("Alt"),g=l.includes("Meta");return!!n.shiftKey!==d&&!(o.length===1&&n.key===o&&!d&&n.shiftKey)||!!n.ctrlKey!==h||!!n.altKey!==p||!!n.metaKey!==g?!1:(this.settings.debug&&n.key==="h"&&console.log(`[TODO_FLOW_TRACE] matchesBinding check for 'h': binding=${t}, key=${n.key}, shift=${n.shiftKey}, ctrl=${n.ctrlKey}, alt=${n.altKey}, meta=${n.metaKey}`),!0)}};var Zo=class{constructor(){b(this,"undoStack",[]);b(this,"redoStack",[]);b(this,"maxStackSize",50)}async executeCommand(t){await t.execute(),this.undoStack.push(t),this.redoStack=[],this.undoStack.length>this.maxStackSize&&this.undoStack.shift()}undo(){let t=this.undoStack.pop();t&&(t.undo(),this.redoStack.push(t))}redo(){let t=this.redoStack.pop();t&&(t.execute(),this.undoStack.push(t))}canUndo(){return this.undoStack.length>0}canRedo(){return this.redoStack.length>0}clear(){this.undoStack=[],this.redoStack=[]}getStackSizes(){return{undo:this.undoStack.length,redo:this.redoStack.length}}};var Xo=class{constructor(t,n){b(this,"description");b(this,"controller");b(this,"direction");b(this,"previousIndex");this.controller=t,this.direction=n,this.description=`Swipe ${n}`,this.previousIndex=this.controller.index}async execute(){this.direction==="left"?await this.controller.swipeLeft():await this.controller.swipeRight()}undo(){this.controller.index=this.previousIndex,this.direction==="left"?this.controller.notNowIndices.delete(this.previousIndex):this.controller.shortlistIndices.delete(this.previousIndex)}};var K_=ue('<span class="key svelte-1erif2g"> </span>'),q_=ue('<span class="key svelte-1erif2g"> </span>'),Z_=ue('<span class="key svelte-1erif2g"> </span>'),X_=ue('<span class="key svelte-1erif2g"> </span>'),J_=ue('<span class="key svelte-1erif2g"> </span>'),Q_=ue('<span class="key svelte-1erif2g"> </span>'),eg=ue('<span class="key svelte-1erif2g"> </span>'),tg=ue('<div class="todo-flow-help-modal svelte-1erif2g"><div class="content svelte-1erif2g"><h2 class="svelte-1erif2g">Keyboard Shortcuts</h2> <div class="grid svelte-1erif2g"><div class="section"><h3 class="svelte-1erif2g">Navigation</h3> <div class="row svelte-1erif2g"><div class="keys-group svelte-1erif2g"><!> / <!></div> <span>Move Focus</span></div> <div class="row svelte-1erif2g"><div class="keys-group svelte-1erif2g"><!> / <!></div> <span>Open / Drill Down</span></div> <div class="row svelte-1erif2g"><div class="keys-group svelte-1erif2g"></div> <span>Go Back</span></div></div> <div class="section"><h3 class="svelte-1erif2g">Actions</h3> <div class="row svelte-1erif2g"><span class="key svelte-1erif2g"> </span> <span>Toggle Done</span></div> <div class="row svelte-1erif2g"><span class="key svelte-1erif2g"> </span> <span>Create Task</span></div> <div class="row svelte-1erif2g"><span class="key svelte-1erif2g"> </span> <span>Rename Task</span></div> <div class="row svelte-1erif2g"><span class="key svelte-1erif2g"> </span> <span>Delete Task</span></div> <div class="row svelte-1erif2g"><span class="key svelte-1erif2g"> </span> <span>Export to Note</span></div></div> <div class="section"><h3 class="svelte-1erif2g">Organization</h3> <div class="row svelte-1erif2g"><div class="keys-group svelte-1erif2g"><span class="key svelte-1erif2g"> </span> / <span class="key svelte-1erif2g"> </span></div> <span>Move Task</span></div> <div class="row svelte-1erif2g"><span class="key svelte-1erif2g"> </span> <span>Toggle Anchor</span></div> <div class="row svelte-1erif2g"><div class="keys-group svelte-1erif2g"><!> / <!></div> <span>Adjust Duration</span></div> <div class="row svelte-1erif2g"><span class="key svelte-1erif2g"> </span> / <span class="key svelte-1erif2g"> </span> <span>Undo / Redo</span></div></div> <div class="section"><h3 class="svelte-1erif2g">System</h3> <div class="row svelte-1erif2g"><span>Timing Mode</span> <span> </span></div> <div class="help-text svelte-1erif2g">Toggle via Command Palette: <b>"Toggle Timing Mode"</b></div></div></div> <div class="footer svelte-1erif2g">Press <span class="key svelte-1erif2g">?</span> or <span class="key svelte-1erif2g">Esc</span> to close</div></div></div>'),rg={hash:"svelte-1erif2g",code:".todo-flow-help-modal.svelte-1erif2g {position:absolute;top:0;left:0;width:100%;height:100%;background:rgba(0, 0, 0, 0.85); /* Gmail style dark overlay */display:flex;align-items:center;justify-content:center;z-index:1000;backdrop-filter:blur(2px);}.content.svelte-1erif2g {background:var(--background-primary);color:var(--text-normal);border:1px solid var(--background-modifier-border);border-radius:8px;padding:30px;box-shadow:0 10px 30px rgba(0, 0, 0, 0.5);max-width:600px;width:90%;max-height:90%;overflow-y:auto;}h2.svelte-1erif2g {margin-top:0;margin-bottom:20px;text-align:center;color:var(--text-accent);}.grid.svelte-1erif2g {display:grid;grid-template-columns:repeat(auto-fit, minmax(180px, 1fr));gap:20px;margin-bottom:20px;}h3.svelte-1erif2g {font-size:0.9em;text-transform:uppercase;letter-spacing:0.1em;margin-bottom:10px;color:var(--text-muted);border-bottom:1px solid var(--background-modifier-border);padding-bottom:5px;}.row.svelte-1erif2g {display:flex;justify-content:space-between;margin-bottom:8px;font-size:0.95em;}.key.svelte-1erif2g {font-family:monospace;background:var(--background-secondary);border:1px solid var(--background-modifier-border);border-radius:4px;padding:2px 6px;font-size:0.85em;color:var(--text-normal);}.footer.svelte-1erif2g {text-align:center;margin-top:20px;color:var(--text-muted);font-size:0.9em;}.keys-group.svelte-1erif2g {display:flex;gap:6px;}.status-badge.svelte-1erif2g {font-size:0.85em;font-weight:bold;color:var(--text-accent);}.status-badge.fixed.svelte-1erif2g {color:var(--text-warning);}.help-text.svelte-1erif2g {font-size:0.8em;color:var(--text-muted);margin-top:10px;font-style:italic;}"};function Ts(r,t){or(t,!1),vr(r,rg);let n=ct(t,"keys",8),s=ct(t,"settings",8);function o(Ae){return Ae?Ae.replace("ArrowUp","\u2191").replace("ArrowDown","\u2193").replace("ArrowLeft","\u2190").replace("ArrowRight","\u2192").replace("Enter","\u23CE").replace("Backspace","\u232B").replace("Shift","\u21E7").replace("Cmd","\u2318").replace("Ctrl","Ctrl").replace("Alt","Opt").replace("Meta","\u2318").replace(/\+/g,"+"):""}ks();var l=tg(),f=F(l),d=K(F(f),2),h=F(d),p=K(F(h),2),g=F(p),v=F(g);_r(v,1,()=>($e(n()),L(()=>n().navDown)),mr,(Ae,Q)=>{var le=K_(),Ve=F(le,!0);C(le),Fe(Ie=>ge(Ve,Ie),[()=>(T(Q),L(()=>o(T(Q))))]),fe(Ae,le)});var _=K(v,2);_r(_,1,()=>($e(n()),L(()=>n().navUp)),mr,(Ae,Q)=>{var le=q_(),Ve=F(le,!0);C(le),Fe(Ie=>ge(Ve,Ie),[()=>(T(Q),L(()=>o(T(Q))))]),fe(Ae,le)}),C(g),Pe(2),C(p);var y=K(p,2),k=F(y),E=F(k);_r(E,1,()=>($e(n()),L(()=>n().confirm)),mr,(Ae,Q)=>{var le=Z_(),Ve=F(le,!0);C(le),Fe(Ie=>ge(Ve,Ie),[()=>(T(Q),L(()=>o(T(Q))))]),fe(Ae,le)});var S=K(E,2);_r(S,1,()=>($e(n()),L(()=>n().forceOpen)),mr,(Ae,Q)=>{var le=X_(),Ve=F(le,!0);C(le),Fe(Ie=>ge(Ve,Ie),[()=>(T(Q),L(()=>o(T(Q))))]),fe(Ae,le)}),C(k),Pe(2),C(y);var M=K(y,2),V=F(M);_r(V,5,()=>($e(n()),L(()=>n().goBack)),mr,(Ae,Q)=>{var le=J_(),Ve=F(le,!0);C(le),Fe(Ie=>ge(Ve,Ie),[()=>(T(Q),L(()=>o(T(Q))))]),fe(Ae,le)}),C(V),Pe(2),C(M),C(h);var se=K(h,2),J=K(F(se),2),N=F(J),W=F(N,!0);C(N),Pe(2),C(J);var ne=K(J,2),te=F(ne),We=F(te,!0);C(te),Pe(2),C(ne);var he=K(ne,2),ke=F(he),er=F(ke,!0);C(ke),Pe(2),C(he);var zt=K(he,2),Ft=F(zt),yr=F(Ft,!0);C(Ft),Pe(2),C(zt);var Wr=K(zt,2),H=F(Wr),q=F(H,!0);C(H),Pe(2),C(Wr),C(se);var oe=K(se,2),ae=K(F(oe),2),gt=F(ae),Ne=F(gt),R=F(Ne,!0);C(Ne);var jt=K(Ne,2),wr=F(jt,!0);C(jt),C(gt),Pe(2),C(ae);var vt=K(ae,2),tr=F(vt),kr=F(tr,!0);C(tr),Pe(2),C(vt);var Kt=K(vt,2),Br=F(Kt),yt=F(Br);_r(yt,1,()=>($e(n()),L(()=>n().durationUp)),mr,(Ae,Q)=>{var le=Q_(),Ve=F(le,!0);C(le),Fe(Ie=>ge(Ve,Ie),[()=>(T(Q),L(()=>o(T(Q))))]),fe(Ae,le)});var Gr=K(yt,2);_r(Gr,1,()=>($e(n()),L(()=>n().durationDown)),mr,(Ae,Q)=>{var le=eg(),Ve=F(le,!0);C(le),Fe(Ie=>ge(Ve,Ie),[()=>(T(Q),L(()=>o(T(Q))))]),fe(Ae,le)}),C(Br),Pe(2),C(Kt);var ei=K(Kt,2),de=F(ei),xe=F(de,!0);C(de);var wt=K(de,2),ha=F(wt,!0);C(wt),Pe(2),C(ei),C(oe);var Ui=K(oe,2),ut=K(F(Ui),2),An=K(F(ut),2);let Fs;var pa=F(An,!0);C(An),C(ut),Pe(2),C(Ui),C(d),Pe(2),C(f),C(l),Fe((Ae,Q,le,Ve,Ie,me,Is,Ls,ti,Hi)=>{ge(W,Ae),ge(We,Q),ge(er,le),ge(yr,Ve),ge(q,Ie),ge(R,me),ge(wr,Is),ge(kr,Ls),ge(xe,ti),ge(ha,Hi),Fs=Ur(An,1,"status-badge svelte-1erif2g",null,Fs,{fixed:s().timingMode==="fixed"}),ge(pa,($e(s()),L(()=>s().timingMode==="now"?"Dynamic (Now)":"Fixed ("+s().fixedStartTime+")")))},[()=>($e(n()),L(()=>o(n().toggleDone[0]))),()=>($e(n()),L(()=>o(n().createTask[0]))),()=>($e(n()),L(()=>o(n().rename[0]))),()=>($e(n()),L(()=>o(n().deleteTask[0]))),()=>($e(n()),L(()=>o(n().export[0]))),()=>($e(n()),L(()=>o(n().moveDown[0]))),()=>($e(n()),L(()=>o(n().moveUp[0]))),()=>($e(n()),L(()=>o(n().anchor[0]))),()=>($e(n()),L(()=>o(n().undo[0]))),()=>($e(n()),L(()=>o(n().redo[0])))]),ws(3,l,()=>bu,()=>({duration:100})),fe(r,l),ar()}var ng=ue('<div class="todo-flow-triage-hint svelte-1nn2yzl">\u2190 Not Now | Shortlist \u2192</div>'),ig=ue("<div><!></div>"),sg=ue('<div class="todo-flow-triage-done"><h2>All done!</h2> <p>Your shortlist has been updated.</p></div>'),og=ue('<div class="todo-flow-triage-container svelte-1nn2yzl"><!> <div class="todo-flow-triage-controls svelte-1nn2yzl"><button class="control-btn not-now svelte-1nn2yzl">\u2190 Not Now</button> <button class="control-btn undo svelte-1nn2yzl">Undo</button> <button class="control-btn shortlist svelte-1nn2yzl">Shortlist \u2192</button></div> <!></div>'),ag={hash:"svelte-1nn2yzl",code:`.todo-flow-triage-container.svelte-1nn2yzl {display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;padding:2rem;background:var(--background-primary);gap:2rem;}.triage-card-wrapper.svelte-1nn2yzl {
        /* Wrapper handles positioning and animation, Card handles visual box */transition:transform 0.2s, opacity 0.2s;width:100%;max-width:400px; /* Match Card variant-triage width */display:flex;justify-content:center;}.triage-card-wrapper.left.svelte-1nn2yzl {transform:translateX(-100px) rotate(-10deg);opacity:0;}.triage-card-wrapper.right.svelte-1nn2yzl {transform:translateX(100px) rotate(10deg);opacity:0;}.todo-flow-triage-hint.svelte-1nn2yzl {margin-top:1rem;color:var(--text-muted);font-size:0.9rem;}.todo-flow-triage-controls.svelte-1nn2yzl {display:flex;gap:1rem;}.control-btn.svelte-1nn2yzl {padding:0.5rem 1rem;border-radius:0.5rem;cursor:pointer;border:1px solid var(--background-modifier-border);background:var(--background-secondary);color:var(--text-normal);transition:background 0.2s;}.control-btn.svelte-1nn2yzl:hover {background:var(--background-modifier-hover);}.shortlist.svelte-1nn2yzl {background:var(--interactive-accent);color:var(--text-on-accent);}`};function Pl(r,t){or(t,!0),vr(r,ag);let n=ct(t,"debug",3,!1),s,o=Re(null),l=Re(null),f=Re(!1),d;Ri(()=>{s=new qo(t.app,t.tasks),Y(o,s.getCurrentTask(),!0),d=new Ii(t.keys||{navUp:[],navDown:[],moveUp:[],moveDown:[],anchor:[],durationUp:["ArrowRight"],durationDown:["ArrowLeft"],undo:["u"],confirm:[],cancel:[]})});function h(N){Y(l,N,!0),setTimeout(async()=>{await t.historyManager.executeCommand(new Xo(s,N)),Y(o,s.getCurrentTask(),!0),Y(l,null),T(o)||t.onComplete(s.getResults())},200)}function p(N){if(n()&&console.debug("[TODO_FLOW_TRACE] Triage handleKeyDown:",N.key),N.target instanceof HTMLInputElement||N.target instanceof HTMLTextAreaElement||N.target.isContentEditable)return;["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"," "].includes(N.key)&&N.preventDefault();let W=d.resolveAction(N);if(W){if(N.preventDefault(),W==="UNDO"){t.historyManager.undo(),Y(o,s.getCurrentTask(),!0);return}if(W==="REDO"){t.historyManager.redo(),Y(o,s.getCurrentTask(),!0);return}switch(W){case"DURATION_DOWN":case"NAV_DOWN":h("left");break;case"DURATION_UP":case"NAV_UP":h("right");break;case"CONFIRM":n()&&console.log("[TriageView] CONFIRM (Open) triggered"),s.openCurrentTask();break;case"TOGGLE_HELP":Y(f,!T(f)),n()&&console.log(`[TriageView] Help toggled: ${T(f)}`);break;case"CANCEL":T(f)&&Y(f,!1);break}}}var g={handleKeyDown:p},v=og(),_=F(v);{var y=N=>{var W=ig(),ne=F(W);bs(ne,{get title(){return T(o).title},variant:"triage",children:(te,We)=>{var he=ng();fe(te,he)},$$slots:{default:!0}}),C(W),Fe(()=>{var te;return Ur(W,1,`triage-card-wrapper ${(te=T(l))!=null?te:""}`,"svelte-1nn2yzl")}),ws(3,W,()=>Tu),fe(N,W)},k=N=>{var W=sg();fe(N,W)};Bt(_,N=>{T(o)?N(y):N(k,!1)})}var E=K(_,2),S=F(E);S.__click=()=>h("left");var M=K(S,2);M.__click=()=>{t.historyManager.undo(),Y(o,s.getCurrentTask(),!0)};var V=K(M,2);V.__click=()=>h("right"),C(E);var se=K(E,2);{var J=N=>{Ts(N,{get keys(){return t.keys},get settings(){return t.settings}})};Bt(se,N=>{T(f)&&N(J)})}return C(v),fe(r,v),ar(g)}Mi(["click"]);Ze();Nn();var Yl="todo-flow-triage-view",Ss=class r extends Su.ItemView{constructor(n,s,o,l,f,d){super(n);b(this,"component");b(this,"tasks");b(this,"settings");b(this,"keys");b(this,"onComplete");b(this,"historyManager");b(this,"logger");this.tasks=s,this.settings=o,this.keys=o.keys||Li,this.historyManager=l,this.logger=f,this.onComplete=d}getViewType(){return Yl}getDisplayText(){return"Task Triage"}async onOpen(){this.registerDomEvent(window,"keydown",n=>{this.app.workspace.getActiveViewOfType(r)===this&&this.component&&this.component.handleKeyDown(n)}),this.component=Yr(Pl,{target:this.contentEl,props:{app:this.app,tasks:this.tasks,keys:this.keys,settings:this.settings,debug:this.keys.debug,historyManager:this.historyManager,onComplete:n=>{this.onComplete(n),this.leaf.detach()}}})}async onClose(){this.component&&un(this.component)}};var Ou=require("obsidian");var Vl=tn(Hr(),1);Ze();var Pi=[5,10,15,20,30,45,60,90,120,180,240,300,360,420,480],$s=class{constructor(t,n,s,o){b(this,"tasks");b(this,"currentTime");b(this,"onTaskUpdate");b(this,"onTaskCreate");this.currentTime=n,this.onTaskUpdate=s,this.onTaskCreate=o,this.tasks=_t(t,n)}updateTime(t){this.currentTime=t,this.tasks=_t(this.tasks,this.currentTime)}getTasks(){return this.tasks}moveUp(t){var l,f;if(t<=0||(l=this.tasks[t])!=null&&l.isAnchored)return t;let n=t-1;for(;n>=0&&((f=this.tasks[n])!=null&&f.isAnchored);)n--;if(n<0)return t;let s=this.tasks[t],o=[...this.tasks];return[o[t],o[n]]=[o[n],o[t]],this.tasks=_t(o,this.currentTime),this.tasks.findIndex(d=>d.id===s.id)}moveDown(t){var l,f;if(t>=this.tasks.length-1||(l=this.tasks[t])!=null&&l.isAnchored)return t;let n=t+1;for(;n<this.tasks.length&&((f=this.tasks[n])!=null&&f.isAnchored);)n++;if(n>=this.tasks.length)return t;let s=this.tasks[t],o=[...this.tasks];return[o[t],o[n]]=[o[n],o[t]],this.tasks=_t(o,this.currentTime),this.tasks.findIndex(d=>d.id===s.id)}toggleAnchor(t,n){var d;if(!this.tasks[t])return t;let s=this.tasks[t],o={...s};o.isAnchored=!o.isAnchored,o.isAnchored&&n?o.startTime=(0,Vl.default)(n):o.isAnchored&&(o.startTime=(0,Vl.default)(o.startTime));let l=[...this.tasks];l[t]=o,this.tasks=_t(l,this.currentTime);let f=this.tasks.findIndex(h=>h.id===s.id);return f!==-1?((d=this.onTaskUpdate)==null||d.call(this,this.tasks[f]),f):t}toggleStatus(t){var f;if(!this.tasks[t])return t;let n=this.tasks[t],s={...n};s.status=s.status==="todo"?"done":"todo";let o=[...this.tasks];o[t]=s,this.tasks=_t(o,this.currentTime);let l=this.tasks.findIndex(d=>d.id===n.id);return l!==-1?((f=this.onTaskUpdate)==null||f.call(this,this.tasks[l]),l):t}updateTaskTitle(t,n){var d;if(!this.tasks[t])return t;let s=this.tasks[t],o={...s};o.title=n;let l=[...this.tasks];l[t]=o,this.tasks=_t(l,this.currentTime);let f=this.tasks.findIndex(h=>h.id===s.id);return f!==-1?((d=this.onTaskUpdate)==null||d.call(this,this.tasks[f]),f):t}addTaskAt(t,n){if(!this.onTaskCreate)return null;let s=this.onTaskCreate(n),o=[...this.tasks];o.splice(t+1,0,s),this.tasks=_t(o,this.currentTime);let l=this.tasks.findIndex(f=>f.id===s.id);return{task:s,index:l}}removeTask(t){if(!this.tasks[t])return;let n=[...this.tasks];n.splice(t,1),this.tasks=_t(n,this.currentTime)}insertTask(t,n){let s=[...this.tasks];s.splice(t,0,n),this.tasks=_t(s,this.currentTime)}scaleDuration(t,n){var g,v;if(!this.tasks[t])return t;let s=this.tasks[t],o={...s},l=Wo(o),f=(g=o.originalDuration)!=null?g:o.duration,d=Pi.findIndex(_=>_>=f);d===-1&&(d=Pi.length-1),n==="up"?(Pi[d]===f&&(d=Math.min(Pi.length-1,d+1)),o.originalDuration=Pi[d]):(d=Math.max(0,d-1),o.originalDuration=Pi[d]);let h=[...this.tasks];h[t]=o,this.tasks=_t(h,this.currentTime);let p=this.tasks.findIndex(_=>_.id===s.id);return p!==-1?((v=this.onTaskUpdate)==null||v.call(this,this.tasks[p]),p):t}handleEnter(t,n=!1){if(!this.tasks[t])return null;let s=this.tasks[t];return!n&&s.children&&s.children.length>0?{action:"DRILL_DOWN",newStack:s.children}:{action:"OPEN_FILE",path:s.id}}};Ze();function $u(r){if(r<60)return`${r}m`;let t=Math.floor(r/60),n=r%60;return n===0?`${t}h`:`${t}h ${n}m`}var Eu=tn(Hr());Ze();var Es=class{constructor(t,n,s){b(this,"description");b(this,"controller");b(this,"index");b(this,"direction");b(this,"resultIndex",null);this.controller=t,this.index=n,this.direction=s,this.description=`Move task ${s} from index ${n}`}execute(){this.direction==="up"?this.resultIndex=this.controller.moveUp(this.index):this.resultIndex=this.controller.moveDown(this.index)}undo(){this.resultIndex!==null&&(this.direction==="up"?this.controller.moveDown(this.resultIndex):this.controller.moveUp(this.resultIndex))}},Jo=class{constructor(t,n){b(this,"description");b(this,"controller");b(this,"index");b(this,"resultIndex",null);this.controller=t,this.index=n,this.description=`Toggle anchor at index ${n}`}execute(){this.resultIndex=this.controller.toggleAnchor(this.index)}undo(){this.resultIndex!==null&&this.controller.toggleAnchor(this.resultIndex)}},Ds=class{constructor(t,n,s){b(this,"description");b(this,"controller");b(this,"index");b(this,"direction");b(this,"resultIndex",null);this.controller=t,this.index=n,this.direction=s,this.description=`Scale duration ${s} at index ${n}`}execute(){this.resultIndex=this.controller.scaleDuration(this.index,this.direction)}undo(){if(this.resultIndex===null)return;let t=this.direction==="up"?"down":"up";this.controller.scaleDuration(this.resultIndex,t)}},Qo=class{constructor(t,n){b(this,"description");b(this,"controller");b(this,"index");b(this,"resultIndex",null);this.controller=t,this.index=n,this.description=`Toggle status at index ${n}`}execute(){this.resultIndex=this.controller.toggleStatus(this.index)}undo(){this.resultIndex!==null&&this.controller.toggleStatus(this.resultIndex)}},ea=class{constructor(t,n,s){b(this,"description");b(this,"controller");b(this,"index");b(this,"title");b(this,"addedTask",null);b(this,"resultIndex",null);this.controller=t,this.index=n,this.title=s,this.description=`Add task "${s}" at index ${n}`}execute(){let t=this.controller.addTaskAt(this.index,this.title);t&&(this.addedTask=t.task,this.resultIndex=t.index)}undo(){this.resultIndex!==null?this.controller.removeTask(this.resultIndex):this.controller.removeTask(this.index+1)}},ta=class{constructor(t,n){b(this,"description");b(this,"controller");b(this,"index");b(this,"deletedTask");this.controller=t,this.index=n,this.deletedTask=t.getTasks()[n]||null,this.description=`Delete task at index ${n}`}execute(){this.controller.removeTask(this.index)}undo(){this.deletedTask&&this.controller.insertTask(this.index,this.deletedTask)}},ra=class{constructor(t,n,s){b(this,"description");b(this,"controller");b(this,"index");b(this,"task");b(this,"onSync");this.controller=t,this.index=n,this.task=t.getTasks()[n],this.onSync=s,this.description=`Archive task at index ${n}`}async execute(){let t={...this.task,flow_state:"archived"};await this.onSync(t),this.controller.removeTask(this.index)}async undo(){let t={...this.task,flow_state:"shortlist"};await this.onSync(t),this.controller.insertTask(this.index,this.task)}};var lg=ue('<div class="todo-flow-stack-header svelte-gkdjxn"> </div>'),cg=ue('<input type="text" class="todo-flow-title-input svelte-gkdjxn"/>'),fg=ue('<div class="title svelte-gkdjxn"> </div>'),ug=ue('<span class="constraint-indicator svelte-gkdjxn" title="Constrained by subtasks">\u2696\uFE0F</span>'),dg=ue('<div class="anchor-badge svelte-gkdjxn">\u2693</div>'),hg=ue('<div><div class="time-col svelte-gkdjxn"> </div> <div class="content-col svelte-gkdjxn"><!> <div class="duration svelte-gkdjxn"> <!></div></div> <!></div>'),pg=ue('<div class="todo-flow-stack-container svelte-gkdjxn" tabindex="0" role="application"><!> <div class="todo-flow-timeline svelte-gkdjxn"></div> <!></div>'),mg={hash:"svelte-gkdjxn",code:".todo-flow-stack-container.svelte-gkdjxn {padding:2rem;background:var(--background-primary);height:100%;overflow-y:auto;}.todo-flow-stack-header.svelte-gkdjxn {text-align:center;margin-bottom:2rem;font-size:0.9rem;color:var(--text-muted);opacity:0.6;text-transform:uppercase;letter-spacing:0.1em;}.todo-flow-timeline.svelte-gkdjxn {display:flex;flex-direction:column;gap:0.5rem;max-width:600px;margin:0 auto;}.todo-flow-task-card.svelte-gkdjxn {display:flex;padding:1rem;background:var(--background-secondary);border-radius:0.5rem;border:2px solid transparent;gap:1rem;align-items:center;transition:all 0.2s;opacity:0.8;}.todo-flow-task-card.focused.svelte-gkdjxn {border-color:var(--interactive-accent);opacity:1;transform:scale(1.02);}.todo-flow-task-card.anchored.svelte-gkdjxn {background:var(--background-secondary-alt);}.time-col.svelte-gkdjxn {font-family:var(--font-monospace);font-size:0.9rem;color:var(--text-muted);min-width:60px;}.content-col.svelte-gkdjxn {flex:1;}.title.svelte-gkdjxn {font-weight:500;color:var(--text-normal);}.duration.svelte-gkdjxn {font-size:0.8rem;color:var(--text-muted);}.anchor-badge.svelte-gkdjxn {font-size:1.2rem;}.constraint-indicator.svelte-gkdjxn {font-size:0.8rem;margin-left:0.3rem;opacity:0.7;cursor:help;}.is-done.svelte-gkdjxn {opacity:0.5;}.is-done.svelte-gkdjxn .title:where(.svelte-gkdjxn) {text-decoration:line-through;}.todo-flow-title-input.svelte-gkdjxn {width:100%;background:var(--background-modifier-form-field);border:1px solid var(--background-modifier-border);color:var(--text-normal);font-size:1rem;font-weight:500;padding:2px 4px;border-radius:4px;}"};function Ul(r,t){or(t,!0),vr(r,mg);let n=ct(t,"now",19,Eu.default),s=ct(t,"debug",3,!1),o=Re(At(t.settings)),l=Re(At(n())),f=nl(()=>T(o).keys);function d(H){Y(o,H,!0)}function h(H){Y(l,H,!0)}let p,g=Re(At([]));fn(()=>{if(T(l)){let H=T(l);L(()=>{p&&(p.updateTime(H),Y(g,p.getTasks(),!0),Y(v,Math.min(T(v),T(g).length-1),!0))})}});let v=Re(0),_=Re(-1),y=Re(!1),k,E,S=At([]);Ri(()=>{s()&&console.log("[TODO_FLOW_TRACE] onMount entry"),p=new $s(t.initialTasks,T(l),t.onTaskUpdate,t.onTaskCreate),Y(g,p.getTasks(),!0),k=new Ii(T(f)),E&&!window.navigator.userAgent.includes("HappyDOM")&&E.focus()}),fn(()=>{S[T(v)]&&S[T(v)].scrollIntoView({block:"nearest",behavior:"smooth"})});function M(H){let q=T(g)[T(v)];q&&t.onNavigate&&t.onNavigate(q.id,T(v))}function V(){s()&&console.debug("[TODO_FLOW_TRACE] update() entry. Current tasks:",T(g).length),Y(g,p.getTasks(),!0),s()&&console.debug("[TODO_FLOW_TRACE] update() complete. New tasks:",T(g).length)}function se(H){s()&&console.log("[TODO_FLOW_TRACE] setTasks entry. tasks count:",H.length),p=new $s(H,T(l),t.onTaskUpdate,t.onTaskCreate),Y(g,p.getTasks(),!0),s()&&console.log("[TODO_FLOW_TRACE] setTasks complete. Scheduled count:",T(g).length)}function J(H){Y(v,Math.max(0,Math.min(T(g).length-1,H)),!0)}function N(){return T(v)}function W(H){Y(_,H,!0)}function ne(H,q){var oe;q.trim().length>0&&q!==((oe=T(g)[H])==null?void 0:oe.title)&&(p.updateTaskTitle(H,q),V()),Y(_,-1),setTimeout(()=>E==null?void 0:E.focus(),50)}function te(H){H.focus(),H.select()}async function We(H){s()&&console.debug("[TODO_FLOW_TRACE] handleKeyDown entry:",H.key);let q=H.target,oe=document.activeElement;if(q instanceof HTMLInputElement||q instanceof HTMLTextAreaElement||q.isContentEditable||oe&&oe.isContentEditable)return;["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"," "].includes(H.key)&&H.preventDefault();let ae=k.resolveAction(H);if(console.log(`[Diagnostic] Key: "${H.key}" (code: ${H.code}), Shift: ${H.shiftKey} -> Resolved Action: ${ae}`),s()&&console.log(`[TODO_FLOW_TRACE] resolveAction: ${ae} for key: ${H.key}`),!!ae){if(T(y)){(ae==="TOGGLE_HELP"||ae==="CANCEL")&&(Y(y,!1),H.stopPropagation());return}if(ae==="TOGGLE_HELP"){Y(y,!0),H.stopPropagation();return}if(T(_)===-1){if(H.preventDefault(),ae==="UNDO"){t.historyManager.undo(),V();return}if(ae==="REDO"){t.historyManager.redo(),V();return}switch(ae){case"RENAME":W(T(v));break;case"FORCE_OPEN":let gt=p.handleEnter(T(v),!0);gt&&gt.action==="OPEN_FILE"&&gt.path&&t.onOpenFile(gt.path);break;case"GO_BACK":s()&&console.log(`[TODO_FLOW_TRACE] Executing GO_BACK action. onGoBack callback exists: ${!!t.onGoBack}`),t.onGoBack&&t.onGoBack();break;case"CONFIRM":let Ne=p.handleEnter(T(v));if(Ne)if(Ne.action==="DRILL_DOWN"){let yt=T(g)[T(v)];yt&&t.onNavigate&&t.onNavigate(yt.id,T(v))}else Ne.action==="OPEN_FILE"&&Ne.path&&(t.onNavigate?t.onNavigate(Ne.path,T(v)):t.onOpenFile(Ne.path));break;case"NAV_DOWN":Y(v,Math.min(T(g).length-1,T(v)+1),!0);break;case"NAV_UP":Y(v,Math.max(0,T(v)-1),!0);break;case"MOVE_DOWN":let R=new Es(p,T(v),"down");await t.historyManager.executeCommand(R),R.resultIndex!==null&&Y(v,R.resultIndex,!0),V();break;case"MOVE_UP":let jt=new Es(p,T(v),"up");await t.historyManager.executeCommand(jt),jt.resultIndex!==null&&Y(v,jt.resultIndex,!0),V();break;case"ANCHOR":let wr=new Jo(p,T(v));await t.historyManager.executeCommand(wr),wr.resultIndex!==null&&Y(v,wr.resultIndex,!0),V();break;case"DURATION_UP":let vt=new Ds(p,T(v),"up");await t.historyManager.executeCommand(vt),vt.resultIndex!==null&&Y(v,vt.resultIndex,!0),V();break;case"DURATION_DOWN":let tr=new Ds(p,T(v),"down");await t.historyManager.executeCommand(tr),tr.resultIndex!==null&&Y(v,tr.resultIndex,!0),V();break;case"TOGGLE_DONE":let kr=new Qo(p,T(v));await t.historyManager.executeCommand(kr),kr.resultIndex!==null&&Y(v,kr.resultIndex,!0),V();break;case"CREATE_TASK":s()&&console.debug("[TODO_FLOW_TRACE] Action CREATE_TASK triggered"),t.openTaskModal?t.openTaskModal(async yt=>{s()&&console.debug("[TODO_FLOW_TRACE] Modal submitted:",yt);let Gr=new ea(p,T(v),yt);await t.historyManager.executeCommand(Gr),Gr.resultIndex!==null&&Y(v,Gr.resultIndex,!0),V()}):s()&&console.warn("[TODO_FLOW_TRACE] openTaskModal not available in props");break;case"DELETE_TASK":let Kt=T(g)[T(v)];Kt&&confirm(`Delete task "${Kt.title}"?`)&&(await t.historyManager.executeCommand(new ta(p,T(v))),Y(v,Math.max(0,T(v)-1),!0),new window.Notice(`Deleted: ${Kt.title}`),V());break;case"ARCHIVE":let Br=T(g)[T(v)];Br&&(await t.historyManager.executeCommand(new ra(p,T(v),async yt=>{await t.onTaskUpdate(yt)})),Y(v,Math.max(0,Math.min(T(g).length-1,T(v))),!0),new window.Notice(`Archived: ${Br.title}`),V());break;case"EXPORT":t.onExport&&t.onExport(T(g));break}}}}var he={updateSettings:d,updateNow:h,setTasks:se,setFocus:J,getFocusedIndex:N,handleKeyDown:We},ke=pg();ke.__keydown=We;var er=F(ke);{var zt=H=>{var q=lg(),oe=F(q);C(q),Fe(ae=>ge(oe,`Starting at ${ae!=null?ae:""}`),[()=>T(l).format("HH:mm")]),fe(H,q)};Bt(er,H=>{T(l)&&H(zt)})}var Ft=K(er,2);_r(Ft,21,()=>T(g),mr,(H,q,oe)=>{var ae=hg();let gt;ae.__click=()=>{Y(v,oe,!0)};var Ne=F(ae),R=F(Ne,!0);C(Ne);var jt=K(Ne,2),wr=F(jt);{var vt=de=>{var xe=cg();$l(xe),xe.__keydown=wt=>{wt.key==="Enter"&&ne(oe,wt.currentTarget.value),wt.key==="Escape"&&Y(_,-1)},bl(xe,wt=>te==null?void 0:te(wt)),Fe(()=>El(xe,T(q).title)),_s("blur",xe,wt=>ne(oe,wt.currentTarget.value)),fe(de,xe)},tr=de=>{var xe=fg(),wt=F(xe,!0);C(xe),Fe(()=>ge(wt,T(q).title)),fe(de,xe)};Bt(wr,de=>{T(_)===oe?de(vt):de(tr,!1)})}var kr=K(wr,2),Kt=F(kr),Br=K(Kt);{var yt=de=>{var xe=ug();fe(de,xe)};Bt(Br,de=>{Wo(T(q))>0&&de(yt)})}C(kr),C(jt);var Gr=K(jt,2);{var ei=de=>{var xe=dg();fe(de,xe)};Bt(Gr,de=>{T(q).isAnchored&&de(ei)})}C(ae),Ci(ae,(de,xe)=>S[xe]=de,de=>S==null?void 0:S[de],()=>[oe]),Fe((de,xe)=>{gt=Ur(ae,1,"todo-flow-task-card svelte-gkdjxn",null,gt,{focused:T(v)===oe,anchored:T(q).isAnchored,"is-done":T(q).status==="done"}),ge(R,de),ge(Kt,`${xe!=null?xe:""} `)},[()=>{var de;return(de=T(q).startTime)==null?void 0:de.format("HH:mm")},()=>$u(T(q).duration)]),fe(H,ae)}),C(Ft);var yr=K(Ft,2);{var Wr=H=>{Ts(H,{get keys(){return T(f)},get settings(){return T(o)}})};Bt(yr,H=>{T(y)&&H(Wr)})}return C(ke),Ci(ke,H=>E=H,()=>E),fe(r,ke),ar(he)}Mi(["keydown","click"]);Ze();function Hl(r){return!r||!Array.isArray(r)?"":r.join(", ")}function Du(r){return!r||!r.trim()?[]:r.split(",").map(t=>t.trim()).filter(t=>t.length>0)}var Ms=require("obsidian");var na=class extends Ms.Modal{constructor(n,s){super(n);b(this,"result","");b(this,"onSubmit");this.onSubmit=s}onOpen(){let{contentEl:n}=this;n.createEl("h2",{text:"New Task"}),new Ms.Setting(n).setName("Title").addText(s=>s.onChange(o=>{this.result=o}).inputEl.addEventListener("keydown",o=>{o.key==="Enter"&&this.result.trim()&&(this.onSubmit(this.result.trim()),this.close())})),new Ms.Setting(n).addButton(s=>s.setButtonText("Create").setCta().onClick(()=>{this.result.trim()&&(this.onSubmit(this.result.trim()),this.close())}))}onClose(){let{contentEl:n}=this;n.empty()}};Nn();la();Ze();la();var ca=class{constructor(t,n){b(this,"state");b(this,"loader");b(this,"preprocessor");this.loader=t,this.preprocessor=n,this.state={currentStack:[],currentFocusedIndex:0,history:[],focusedHistory:[],sourceHistory:[],currentSource:""}}setStack(t,n){this.state.currentStack=[...t],this.state.currentSource=n}getCurrentStack(){return[...this.state.currentStack]}clear(){this.state={currentStack:[],currentFocusedIndex:0,history:[],focusedHistory:[],sourceHistory:[],currentSource:""}}async drillDown(t,n){let s=this.state.currentStack.find(l=>l.id===t);if(!s)return!1;let o=await this.loader.load(s.id);return o.length===0?!1:(console.log(`[NavigationManager] push history. Current stack size: ${this.state.currentStack.length}, History index before: ${this.state.history.length}`),this.state.history.push([...this.state.currentStack]),this.state.focusedHistory.push(n),this.state.sourceHistory.push(this.state.currentSource),console.log(`[NavigationManager] history pushed. Now depth: ${this.state.history.length}`),this.state.currentStack=this.preprocessor?this.preprocessor(o):o,this.state.currentSource=s.id,this.state.currentFocusedIndex=0,!0)}async goBack(){var l;if(console.log(`[NavigationManager] goBack() entry. History length: ${this.state.history.length}`),this.state.history.length===0)return console.log("[NavigationManager] goBack() failed: history empty"),{success:!1,focusedIndex:0};let t=this.state.history.pop(),n=this.state.sourceHistory.pop(),s=(l=this.state.focusedHistory.pop())!=null?l:0;if(console.log(`[NavigationManager] popping from history. prevSource: ${n}, prevFocus: ${s}`),n===void 0)return console.log("[NavigationManager] goBack() failed: previousSource undefined"),{success:!1,focusedIndex:0};console.log(`[NavigationManager] loading source: ${n}`);let o;if(n.startsWith("EXPLICIT"))if(t&&t.length>0){let f=t.map(d=>d.id);console.log(`[NavigationManager] Reloading Explicit Tray. IDs: ${f.length} items (${f.slice(0,3).join(", ")}...)`),o=await this.loader.loadSpecificFiles(f),console.log(`[NavigationManager] Reload result: ${o.length} items.`),o.length===0&&(console.warn("[NavigationManager] WARN: Reload returned 0 items. Falling back to cached history stack."),o=[...t])}else console.warn("[NavigationManager] Previous stack history was empty."),o=[];else o=await this.loader.load(n);return console.log(`[NavigationManager] load complete. Tasks found: ${o.length}`),this.state.currentStack=this.preprocessor?this.preprocessor(o):o,this.state.currentSource=n,this.state.currentFocusedIndex=s,{success:!0,focusedIndex:s}}canGoBack(){return this.state.history.length>0}getState(){return{...this.state}}setState(t){this.state=t}};var As=tn(Hr(),1);var Vi="todo-flow-stack-view",Qn=class r extends Ou.ItemView{constructor(n,s,o,l,f,d){super(n);b(this,"component");b(this,"rootPath",null);b(this,"currentTaskIds",null);b(this,"tasks",[]);b(this,"settings");b(this,"historyManager");b(this,"logger");b(this,"onTaskUpdate");b(this,"onTaskCreate");b(this,"loader");b(this,"navManager");this.settings=s,this.historyManager=o,this.logger=l,this.onTaskUpdate=f,this.onTaskCreate=d,this.loader=new Ns(this.app,this.logger),this.navManager=new ca(this.loader,h=>_t(h,(0,As.default)()))}getViewType(){return Vi}getDisplayText(){return"Daily Stack"}getState(){let n=this.navManager.getState();return{rootPath:this.rootPath,navState:n}}async setState(n,s){this.logger&&await this.logger.info(`[StackView] setState triggered. State keys: ${Object.keys(n||{}).join(", ")}`);let o=this.getNow();if(this.logger&&await this.logger.info(`[StackView] Schedule Basis: ${o.format("YYYY-MM-DD HH:mm")} (Mode: ${this.settings.timingMode})`),n?!n.rootPath&&!n.ids&&this.logger&&await this.logger.warn(`[StackView] [UNHAPPY] setState received valid state object but MISSING rootPath OR ids. Keys: ${JSON.stringify(n)}`):this.logger&&await this.logger.warn("[StackView] [UNHAPPY] setState received null/undefined state."),n&&(n.rootPath||n.ids)){let l=[];if(n.navState&&n.navState.history&&n.navState.history.length>0){this.logger&&await this.logger.info(`[StackView] Restoring full navigation state (Depth: ${n.navState.history.length})`),this.navManager.setState(n.navState),this.tasks=this.navManager.getCurrentStack(),this.rootPath=n.rootPath||n.navState.currentSource,this.logger&&await this.logger.info(`[StackView] State restored. Current Stack: ${this.tasks.length} items.`),this.component&&this.component.setTasks&&(this.component.setTasks(this.tasks),n.navState.currentFocusedIndex!==void 0&&this.component.setFocus(n.navState.currentFocusedIndex));return}n.rootPath==="QUERY:SHORTLIST"?(this.logger&&await this.logger.info("[StackView] Loading shortlisted tasks..."),l=await this.loader.loadShortlisted(),this.logger&&await this.logger.info(`[StackView] Loaded ${l.length} shortlisted tasks.`),this.rootPath="QUERY:SHORTLIST"):n.ids&&Array.isArray(n.ids)?(this.logger&&await this.logger.info(`[StackView] EXPLICIT MODE: Loading ${n.ids.length} tasks into Tray.`),this.currentTaskIds=n.ids,l=await this.loader.loadSpecificFiles(n.ids),this.rootPath=`EXPLICIT:${n.ids.length}`):(this.logger&&await this.logger.info(`[StackView] PATH MODE: Loading tasks from ${n.rootPath}`),this.rootPath=n.rootPath,l=await this.loader.load(n.rootPath)),l.length===0&&this.logger&&await this.logger.warn(`[StackView] [UNHAPPY] Loaded 0 tasks for rootPath="${this.rootPath}". Is directory empty or invalid?`);let f=_t(l,o);await this.logStackDetails(f,"Initial Load"),this.navManager.setStack(f,this.rootPath),this.tasks=this.navManager.getCurrentStack(),this.component&&this.component.setTasks&&this.component.setTasks(this.tasks)}await super.setState(n,s)}async reload(){let n=this.tasks?this.tasks.length:0;this.logger&&await this.logger.info(`[StackView] Reload triggered. Current tasks: ${n}`);let s=this.getState(),o=null;if(this.component&&typeof this.component.getFocusedIndex=="function"){let l=this.component.getFocusedIndex(),f=this.tasks&&this.tasks[l];f&&(o=f.id)}if(this.currentTaskIds&&this.currentTaskIds.length>0){if(this.logger&&await this.logger.info(`[StackView] Reloading EXPLICIT list (${this.currentTaskIds.length} IDs).`),s.ids=this.currentTaskIds,await this.setState(s,null),o&&this.tasks){let f=this.tasks.findIndex(d=>d.id===o);f!==-1&&this.component?this.component.setFocus(f):this.logger&&await this.logger.warn(`[StackView] [UNHAPPY] Could not restore focus to task ID="${o}". Task not found in reloaded stack.`)}let l=this.tasks?this.tasks.length:0;this.logger&&await this.logger.info(`[StackView] Reload complete. New tasks: ${l}`)}else if(this.rootPath)if(this.rootPath.startsWith("EXPLICIT"))this.logger.warn("[StackView] Skipping reload for EXPLICIT mode (no IDs in memory).");else{if(s.rootPath=this.rootPath,await this.setState(s,null),o&&this.tasks){let f=this.tasks.findIndex(d=>d.id===o);f!==-1&&this.component?this.component.setFocus(f):this.logger&&await this.logger.warn(`[StackView] [UNHAPPY] Could not restore focus to task ID="${o}". Task not found in reloaded stack.`)}let l=this.tasks?this.tasks.length:0;this.logger&&await this.logger.info(`[StackView] Reload complete. New tasks: ${l}`)}else this.logger&&await this.logger.warn("[StackView] [UNHAPPY] Reload called but NO rootPath or valid IDs available. Cannot reload.")}async onOpen(){this.registerDomEvent(window,"keydown",n=>{n.defaultPrevented||(this.settings.keys.debug&&this.logger.info(`[TRACE] window keydown: ${n.key} (code: ${n.code})`),!this.leaf.view||this.app.workspace.getActiveViewOfType(r),this.component&&this.component.handleKeyDown(n))}),this.component=Yr(Ul,{target:this.contentEl,props:{initialTasks:this.tasks,settings:this.settings,now:this.getNow(),historyManager:this.historyManager,logger:this.logger,onTaskUpdate:this.onTaskUpdate,onTaskCreate:this.onTaskCreate,openTaskModal:n=>{new na(this.app,n).open()},onOpenFile:n=>{this.app.workspace.openLinkText(n,"",!0)},onNavigate:async(n,s)=>{this.logger.info("[StackView] ========== DRILL DOWN TRIGGERED =========="),this.logger.info(`[StackView] Navigating to: ${n} from index ${s}`),this.logger.info("[StackView] Current state BEFORE drillDown:"),this.logger.info(`[StackView]   - this.tasks.length: ${this.tasks.length}`),this.logger.info(`[StackView]   - History size: ${this.navManager.getState().history.length}`);let o=await this.navManager.drillDown(n,s);if(this.logger.info(`[StackView] NavigationManager.drillDown() result: success=${o}`),o){let l=this.navManager.getCurrentStack();this.logger.info(`[StackView] Retrieved stack from NavigationManager: ${l.length} tasks`),this.tasks=l,this.logger.info(`[StackView] Updated this.tasks to ${this.tasks.length} tasks`),this.logStackDetails(this.tasks,"Drill Down Refreshed"),this.component&&this.component.setTasks?(this.logger.info(`[StackView] Calling component.setTasks() with ${this.tasks.length} tasks`),this.component.setTasks(this.tasks),this.logger.info("[StackView] component.setTasks() completed"),this.component.setFocus&&(this.logger.info("[StackView] Calling component.setFocus(0)"),this.component.setFocus(0))):this.logger.warn("[StackView] WARNING: component or component.setTasks is undefined!"),this.logger.info(`[StackView] Drilled down successfully. New stack size: ${this.tasks.length}`)}else this.logger.warn(`[StackView] Could not drill down into: ${n}. Falling back to opening file.`),this.app.workspace.openLinkText(n,"",!0);this.logger.info("[StackView] ========== DRILL DOWN FINISHED ==========")},onGoBack:async()=>{this.logger.info("[StackView] ========== GO BACK TRIGGERED =========="),this.logger.info("[StackView] Current state BEFORE goBack:"),this.logger.info(`[StackView]   - this.tasks.length: ${this.tasks.length}`),this.logger.info(`[StackView]   - History size: ${this.navManager.getState().history.length}`),this.logger.info(`[StackView]   - Current source: ${this.navManager.getState().currentSource}`);let n=await this.navManager.goBack(),{success:s,focusedIndex:o}=n;if(this.logger.info(`[StackView] NavigationManager.goBack() result: success=${s}, focusedIndex=${o}`),s){let l=this.navManager.getCurrentStack();this.logger.info(`[StackView] Retrieved stack from NavigationManager: ${l.length} tasks`),this.tasks=l,this.logger.info(`[StackView] Updated this.tasks to ${this.tasks.length} tasks`),await this.logStackDetails(this.tasks,"Go Back Refreshed"),this.component&&this.component.setTasks?(this.logger.info(`[StackView] Calling component.setTasks() with ${this.tasks.length} tasks`),this.component.setTasks(this.tasks),this.logger.info("[StackView] component.setTasks() completed"),this.component.setFocus&&(this.logger.info(`[StackView] Calling component.setFocus(${o})`),this.component.setFocus(o))):(this.logger.warn("[StackView] WARNING: component or component.setTasks is undefined!"),this.logger.warn(`[StackView]   - component exists: ${!!this.component}`),this.logger.warn(`[StackView]   - component.setTasks exists: ${!!(this.component&&this.component.setTasks)}`)),this.logger.info(`[StackView] Go back completed. Restored focus to ${o}`)}else this.logger.warn(`[StackView] Cannot go back. Result success: ${s}`);this.logger.info("[StackView] ========== GO BACK FINISHED ==========")},onExport:async n=>{let s=yu(n),o=`Stack Export ${(0,As.default)().format("YYYY-MM-DD HHmm")}.md`,l=o;this.settings.exportFolder&&(await this.app.vault.adapter.exists(this.settings.exportFolder)||await this.app.vault.createFolder(this.settings.exportFolder),l=`${this.settings.exportFolder}/${o}`),await this.app.vault.create(l,s),new window.Notice(`Stack saved to ${l} `)}}})}getNow(){if(this.settings.timingMode==="fixed"&&this.settings.fixedStartTime){let[n,s]=this.settings.fixedStartTime.split(":");return(0,As.default)().set({hour:parseInt(n||"9"),minute:parseInt(s||"0"),second:0,millisecond:0})}return(0,As.default)()}async logStackDetails(n,s){var o;if(this.logger){this.logger.info(`[DEBUG][${s}] Stack Contents(${n.length} tasks): `),this.logger.info("   FORMAT -> [Index] ID | Start: Displayed | Title: Displayed(On - Disk) | Dur: Displayed(On - Disk) | Status: Displayed(On - Disk) | Anchored: Displayed(On - Disk)");for(let l=0;l<n.length;l++){let f=n[l],d=await this.loader.parser.resolveTaskMetadata(f.id),h=((o=f.startTime)==null?void 0:o.format("HH:mm"))||"??:??",p=f.title===d.title?f.title:`${f.title} (${d.title})`,g=f.duration===d.duration?f.duration:`${f.duration} (${d.duration})`,v=f.status===d.status?f.status:`${f.status} (${d.status})`,_=f.isAnchored===d.isAnchored?f.isAnchored:`${f.isAnchored} (${d.isAnchored})`;this.logger.info(`   [${l}]ID: ${f.id} | Start: ${h} | Title: ${p} | Dur: ${g} | Status: ${v} | Anchored: ${_} `),f.duration!==d.duration&&f.trace&&f.trace.length>0&&this.logger.info(`      ROLLUP AUDIT: ${f.trace.join(" | ")} `)}}}updateSettings(n){this.settings=n,this.component&&(this.component.updateSettings&&this.component.updateSettings(this.settings),this.component.updateNow&&this.component.updateNow(this.getNow())),this.logger.info(`[StackView] Settings updated (Hot Reload). Debug: ${this.settings.debug}`)}async onClose(){this.component&&un(this.component)}};Ze();Yi();var $C=tn(Hr(),1);var jl=require("obsidian");var fa=class{constructor(t){this.app=t}async syncExportToVault(t){let n=t.split(`
`),s=/-\s*\[x\]\s*.*\s*\[\[(.+?)(?:\|.+)?\]\]/,o=0;for(let l of n){let f=l.match(s);if(f){let d=f[1];d&&(await this.updateFileStatus(d,"done"),o++)}}return o}async updateFileStatus(t,n){let s=this.app.vault.getAbstractFileByPath(t);if(s instanceof jl.TFile&&s.extension==="md")await this.app.vault.process(s,o=>Xe(o,"status",n));else if(!s){let o=this.app.metadataCache.getFirstLinkpathDest(t,"");o instanceof jl.TFile&&await this.app.vault.process(o,l=>Xe(l,"status",n))}}};Nn();var aC=require("obsidian");Nn();var ua=class{constructor(t,n){b(this,"app");b(this,"logger");this.app=t,this.logger=n}async handleActiveLeafChange(){let t=this.app.workspace.getActiveViewOfType(Qn);t&&(this.logger.info("[ViewManager] Active leaf changed to StackView. Triggering Reload."),typeof t.reload=="function"?(this.logger.info("[ViewManager] Calling activeView.reload()..."),await t.reload()):this.logger.warn("[ViewManager] StackView found but reload() method missing!"))}};var _g={targetFolder:"todo-flow",exportFolder:"",timingMode:"now",fixedStartTime:"09:00",keys:Li,debug:!1,lastTray:null},da=class extends ft.Plugin{constructor(){super(...arguments);b(this,"settings");b(this,"historyManager");b(this,"logger");b(this,"viewManager")}async onload(){await this.loadSettings(),this.historyManager=new Zo,this.logger=new Ko(this.app,this.settings.debug),this.viewManager=new ua(this.app,this.logger),await this.logger.info(`[Todo Flow] Loading v${this.manifest.version} (Build 2026-01-27 10:48)`),await this.logger.info("Todo Flow Plugin loading..."),this.addSettingTab(new Zl(this.app,this)),this.registerView(jo,n=>new zo(n,this.settings.targetFolder,s=>{this.activateTriage(s)})),this.registerView(Yl,n=>new Ss(n,[],this.settings,this.historyManager,this.logger,s=>{this.logger.info(`Triage complete: ${JSON.stringify(s)}`),this.app.commands.executeCommandById("todo-flow:open-daily-stack")})),this.registerView(Vi,n=>new Qn(n,this.settings,this.historyManager,this.logger,s=>{this.syncTaskToNote(s)},s=>this.onCreateTask(s))),this.registerEvent(this.app.workspace.on("active-leaf-change",async()=>{await this.viewManager.handleActiveLeafChange()})),this.addCommand({id:"open-todo-dump",name:"Open Todo Dump",callback:()=>{this.activateView(jo)}}),this.addCommand({id:"start-triage",name:"Start Triage from target folder",callback:async()=>{let{TaskQueryService:n}=await Promise.resolve().then(()=>(zl(),Gl)),o=await new n(this.app,this.logger).getDumpedTasks();if(o.length===0){new window.Notice("No items in Dump to triage!");return}this.activateTriage(o)}}),this.addCommand({id:"open-daily-stack",name:"Open Daily Stack",callback:async()=>{this.settings.lastTray&&this.settings.lastTray.length>0?await this.activateStack(this.settings.lastTray):await this.activateStack("QUERY:SHORTLIST")}}),this.addCommand({id:"sync-completed-tasks",name:"Sync Completed Tasks from Current Export",callback:async()=>{let n=this.app.workspace.getActiveViewOfType(this.app.workspace.getLeaf(!1).view.constructor),s=this.app.workspace.activeLeaf;if(!s||!s.view||s.view.getViewType()!=="markdown"){new window.Notice("Open a markdown export file to sync.");return}let o=s.view.editor;if(o){let l=o.getValue(),d=await new fa(this.app).syncExportToVault(l);new window.Notice(`Synced ${d} tasks from export.`)}}}),this.addCommand({id:"toggle-timing-mode",name:"Toggle Timing Mode (Now vs Fixed)",callback:()=>{this.settings.timingMode=this.settings.timingMode==="now"?"fixed":"now",this.saveSettings(),this.refreshStackView(),new window.Notice(`Timing Mode: ${this.settings.timingMode==="now"?"Dynamic (Now)":"Fixed ("+this.settings.fixedStartTime+")"}`)}}),this.addCommand({id:"toggle-dev-mode",name:"Toggle Developer Mode (Tracing)",callback:()=>{this.settings.debug=!this.settings.debug,this.logger.setEnabled(this.settings.debug),this.saveSettings(),new window.Notice(`Developer Mode: ${this.settings.debug?"ON":"OFF"}`)}}),this.addCommand({id:"clear-logs",name:"Clear Log File",callback:async()=>{await this.app.vault.adapter.exists("todo-flow.log")&&(await this.app.vault.adapter.write("todo-flow.log",""),new window.Notice("Logs cleared"))}}),this.addCommand({id:"open-folder-as-stack",name:"Open Folder as Stack",callback:async()=>{let{FolderSuggester:n}=await Promise.resolve().then(()=>(Rs(),Cs));new n(this.app,s=>{this.activateStack(s.path)}).open()}}),this.addCommand({id:"open-file-as-stack",name:"Open File as Stack",callback:async()=>{let{FileSuggester:n}=await Promise.resolve().then(()=>(Rs(),Cs));new n(this.app,s=>{this.activateStack(s.path)}).open()}}),this.addCommand({id:"triage-folder",name:"Triage Folder",callback:async()=>{let{FolderSuggester:n}=await Promise.resolve().then(()=>(Rs(),Cs));new n(this.app,async s=>{let o=await this.getTasksFromFolder(s.path);if(o.length===0){new window.Notice("No markdown files in folder!");return}this.activateTriage(o)}).open()}}),this.addCommand({id:"triage-file",name:"Triage File",callback:async()=>{let{FileSuggester:n}=await Promise.resolve().then(()=>(Rs(),Cs));new n(this.app,async s=>{this.logger.info(`[main.ts] Triage File: Selected ${s.path}. Resolving child tasks...`);let{StackLoader:o}=await Promise.resolve().then(()=>(la(),Au)),f=await new o(this.app,this.logger).load(s.path);if(f.length===0){new window.Notice("No tasks found linked in this file!");return}this.activateTriage(f)}).open()}})}async activateView(n,s){let{workspace:o}=this.app,l,f=o.getLeavesOfType(n);f.length>0?l=f[0]:(l=o.getLeaf(!0),await l.setViewState({type:n,active:!0})),o.revealLeaf(l)}async activateTriage(n){let{workspace:s}=this.app,o=s.getLeaf(!0);this.logger.info(`[main.ts] activateTriage: Initializing session with ${n.length} tasks.`);let l=new Ss(o,n,this.settings,this.historyManager,this.logger,f=>{let d=f.shortlist.map(h=>h.id);this.logger.info(`[main.ts] Triage callback: Session isolation active. Received ${d.length} shortlisted tasks: ${JSON.stringify(d)}`),this.activateStack(d)});await o.open(l),s.revealLeaf(o)}async activateStack(n){let{workspace:s}=this.app,o;this.logger.info(`[main.ts] activateStack target: ${Array.isArray(n)?`EXPLICIT LIST (${n.length} IDs)`:n}`),Array.isArray(n)&&(this.settings.lastTray=n,await this.saveData(this.settings));let l=s.getLeavesOfType(Vi);l.length>0?o=l[0]:o=s.getLeaf(!0);let f={active:!0};Array.isArray(n)?f.state={ids:n}:f.state={rootPath:n},await o.setViewState({type:Vi,active:!0,state:f.state}),s.revealLeaf(o)}refreshStackView(){this.app.workspace.getLeavesOfType(Vi).forEach(s=>{s.view instanceof Qn&&s.view.updateSettings(this.settings)})}async loadSettings(){let n=await this.loadData();if(this.settings=Object.assign({},_g,n),n&&n.keys){this.settings.keys=Object.assign({},Li,n.keys);let s=this.settings.keys.export;Array.isArray(s)&&s.includes("e")&&(this.settings.keys.export=s.filter(l=>l!=="e"),this.settings.keys.export.includes("Shift+E")||this.settings.keys.export.push("Shift+E"),console.log('[Todo Flow] Migrated settings: Removed "e" from export keys to fix collision with Rename.'));let o=this.settings.keys.goBack;Array.isArray(o)&&o.includes("Backspace")&&(this.settings.keys.goBack=o.filter(l=>l!=="Backspace"),console.log('[Todo Flow] Migrated settings: Removed "Backspace" from goBack keys to fix collision with DeleteTask.')),this.settings.keys.anchor.includes("a")&&this.settings.keys.confirm.includes("f")&&(this.settings.keys=Object.assign({},Li),console.log('[Todo Flow] Migrated settings to final corrected "dfjk" + Duration layout.'))}}async saveSettings(){await this.saveData(this.settings)}async getFilesFromFolder(n){let s=this.app.vault.getAbstractFileByPath(n);if(s instanceof ft.TFolder){let o=[];return s.children.forEach(l=>{l instanceof ft.TFile&&l.extension==="md"&&o.push(l)}),o}return[]}async syncTaskToNote(n){var l;let s=(l=n.originalDuration)!=null?l:n.duration;this.logger.info(`[DEBUG] Syncing Task Metadata to Disk: ID=${n.id} | Title=${n.title} | Dur=${s} (Rollup: ${n.duration}) | Status=${n.status} | Anchored=${n.isAnchored}`);let o=this.app.vault.getAbstractFileByPath(n.id);o instanceof ft.TFile&&await this.app.vault.process(o,f=>{let d=f;return d=Xe(d,"task",n.title),d=Xe(d,"duration",s),d=Xe(d,"status",n.status),d=Xe(d,"anchored",n.isAnchored),n.isAnchored&&n.startTime&&(d=Xe(d,"startTime",n.startTime.format("YYYY-MM-DD HH:mm"))),d})}onCreateTask(n){let s=Bo(n),o=`${this.settings.targetFolder}/${s}`,l={id:o,title:n,duration:30,status:"todo",isAnchored:!1,children:[]};return this.app.vault.create(o,`---
task: ${n}
status: todo
duration: 30
---
# ${n}`),l}async getTasksFromFolder(n){let s=await this.getFilesFromFolder(n);return new Xn(this.app).buildGraph(s)}},Zl=class extends ft.PluginSettingTab{constructor(n,s){super(n,s);b(this,"plugin");this.plugin=s}display(){let{containerEl:n}=this;n.empty(),new ft.Setting(n).setName("Target Folder").setDesc("Folder where new thoughts and tasks will be created").addText(s=>s.setPlaceholder("todo-flow").setValue(this.plugin.settings.targetFolder).onChange(async o=>{this.plugin.settings.targetFolder=o,await this.plugin.saveSettings()})),new ft.Setting(n).setName("Export Folder").setDesc("Default folder for Stack exports (leave empty for Vault root)").addText(s=>s.setPlaceholder("e.g. Exports").setValue(this.plugin.settings.exportFolder).onChange(async o=>{this.plugin.settings.exportFolder=o,await this.plugin.saveSettings()})),new ft.Setting(n).setName("Timing Mode").setDesc("Choose how the Daily Stack schedule is calculated").addDropdown(s=>s.addOption("now","Dynamic (Start from Now)").addOption("fixed","Fixed (Start from specific time)").setValue(this.plugin.settings.timingMode).onChange(async o=>{this.plugin.settings.timingMode=o,await this.plugin.saveSettings(),this.plugin.refreshStackView(),this.display()})),this.plugin.settings.timingMode==="fixed"&&new ft.Setting(n).setName("Fixed Start Time").setDesc("Example: 09:00, 14:30").addText(s=>s.setPlaceholder("HH:mm").setValue(this.plugin.settings.fixedStartTime).onChange(async o=>{this.plugin.settings.fixedStartTime=o,await this.plugin.saveSettings(),this.plugin.refreshStackView()})),new ft.Setting(n).setName("Developer Mode").setDesc("Enable verbose diagnostic tracing in the console (Cmd+Option+I)").addToggle(s=>s.setValue(this.plugin.settings.debug).onChange(async o=>{this.plugin.settings.debug=o,await this.plugin.saveSettings(),this.plugin.refreshStackView()})),n.createEl("h3",{text:"Navigation"}),this.addKeySetting(n,"navUp","Move Focus Up"),this.addKeySetting(n,"navDown","Move Focus Down"),this.addKeySetting(n,"forceOpen","Force Open / Drill Down"),this.addKeySetting(n,"goBack","Go Back"),this.addKeySetting(n,"confirm","Open / Drill Down (Contextual)"),n.createEl("h3",{text:"Actions"}),this.addKeySetting(n,"toggleDone","Toggle Done"),this.addKeySetting(n,"createTask","Create Task"),this.addKeySetting(n,"rename","Rename Task"),this.addKeySetting(n,"deleteTask","Delete Task"),this.addKeySetting(n,"export","Export to Note"),n.createEl("h3",{text:"Organization"}),this.addKeySetting(n,"moveUp","Move Task Up"),this.addKeySetting(n,"moveDown","Move Task Down"),this.addKeySetting(n,"anchor","Toggle Anchor"),this.addKeySetting(n,"durationUp","Increase Duration"),this.addKeySetting(n,"durationDown","Decrease Duration"),this.addKeySetting(n,"undo","Undo"),this.addKeySetting(n,"redo","Redo")}addKeySetting(n,s,o){new ft.Setting(n).setName(o).setDesc(`Current: ${Hl(this.plugin.settings.keys[s])}`).addText(l=>l.setPlaceholder("e.g. k, ArrowUp").setValue(Hl(this.plugin.settings.keys[s])).onChange(async f=>{let d=Du(f);this.plugin.settings.keys[s]=d,await this.plugin.saveSettings(),this.plugin.refreshStackView()}))}};
/*! Bundled license information:

moment/moment.js:
  (*! moment.js *)
  (*! version : 2.30.1 *)
  (*! authors : Tim Wood, Iskren Chernev, Moment.js contributors *)
  (*! license : MIT *)
  (*! momentjs.com *)
*/
