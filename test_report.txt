
> obsidian_plugin_for_todo_flow@1.0.7 test
> vitest run


[1m[46m RUN [49m[22m [36mv4.0.18 [39m[90m/home/ivan/obsidian_plugin_for_todo_flow[39m

10:59:25 AM [vite-plugin-svelte] src/views/StackView.svelte:44:34 This reference only captures the initial value of `settings`. Did you mean to reference it inside a closure instead?
https://svelte.dev/e/state_referenced_locally
10:59:25 AM [vite-plugin-svelte] src/views/StackView.svelte:45:29 This reference only captures the initial value of `now`. Did you mean to reference it inside a closure instead?
https://svelte.dev/e/state_referenced_locally
10:59:25 AM [vite-plugin-svelte] src/views/StackView.svelte:744:0 noninteractive element cannot have nonnegative tabIndex value
https://svelte.dev/e/a11y_no_noninteractive_tabindex
10:59:25 AM [vite-plugin-svelte] src/views/StackView.svelte:744:0 Non-interactive element `<div>` should not be assigned mouse or keyboard event listeners
https://svelte.dev/e/a11y_no_noninteractive_element_interactions
10:59:25 AM [vite-plugin-svelte] src/views/StackView.svelte:759:12 Visible, non-interactive elements with a click event must be accompanied by a keyboard event handler. Consider whether an interactive element such as `<button type="button">` or `<a>` might be more appropriate
https://svelte.dev/e/a11y_click_events_have_key_events
10:59:25 AM [vite-plugin-svelte] src/views/StackView.svelte:759:12 `<div>` with a click handler must have an ARIA role
https://svelte.dev/e/a11y_no_static_element_interactions
10:59:25 AM [vite-plugin-svelte] src/views/StackView.svelte:813:24 Visible, non-interactive elements with a click event must be accompanied by a keyboard event handler. Consider whether an interactive element such as `<button type="button">` or `<a>` might be more appropriate
https://svelte.dev/e/a11y_click_events_have_key_events
10:59:25 AM [vite-plugin-svelte] src/views/StackView.svelte:1032:4 Unused CSS selector ".duration-btn.small"
https://svelte.dev/e/css_unused_selector
10:59:25 AM [vite-plugin-svelte] src/views/StackView.svelte:1059:21 Unused CSS selector ".is-done .title-btn"
https://svelte.dev/e/css_unused_selector
10:59:27 AM [vite-plugin-svelte] src/components/Card.svelte:11:7 Using `<slot>` to render parent content is deprecated. Use `{@render ...}` tags instead
https://svelte.dev/e/slot_element_deprecated
10:59:27 AM [vite-plugin-svelte] src/components/Card.svelte:16:11 Using `<slot>` to render parent content is deprecated. Use `{@render ...}` tags instead
https://svelte.dev/e/slot_element_deprecated
10:59:27 AM [vite-plugin-svelte] src/views/TriageView.svelte:16:40 This reference only captures the initial value of `initialTasks`. Did you mean to reference it inside a derived instead?
https://svelte.dev/e/state_referenced_locally
 [31mâ¯[39m src/__tests__/SelectionPersistence.test.ts [2m([22m[2m1 test[22m[2m | [22m[31m1 failed[39m[2m)[22m[32m 49[2mms[22m[39m
[31m     [31mÃ—[31m should restore focus to the same task ID even if its index changes[39m[32m 36[2mms[22m[39m
 [31mâ¯[39m src/__tests__/StackViewReload.test.ts [2m([22m[2m1 test[22m[2m | [22m[31m1 failed[39m[2m)[22m[32m 48[2mms[22m[39m
[31m     [31mÃ—[31m should reload explicit IDs if they were previously set[39m[32m 41[2mms[22m[39m
[90mstdout[2m | src/__tests__/MobileCommands.test.ts[2m > [22m[2mAdd Task Command[2m > [22m[2mshould register "Add Task to Stack" command
[22m[39m[Todo Flow] Plugin Loading...

[90mstdout[2m | src/__tests__/MobileCommands.test.ts[2m > [22m[2mAdd Task Command[2m > [22m[2mshould register "Add Task to Stack" command
[22m[39m[Todo Flow] Logger initialized

 [31mâ¯[39m src/__tests__/MobileCommands.test.ts [2m([22m[2m1 test[22m[2m | [22m[31m1 failed[39m[2m)[22m[32m 56[2mms[22m[39m
[31m     [31mÃ—[31m should register "Add Task to Stack" command[39m[32m 51[2mms[22m[39m
 [32mâœ“[39m src/__tests__/ghost_scheduling.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 93[2mms[22m[39m
[90mstdout[2m | src/__tests__/ui_workbench.test.ts[2m > [22m[2mUI Workbench: Interaction & Stability[2m > [22m[2mStackView: Should NOT respond to keys when typing in a contenteditable (Editor)
[22m[39m[TODO_FLOW_TRACE] onMount entry

[90mstdout[2m | src/__tests__/ui_workbench.test.ts[2m > [22m[2mUI Workbench: Interaction & Stability[2m > [22m[2mStackView: Should distinguish between j (nav) and Shift+J (move)
[22m[39m[TODO_FLOW_TRACE] onMount entry

[90mstdout[2m | src/__tests__/ui_workbench.test.ts[2m > [22m[2mUI Workbench: Interaction & Stability[2m > [22m[2mStackView: Should distinguish between j (nav) and Shift+J (move)
[22m[39m[TODO_FLOW_TRACE] update() entry. Current tasks: [33m2[39m
[TODO_FLOW_TRACE] update() complete. New tasks: [33m2[39m

 [32mâœ“[39m src/__tests__/workflow_scenarios.test.ts [2m([22m[2m5 tests[22m[2m)[22m[33m 483[2mms[22m[39m
 [32mâœ“[39m src/__tests__/ui_workbench.test.ts [2m([22m[2m10 tests[22m[2m)[22m[33m 689[2mms[22m[39m
 [32mâœ“[39m src/__tests__/go_back_regression.test.ts [2m([22m[2m2 tests[22m[2m)[22m[33m 541[2mms[22m[39m
     [33m[2mâœ“[22m[39m should show parent tasks after drilling down and going back [33m 370[2mms[22m[39m
 [32mâœ“[39m src/__tests__/help_layer.test.ts [2m([22m[2m2 tests[22m[2m)[22m[33m 904[2mms[22m[39m
     [33m[2mâœ“[22m[39m should toggle help overlay on "?" keypress and block interaction [33m 693[2mms[22m[39m
 [32mâœ“[39m src/__tests__/ComponentViews.test.ts [2m([22m[2m2 tests[22m[2m)[22m[33m 415[2mms[22m[39m
 [32mâœ“[39m src/__tests__/StackDragAndDrop.test.ts [2m([22m[2m5 tests[22m[2m)[22m[33m 959[2mms[22m[39m
     [33m[2mâœ“[22m[39m should update dragTargetIndex when dragging handle over other tasks [33m 646[2mms[22m[39m
 [32mâœ“[39m src/__tests__/DateParser.test.ts [2m([22m[2m12 tests[22m[2m)[22m[32m 100[2mms[22m[39m
 [32mâœ“[39m src/__tests__/StackViewMobileGestures.test.ts [2m([22m[2m3 tests[22m[2m)[22m[33m 397[2mms[22m[39m
 [32mâœ“[39m src/__tests__/navigation.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 183[2mms[22m[39m
 [32mâœ“[39m src/__tests__/dump_view_ui.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 98[2mms[22m[39m
 [32mâœ“[39m src/__tests__/logger.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 63[2mms[22m[39m
 [32mâœ“[39m src/__tests__/repro_jump_bug.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 42[2mms[22m[39m
 [32mâœ“[39m src/__tests__/DumpView.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 160[2mms[22m[39m
 [32mâœ“[39m src/__tests__/PersistenceOptimization.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 79[2mms[22m[39m
 [32mâœ“[39m src/__tests__/stack.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 84[2mms[22m[39m
 [32mâœ“[39m src/__tests__/help_layer_integrity.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 152[2mms[22m[39m
[90mstdout[2m | src/__tests__/navigation_explicit.test.ts[2m > [22m[2mNavigationManager - Explicit Mode (TDD)[2m > [22m[2mgoBack should reload SPECIFIC FILES when previous source was EXPLICIT
[22m[39m[NavigationManager] push history. Current stack size: 2, History index before: 0
[NavigationManager] history pushed. Now depth: 1

[90mstdout[2m | src/__tests__/navigation_explicit.test.ts[2m > [22m[2mNavigationManager - Explicit Mode (TDD)[2m > [22m[2mgoBack should default to standard load for non-explicit sources
[22m[39m[NavigationManager] push history. Current stack size: 1, History index before: 0
[NavigationManager] history pushed. Now depth: 1

 [32mâœ“[39m src/__tests__/navigation_explicit.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 24[2mms[22m[39m
 [32mâœ“[39m src/__tests__/NLP_Persistence.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 33[2mms[22m[39m
 [32mâœ“[39m src/__tests__/QuickAdd.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 33[2mms[22m[39m
[90mstdout[2m | src/__tests__/AutoNLP.test.ts[2m > [22m[2mAuto-NLP Triggers[2m > [22m[2mRenameTaskCommand Auto-NLP[2m > [22m[2mshould extract metadata when renaming to a string with NLP hints
[22m[39m[RenameTaskCommand] Executing for ID task-1.md. New Title: "New Title"
[RenameTaskCommand] Applying extra metadata for ID task-1.md
[StackController] updateTaskMetadata index 0 -> 0. Updates: {"startTime":"2026-02-05T13:00:00.000Z","duration":60,"isAnchored":true}

[90mstdout[2m | src/__tests__/AutoNLP.test.ts[2m > [22m[2mAuto-NLP Triggers[2m > [22m[2mRenameTaskCommand Auto-NLP[2m > [22m[2mshould revert metadata when undoing a rename that had NLP
[22m[39m[RenameTaskCommand] Executing for ID task-1.md. New Title: "New Title"
[RenameTaskCommand] Applying extra metadata for ID task-1.md
[StackController] updateTaskMetadata index 0 -> 0. Updates: {"startTime":"2026-02-05T13:00:00.000Z","duration":60,"isAnchored":true}
[StackController] updateTaskMetadata index 0 -> 0. Updates: {"startTime":"2026-02-05T09:59:56.113Z","duration":30,"isAnchored":false}

 [32mâœ“[39m src/__tests__/AutoNLP.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 100[2mms[22m[39m
 [32mâœ“[39m src/__tests__/StackPersistence.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 55[2mms[22m[39m
[90mstdout[2m | src/__tests__/session_isolation.test.ts[2m > [22m[2mSession Isolation (Tray Concept)[2m > [22m[2mloadSpecificFiles loads ONLY the requested files, ignoring others
[22m[39m[StackLoader] loadSpecificFiles() entry with 2 IDs.

 [32mâœ“[39m src/__tests__/session_isolation.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 41[2mms[22m[39m
 [32mâœ“[39m src/__tests__/stack_loader.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 39[2mms[22m[39m
 [32mâœ“[39m src/__tests__/StackPersistenceFile.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 40[2mms[22m[39m
[90mstdout[2m | src/__tests__/pipeline_flow.test.ts[2m > [22m[2mPipeline Integration[2m > [22m[2mshould flow from Dump -> Triage -> Shortlist -> Stack
[22m[39mMock Create called: todo-flow/2026-02-05-1100-pv83-My-Idea.md

 [32mâœ“[39m src/__tests__/pipeline_flow.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 126[2mms[22m[39m
 [32mâœ“[39m src/__tests__/ShakeDetector.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 272[2mms[22m[39m
 [32mâœ“[39m src/__tests__/SmartImport.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 96[2mms[22m[39m
 [32mâœ“[39m src/__tests__/TriageQuickAdd.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 109[2mms[22m[39m
 [32mâœ“[39m src/__tests__/ViewManager.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 87[2mms[22m[39m
 [32mâœ“[39m src/__tests__/components/Card.test.ts [2m([22m[2m3 tests[22m[2m)[22m[33m 573[2mms[22m[39m
[90mstdout[2m | src/__tests__/anchor_collision.test.ts[2m > [22m[2mAnchor Collision (Rocks Pushing Rocks)[2m > [22m[2mexpanding upstream anchor should push downstream anchor
[22m[39mTask A: 09:00 - 90m
Task B: 10:30 (Expected 10:30)

 [32mâœ“[39m src/__tests__/anchor_collision.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 155[2mms[22m[39m
 [32mâœ“[39m src/__tests__/rollup_lab.test.ts [2m([22m[2m8 tests[22m[2m)[22m[32m 38[2mms[22m[39m
 [32mâœ“[39m src/__tests__/constraints.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 120[2mms[22m[39m
 [32mâœ“[39m src/__tests__/stack_loader_integration.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 89[2mms[22m[39m
 [32mâœ“[39m src/__tests__/persistence_sync.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 116[2mms[22m[39m
 [32mâœ“[39m src/__tests__/filename.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 53[2mms[22m[39m
 [32mâœ“[39m src/__tests__/graph.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 35[2mms[22m[39m
 [32mâœ“[39m src/__tests__/persistence_advanced.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 20[2mms[22m[39m
 [32mâœ“[39m src/__tests__/sync_service.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 32[2mms[22m[39m
[90mstdout[2m | src/__tests__/navigation_sync.test.ts[2m > [22m[2mNavigationManager - Refresh on Go Back[2m > [22m[2mshould refresh the stack when going back to reflect metadata changes
[22m[39m[NavigationManager] push history. Current stack size: 1, History index before: 0
[NavigationManager] history pushed. Now depth: 1

 [32mâœ“[39m src/__tests__/navigation_sync.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 18[2mms[22m[39m
[90mstdout[2m | src/__tests__/drill_down.test.ts[2m > [22m[2mNavigationManager - Drill Down[2m > [22m[2mshould drill down into task with children
[22m[39m[NavigationManager] push history. Current stack size: 1, History index before: 0
[NavigationManager] history pushed. Now depth: 1

[90mstdout[2m | src/__tests__/drill_down.test.ts[2m > [22m[2mNavigationManager - Drill Down[2m > [22m[2mshould push current stack to history when drilling down
[22m[39m[NavigationManager] push history. Current stack size: 1, History index before: 0
[NavigationManager] history pushed. Now depth: 1

[90mstdout[2m | src/__tests__/drill_down.test.ts[2m > [22m[2mNavigationManager - Drill Down[2m > [22m[2mshould update current source when drilling down
[22m[39m[NavigationManager] push history. Current stack size: 1, History index before: 0
[NavigationManager] history pushed. Now depth: 1

 [32mâœ“[39m src/__tests__/drill_down.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 45[2mms[22m[39m
[90mstdout[2m | src/__tests__/stack_persistence_regression.test.ts[2m > [22m[2mReproduction: Stack Persistence & Focus[2m > [22m[2mshould restore exact stack state (archive bug fix)
[22m[39m[NavigationManager] push history. Current stack size: 2, History index before: 0
[NavigationManager] history pushed. Now depth: 1

[90mstdout[2m | src/__tests__/stack_persistence_regression.test.ts[2m > [22m[2mReproduction: Stack Persistence & Focus[2m > [22m[2mshould track focus by ID and restore correctly even if stack reorders
[22m[39m[NavigationManager] push history. Current stack size: 2, History index before: 0
[NavigationManager] history pushed. Now depth: 1

 [32mâœ“[39m src/__tests__/stack_persistence_regression.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 32[2mms[22m[39m
 [32mâœ“[39m src/__tests__/task_name_resolution.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 44[2mms[22m[39m
 [32mâœ“[39m src/__tests__/QuickAddUX.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 31[2mms[22m[39m
[90mstdout[2m | src/__tests__/SetStartTime.test.ts[2m > [22m[2mSetStartTimeCommand[2m > [22m[2mshould anchor a task at a specific time
[22m[39m[StackController] updateTaskMetadata index 0 -> 0. Updates: {"startTime":"2026-01-31T09:30:00.000Z","isAnchored":true}

[90mstdout[2m | src/__tests__/SetStartTime.test.ts[2m > [22m[2mSetStartTimeCommand[2m > [22m[2mshould support undo/redo
[22m[39m[StackController] updateTaskMetadata index 0 -> 0. Updates: {"startTime":"2026-01-31T10:00:00.000Z","isAnchored":true}

[90mstdout[2m | src/__tests__/SetStartTime.test.ts[2m > [22m[2mSetStartTimeCommand[2m > [22m[2mshould support undo/redo
[22m[39m[StackController] updateTaskMetadata index 0 -> 0. Updates: {"startTime":"2026-01-31T08:00:00.000Z","isAnchored":false}

[90mstdout[2m | src/__tests__/SetStartTime.test.ts[2m > [22m[2mSetStartTimeCommand[2m > [22m[2mshould support undo/redo
[22m[39m[StackController] updateTaskMetadata index 0 -> 0. Updates: {"startTime":"2026-01-31T10:00:00.000Z","isAnchored":true}

 [32mâœ“[39m src/__tests__/SetStartTime.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 77[2mms[22m[39m
 [32mâœ“[39m src/__tests__/NLP_Integration.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 25[2mms[22m[39m
 [32mâœ“[39m src/__tests__/TriageOpen.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 31[2mms[22m[39m
[90mstdout[2m | src/__tests__/StackPlanningCommands.test.ts[2m > [22m[2mStack Planning Commands (TDD)[2m > [22m[2mReorderToIndexCommand should execute and undo
[22m[39m[StackController] moveTaskToIndex(oldIndex: 0, newIndex: 1)
[StackController] After splice-out: Task 2
[StackController] After splice-in: Task 2, Task 1
[StackController] Final order: Task 2, Task 1 (moved task now at 1)
[StackController] moveTaskToIndex(oldIndex: 1, newIndex: 0)
[StackController] After splice-out: Task 2
[StackController] After splice-in: Task 1, Task 2
[StackController] Final order: Task 1, Task 2 (moved task now at 0)

 [32mâœ“[39m src/__tests__/StackPlanningCommands.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 26[2mms[22m[39m
 [32mâœ“[39m src/__tests__/ReprocessNLP.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 22[2mms[22m[39m
 [32mâœ“[39m src/__tests__/export_formatting.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 48[2mms[22m[39m
 [32mâœ“[39m src/__tests__/link_resolution.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 53[2mms[22m[39m
 [32mâœ“[39m src/__tests__/InsertStack.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 113[2mms[22m[39m
 [32mâœ“[39m src/__tests__/link_parser.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 32[2mms[22m[39m
 [32mâœ“[39m src/__tests__/navigation_manager.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 79[2mms[22m[39m
 [32mâœ“[39m src/__tests__/task_query_service.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 78[2mms[22m[39m
 [32mâœ“[39m src/__tests__/persistence.test.ts [2m([22m[2m7 tests[22m[2m)[22m[32m 75[2mms[22m[39m
 [32mâœ“[39m src/__tests__/scheduler.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 166[2mms[22m[39m
 [32mâœ“[39m src/__tests__/history.test.ts [2m([22m[2m8 tests[22m[2m)[22m[32m 83[2mms[22m[39m
[90mstdout[2m | src/__tests__/go_back.test.ts[2m > [22m[2mNavigationManager - Go Back with Focus[2m > [22m[2mshould go back to previous stack and restore focus
[22m[39m[NavigationManager] push history. Current stack size: 2, History index before: 0
[NavigationManager] history pushed. Now depth: 1

 [32mâœ“[39m src/__tests__/go_back.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 110[2mms[22m[39m
[90mstdout[2m | src/__tests__/StackControllerPlanning.test.ts[2m > [22m[2mStackController - Planning Features (TDD)[2m > [22m[2mshould reorder a task to a specific index
[22m[39m[StackController] moveTaskToIndex(oldIndex: 0, newIndex: 1)
[StackController] After splice-out: Task 2, Task 3, Task 4
[StackController] After splice-in: Task 2, Task 1, Task 3, Task 4
[StackController] Final order: Task 2, Task 1, Task 3, Task 4 (moved task now at 1)

[90mstdout[2m | src/__tests__/StackControllerPlanning.test.ts[2m > [22m[2mStackController - Planning Features (TDD)[2m > [22m[2mshould move task around anchors correctly
[22m[39m[StackController] moveTaskToIndex(oldIndex: 0, newIndex: 3)
[StackController] After splice-out: Task 2, Task 3, Task 4
[StackController] After splice-in: Task 2, Task 3, Task 4, Task 1
[StackController] Final order: Task 2, Task 4, Task 3, Task 1 (moved task now at 3)

[90mstdout[2m | src/__tests__/StackControllerPlanning.test.ts[2m > [22m[2mStackController - Planning Features (TDD)[2m > [22m[2mshould refuse to move an anchored task
[22m[39m[StackController] moveTaskToIndex(oldIndex: 2, newIndex: 0)

 [32mâœ“[39m src/__tests__/StackControllerPlanning.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 107[2mms[22m[39m
 [32mâœ“[39m src/__tests__/triage.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 59[2mms[22m[39m
 [32mâœ“[39m src/__tests__/settings_ui.test.ts [2m([22m[2m9 tests[22m[2m)[22m[32m 62[2mms[22m[39m
 [32mâœ“[39m src/__tests__/rollup_logic.test.ts [2m([22m[2m7 tests[22m[2m)[22m[32m 137[2mms[22m[39m
 [32mâœ“[39m src/__tests__/archive.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 102[2mms[22m[39m
 [32mâœ“[39m src/__tests__/keybindings.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 66[2mms[22m[39m
 [32mâœ“[39m src/__tests__/StackMobile.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 50[2mms[22m[39m
 [32mâœ“[39m src/__tests__/stack_view_integration.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 128[2mms[22m[39m
 [32mâœ“[39m src/__tests__/greedy_duration.test.ts [2m([22m[2m7 tests[22m[2m)[22m[32m 20[2mms[22m[39m
 [32mâœ“[39m src/__tests__/utils.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 20[2mms[22m[39m
 [32mâœ“[39m src/__tests__/title_resolution.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 14[2mms[22m[39m
 [32mâœ“[39m src/__tests__/dump.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 73[2mms[22m[39m
 [32mâœ“[39m src/__tests__/ExportService.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 26[2mms[22m[39m
 [32mâœ“[39m src/__tests__/link_parser_metadata.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 37[2mms[22m[39m
 [32mâœ“[39m src/__tests__/TriageSwipe.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 61[2mms[22m[39m
 [32mâœ“[39m src/__tests__/keybinding_collision.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 55[2mms[22m[39m
[90mstdout[2m | src/__tests__/CommandRegistration.test.ts[2m > [22m[2mTodoFlowPlugin Command Registration[2m > [22m[2mshould register "open-settings" command on load
[22m[39m[Todo Flow] Plugin Loading...

[90mstdout[2m | src/__tests__/CommandRegistration.test.ts[2m > [22m[2mTodoFlowPlugin Command Registration[2m > [22m[2mshould register "open-settings" command on load
[22m[39m[Todo Flow] Logger initialized
[Todo Flow] Registering Views...
[Todo Flow] Registering reprocess-nlp command

[90mstdout[2m | src/__tests__/CommandRegistration.test.ts[2m > [22m[2mTodoFlowPlugin Command Registration[2m > [22m[2mshould open settings tab when "open-settings" command is executed
[22m[39m[Todo Flow] Plugin Loading...

[90mstdout[2m | src/__tests__/CommandRegistration.test.ts[2m > [22m[2mTodoFlowPlugin Command Registration[2m > [22m[2mshould open settings tab when "open-settings" command is executed
[22m[39m[Todo Flow] Logger initialized
[Todo Flow] Registering Views...
[Todo Flow] Registering reprocess-nlp command

 [32mâœ“[39m src/__tests__/CommandRegistration.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 40[2mms[22m[39m
 [32mâœ“[39m src/__tests__/async_file_creation.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 10[2mms[22m[39m
 [32mâœ“[39m src/__tests__/metadata_preservation.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 13[2mms[22m[39m

[31mâ¯â¯â¯â¯â¯â¯â¯[39m[1m[41m Failed Tests 3 [49m[22m[31mâ¯â¯â¯â¯â¯â¯â¯[39m

[41m[1m FAIL [22m[49m src/__tests__/MobileCommands.test.ts[2m > [22mAdd Task Command[2m > [22mshould register "Add Task to Stack" command
[31m[1mTypeError[22m: Cannot read properties of undefined (reading 'on')[39m
[36m [2mâ¯[22m TodoFlowPlugin.onload src/main.ts:[2m76:36[22m[39m
    [90m 74| [39m        // Watch for external modifications via Metadata Cache (more sâ€¦
    [90m 75| [39m        [35mthis[39m[33m.[39m[34mregisterEvent[39m(
    [90m 76| [39m            [35mthis[39m[33m.[39mapp[33m.[39mmetadataCache[33m.[39m[34mon[39m([32m'changed'[39m[33m,[39m [35masync[39m (file) [33m=>[39m {
    [90m   | [39m                                   [31m^[39m
    [90m 77| [39m                [35mif[39m ([33m![39m(file [35minstanceof[39m [33mTFile[39m)) [35mreturn[39m[33m;[39m
    [90m 78| [39m                const persistencePath = `${this.settings.targetFolder}â€¦
[90m [2mâ¯[22m src/__tests__/MobileCommands.test.ts:[2m54:9[22m[39m

[31m[2mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/3]â¯[22m[39m

[41m[1m FAIL [22m[49m src/__tests__/SelectionPersistence.test.ts[2m > [22mStackView Selection Persistence[2m > [22mshould restore focus to the same task ID even if its index changes
[31m[1mTypeError[22m: this.navManager.setState is not a function[39m
[36m [2mâ¯[22m StackView.setState src/views/StackView.ts:[2m127:33[22m[39m
    [90m125| [39m            [90m// BUG-009: Preserve history if we are in a forced refresh[39m
    [90m126| [39m            [35mif[39m (state[33m.[39mnavState) {
    [90m127| [39m                [35mthis[39m[33m.[39mnavManager[33m.[39m[34msetState[39m(state[33m.[39mnavState)[33m;[39m
    [90m   | [39m                                [31m^[39m
    [90m128| [39m            }
    [90m129| [39m
[90m [2mâ¯[22m StackView.reload src/views/StackView.ts:[2m236:13[22m[39m
[90m [2mâ¯[22m src/__tests__/SelectionPersistence.test.ts:[2m134:9[22m[39m

[31m[2mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[2/3]â¯[22m[39m

[41m[1m FAIL [22m[49m src/__tests__/StackViewReload.test.ts[2m > [22mStackView Reload Logic[2m > [22mshould reload explicit IDs if they were previously set
[31m[1mTypeError[22m: this.navManager.setState is not a function[39m
[36m [2mâ¯[22m StackView.setState src/views/StackView.ts:[2m127:33[22m[39m
    [90m125| [39m            [90m// BUG-009: Preserve history if we are in a forced refresh[39m
    [90m126| [39m            [35mif[39m (state[33m.[39mnavState) {
    [90m127| [39m                [35mthis[39m[33m.[39mnavManager[33m.[39m[34msetState[39m(state[33m.[39mnavState)[33m;[39m
    [90m   | [39m                                [31m^[39m
    [90m128| [39m            }
    [90m129| [39m
[90m [2mâ¯[22m StackView.reload src/views/StackView.ts:[2m236:13[22m[39m
[90m [2mâ¯[22m src/__tests__/StackViewReload.test.ts:[2m106:9[22m[39m

[31m[2mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[3/3]â¯[22m[39m


[2m Test Files [22m [1m[31m3 failed[39m[22m[2m | [22m[1m[32m79 passed[39m[22m[90m (82)[39m
[2m      Tests [22m [1m[31m3 failed[39m[22m[2m | [22m[1m[32m265 passed[39m[22m[90m (268)[39m
[2m   Start at [22m 10:59:18
[2m   Duration [22m 114.37s[2m (transform 13.69s, setup 6.64s, import 52.04s, tests 10.15s, environment 166.33s)[22m

